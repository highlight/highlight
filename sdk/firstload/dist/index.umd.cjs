(function(Se,Ne){typeof exports=="object"&&typeof module!="undefined"?Ne(exports):typeof define=="function"&&define.amd?define(["exports"],Ne):(Se=typeof globalThis!="undefined"?globalThis:Se||self,Ne(Se.H={}))})(this,function(Se){"use strict";var RC=Object.defineProperty,NC=Object.defineProperties;var ZC=Object.getOwnPropertyDescriptors;var so=Object.getOwnPropertySymbols;var jd=Object.prototype.hasOwnProperty,Qd=Object.prototype.propertyIsEnumerable;var va=(Se,Ne,Oe)=>Ne in Se?RC(Se,Ne,{enumerable:!0,configurable:!0,writable:!0,value:Oe}):Se[Ne]=Oe,nt=(Se,Ne)=>{for(var Oe in Ne||(Ne={}))jd.call(Ne,Oe)&&va(Se,Oe,Ne[Oe]);if(so)for(var Oe of so(Ne))Qd.call(Ne,Oe)&&va(Se,Oe,Ne[Oe]);return Se},It=(Se,Ne)=>NC(Se,ZC(Ne));var _a=(Se,Ne)=>{var Oe={};for(var Be in Se)jd.call(Se,Be)&&Ne.indexOf(Be)<0&&(Oe[Be]=Se[Be]);if(Se!=null&&so)for(var Be of so(Se))Ne.indexOf(Be)<0&&Qd.call(Se,Be)&&(Oe[Be]=Se[Be]);return Oe};var fe=(Se,Ne,Oe)=>(va(Se,typeof Ne!="symbol"?Ne+"":Ne,Oe),Oe);var Rt=(Se,Ne,Oe)=>new Promise((Be,Ar)=>{var ao=ft=>{try{zn(Oe.next(ft))}catch(bn){Ar(bn)}},lo=ft=>{try{zn(Oe.throw(ft))}catch(bn){Ar(bn)}},zn=ft=>ft.done?Be(ft.value):Promise.resolve(ft.value).then(ao,lo);zn((Oe=Oe.apply(Se,Ne)).next())});function Ne(e,t){for(var n=0;n<t.length;n++){const o=t[n];if(typeof o!="string"&&!Array.isArray(o)){for(const s in o)if(s!=="default"&&!(s in e)){const l=Object.getOwnPropertyDescriptor(o,s);l&&Object.defineProperty(e,s,l.get?l:{enumerable:!0,get:()=>o[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}const Oe=({apiKey:e})=>{(function(t,n){var o=t.amplitude||{_q:[],_iq:{}},s=n.createElement("script");s.type="text/javascript",s.integrity="sha384-+EO59vL/X7v6VE2s6/F4HxfHlK0nDUVWKVg8K9oUlvffAeeaShVBmbORTC2D3UF+",s.crossOrigin="anonymous",s.async=!0,s.src="https://cdn.amplitude.com/libs/amplitude-8.17.0-min.gz.js",s.onload=function(){t.amplitude.runQueuedFunctions||console.log("[Amplitude] Error: could not load SDK"),amplitude.getInstance().init(e)};var l=n.getElementsByTagName("script")[0];l.parentNode.insertBefore(s,l);function d(w,z){w.prototype[z]=function(){return this._q.push([z].concat(Array.prototype.slice.call(arguments,0))),this}}for(var h=function(){return this._q=[],this},b=["add","append","clearAll","prepend","set","setOnce","unset","preInsert","postInsert","remove"],g=0;g<b.length;g++)d(h,b[g]);o.Identify=h;for(var S=function(){return this._q=[],this},_=["setProductId","setQuantity","setPrice","setRevenueType","setEventProperties"],N=0;N<_.length;N++)d(S,_[N]);o.Revenue=S;var R=["init","logEvent","logRevenue","setUserId","setUserProperties","setOptOut","setVersionName","setDomain","setDeviceId","enableTracking","setGlobalUserProperties","identify","clearUserProperties","setGroup","logRevenueV2","regenerateDeviceId","groupIdentify","onInit","logEventWithTimestamp","logEventWithGroups","setSessionId","resetSessionId"];function G(w){function z(x){w[x]=function(){w._q.push([x].concat(Array.prototype.slice.call(arguments,0)))}}for(var re=0;re<R.length;re++)z(R[re])}G(o),o.getInstance=function(w){return w=(!w||w.length===0?"$default_instance":w).toLowerCase(),Object.prototype.hasOwnProperty.call(o._iq,w)||(o._iq[w]={_q:[]},G(o._iq[w])),o._iq[w]},t.amplitude=o})(window,document)};var Be;(function(e){e.RECORDING_START_TIME="highlightRecordingStartTime",e.SEGMENT_LAST_SENT_HASH_KEY="HIGHLIGHT_SEGMENT_LAST_SENT_HASH_KEY",e.SESSION_DATA="sessionData",e.SESSION_SECURE_ID="sessionSecureID",e.USER_IDENTIFIER="highlightIdentifier",e.USER_OBJECT="highlightUserObject",e.PAYLOAD_ID="payloadId"})(Be||(Be={}));const Ar=({projectToken:e})=>{if(window.mixpanel)return;(function(n,o){if(!o.__SV){var s,l;window.mixpanel=o,o._i=[],o.init=function(d,h,b){function g(N,R){var G=R.split(".");G.length==2&&(N=N[G[0]],R=G[1]),N[R]=function(){N.push([R].concat(Array.prototype.slice.call(arguments,0)))}}var S=o;for(typeof b!="undefined"?S=o[b]=[]:b="mixpanel",S.people=S.people||[],S.toString=function(N){var R="mixpanel";return b!=="mixpanel"&&(R+="."+b),N||(R+=" (stub)"),R},S.people.toString=function(){return S.toString(1)+".people (stub)"},s="disable time_event track track_pageview track_links track_forms track_with_groups add_group set_group remove_group register register_once alias unregister identify name_tag set_config reset opt_in_tracking opt_out_tracking has_opted_in_tracking has_opted_out_tracking clear_opt_in_out_tracking start_batch_senders people.set people.set_once people.unset people.increment people.append people.union people.track_charge people.clear_charges people.delete_user people.remove".split(" "),l=0;l<s.length;l++)g(S,s[l]);var _="set set_once union unset remove delete".split(" ");S.get_group=function(){function N(z){R[z]=function(){call2_args=arguments,call2=[z].concat(Array.prototype.slice.call(call2_args,0)),S.push([G,call2])}}for(var R={},G=["get_group"].concat(Array.prototype.slice.call(arguments,0)),w=0;w<_.length;w++)N(_[w]);return R},o._i.push([d,h,b])},o.__SV=1.2}})(document,window.mixpanel||[]);const t=document.createElement("script");t.src=ao,document.head.appendChild(t),t.addEventListener("load",()=>{var n;(n=window.mixpanel)==null||n.init(e)})},ao="https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";function lo(e,t,n){try{if(!(t in e))return()=>{};const o=e[t],s=n(o);return typeof s=="function"&&(s.prototype=s.prototype||{},Object.defineProperties(s,{__rrweb_original__:{enumerable:!1,value:o}})),e[t]=s,()=>{e[t]=o}}catch(o){return()=>{}}}function zn(e){if(!e||!e.outerHTML)return"";let t="";for(;e.parentElement;){let n=e.localName;if(!n)break;n=n.toLowerCase();let o=e.parentElement,s=[];if(o.children&&o.children.length>0)for(let l=0;l<o.children.length;l++){let d=o.children[l];d.localName&&d.localName.toLowerCase&&d.localName.toLowerCase()===n&&s.push(d)}s.length>1&&(n+=":eq("+s.indexOf(e)+")"),t=n+(t?">"+t:""),e=o}return t}function ft(e){return Object.prototype.toString.call(e)==="[object Object]"}function bn(e,t){if(t===0)return!0;const n=Object.keys(e);for(const o of n)if(ft(e[o])&&bn(e[o],t-1))return!0;return!1}function co(e,t){const n={numOfKeysLimit:50,depthOfLimit:4};Object.assign(n,t);const o=[],s=[];return JSON.stringify(e,function(h,b){if(o.length>0){const g=o.indexOf(this);~g?o.splice(g+1):o.push(this),~g?s.splice(g,1/0,h):s.push(h),~o.indexOf(b)&&(o[0]===b?b="[Circular ~]":b="[Circular ~."+s.slice(0,o.indexOf(b)).join(".")+"]")}else o.push(b);if(b==null)return b;if(l(b))return d(b);if(b instanceof Event){const g={};for(const S in b){const _=b[S];Array.isArray(_)?g[S]=zn(_.length?_[0]:null):g[S]=_}return g}else{if(b instanceof Node)return b instanceof HTMLElement?b?b.outerHTML:"":b.nodeName;if(b instanceof Error)return b.name+": "+b.message}return b});function l(h){return ft(h)&&Object.keys(h).length>n.numOfKeysLimit||typeof h=="function"?!0:h instanceof Event&&h.isTrusted===!1?Object.keys(h).length===1:!!(ft(h)&&bn(h,n.depthOfLimit))}function d(h){let b=h.toString();return n.stringLengthLimit&&b.length>n.stringLengthLimit&&(b=`${b.slice(0,n.stringLengthLimit)}...`),b}}var jn=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:{};function Ea(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Ia(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var s=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(n,o,s.get?s:{enumerable:!0,get:function(){return e[o]}})}),n}var Ra={exports:{}},uo={exports:{}},Na;function $d(){return Na||(Na=1,function(e,t){(function(n,o){e.exports=o()})(jn,function(){function n(w){return!isNaN(parseFloat(w))&&isFinite(w)}function o(w){return w.charAt(0).toUpperCase()+w.substring(1)}function s(w){return function(){return this[w]}}var l=["isConstructor","isEval","isNative","isToplevel"],d=["columnNumber","lineNumber"],h=["fileName","functionName","source"],b=["args"],g=["evalOrigin"],S=l.concat(d,h,b,g);function _(w){if(w)for(var z=0;z<S.length;z++)w[S[z]]!==void 0&&this["set"+o(S[z])](w[S[z]])}_.prototype={getArgs:function(){return this.args},setArgs:function(w){if(Object.prototype.toString.call(w)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=w},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(w){if(w instanceof _)this.evalOrigin=w;else if(w instanceof Object)this.evalOrigin=new _(w);else throw new TypeError("Eval Origin must be an Object or StackFrame")},toString:function(){var w=this.getFileName()||"",z=this.getLineNumber()||"",re=this.getColumnNumber()||"",x=this.getFunctionName()||"";return this.getIsEval()?w?"[eval] ("+w+":"+z+":"+re+")":"[eval]:"+z+":"+re:x?x+" ("+w+":"+z+":"+re+")":w+":"+z+":"+re}},_.fromString=function(z){var re=z.indexOf("("),x=z.lastIndexOf(")"),Xe=z.substring(0,re),Me=z.substring(re+1,x).split(","),Ie=z.substring(x+1);if(Ie.indexOf("@")===0)var it=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(Ie,""),Gn=it[1],Mt=it[2],xt=it[3];return new _({functionName:Xe,args:Me||void 0,fileName:Gn,lineNumber:Mt||void 0,columnNumber:xt||void 0})};for(var N=0;N<l.length;N++)_.prototype["get"+o(l[N])]=s(l[N]),_.prototype["set"+o(l[N])]=function(w){return function(z){this[w]=!!z}}(l[N]);for(var R=0;R<d.length;R++)_.prototype["get"+o(d[R])]=s(d[R]),_.prototype["set"+o(d[R])]=function(w){return function(z){if(!n(z))throw new TypeError(w+" must be a Number");this[w]=Number(z)}}(d[R]);for(var G=0;G<h.length;G++)_.prototype["get"+o(h[G])]=s(h[G]),_.prototype["set"+o(h[G])]=function(w){return function(z){this[w]=String(z)}}(h[G]);return _})}(uo)),uo.exports}(function(e,t){(function(n,o){e.exports=o($d())})(jn,function(o){var s=/(^|@)\S+:\d+/,l=/^\s*at .*(\S+:\d+|\(native\))/m,d=/^(eval@)?(\[native code])?$/;return{parse:function(b){if(typeof b.stacktrace!="undefined"||typeof b["opera#sourceloc"]!="undefined")return this.parseOpera(b);if(b.stack&&b.stack.match(l))return this.parseV8OrIE(b);if(b.stack)return this.parseFFOrSafari(b);throw new Error("Cannot parse given Error object")},extractLocation:function(b){if(b.indexOf(":")===-1)return[b];var g=/(.+?)(?::(\d+))?(?::(\d+))?$/,S=g.exec(b.replace(/[()]/g,""));return[S[1],S[2]||void 0,S[3]||void 0]},parseV8OrIE:function(b){var g=b.stack.split(`
`).filter(function(S){return!!S.match(l)},this);return g.map(function(S){S.indexOf("(eval ")>-1&&(S=S.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var _=S.replace(/^\s+/,"").replace(/\(eval code/g,"("),N=_.match(/ (\((.+):(\d+):(\d+)\)$)/);_=N?_.replace(N[0],""):_;var R=_.split(/\s+/).slice(1),G=this.extractLocation(N?N[1]:R.pop()),w=R.join(" ")||void 0,z=["eval","<anonymous>"].indexOf(G[0])>-1?void 0:G[0];return new o({functionName:w,fileName:z,lineNumber:G[1],columnNumber:G[2],source:S})},this)},parseFFOrSafari:function(b){var g=b.stack.split(`
`).filter(function(S){return!S.match(d)},this);return g.map(function(S){if(S.indexOf(" > eval")>-1&&(S=S.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),S.indexOf("@")===-1&&S.indexOf(":")===-1)return new o({functionName:S});var _=/((.*".+"[^@]*)?[^@]*)(?:@)/,N=S.match(_),R=N&&N[1]?N[1]:void 0,G=this.extractLocation(S.replace(_,""));return new o({functionName:R,fileName:G[0],lineNumber:G[1],columnNumber:G[2],source:S})},this)},parseOpera:function(b){return!b.stacktrace||b.message.indexOf(`
`)>-1&&b.message.split(`
`).length>b.stacktrace.split(`
`).length?this.parseOpera9(b):b.stack?this.parseOpera11(b):this.parseOpera10(b)},parseOpera9:function(b){for(var g=/Line (\d+).*script (?:in )?(\S+)/i,S=b.message.split(`
`),_=[],N=2,R=S.length;N<R;N+=2){var G=g.exec(S[N]);G&&_.push(new o({fileName:G[2],lineNumber:G[1],source:S[N]}))}return _},parseOpera10:function(b){for(var g=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,S=b.stacktrace.split(`
`),_=[],N=0,R=S.length;N<R;N+=2){var G=g.exec(S[N]);G&&_.push(new o({functionName:G[3]||void 0,fileName:G[2],lineNumber:G[1],source:S[N]}))}return _},parseOpera11:function(b){var g=b.stack.split(`
`).filter(function(S){return!!S.match(s)&&!S.match(/^Error created at/)},this);return g.map(function(S){var _=S.split("@"),N=this.extractLocation(_.pop()),R=_.shift()||"",G=R.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0,w;R.match(/\(([^)]*)\)/)&&(w=R.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var z=w===void 0||w==="[arguments not available]"?void 0:w.split(",");return new o({functionName:G,args:z,fileName:N[0],lineNumber:N[1],columnNumber:N[2],source:S})},this)}}})})(Ra);var qd=Ra.exports;const Mr=Ea(qd);function ep(e,t){const n=t.logger;if(!n)return()=>{};let o;typeof n=="string"?o=window[n]:o=n;const s=[];if(t.level.includes("error")&&window){const d=h=>{const{message:b,error:g}=h;let S=[];g&&(S=Mr.parse(g));const _=[co(b,t.stringifyOptions)];e({type:"Error",trace:S,time:Date.now(),value:_})};window.addEventListener("error",d),s.push(()=>{window&&window.removeEventListener("error",d)})}for(const d of t.level)s.push(l(o,d));return()=>{s.forEach(d=>d())};function l(d,h){return d[h]?lo(d,h,b=>(...g)=>{b.apply(this,g);try{const S=Mr.parse(new Error),_=t.serializeConsoleAttributes?g.map(N=>typeof N=="object"?co(N,t.stringifyOptions):N):g.filter(N=>typeof N!="object").map(N=>`${N}`);e({type:h,trace:S.slice(1),value:_,attributes:co(g.filter(N=>typeof N=="object").reduce((N,R)=>nt(nt({},N),R),{}),t.stringifyOptions),time:Date.now()})}catch(S){b("highlight logger error:",S,...g)}}):()=>{}}}var po={exports:{}};(function(e,t){t=e.exports=n,t.getSerialize=o;function n(s,l,d,h){return JSON.stringify(s,o(l,h),d)}function o(s,l){var d=[],h=[];return l==null&&(l=function(b,g){return d[0]===g?"[Circular ~]":"[Circular ~."+h.slice(0,d.indexOf(g)).join(".")+"]"}),function(b,g){if(d.length>0){var S=d.indexOf(this);~S?d.splice(S+1):d.push(this),~S?h.splice(S,1/0,b):h.push(b),~d.indexOf(g)&&(g=l.call(this,b,g))}else d.push(g);return s==null?g:s.call(this,b,g)}}})(po,po.exports);var tp=po.exports;const xr=Ea(tp);function ho(e,t,n,o){var h,b,g,S;let s=[];try{s=Mr.parse(o!=null?o:t)}catch(_){s=Mr.parse(new Error)}let l={};t instanceof Error&&(t=t.message,t.cause&&(l={"exception.cause":t.cause}));const d=rp(s);e({event:xr(t),type:"window.onerror",url:window.location.href,source:n!=null?n:"",lineNumber:(h=d[0])!=null&&h.lineNumber?(b=d[0])==null?void 0:b.lineNumber:0,columnNumber:(g=d[0])!=null&&g.columnNumber?(S=d[0])==null?void 0:S.columnNumber:0,stackTrace:d,timestamp:new Date().toISOString(),payload:l?xr(l):void 0})}const np=(e,{enablePromisePatch:t})=>{if(typeof window=="undefined")return()=>{};const n=window.onerror=(d,h,b,g,S)=>{ho(e,d,h,S)},o=window.onunhandledrejection=d=>{if(d.reason){const h=d.promise;h.getStack?ho(e,d.reason,d.type,h.getStack()):ho(e,d.reason,d.type)}},s=window.Promise,l=class extends s{constructor(b){super(b);fe(this,"promiseCreationError");this.promiseCreationError=new Error}getStack(){return this.promiseCreationError}static shouldPatch(){const b=typeof window.Zone=="undefined";return t&&b}};return l.shouldPatch()&&(window.Promise=l),()=>{window.Promise=s,window.onunhandledrejection=o,window.onerror=n}},rp=e=>{var n,o;if(e.length===0)return e;const t=e[0];return(n=t.fileName)!=null&&n.includes("highlight.run")||(o=t.fileName)!=null&&o.includes("highlight.io")||t.functionName==="new highlightPromise"?e.slice(1):e},ip=["assert","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"];var Za;(function(e){e.DeviceMemory="DeviceMemory",e.ViewportHeight="ViewportHeight",e.ViewportWidth="ViewportWidth",e.ScreenHeight="ScreenHeight",e.ScreenWidth="ScreenWidth",e.ViewportArea="ViewportArea"})(Za||(Za={}));var Ca;(function(e){e.Device="Device",e.WebVital="WebVital",e.Performance="Performance",e.Frontend="Frontend",e.Backend="Backend"})(Ca||(Ca={}));const Oa=['["\\"Script error.\\""]','"Script error."','["\\"Load failed.\\""]','"Load failed."','["\\"Network request failed.\\""]','"Network request failed."','["\\"Document is not focused.\\""]','"Document is not focused."','["\\"Failed to fetch\\""]','"Failed to fetch"','[{"isTrusted":true}]','{"isTrusted":true}','["{}"]','"{}"','[""]','""','["\\"\\""]','""'],wa=["websocket error",'\\"ResizeObserver loop'],La=(e,t,n)=>{const o=Ga(t,e.headers,n);return It(nt({},e),{headers:o})},Ga=(e,t,n)=>{var s,l;const o=nt({},t);return n?((s=Object.keys(o))==null||s.forEach(d=>{[...n].includes(d==null?void 0:d.toLowerCase())||(o[d]="[REDACTED]")}),o):((l=Object.keys(o))==null||l.forEach(d=>{[...op,...e].includes(d==null?void 0:d.toLowerCase())&&(o[d]="[REDACTED]")}),o)},op=["authorization","cookie","proxy-authorization","token"],mo=["https://www.googleapis.com/identitytoolkit","https://securetoken.googleapis.com"];let sp="localStorage";class ap{constructor(){fe(this,"storage",{})}getItem(t){var n;return(n=this.storage[t])!=null?n:""}setItem(t,n){this.storage[t]=n}removeItem(t){delete this.storage[t]}}let lp=new ap;const Va=()=>{try{switch(sp){case"localStorage":return window.localStorage;case"sessionStorage":return window.sessionStorage}}catch(e){return lp}},Xa=e=>Va().getItem(e),cp=(e,t)=>Va().setItem(e,t),up=15*60*1e3,dp=()=>{let e=JSON.parse(Xa(Be.SESSION_DATA)||"{}");if(e&&e.lastPushTime&&Date.now()-e.lastPushTime<up)return e},Pa=function(){var e;return(e=Xa(Be.SESSION_SECURE_ID))!=null?e:""};var pp={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Wa="X-Highlight-Request",ka=e=>{let t=e;return!e.startsWith("https://")&&!e.startsWith("http://")&&(t=`${window.location.origin}${t}`),t.replace(/\/+$/,"")},hp=(e,{headersToRedact:t,headersToRecord:n,requestResponseSanitizer:o})=>{var b,g;let s=e;if(o){let _=!0;try{s.request.body=JSON.parse(s.request.body)}catch(R){_=!1}let N=!0;try{s.response.body=JSON.parse(s.response.body)}catch(R){N=!1}try{s=o(s)}catch(R){}finally{_=_&&!!((b=s==null?void 0:s.request)!=null&&b.body),N=N&&!!((g=s==null?void 0:s.response)!=null&&g.body),_&&(s.request.body=JSON.stringify(s.request.body)),N&&(s.response.body=JSON.stringify(s.response.body))}if(!s)return null}const S=s,{request:l,response:d}=S,h=_a(S,["request","response"]);return nt({request:La(l,t,n),response:La(d,t,n)},h)},Aa=(e,t,n,o)=>{e.sort((b,g)=>b.responseEnd-g.responseEnd);const s={xmlhttprequest:{},others:{},fetch:{}},l=e.reduce((b,g)=>{const S=ka(g.name);return g.initiatorType===n?b[n][S]=[...b[n][S]||[],g]:b.others[S]=[...b.others[S]||[],g],b},s);let d={};d=t.reduce((b,g)=>{const S=ka(g.request.url);return b[S]=[...b[S]||[],g],b},d);for(let b in l[n]){const g=l[n][b],S=d[b];if(!S)continue;const _=Math.max(g.length-S.length,0);for(let N=_;N<g.length;N++)g[N]&&(g[N].requestResponsePair=S[N-_])}let h=[];for(let b in l)for(let g in l[b])h=h.concat(l[b][g]);return h.sort((b,g)=>b.fetchStart-g.fetchStart).reduce((b,g)=>{let S=g.requestResponsePair;return S&&(S=hp(g.requestResponsePair,o),!S)||(g.toJSON=function(){const _=window.performance.timeOrigin;return{initiatorType:this.initiatorType,startTimeAbs:_+this.startTime,connectStartAbs:_+this.connectStart,connectEndAbs:_+this.connectEnd,domainLookupStartAbs:_+this.domainLookupStart,domainLookupEndAbs:_+this.domainLookupEnd,fetchStartAbs:_+this.fetchStart,redirectStartAbs:_+this.redirectStart,redirectEndAbs:_+this.redirectEnd,requestStartAbs:_+this.requestStart,responseStartAbs:_+this.responseStart,responseEndAbs:_+this.responseEnd,secureConnectionStartAbs:_+this.secureConnectionStart,workerStartAbs:_+this.workerStart,name:this.name,transferSize:this.transferSize,encodedBodySize:this.encodedBodySize,decodedBodySize:this.decodedBodySize,nextHopProtocol:this.nextHopProtocol,requestResponsePairs:S}},b.push(g)),b},[])},mp=(e,t)=>{var n;return e.toLocaleLowerCase().includes((n=pp.REACT_APP_PUBLIC_GRAPH_URI)!=null?n:"highlight.io")||e.toLocaleLowerCase().includes("highlight.io")||e.toLocaleLowerCase().includes(t)},Ur=(e,t,n)=>!mp(e,t)||Dr(e,n),Dr=(e,t)=>{var s;let n=[];t===!0?(n=["localhost",/^\//],(s=window==null?void 0:window.location)!=null&&s.host&&n.push(window.location.host)):t instanceof Array&&(n=t);let o=!1;return n.forEach(l=>{e.match(l)&&(o=!0)}),o};function fp(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=n.length,s=0;s<e;s++)t+=n.charAt(Math.floor(Math.random()*o));return t}const fo=()=>[Pa(),fp(10)],Ma=(e,t)=>e+"/"+t,bp=(e,t,n,o,s,l)=>{const d=XMLHttpRequest.prototype,h=d.open,b=d.send,g=d.setRequestHeader;return d.open=function(S,_){return typeof _=="string"?this._url=_:this._url=_.toString(),this._method=S,this._requestHeaders={},this._shouldRecordHeaderAndBody=!o.some(N=>this._url.toLowerCase().includes(N)),h.apply(this,arguments)},d.setRequestHeader=function(S,_){return this._requestHeaders[S]=_,g.apply(this,arguments)},d.send=function(S){if(!Ur(this._url,t,n))return b.apply(this,arguments);const[_,N]=fo();Dr(this._url,n)&&this.setRequestHeader(Wa,Ma(_,N));const R=this._shouldRecordHeaderAndBody,G={sessionSecureID:_,id:N,url:this._url,verb:this._method,headers:R?this._requestHeaders:{},body:void 0};if(R&&S){const w=xa(S,G.url);w&&(this._body=w,G.body=Yt(w,s,l,G.headers))}return this.addEventListener("load",function(){return Rt(this,null,function*(){const w={status:this.status,headers:{},body:void 0};if(R){const x=this.getAllResponseHeaders().trim().split(/[\r\n]+/),Xe={};if(x.forEach(function(Me){const Ie=Me.split(": "),it=Ie.shift();Xe[it]=Ie.join(": ")}),w.headers=Xe,S){const Me=xa(S,G.url);Me&&(G.body=Yt(Me,s,l,w.headers))}if(this.responseType===""||this.responseType==="text")w.body=Yt(this.responseText,s,l,w.headers),w.size=this.responseText.length*8;else if(this.responseType==="blob"){if(this.response instanceof Blob)try{const Me=yield this.response.text();w.body=Yt(Me,s,l,w.headers),w.size=this.response.size}catch(Me){}}else try{w.body=Yt(this.response,s,l,w.headers)}catch(Me){}}e({request:G,response:w,urlBlocked:!R})})}),this.addEventListener("error",function(){return Rt(this,null,function*(){const w={status:this.status,headers:void 0,body:void 0};e({request:G,response:w,urlBlocked:!1})})}),b.apply(this,arguments)},()=>{d.open=h,d.send=b,d.setRequestHeader=g}},xa=(e,t)=>{if(typeof e=="string"){if(!((t!=null&&t.includes("localhost")||t!=null&&t.includes("highlight.run"))&&e.includes("pushPayload")))return e}else if(typeof e=="object"||typeof e=="number"||typeof e=="boolean")return xr(e);return null},Ua=64*1024,yp={"application/json":64*1024*1024,"text/plain":64*1024*1024},Yt=(e,t,n,o)=>{var l,d,h;let s=Ua;if(o){let b="";typeof o.get=="function"?b=(l=o.get("content-type"))!=null?l:"":b=(d=o["content-type"])!=null?d:"";try{b=b.split(";")[0]}catch(g){}s=(h=yp[b])!=null?h:Ua}if(e){if(t)try{const b=JSON.parse(e);Array.isArray(b)?b.forEach(g=>{Object.keys(g).forEach(S=>{t.includes(S.toLocaleLowerCase())&&(g[S]="[REDACTED]")})}):Object.keys(b).forEach(g=>{t.includes(g.toLocaleLowerCase())&&(b[g]="[REDACTED]")}),e=JSON.stringify(b)}catch(b){}if(n)try{const b=JSON.parse(e);Object.keys(b).forEach(g=>{n.includes(g.toLocaleLowerCase())||(b[g]="[REDACTED]")}),e=JSON.stringify(b)}catch(b){}}try{e=e.slice(0,s)}catch(b){}return e},Sp=(e,t,n,o,s,l)=>{const d=window._fetchProxy;return window._fetchProxy=function(h,b){const{method:g,url:S}=gp(h,b);if(!Ur(S,t,n))return d.call(this,h,b);const[_,N]=fo();if(Dr(S,n)){b=b||{};let z=new Headers(b.headers);h instanceof Request&&[...h.headers].forEach(([re,x])=>z.set(re,x)),z.set(Wa,Ma(_,N)),b.headers=Object.fromEntries(z.entries())}const R={sessionSecureID:_,id:N,headers:{},body:void 0,url:S,verb:g},G=!o.some(z=>S.toLowerCase().includes(z));G&&(R.headers=Object.fromEntries(new Headers(b==null?void 0:b.headers).entries()),R.body=Yt(b==null?void 0:b.body,s,l,b==null?void 0:b.headers));let w=d.call(this,h,b);return Tp(w,R,e,G,s,l),w},()=>{window._fetchProxy=d}},gp=(e,t)=>{const n=t&&t.method||typeof e=="object"&&"method"in e&&e.method||"GET";let o;return typeof e=="object"?"url"in e&&e.url?o=e.url:o=e.toString():o=e,{method:n,url:o}},Tp=(e,t,n,o,s,l)=>{const d=h=>Rt(this,null,function*(){let b={body:void 0,headers:void 0,status:0,size:0},g=!1,S=!o;"stack"in h||h instanceof Error?(b=It(nt({},b),{body:h.message,status:0,size:void 0}),g=!0):"status"in h&&(b=It(nt({},b),{status:h.status}),o&&(b.body=yield Da(h,l,s),b.headers=Object.fromEntries(h.headers.entries()),b.size=b.body.length*8),(h.type==="opaque"||h.type==="opaqueredirect")&&(S=!0,b=It(nt({},b),{body:"CORS blocked request"})),g=!0),g&&n({request:t,response:b,urlBlocked:S})});e.then(d).catch(()=>{})},Da=(e,t,n)=>Rt(this,null,function*(){let o;try{const l=e.clone().body;if(l){let d=l.getReader(),h=new TextDecoder,b,g="";for(;!(b=yield d.read()).done;){let S=b.value;g+=h.decode(S)}o=g,o=Yt(o,n,t,e.headers)}else o=""}catch(s){o=`Unable to clone response: ${s}`}return o}),vp=(e,t,n)=>{const o=window._highlightWebSocketRequestCallback;window._highlightWebSocketRequestCallback=e;const s=window._highlightWebSocketEventCallback;return window._highlightWebSocketEventCallback=l=>{const _=l,{message:d,size:h}=_,b=_a(_,["message","size"]),S=n.some(N=>l.name.toLowerCase().includes(N))?b:l;t(S)},()=>{window._highlightWebSocketRequestCallback=o,window._highlightWebSocketEventCallback=s}},_p=({xhrCallback:e,fetchCallback:t,webSocketRequestCallback:n,webSocketEventCallback:o,disableWebSocketRecording:s,bodyKeysToRedact:l,backendUrl:d,tracingOrigins:h,urlBlocklist:b,sessionSecureID:g,bodyKeysToRecord:S})=>{const _=bp(e,d,h,b,l,S),N=Sp(t,d,h,b,l,S),R=s?()=>{}:vp(n,o,b);return()=>{_(),N(),R()}};var Ep={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};class bo{constructor(t){fe(this,"disableConsoleRecording");fe(this,"reportConsoleErrors");fe(this,"enablePromisePatch");fe(this,"consoleMethodsToRecord");fe(this,"listeners");fe(this,"errors");fe(this,"messages");fe(this,"options");fe(this,"hasNetworkRecording",!0);fe(this,"_backendUrl");fe(this,"disableNetworkRecording");fe(this,"enableRecordingNetworkContents");fe(this,"xhrNetworkContents");fe(this,"fetchNetworkContents");fe(this,"disableRecordingWebSocketContents");fe(this,"webSocketNetworkContents");fe(this,"webSocketEventContents");fe(this,"tracingOrigins");fe(this,"networkHeadersToRedact");fe(this,"networkBodyKeysToRedact");fe(this,"networkBodyKeysToRecord");fe(this,"networkHeaderKeysToRecord");fe(this,"lastNetworkRequestTimestamp");fe(this,"urlBlocklist");fe(this,"requestResponseSanitizer");var n,o;this.options=t,this.disableConsoleRecording=!!t.disableConsoleRecording,this.reportConsoleErrors=(n=t.reportConsoleErrors)!=null?n:!1,this.enablePromisePatch=(o=t.enablePromisePatch)!=null?o:!0,this.consoleMethodsToRecord=t.consoleMethodsToRecord||[...ip],this.listeners=[],this.errors=[],this.messages=[],this.lastNetworkRequestTimestamp=0}isListening(){return this.listeners.length>0}startListening(){if(this.isListening())return;const t=this;this.disableConsoleRecording||this.listeners.push(ep(n=>{var o,s,l;if(this.reportConsoleErrors&&(n.type==="Error"||n.type==="error")&&n.value&&n.trace){const d=xr(n.value);if(Oa.includes(d)||wa.some(h=>d.includes(h)))return;t.errors.push({event:d,type:"console.error",url:window.location.href,source:(o=n.trace[0])!=null&&o.fileName?n.trace[0].fileName:"",lineNumber:(s=n.trace[0])!=null&&s.lineNumber?n.trace[0].lineNumber:0,columnNumber:(l=n.trace[0])!=null&&l.columnNumber?n.trace[0].columnNumber:0,stackTrace:n.trace,timestamp:new Date().toISOString()})}t.messages.push(n)},{level:this.consoleMethodsToRecord,logger:"console",stringifyOptions:{depthOfLimit:10,numOfKeysLimit:100,stringLengthLimit:1e3}})),this.listeners.push(np(n=>{Oa.includes(n.event)||wa.some(o=>n.event.includes(o))||t.errors.push(n)},{enablePromisePatch:this.enablePromisePatch})),this.options.enableOtelTracing&&Promise.resolve().then(()=>Lc).then(({shutdown:n})=>{this.listeners.push(n)}),bo.setupNetworkListener(this,this.options)}stopListening(){this.listeners.forEach(t=>t()),this.listeners=[]}static setupNetworkListener(t,n){var o,s,l,d,h,b,g,S,_,N,R,G;t._backendUrl=(n==null?void 0:n.backendUrl)||Ep.REACT_APP_PUBLIC_GRAPH_URI||"https://pub.highlight.run",t.xhrNetworkContents=[],t.fetchNetworkContents=[],t.webSocketNetworkContents=[],t.webSocketEventContents=[],t.networkHeadersToRedact=[],t.urlBlocklist=[],t.tracingOrigins=n.tracingOrigins||[],(n==null?void 0:n.disableNetworkRecording)!==void 0?(t.disableNetworkRecording=n==null?void 0:n.disableNetworkRecording,t.enableRecordingNetworkContents=!1,t.disableRecordingWebSocketContents=!0,t.networkHeadersToRedact=[],t.networkBodyKeysToRedact=[],t.urlBlocklist=[],t.networkBodyKeysToRecord=[],t.networkBodyKeysToRecord=[]):typeof(n==null?void 0:n.networkRecording)=="boolean"?(t.disableNetworkRecording=!n.networkRecording,t.enableRecordingNetworkContents=!1,t.disableRecordingWebSocketContents=!0,t.networkHeadersToRedact=[],t.networkBodyKeysToRedact=[],t.urlBlocklist=[]):(((o=n.networkRecording)==null?void 0:o.enabled)!==void 0?t.disableNetworkRecording=!n.networkRecording.enabled:t.disableNetworkRecording=!1,t.enableRecordingNetworkContents=((s=n.networkRecording)==null?void 0:s.recordHeadersAndBody)||!1,t.disableRecordingWebSocketContents=((l=n.networkRecording)==null?void 0:l.disableWebSocketEventRecordings)||!1,t.networkHeadersToRedact=((h=(d=n.networkRecording)==null?void 0:d.networkHeadersToRedact)==null?void 0:h.map(w=>w.toLowerCase()))||[],t.networkBodyKeysToRedact=((g=(b=n.networkRecording)==null?void 0:b.networkBodyKeysToRedact)==null?void 0:g.map(w=>w.toLowerCase()))||[],t.urlBlocklist=((_=(S=n.networkRecording)==null?void 0:S.urlBlocklist)==null?void 0:_.map(w=>w.toLowerCase()))||[],t.urlBlocklist=[...t.urlBlocklist,...mo],t.requestResponseSanitizer=(N=n.networkRecording)==null?void 0:N.requestResponseSanitizer,t.networkHeaderKeysToRecord=(R=n.networkRecording)==null?void 0:R.headerKeysToRecord,t.networkHeaderKeysToRecord&&(t.networkHeadersToRedact=[],t.networkHeaderKeysToRecord=t.networkHeaderKeysToRecord.map(w=>w.toLocaleLowerCase())),t.networkBodyKeysToRecord=(G=n.networkRecording)==null?void 0:G.bodyKeysToRecord,t.networkBodyKeysToRecord&&(t.networkBodyKeysToRedact=[],t.networkBodyKeysToRecord=t.networkBodyKeysToRecord.map(w=>w.toLocaleLowerCase()))),!t.disableNetworkRecording&&t.enableRecordingNetworkContents&&t.listeners.push(_p({xhrCallback:w=>{t.xhrNetworkContents.push(w)},fetchCallback:w=>{t.fetchNetworkContents.push(w)},webSocketRequestCallback:w=>{t.webSocketNetworkContents&&t.webSocketNetworkContents.push(w)},webSocketEventCallback:w=>{t.webSocketEventContents.push(w)},disableWebSocketRecording:t.disableRecordingWebSocketContents,bodyKeysToRedact:t.networkBodyKeysToRedact,backendUrl:t._backendUrl,tracingOrigins:t.tracingOrigins,urlBlocklist:t.urlBlocklist,sessionSecureID:n.sessionSecureID,bodyKeysToRecord:t.networkBodyKeysToRecord}))}static getRecordedNetworkResources(t,n){var l,d;let o=[],s=[];if(!t.disableNetworkRecording){const h=((l=window==null?void 0:window.performance)==null?void 0:l.timeOrigin)||0;o=performance.getEntriesByType("resource");const b=(n-h)*2;if(o=o.filter(g=>g.responseEnd<t.lastNetworkRequestTimestamp?!1:Ur(g.name,t._backendUrl,t.tracingOrigins)).map(g=>It(nt({},g.toJSON()),{offsetStartTime:g.startTime-b,offsetResponseEnd:g.responseEnd-b,offsetFetchStart:g.fetchStart-b})),t.lastNetworkRequestTimestamp=((d=o.at(-1))==null?void 0:d.responseEnd)||t.lastNetworkRequestTimestamp,t.enableRecordingNetworkContents){const g={headersToRedact:t.networkHeadersToRedact,headersToRecord:t.networkHeaderKeysToRecord,requestResponseSanitizer:t.requestResponseSanitizer};o=Aa(o,t.xhrNetworkContents,"xmlhttprequest",g),o=Aa(o,t.fetchNetworkContents,"fetch",g)}}return t.disableRecordingWebSocketContents||(s=t.webSocketNetworkContents||[]),[...o,...s]}static getRecordedWebSocketEvents(t){let n=[];return!t.disableNetworkRecording&&!t.disableRecordingWebSocketContents&&(n=t.webSocketEventContents),n}static clearRecordedNetworkResources(t){t.disableNetworkRecording||(t.xhrNetworkContents=[],t.fetchNetworkContents=[],t.webSocketNetworkContents=[],t.webSocketEventContents=[],performance.clearResourceTimings())}}const Ip=()=>{var l;const t="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var n="";const o=typeof window!="undefined"&&((l=window.crypto)==null?void 0:l.getRandomValues),s=new Uint32Array(28);o&&window.crypto.getRandomValues(s);for(let d=0;d<28;d++)o?n+=t.charAt(s[d]%t.length):n+=t.charAt(Math.floor(Math.random()*t.length));return n},Rp=({next:e,payload:t})=>{if(typeof window!="undefined"&&typeof document!="undefined"&&"H"in window){if(t.obj.type==="track"){const n=t.obj.event,o=t.obj.properties;window.H.track(n,o)}else if(t.obj.type==="identify"){const n=t.obj.userId;if(n!=null&&n.length){const o=t.obj.traits;window.H.identify(n,o)}}}e(t)};function Np(e){var t;e.on&&((t=e.webContents)!=null&&t.send)&&(e.on("focus",()=>{e.webContents.send("highlight.run",{visible:!0})}),e.on("blur",()=>{e.webContents.send("highlight.run",{visible:!1})}),e.on("close",()=>{e.webContents.send("highlight.run",{visible:!1})}))}const Zp="9.1.0",yo=()=>{if(typeof window!="undefined"){if(typeof window._highlightFetchPatch!="undefined")return;window._originalFetch=window.fetch,window._fetchProxy=(e,t)=>window._originalFetch(e,t),window._highlightFetchPatch=(e,t)=>window._fetchProxy.call(window||global,e,t),window.fetch=window._highlightFetchPatch}},Fa=()=>null,So=()=>{if(typeof window!="undefined"){if(typeof window._highlightWebSocketRequestCallback!="undefined")return;window._highlightWebSocketRequestCallback=Fa,window._highlightWebSocketEventCallback=Fa;const e=new Proxy(window.WebSocket,{construct(t,n){const[,o]=fo(),s=new t(...n),l=S=>{window._highlightWebSocketRequestCallback({socketId:o,initiatorType:"websocket",type:"open",name:s.url,startTimeAbs:performance.timeOrigin+S.timeStamp})},d=S=>{window._highlightWebSocketRequestCallback({socketId:o,initiatorType:"websocket",type:"close",name:s.url,responseEndAbs:performance.timeOrigin+S.timeStamp}),s.removeEventListener("open",l),s.removeEventListener("error",b),s.removeEventListener("message",h),s.removeEventListener("close",d)},h=S=>{const{data:_}=S,N=typeof _=="string"?S.data:void 0;let R;typeof _=="string"?R=_.length:_ instanceof Blob?R=_.size:R=_.byteLength||0,window._highlightWebSocketEventCallback({socketId:o,type:"received",name:s.url,timeStamp:performance.timeOrigin+S.timeStamp,size:R,message:N})},b=S=>{window._highlightWebSocketEventCallback({socketId:o,type:"error",name:s.url,timeStamp:performance.timeOrigin+S.timeStamp,size:0})};s.addEventListener("open",l),s.addEventListener("error",b),s.addEventListener("message",h),s.addEventListener("close",d);const g=new Proxy(s.send,{apply:function(S,_,N){const R=N[0],G=typeof R=="string"?R:void 0;let w;typeof R=="string"?w=R.length:R instanceof Blob?w=R.size:w=R.byteLength||0,window._highlightWebSocketEventCallback({socketId:o,type:"sent",name:s.url,timeStamp:performance.timeOrigin+performance.now(),size:w,message:G}),S.apply(_,N)}});return s.send=g,s}});window.WebSocket=e}},Cp=()=>{var e,t;typeof chrome!="undefined"&&((e=chrome==null?void 0:chrome.runtime)!=null&&e.onMessage)&&((t=chrome==null?void 0:chrome.runtime)==null||t.onMessage.addListener((n,o,s)=>{const l=n.action;switch(console.log(`[highlight] received '${l}' event from extension.`),l){case"init":{ke.init(1,{debug:!0}),ke.getSessionURL().then(d=>{s({url:d})});break}case"stop":{ke.stop(),s({success:!0});break}}return!0}))};Se.MetricCategory=void 0,function(e){e.Device="Device",e.WebVital="WebVital",e.Frontend="Frontend",e.Backend="Backend"}(Se.MetricCategory||(Se.MetricCategory={}));const Vt=(e,t)=>{console.warn(`highlight.run warning: (${e}): `,t)},Op=200;let Fr=[],go,Ee,Yr,Ya=!1,Hr;const ke={options:void 0,init:(e,t)=>{var n,o,s,l,d,h,b,g;try{if(ke.options=t,typeof window=="undefined"||typeof document=="undefined")return;if(!e){console.info("Highlight is not initializing because projectID was passed undefined.");return}let S=dp(),_=Ip();if(S!=null&&S.sessionSecureID)_=S.sessionSecureID;else{const R=It(nt({},S),{projectID:+e,sessionSecureID:_});cp(Be.SESSION_DATA,JSON.stringify(R))}if(Ya)return{sessionSecureID:_};Ya=!0,t!=null&&t.enableOtelTracing&&Promise.resolve().then(()=>Lc).then(({setupBrowserTracing:R,getTracer:G})=>{var w,z;R({endpoint:t==null?void 0:t.otlpEndpoint,projectId:e,sessionSecureId:_,environment:(w=t==null?void 0:t.environment)!=null?w:"production",networkRecordingOptions:typeof(t==null?void 0:t.networkRecording)=="object"?t.networkRecording:void 0,tracingOrigins:t==null?void 0:t.tracingOrigins,serviceName:(z=t==null?void 0:t.serviceName)!=null?z:"highlight-browser"}),Hr=G}),yo(),So(),Promise.resolve().then(()=>jR).then(G=>Rt(this,[G],function*({Highlight:R}){Ee=new R(N,Yr),yo(),So(),t!=null&&t.manualStart||(yield Ee.initialize())}));const N={organizationID:e,debug:t==null?void 0:t.debug,backendUrl:t==null?void 0:t.backendUrl,tracingOrigins:t==null?void 0:t.tracingOrigins,disableNetworkRecording:t==null?void 0:t.disableNetworkRecording,networkRecording:t==null?void 0:t.networkRecording,disableBackgroundRecording:t==null?void 0:t.disableBackgroundRecording,disableConsoleRecording:t==null?void 0:t.disableConsoleRecording,disableSessionRecording:t==null?void 0:t.disableSessionRecording,reportConsoleErrors:t==null?void 0:t.reportConsoleErrors,consoleMethodsToRecord:t==null?void 0:t.consoleMethodsToRecord,privacySetting:t==null?void 0:t.privacySetting,enableSegmentIntegration:t==null?void 0:t.enableSegmentIntegration,enableCanvasRecording:t==null?void 0:t.enableCanvasRecording,enablePerformanceRecording:t==null?void 0:t.enablePerformanceRecording,enablePromisePatch:t==null?void 0:t.enablePromisePatch,samplingStrategy:t==null?void 0:t.samplingStrategy,inlineImages:t==null?void 0:t.inlineImages,inlineStylesheet:t==null?void 0:t.inlineStylesheet,recordCrossOriginIframe:t==null?void 0:t.recordCrossOriginIframe,firstloadVersion:Zp,environment:(t==null?void 0:t.environment)||"production",appVersion:t==null?void 0:t.version,serviceName:t==null?void 0:t.serviceName,sessionShortcut:t==null?void 0:t.sessionShortcut,sessionSecureID:_,storageMode:t==null?void 0:t.storageMode,sendMode:t==null?void 0:t.sendMode};return Yr=new bo(N),t!=null&&t.manualStart||Yr.startListening(),!((o=(n=t==null?void 0:t.integrations)==null?void 0:n.mixpanel)!=null&&o.disabled)&&((l=(s=t==null?void 0:t.integrations)==null?void 0:s.mixpanel)!=null&&l.projectToken)&&Ar(t.integrations.mixpanel),!((h=(d=t==null?void 0:t.integrations)==null?void 0:d.amplitude)!=null&&h.disabled)&&((g=(b=t==null?void 0:t.integrations)==null?void 0:b.amplitude)!=null&&g.apiKey)&&Oe(t.integrations.amplitude),{sessionSecureID:_}}catch(S){Vt("init",S)}},snapshot:e=>Rt(this,null,function*(){try{if(Ee&&Ee.ready)return yield Ee.snapshot(e)}catch(t){Vt("snapshot",t)}}),addSessionFeedback:({verbatim:e,userName:t,userEmail:n,timestampOverride:o})=>{try{ke.onHighlightReady(()=>Ee.addSessionFeedback({verbatim:e,timestamp:o||new Date().toISOString(),user_email:n,user_name:t}))}catch(s){Vt("error",s)}},consumeError:(e,t,n)=>{try{ke.onHighlightReady(()=>Ee.consumeCustomError(e,t,JSON.stringify(n)))}catch(o){Vt("error",o)}},consume:(e,t)=>{try{ke.onHighlightReady(()=>Ee.consumeError(e,t))}catch(n){Vt("error",n)}},error:(e,t)=>{try{ke.onHighlightReady(()=>Ee.pushCustomError(e,JSON.stringify(t)))}catch(n){Vt("error",n)}},track:(e,t={})=>{var n,o,s,l,d,h,b,g,S,_,N;try{ke.onHighlightReady(()=>Ee.addProperties(It(nt({},t),{event:e})));const R=Ee==null?void 0:Ee.getCurrentSessionURL();(s=(o=(n=ke.options)==null?void 0:n.integrations)==null?void 0:o.mixpanel)!=null&&s.disabled||(l=window.mixpanel)!=null&&l.track&&window.mixpanel.track(e,It(nt({},t),{highlightSessionURL:R})),(b=(h=(d=ke.options)==null?void 0:d.integrations)==null?void 0:h.amplitude)!=null&&b.disabled||(g=window.amplitude)!=null&&g.getInstance&&window.amplitude.getInstance().logEvent(e,It(nt({},t),{highlightSessionURL:R})),(N=(_=(S=ke.options)==null?void 0:S.integrations)==null?void 0:_.intercom)!=null&&N.disabled||window.Intercom&&window.Intercom("trackEvent",e,t)}catch(R){Vt("track",R)}},start:e=>{(Ee==null?void 0:Ee.state)==="Recording"&&!(e!=null&&e.forceNew)?e!=null&&e.silent||console.warn("Highlight is already recording. Please `H.stop()` the current session before starting a new one."):(Yr.startListening(),ke.onHighlightReady(()=>Rt(this,null,function*(){yield Ee.initialize(e)}),{waitForReady:!1}))},stop:e=>{(Ee==null?void 0:Ee.state)!=="Recording"?e!=null&&e.silent||console.warn("Highlight is already stopped. Please call `H.start()`."):ke.onHighlightReady(()=>Ee.stopRecording(!0))},identify:(e,t={})=>{var n,o,s,l,d,h,b,g;try{ke.onHighlightReady(()=>Ee.identify(e,t))}catch(S){Vt("identify",S)}if((s=(o=(n=ke.options)==null?void 0:n.integrations)==null?void 0:o.mixpanel)!=null&&s.disabled||(l=window.mixpanel)!=null&&l.identify&&(window.mixpanel.identify(typeof(t==null?void 0:t.email)=="string"?t==null?void 0:t.email:e),t&&(window.mixpanel.track("identify",t),window.mixpanel.people.set(t))),!((b=(h=(d=ke.options)==null?void 0:d.integrations)==null?void 0:h.amplitude)!=null&&b.disabled)&&(g=window.amplitude)!=null&&g.getInstance&&(window.amplitude.getInstance().setUserId(e),Object.keys(t).length>0)){const S=Object.keys(t).reduce((_,N)=>(_.set(N,t[N]),_),new window.amplitude.Identify);window.amplitude.getInstance().identify(S)}},metrics:e=>{try{ke.onHighlightReady(()=>Ee.recordMetric(e.map(t=>It(nt({},t),{category:Se.MetricCategory.Frontend}))))}catch(t){Vt("metrics",t)}},startSpan:(e,t,n,o)=>{const s=Hr();if(!s)return;const l=(d,h)=>Rt(this,null,function*(){try{return yield h(d)}finally{d.end()}});return o===void 0&&n===void 0?s.startActiveSpan(e,d=>l(d,t)):o===void 0?s.startActiveSpan(e,t,d=>l(d,n)):s.startActiveSpan(e,t,n,d=>l(d,o))},startManualSpan:(e,t,n,o)=>{if(typeof Hr!="function")return;const s=Hr();return o===void 0&&n===void 0?s.startActiveSpan(e,t):o===void 0?s.startActiveSpan(e,t,n):s.startActiveSpan(e,t,n,o)},getSessionURL:()=>new Promise((e,t)=>{const n=Pa();n?e(n):t(new Error("Unable to get session URL"))}),getSessionDetails:()=>new Promise((e,t)=>{ke.onHighlightReady(()=>{const n=Ee.getCurrentSessionURL();if(n){const o=Ee.getCurrentSessionTimestamp(),s=new Date().getTime(),l=new URL(n),d=new URL(n);d.searchParams.set("ts",((s-o)/1e3).toString()),e({url:l.toString(),urlWithTimestamp:d.toString()})}else t(new Error("Could not get session URL"))})}),getRecordingState:()=>{var e;return(e=Ee==null?void 0:Ee.state)!=null?e:"NotRecording"},onHighlightReady:(e,t)=>{if(Fr.push({options:t,func:e}),go===void 0){const n=()=>{var s;const o=[];for(const l of Fr)Ee&&(((s=l.options)==null?void 0:s.waitForReady)===!1||Ee.ready)?l.func():o.push(l);Fr=o,go=void 0,Fr.length>0&&(go=setTimeout(n,Op))};n()}}};typeof window!="undefined"&&(window.H=ke),Cp(),yo(),So();var wp=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},$t="1.8.0",Ha=/^(\d+)\.(\d+)\.(\d+)(-(.+))?$/;function Lp(e){var t=new Set([e]),n=new Set,o=e.match(Ha);if(!o)return function(){return!1};var s={major:+o[1],minor:+o[2],patch:+o[3],prerelease:o[4]};if(s.prerelease!=null)return function(b){return b===e};function l(h){return n.add(h),!1}function d(h){return t.add(h),!0}return function(b){if(t.has(b))return!0;if(n.has(b))return!1;var g=b.match(Ha);if(!g)return l(b);var S={major:+g[1],minor:+g[2],patch:+g[3],prerelease:g[4]};return S.prerelease!=null||s.major!==S.major?l(b):s.major===0?s.minor===S.minor&&s.patch<=S.patch?d(b):l(b):s.minor<=S.minor?d(b):l(b)}}var Gp=Lp($t),Vp=$t.split(".")[0],Qn=Symbol.for("opentelemetry.js.api."+Vp),$n=wp;function qn(e,t,n,o){var s;o===void 0&&(o=!1);var l=$n[Qn]=(s=$n[Qn])!==null&&s!==void 0?s:{version:$t};if(!o&&l[e]){var d=new Error("@opentelemetry/api: Attempted duplicate registration of API: "+e);return n.error(d.stack||d.message),!1}if(l.version!==$t){var d=new Error("@opentelemetry/api: Registration of version v"+l.version+" for "+e+" does not match previously registered API v"+$t);return n.error(d.stack||d.message),!1}return l[e]=t,n.debug("@opentelemetry/api: Registered a global for "+e+" v"+$t+"."),!0}function qt(e){var t,n,o=(t=$n[Qn])===null||t===void 0?void 0:t.version;if(!(!o||!Gp(o)))return(n=$n[Qn])===null||n===void 0?void 0:n[e]}function er(e,t){t.debug("@opentelemetry/api: Unregistering a global for "+e+" v"+$t+".");var n=$n[Qn];n&&delete n[e]}var Xp=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l},Pp=function(e,t,n){if(n||arguments.length===2)for(var o=0,s=t.length,l;o<s;o++)(l||!(o in t))&&(l||(l=Array.prototype.slice.call(t,0,o)),l[o]=t[o]);return e.concat(l||Array.prototype.slice.call(t))},Wp=function(){function e(t){this._namespace=t.namespace||"DiagComponentLogger"}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return tr("debug",this._namespace,t)},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return tr("error",this._namespace,t)},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return tr("info",this._namespace,t)},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return tr("warn",this._namespace,t)},e.prototype.verbose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return tr("verbose",this._namespace,t)},e}();function tr(e,t,n){var o=qt("diag");if(o)return n.unshift(t),o[e].apply(o,Pp([],Xp(n),!1))}var Ge;(function(e){e[e.NONE=0]="NONE",e[e.ERROR=30]="ERROR",e[e.WARN=50]="WARN",e[e.INFO=60]="INFO",e[e.DEBUG=70]="DEBUG",e[e.VERBOSE=80]="VERBOSE",e[e.ALL=9999]="ALL"})(Ge||(Ge={}));function kp(e,t){e<Ge.NONE?e=Ge.NONE:e>Ge.ALL&&(e=Ge.ALL),t=t||{};function n(o,s){var l=t[o];return typeof l=="function"&&e>=s?l.bind(t):function(){}}return{error:n("error",Ge.ERROR),warn:n("warn",Ge.WARN),info:n("info",Ge.INFO),debug:n("debug",Ge.DEBUG),verbose:n("verbose",Ge.VERBOSE)}}var Ap=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l},Mp=function(e,t,n){if(n||arguments.length===2)for(var o=0,s=t.length,l;o<s;o++)(l||!(o in t))&&(l||(l=Array.prototype.slice.call(t,0,o)),l[o]=t[o]);return e.concat(l||Array.prototype.slice.call(t))},xp="diag",Nt=function(){function e(){function t(s){return function(){for(var l=[],d=0;d<arguments.length;d++)l[d]=arguments[d];var h=qt("diag");if(h)return h[s].apply(h,Mp([],Ap(l),!1))}}var n=this,o=function(s,l){var d,h,b;if(l===void 0&&(l={logLevel:Ge.INFO}),s===n){var g=new Error("Cannot use diag as the logger for itself. Please use a DiagLogger implementation like ConsoleDiagLogger or a custom implementation");return n.error((d=g.stack)!==null&&d!==void 0?d:g.message),!1}typeof l=="number"&&(l={logLevel:l});var S=qt("diag"),_=kp((h=l.logLevel)!==null&&h!==void 0?h:Ge.INFO,s);if(S&&!l.suppressOverrideMessage){var N=(b=new Error().stack)!==null&&b!==void 0?b:"<failed to generate stacktrace>";S.warn("Current logger will be overwritten from "+N),_.warn("Current logger will overwrite one already registered from "+N)}return qn("diag",_,n,!0)};n.setLogger=o,n.disable=function(){er(xp,n)},n.createComponentLogger=function(s){return new Wp(s)},n.verbose=t("verbose"),n.debug=t("debug"),n.info=t("info"),n.warn=t("warn"),n.error=t("error")}return e.instance=function(){return this._instance||(this._instance=new e),this._instance},e}(),Up=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l},Dp=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fp=function(){function e(t){this._entries=t?new Map(t):new Map}return e.prototype.getEntry=function(t){var n=this._entries.get(t);if(n)return Object.assign({},n)},e.prototype.getAllEntries=function(){return Array.from(this._entries.entries()).map(function(t){var n=Up(t,2),o=n[0],s=n[1];return[o,s]})},e.prototype.setEntry=function(t,n){var o=new e(this._entries);return o._entries.set(t,n),o},e.prototype.removeEntry=function(t){var n=new e(this._entries);return n._entries.delete(t),n},e.prototype.removeEntries=function(){for(var t,n,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];var l=new e(this._entries);try{for(var d=Dp(o),h=d.next();!h.done;h=d.next()){var b=h.value;l._entries.delete(b)}}catch(g){t={error:g}}finally{try{h&&!h.done&&(n=d.return)&&n.call(d)}finally{if(t)throw t.error}}return l},e.prototype.clear=function(){return new e},e}(),Yp=Symbol("BaggageEntryMetadata"),Hp=Nt.instance();function Kp(e){return e===void 0&&(e={}),new Fp(new Map(Object.entries(e)))}function Ka(e){return typeof e!="string"&&(Hp.error("Cannot create baggage metadata from unknown type: "+typeof e),e=""),{__TYPE__:Yp,toString:function(){return e}}}function nr(e){return Symbol.for(e)}var Jp=function(){function e(t){var n=this;n._currentContext=t?new Map(t):new Map,n.getValue=function(o){return n._currentContext.get(o)},n.setValue=function(o,s){var l=new e(n._currentContext);return l._currentContext.set(o,s),l},n.deleteValue=function(o){var s=new e(n._currentContext);return s._currentContext.delete(o),s}}return e}(),bt=new Jp,To=[{n:"error",c:"error"},{n:"warn",c:"warn"},{n:"info",c:"info"},{n:"debug",c:"debug"},{n:"verbose",c:"trace"}],Bp=function(){function e(){function t(o){return function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];if(console){var d=console[o];if(typeof d!="function"&&(d=console.log),typeof d=="function")return d.apply(console,s)}}}for(var n=0;n<To.length;n++)this[To[n].n]=t(To[n].c)}return e}(),yn=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),zp=function(){function e(){}return e.prototype.createHistogram=function(t,n){return rh},e.prototype.createCounter=function(t,n){return nh},e.prototype.createUpDownCounter=function(t,n){return ih},e.prototype.createObservableGauge=function(t,n){return sh},e.prototype.createObservableCounter=function(t,n){return oh},e.prototype.createObservableUpDownCounter=function(t,n){return ah},e.prototype.addBatchObservableCallback=function(t,n){},e.prototype.removeBatchObservableCallback=function(t){},e}(),vo=function(){function e(){}return e}(),jp=function(e){yn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,o){},t}(vo),Qp=function(e){yn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.add=function(n,o){},t}(vo),$p=function(e){yn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.record=function(n,o){},t}(vo),_o=function(){function e(){}return e.prototype.addCallback=function(t){},e.prototype.removeCallback=function(t){},e}(),qp=function(e){yn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(_o),eh=function(e){yn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(_o),th=function(e){yn(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}(_o),Ja=new zp,nh=new jp,rh=new $p,ih=new Qp,oh=new qp,sh=new eh,ah=new th;function lh(){return Ja}var Eo;(function(e){e[e.INT=0]="INT",e[e.DOUBLE=1]="DOUBLE"})(Eo||(Eo={}));var Ba={get:function(e,t){if(e!=null)return e[t]},keys:function(e){return e==null?[]:Object.keys(e)}},za={set:function(e,t,n){e!=null&&(e[t]=n)}},ch=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l},uh=function(e,t,n){if(n||arguments.length===2)for(var o=0,s=t.length,l;o<s;o++)(l||!(o in t))&&(l||(l=Array.prototype.slice.call(t,0,o)),l[o]=t[o]);return e.concat(l||Array.prototype.slice.call(t))},dh=function(){function e(){}return e.prototype.active=function(){return bt},e.prototype.with=function(t,n,o){for(var s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];return n.call.apply(n,uh([o],ch(s),!1))},e.prototype.bind=function(t,n){return n},e.prototype.enable=function(){return this},e.prototype.disable=function(){return this},e}(),ph=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l},hh=function(e,t,n){if(n||arguments.length===2)for(var o=0,s=t.length,l;o<s;o++)(l||!(o in t))&&(l||(l=Array.prototype.slice.call(t,0,o)),l[o]=t[o]);return e.concat(l||Array.prototype.slice.call(t))},Io="context",mh=new dh,Kr=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalContextManager=function(t){return qn(Io,t,Nt.instance())},e.prototype.active=function(){return this._getContextManager().active()},e.prototype.with=function(t,n,o){for(var s,l=[],d=3;d<arguments.length;d++)l[d-3]=arguments[d];return(s=this._getContextManager()).with.apply(s,hh([t,n,o],ph(l),!1))},e.prototype.bind=function(t,n){return this._getContextManager().bind(t,n)},e.prototype._getContextManager=function(){return qt(Io)||mh},e.prototype.disable=function(){this._getContextManager().disable(),er(Io,Nt.instance())},e}(),at;(function(e){e[e.NONE=0]="NONE",e[e.SAMPLED=1]="SAMPLED"})(at||(at={}));var Ro="0000000000000000",No="00000000000000000000000000000000",Zo={traceId:No,spanId:Ro,traceFlags:at.NONE},rr=function(){function e(t){t===void 0&&(t=Zo),this._spanContext=t}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return this},e.prototype.setAttributes=function(t){return this},e.prototype.addEvent=function(t,n){return this},e.prototype.setStatus=function(t){return this},e.prototype.updateName=function(t){return this},e.prototype.end=function(t){},e.prototype.isRecording=function(){return!1},e.prototype.recordException=function(t,n){},e}(),Co=nr("OpenTelemetry Context Key SPAN");function Oo(e){return e.getValue(Co)||void 0}function fh(){return Oo(Kr.getInstance().active())}function wo(e,t){return e.setValue(Co,t)}function bh(e){return e.deleteValue(Co)}function yh(e,t){return wo(e,new rr(t))}function ja(e){var t;return(t=Oo(e))===null||t===void 0?void 0:t.spanContext()}var Sh=/^([0-9a-f]{32})$/i,gh=/^[0-9a-f]{16}$/i;function Jr(e){return Sh.test(e)&&e!==No}function Qa(e){return gh.test(e)&&e!==Ro}function Sn(e){return Jr(e.traceId)&&Qa(e.spanId)}function Th(e){return new rr(e)}var Lo=Kr.getInstance(),$a=function(){function e(){}return e.prototype.startSpan=function(t,n,o){o===void 0&&(o=Lo.active());var s=!!(n!=null&&n.root);if(s)return new rr;var l=o&&ja(o);return vh(l)&&Sn(l)?new rr(l):new rr},e.prototype.startActiveSpan=function(t,n,o,s){var l,d,h;if(!(arguments.length<2)){arguments.length===2?h=n:arguments.length===3?(l=n,h=o):(l=n,d=o,h=s);var b=d!=null?d:Lo.active(),g=this.startSpan(t,l,b),S=wo(b,g);return Lo.with(S,h,void 0,g)}},e}();function vh(e){return typeof e=="object"&&typeof e.spanId=="string"&&typeof e.traceId=="string"&&typeof e.traceFlags=="number"}var _h=new $a,qa=function(){function e(t,n,o,s){this._provider=t,this.name=n,this.version=o,this.options=s}return e.prototype.startSpan=function(t,n,o){return this._getTracer().startSpan(t,n,o)},e.prototype.startActiveSpan=function(t,n,o,s){var l=this._getTracer();return Reflect.apply(l.startActiveSpan,l,arguments)},e.prototype._getTracer=function(){if(this._delegate)return this._delegate;var t=this._provider.getDelegateTracer(this.name,this.version,this.options);return t?(this._delegate=t,this._delegate):_h},e}(),Eh=function(){function e(){}return e.prototype.getTracer=function(t,n,o){return new $a},e}(),Ih=new Eh,Go=function(){function e(){}return e.prototype.getTracer=function(t,n,o){var s;return(s=this.getDelegateTracer(t,n,o))!==null&&s!==void 0?s:new qa(this,t,n,o)},e.prototype.getDelegate=function(){var t;return(t=this._delegate)!==null&&t!==void 0?t:Ih},e.prototype.setDelegate=function(t){this._delegate=t},e.prototype.getDelegateTracer=function(t,n,o){var s;return(s=this._delegate)===null||s===void 0?void 0:s.getTracer(t,n,o)},e}(),Xt;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(Xt||(Xt={}));var gn;(function(e){e[e.INTERNAL=0]="INTERNAL",e[e.SERVER=1]="SERVER",e[e.CLIENT=2]="CLIENT",e[e.PRODUCER=3]="PRODUCER",e[e.CONSUMER=4]="CONSUMER"})(gn||(gn={}));var Br;(function(e){e[e.UNSET=0]="UNSET",e[e.OK=1]="OK",e[e.ERROR=2]="ERROR"})(Br||(Br={}));var Vo="[_0-9a-z-*/]",Rh="[a-z]"+Vo+"{0,255}",Nh="[a-z0-9]"+Vo+"{0,240}@[a-z]"+Vo+"{0,13}",Zh=new RegExp("^(?:"+Rh+"|"+Nh+")$"),Ch=/^[ -~]{0,255}[!-~]$/,Oh=/,|=/;function wh(e){return Zh.test(e)}function Lh(e){return Ch.test(e)&&!Oh.test(e)}var el=32,Gh=512,tl=",",nl="=",Vh=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,n){var o=this._clone();return o._internalState.has(t)&&o._internalState.delete(t),o._internalState.set(t,n),o},e.prototype.unset=function(t){var n=this._clone();return n._internalState.delete(t),n},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(n,o){return n.push(o+nl+t.get(o)),n},[]).join(tl)},e.prototype._parse=function(t){t.length>Gh||(this._internalState=t.split(tl).reverse().reduce(function(n,o){var s=o.trim(),l=s.indexOf(nl);if(l!==-1){var d=s.slice(0,l),h=s.slice(l+1,o.length);wh(d)&&Lh(h)&&n.set(d,h)}return n},new Map),this._internalState.size>el&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,el))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}();function Xh(e){return new Vh(e)}var Te=Kr.getInstance(),de=Nt.instance(),Ph=function(){function e(){}return e.prototype.getMeter=function(t,n,o){return Ja},e}(),Wh=new Ph,Xo="metrics",kh=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalMeterProvider=function(t){return qn(Xo,t,Nt.instance())},e.prototype.getMeterProvider=function(){return qt(Xo)||Wh},e.prototype.getMeter=function(t,n,o){return this.getMeterProvider().getMeter(t,n,o)},e.prototype.disable=function(){er(Xo,Nt.instance())},e}(),zr=kh.getInstance(),Ah=function(){function e(){}return e.prototype.inject=function(t,n){},e.prototype.extract=function(t,n){return t},e.prototype.fields=function(){return[]},e}(),Po=nr("OpenTelemetry Baggage Key");function rl(e){return e.getValue(Po)||void 0}function Mh(){return rl(Kr.getInstance().active())}function xh(e,t){return e.setValue(Po,t)}function Uh(e){return e.deleteValue(Po)}var Wo="propagation",Dh=new Ah,Fh=function(){function e(){this.createBaggage=Kp,this.getBaggage=rl,this.getActiveBaggage=Mh,this.setBaggage=xh,this.deleteBaggage=Uh}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalPropagator=function(t){return qn(Wo,t,Nt.instance())},e.prototype.inject=function(t,n,o){return o===void 0&&(o=za),this._getGlobalPropagator().inject(t,n,o)},e.prototype.extract=function(t,n,o){return o===void 0&&(o=Ba),this._getGlobalPropagator().extract(t,n,o)},e.prototype.fields=function(){return this._getGlobalPropagator().fields()},e.prototype.disable=function(){er(Wo,Nt.instance())},e.prototype._getGlobalPropagator=function(){return qt(Wo)||Dh},e}(),rt=Fh.getInstance(),ko="trace",Yh=function(){function e(){this._proxyTracerProvider=new Go,this.wrapSpanContext=Th,this.isSpanContextValid=Sn,this.deleteSpan=bh,this.getSpan=Oo,this.getActiveSpan=fh,this.getSpanContext=ja,this.setSpan=wo,this.setSpanContext=yh}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalTracerProvider=function(t){var n=qn(ko,this._proxyTracerProvider,Nt.instance());return n&&this._proxyTracerProvider.setDelegate(t),n},e.prototype.getTracerProvider=function(){return qt(ko)||this._proxyTracerProvider},e.prototype.getTracer=function(t,n){return this.getTracerProvider().getTracer(t,n)},e.prototype.disable=function(){er(ko,Nt.instance()),this._proxyTracerProvider=new Go},e}(),we=Yh.getInstance();const Hh=Object.freeze(Object.defineProperty({__proto__:null,DiagConsoleLogger:Bp,get DiagLogLevel(){return Ge},INVALID_SPANID:Ro,INVALID_SPAN_CONTEXT:Zo,INVALID_TRACEID:No,ProxyTracer:qa,ProxyTracerProvider:Go,ROOT_CONTEXT:bt,get SamplingDecision(){return Xt},get SpanKind(){return gn},get SpanStatusCode(){return Br},get TraceFlags(){return at},get ValueType(){return Eo},baggageEntryMetadataFromString:Ka,context:Te,createContextKey:nr,createNoopMeter:lh,createTraceState:Xh,default:{context:Te,diag:de,metrics:zr,propagation:rt,trace:we},defaultTextMapGetter:Ba,defaultTextMapSetter:za,diag:de,isSpanContextValid:Sn,isValidSpanId:Qa,isValidTraceId:Jr,metrics:zr,propagation:rt,trace:we},Symbol.toStringTag,{value:"Module"}));var Ao=nr("OpenTelemetry SDK Context Key SUPPRESS_TRACING");function Mo(e){return e.setValue(Ao,!0)}function Kh(e){return e.deleteValue(Ao)}function jr(e){return e.getValue(Ao)===!0}var Jh="=",xo=";",Qr=",",Uo="baggage",Bh=180,zh=4096,jh=8192,Qh=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l};function il(e){return e.reduce(function(t,n){var o=""+t+(t!==""?Qr:"")+n;return o.length>jh?t:o},"")}function ol(e){return e.getAllEntries().map(function(t){var n=Qh(t,2),o=n[0],s=n[1],l=encodeURIComponent(o)+"="+encodeURIComponent(s.value);return s.metadata!==void 0&&(l+=xo+s.metadata.toString()),l})}function Do(e){var t=e.split(xo);if(!(t.length<=0)){var n=t.shift();if(n){var o=n.indexOf(Jh);if(!(o<=0)){var s=decodeURIComponent(n.substring(0,o).trim()),l=decodeURIComponent(n.substring(o+1).trim()),d;return t.length>0&&(d=Ka(t.join(xo))),{key:s,value:l,metadata:d}}}}}function Fo(e){return typeof e!="string"||e.length===0?{}:e.split(Qr).map(function(t){return Do(t)}).filter(function(t){return t!==void 0&&t.value.length>0}).reduce(function(t,n){return t[n.key]=n.value,t},{})}const $h=Object.freeze(Object.defineProperty({__proto__:null,getKeyPairs:ol,parseKeyPairsIntoRecord:Fo,parsePairKeyValue:Do,serializeKeyPairs:il},Symbol.toStringTag,{value:"Module"}));var Yo=function(){function e(){}return e.prototype.inject=function(t,n,o){var s=rt.getBaggage(t);if(!(!s||jr(t))){var l=ol(s).filter(function(h){return h.length<=zh}).slice(0,Bh),d=il(l);d.length>0&&o.set(n,Uo,d)}},e.prototype.extract=function(t,n,o){var s=o.get(n,Uo),l=Array.isArray(s)?s.join(Qr):s;if(!l)return t;var d={};if(l.length===0)return t;var h=l.split(Qr);return h.forEach(function(b){var g=Do(b);if(g){var S={value:g.value};g.metadata&&(S.metadata=g.metadata),d[g.key]=S}}),Object.entries(d).length===0?t:rt.setBaggage(t,rt.createBaggage(d))},e.prototype.fields=function(){return[Uo]},e}(),qh=function(){function e(t,n){this._monotonicClock=n,this._epochMillis=t.now(),this._performanceMillis=n.now()}return e.prototype.now=function(){var t=this._monotonicClock.now()-this._performanceMillis;return this._epochMillis+t},e}(),sl=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},em=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l};function ir(e){var t,n,o={};if(typeof e!="object"||e==null)return o;try{for(var s=sl(Object.entries(e)),l=s.next();!l.done;l=s.next()){var d=em(l.value,2),h=d[0],b=d[1];if(!al(h)){de.warn("Invalid attribute key: "+h);continue}if(!Ho(b)){de.warn("Invalid attribute value set for key: "+h);continue}Array.isArray(b)?o[h]=b.slice():o[h]=b}}catch(g){t={error:g}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o}function al(e){return typeof e=="string"&&e.length>0}function Ho(e){return e==null?!0:Array.isArray(e)?tm(e):ll(e)}function tm(e){var t,n,o;try{for(var s=sl(e),l=s.next();!l.done;l=s.next()){var d=l.value;if(d!=null){if(!o){if(ll(d)){o=typeof d;continue}return!1}if(typeof d!==o)return!1}}}catch(h){t={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return!0}function ll(e){switch(typeof e){case"number":case"boolean":case"string":return!0}return!1}function cl(){return function(e){de.error(nm(e))}}function nm(e){return typeof e=="string"?e:JSON.stringify(rm(e))}function rm(e){for(var t={},n=e;n!==null;)Object.getOwnPropertyNames(n).forEach(function(o){if(!t[o]){var s=n[o];s&&(t[o]=String(s))}}),n=Object.getPrototypeOf(n);return t}var ul=cl();function im(e){ul=e}function Pt(e){try{ul(e)}catch(t){}}var yt;(function(e){e.AlwaysOff="always_off",e.AlwaysOn="always_on",e.ParentBasedAlwaysOff="parentbased_always_off",e.ParentBasedAlwaysOn="parentbased_always_on",e.ParentBasedTraceIdRatio="parentbased_traceidratio",e.TraceIdRatio="traceidratio"})(yt||(yt={}));var Tn=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},om=",",sm=["OTEL_SDK_DISABLED"];function am(e){return sm.indexOf(e)>-1}var lm=["OTEL_BSP_EXPORT_TIMEOUT","OTEL_BSP_MAX_EXPORT_BATCH_SIZE","OTEL_BSP_MAX_QUEUE_SIZE","OTEL_BSP_SCHEDULE_DELAY","OTEL_BLRP_EXPORT_TIMEOUT","OTEL_BLRP_MAX_EXPORT_BATCH_SIZE","OTEL_BLRP_MAX_QUEUE_SIZE","OTEL_BLRP_SCHEDULE_DELAY","OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT","OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT","OTEL_SPAN_EVENT_COUNT_LIMIT","OTEL_SPAN_LINK_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT","OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT","OTEL_EXPORTER_OTLP_TIMEOUT","OTEL_EXPORTER_OTLP_TRACES_TIMEOUT","OTEL_EXPORTER_OTLP_METRICS_TIMEOUT","OTEL_EXPORTER_OTLP_LOGS_TIMEOUT","OTEL_EXPORTER_JAEGER_AGENT_PORT"];function cm(e){return lm.indexOf(e)>-1}var um=["OTEL_NO_PATCH_MODULES","OTEL_PROPAGATORS"];function dm(e){return um.indexOf(e)>-1}var or=1/0,sr=128,dl=128,pl=128,Ko={OTEL_SDK_DISABLED:!1,CONTAINER_NAME:"",ECS_CONTAINER_METADATA_URI_V4:"",ECS_CONTAINER_METADATA_URI:"",HOSTNAME:"",KUBERNETES_SERVICE_HOST:"",NAMESPACE:"",OTEL_BSP_EXPORT_TIMEOUT:3e4,OTEL_BSP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BSP_MAX_QUEUE_SIZE:2048,OTEL_BSP_SCHEDULE_DELAY:5e3,OTEL_BLRP_EXPORT_TIMEOUT:3e4,OTEL_BLRP_MAX_EXPORT_BATCH_SIZE:512,OTEL_BLRP_MAX_QUEUE_SIZE:2048,OTEL_BLRP_SCHEDULE_DELAY:5e3,OTEL_EXPORTER_JAEGER_AGENT_HOST:"",OTEL_EXPORTER_JAEGER_AGENT_PORT:6832,OTEL_EXPORTER_JAEGER_ENDPOINT:"",OTEL_EXPORTER_JAEGER_PASSWORD:"",OTEL_EXPORTER_JAEGER_USER:"",OTEL_EXPORTER_OTLP_ENDPOINT:"",OTEL_EXPORTER_OTLP_TRACES_ENDPOINT:"",OTEL_EXPORTER_OTLP_METRICS_ENDPOINT:"",OTEL_EXPORTER_OTLP_LOGS_ENDPOINT:"",OTEL_EXPORTER_OTLP_HEADERS:"",OTEL_EXPORTER_OTLP_TRACES_HEADERS:"",OTEL_EXPORTER_OTLP_METRICS_HEADERS:"",OTEL_EXPORTER_OTLP_LOGS_HEADERS:"",OTEL_EXPORTER_OTLP_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_TRACES_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_METRICS_TIMEOUT:1e4,OTEL_EXPORTER_OTLP_LOGS_TIMEOUT:1e4,OTEL_EXPORTER_ZIPKIN_ENDPOINT:"http://localhost:9411/api/v2/spans",OTEL_LOG_LEVEL:Ge.INFO,OTEL_NO_PATCH_MODULES:[],OTEL_PROPAGATORS:["tracecontext","baggage"],OTEL_RESOURCE_ATTRIBUTES:"",OTEL_SERVICE_NAME:"",OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT:or,OTEL_ATTRIBUTE_COUNT_LIMIT:sr,OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT:or,OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT:sr,OTEL_LOGRECORD_ATTRIBUTE_VALUE_LENGTH_LIMIT:or,OTEL_LOGRECORD_ATTRIBUTE_COUNT_LIMIT:sr,OTEL_SPAN_EVENT_COUNT_LIMIT:128,OTEL_SPAN_LINK_COUNT_LIMIT:128,OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:dl,OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:pl,OTEL_TRACES_EXPORTER:"",OTEL_TRACES_SAMPLER:yt.ParentBasedAlwaysOn,OTEL_TRACES_SAMPLER_ARG:"",OTEL_LOGS_EXPORTER:"",OTEL_EXPORTER_OTLP_INSECURE:"",OTEL_EXPORTER_OTLP_TRACES_INSECURE:"",OTEL_EXPORTER_OTLP_METRICS_INSECURE:"",OTEL_EXPORTER_OTLP_LOGS_INSECURE:"",OTEL_EXPORTER_OTLP_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CERTIFICATE:"",OTEL_EXPORTER_OTLP_COMPRESSION:"",OTEL_EXPORTER_OTLP_TRACES_COMPRESSION:"",OTEL_EXPORTER_OTLP_METRICS_COMPRESSION:"",OTEL_EXPORTER_OTLP_LOGS_COMPRESSION:"",OTEL_EXPORTER_OTLP_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_KEY:"",OTEL_EXPORTER_OTLP_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_TRACES_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_METRICS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_LOGS_CLIENT_CERTIFICATE:"",OTEL_EXPORTER_OTLP_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_TRACES_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_LOGS_PROTOCOL:"http/protobuf",OTEL_EXPORTER_OTLP_METRICS_TEMPORALITY_PREFERENCE:"cumulative"};function pm(e,t,n){if(typeof n[e]!="undefined"){var o=String(n[e]);t[e]=o.toLowerCase()==="true"}}function hm(e,t,n,o,s){if(o===void 0&&(o=-1/0),s===void 0&&(s=1/0),typeof n[e]!="undefined"){var l=Number(n[e]);isNaN(l)||(l<o?t[e]=o:l>s?t[e]=s:t[e]=l)}}function mm(e,t,n,o){o===void 0&&(o=om);var s=n[e];typeof s=="string"&&(t[e]=s.split(o).map(function(l){return l.trim()}))}var fm={ALL:Ge.ALL,VERBOSE:Ge.VERBOSE,DEBUG:Ge.DEBUG,INFO:Ge.INFO,WARN:Ge.WARN,ERROR:Ge.ERROR,NONE:Ge.NONE};function bm(e,t,n){var o=n[e];if(typeof o=="string"){var s=fm[o.toUpperCase()];s!=null&&(t[e]=s)}}function $r(e){var t={};for(var n in Ko){var o=n;switch(o){case"OTEL_LOG_LEVEL":bm(o,t,e);break;default:if(am(o))pm(o,t,e);else if(cm(o))hm(o,t,e);else if(dm(o))mm(o,t,e);else{var s=e[o];typeof s!="undefined"&&s!==null&&(t[o]=String(s))}}}return t}function hl(){return typeof process!="undefined"&&process&&process.env?$r(process.env):$r(Tn)}function Ve(){var e=$r(Tn);return Object.assign({},Ko,e)}function ml(e){return e>=48&&e<=57?e-48:e>=97&&e<=102?e-87:e-55}function ar(e){for(var t=new Uint8Array(e.length/2),n=0,o=0;o<e.length;o+=2){var s=ml(e.charCodeAt(o)),l=ml(e.charCodeAt(o+1));t[n++]=s<<4|l}return t}var ym=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l},Sm=function(e,t,n){if(n||arguments.length===2)for(var o=0,s=t.length,l;o<s;o++)(l||!(o in t))&&(l||(l=Array.prototype.slice.call(t,0,o)),l[o]=t[o]);return e.concat(l||Array.prototype.slice.call(t))};function gm(e){return btoa(String.fromCharCode.apply(String,Sm([],ym(ar(e)),!1)))}var Tm=8,vm=16,_m=function(){function e(){this.generateTraceId=fl(vm),this.generateSpanId=fl(Tm)}return e}(),qr=Array(32);function fl(e){return function(){for(var n=0;n<e*2;n++)qr[n]=Math.floor(Math.random()*16)+48,qr[n]>=58&&(qr[n]+=39);return String.fromCharCode.apply(null,qr.slice(0,e*2))}}var lt=performance,bl="1.22.0";function yl(e){for(var t={},n=e.length,o=0;o<n;o++){var s=e[o];s&&(t[String(s).toUpperCase().replace(/[-.]/g,"_")]=s)}return t}var Em="http.url",Im="http.user_agent",Jo=Em,Rm=Im,Nm="cloud.provider",Zm="cloud.account.id",Cm="cloud.region",Om="cloud.availability_zone",wm="cloud.platform",Lm="aws.ecs.container.arn",Gm="aws.ecs.cluster.arn",Vm="aws.ecs.launchtype",Xm="aws.ecs.task.arn",Pm="aws.ecs.task.family",Wm="aws.ecs.task.revision",km="aws.eks.cluster.arn",Am="aws.log.group.names",Mm="aws.log.group.arns",xm="aws.log.stream.names",Um="aws.log.stream.arns",Dm="container.name",Fm="container.id",Ym="container.runtime",Hm="container.image.name",Km="container.image.tag",Jm="deployment.environment",Bm="device.id",zm="device.model.identifier",jm="device.model.name",Qm="faas.name",$m="faas.id",qm="faas.version",ef="faas.instance",tf="faas.max_memory",nf="host.id",rf="host.name",of="host.type",sf="host.arch",af="host.image.name",lf="host.image.id",cf="host.image.version",uf="k8s.cluster.name",df="k8s.node.name",pf="k8s.node.uid",hf="k8s.namespace.name",mf="k8s.pod.uid",ff="k8s.pod.name",bf="k8s.container.name",yf="k8s.replicaset.uid",Sf="k8s.replicaset.name",gf="k8s.deployment.uid",Tf="k8s.deployment.name",vf="k8s.statefulset.uid",_f="k8s.statefulset.name",Ef="k8s.daemonset.uid",If="k8s.daemonset.name",Rf="k8s.job.uid",Nf="k8s.job.name",Zf="k8s.cronjob.uid",Cf="k8s.cronjob.name",Of="os.type",wf="os.description",Lf="os.name",Gf="os.version",Vf="process.pid",Xf="process.executable.name",Pf="process.executable.path",Wf="process.command",kf="process.command_line",Af="process.command_args",Mf="process.owner",xf="process.runtime.name",Uf="process.runtime.version",Df="process.runtime.description",Ff="service.name",Yf="service.namespace",Hf="service.instance.id",Kf="service.version",Jf="telemetry.sdk.name",Bf="telemetry.sdk.language",zf="telemetry.sdk.version",jf="telemetry.auto.version",Qf="webengine.name",$f="webengine.version",qf="webengine.description",St=yl([Nm,Zm,Cm,Om,wm,Lm,Gm,Vm,Xm,Pm,Wm,km,Am,Mm,xm,Um,Dm,Fm,Ym,Hm,Km,Jm,Bm,zm,jm,Qm,$m,qm,ef,tf,nf,rf,of,sf,af,lf,cf,uf,df,pf,hf,mf,ff,bf,yf,Sf,gf,Tf,vf,_f,Ef,If,Rf,Nf,Zf,Cf,Of,wf,Lf,Gf,Vf,Xf,Pf,Wf,kf,Af,Mf,xf,Uf,Df,Ff,Yf,Hf,Kf,Jf,Bf,zf,jf,Qf,$f,qf]),eb="cpp",tb="dotnet",nb="erlang",rb="go",ib="java",ob="nodejs",sb="php",ab="python",lb="ruby",cb="webjs",ub=yl([eb,tb,nb,rb,ib,ob,sb,ab,lb,cb]),vn,ei=(vn={},vn[St.TELEMETRY_SDK_NAME]="opentelemetry",vn[St.PROCESS_RUNTIME_NAME]="browser",vn[St.TELEMETRY_SDK_LANGUAGE]=ub.WEBJS,vn[St.TELEMETRY_SDK_VERSION]=bl,vn);function db(e){}var Sl=9,pb=6,hb=Math.pow(10,pb),ti=Math.pow(10,Sl);function Zt(e){var t=e/1e3,n=Math.trunc(t),o=Math.round(e%1e3*hb);return[n,o]}function ni(){var e=lt.timeOrigin;if(typeof e!="number"){var t=lt;e=t.timing&&t.timing.fetchStart}return e}function en(e){var t=Zt(ni()),n=Zt(typeof e=="number"?e:lt.now());return jo(t,n)}function _n(e){if(ri(e))return e;if(typeof e=="number")return e<ni()?en(e):Zt(e);if(e instanceof Date)return Zt(e.getTime());throw TypeError("Invalid input type")}function gl(e,t){var n=t[0]-e[0],o=t[1]-e[1];return o<0&&(n-=1,o+=ti),[n,o]}function mb(e){var t=Sl,n=""+"0".repeat(t)+e[1]+"Z",o=n.substr(n.length-t-1),s=new Date(e[0]*1e3).toISOString();return s.replace("000Z",o)}function Ct(e){return e[0]*ti+e[1]}function fb(e){return e[0]*1e3+e[1]/1e6}function Bo(e){return e[0]*1e6+e[1]/1e3}function ri(e){return Array.isArray(e)&&e.length===2&&typeof e[0]=="number"&&typeof e[1]=="number"}function zo(e){return ri(e)||typeof e=="number"||e instanceof Date}function jo(e,t){var n=[e[0]+t[0],e[1]+t[1]];return n[1]>=ti&&(n[1]-=ti,n[0]+=1),n}var Ot;(function(e){e[e.SUCCESS=0]="SUCCESS",e[e.FAILED=1]="FAILED"})(Ot||(Ot={}));var bb=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Qo=function(){function e(t){t===void 0&&(t={});var n;this._propagators=(n=t.propagators)!==null&&n!==void 0?n:[],this._fields=Array.from(new Set(this._propagators.map(function(o){return typeof o.fields=="function"?o.fields():[]}).reduce(function(o,s){return o.concat(s)},[])))}return e.prototype.inject=function(t,n,o){var s,l;try{for(var d=bb(this._propagators),h=d.next();!h.done;h=d.next()){var b=h.value;try{b.inject(t,n,o)}catch(g){de.warn("Failed to inject with "+b.constructor.name+". Err: "+g.message)}}}catch(g){s={error:g}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}},e.prototype.extract=function(t,n,o){return this._propagators.reduce(function(s,l){try{return l.extract(s,n,o)}catch(d){de.warn("Failed to inject with "+l.constructor.name+". Err: "+d.message)}return s},t)},e.prototype.fields=function(){return this._fields.slice()},e}(),$o="[_0-9a-z-*/]",yb="[a-z]"+$o+"{0,255}",Sb="[a-z0-9]"+$o+"{0,240}@[a-z]"+$o+"{0,13}",gb=new RegExp("^(?:"+yb+"|"+Sb+")$"),Tb=/^[ -~]{0,255}[!-~]$/,vb=/,|=/;function _b(e){return gb.test(e)}function Eb(e){return Tb.test(e)&&!vb.test(e)}var Tl=32,Ib=512,vl=",",_l="=",El=function(){function e(t){this._internalState=new Map,t&&this._parse(t)}return e.prototype.set=function(t,n){var o=this._clone();return o._internalState.has(t)&&o._internalState.delete(t),o._internalState.set(t,n),o},e.prototype.unset=function(t){var n=this._clone();return n._internalState.delete(t),n},e.prototype.get=function(t){return this._internalState.get(t)},e.prototype.serialize=function(){var t=this;return this._keys().reduce(function(n,o){return n.push(o+_l+t.get(o)),n},[]).join(vl)},e.prototype._parse=function(t){t.length>Ib||(this._internalState=t.split(vl).reverse().reduce(function(n,o){var s=o.trim(),l=s.indexOf(_l);if(l!==-1){var d=s.slice(0,l),h=s.slice(l+1,o.length);_b(d)&&Eb(h)&&n.set(d,h)}return n},new Map),this._internalState.size>Tl&&(this._internalState=new Map(Array.from(this._internalState.entries()).reverse().slice(0,Tl))))},e.prototype._keys=function(){return Array.from(this._internalState.keys()).reverse()},e.prototype._clone=function(){var t=new e;return t._internalState=new Map(this._internalState),t},e}(),lr="traceparent",ii="tracestate",Rb="00",Nb="(?!ff)[\\da-f]{2}",Zb="(?![0]{32})[\\da-f]{32}",Cb="(?![0]{16})[\\da-f]{16}",Ob="[\\da-f]{2}",wb=new RegExp("^\\s?("+Nb+")-("+Zb+")-("+Cb+")-("+Ob+")(-.*)?\\s?$");function Il(e){var t=wb.exec(e);return!t||t[1]==="00"&&t[5]?null:{traceId:t[2],spanId:t[3],traceFlags:parseInt(t[4],16)}}var qo=function(){function e(){}return e.prototype.inject=function(t,n,o){var s=we.getSpanContext(t);if(!(!s||jr(t)||!Sn(s))){var l=Rb+"-"+s.traceId+"-"+s.spanId+"-0"+Number(s.traceFlags||at.NONE).toString(16);o.set(n,lr,l),s.traceState&&o.set(n,ii,s.traceState.serialize())}},e.prototype.extract=function(t,n,o){var s=o.get(n,lr);if(!s)return t;var l=Array.isArray(s)?s[0]:s;if(typeof l!="string")return t;var d=Il(l);if(!d)return t;d.isRemote=!0;var h=o.get(n,ii);if(h){var b=Array.isArray(h)?h.join(","):h;d.traceState=new El(typeof b=="string"?b:void 0)}return we.setSpanContext(t,d)},e.prototype.fields=function(){return[lr,ii]},e}(),es=nr("OpenTelemetry SDK Context Key RPC_METADATA"),ts;(function(e){e.HTTP="http"})(ts||(ts={}));function Lb(e,t){return e.setValue(es,t)}function Gb(e){return e.deleteValue(es)}function Vb(e){return e.getValue(es)}var ns=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Xt.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),oi=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:Xt.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),Xb=function(){function e(t){var n,o,s,l;this._root=t.root,this._root||(Pt(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new oi),this._remoteParentSampled=(n=t.remoteParentSampled)!==null&&n!==void 0?n:new oi,this._remoteParentNotSampled=(o=t.remoteParentNotSampled)!==null&&o!==void 0?o:new ns,this._localParentSampled=(s=t.localParentSampled)!==null&&s!==void 0?s:new oi,this._localParentNotSampled=(l=t.localParentNotSampled)!==null&&l!==void 0?l:new ns}return e.prototype.shouldSample=function(t,n,o,s,l,d){var h=we.getSpanContext(t);return!h||!Sn(h)?this._root.shouldSample(t,n,o,s,l,d):h.isRemote?h.traceFlags&at.SAMPLED?this._remoteParentSampled.shouldSample(t,n,o,s,l,d):this._remoteParentNotSampled.shouldSample(t,n,o,s,l,d):h.traceFlags&at.SAMPLED?this._localParentSampled.shouldSample(t,n,o,s,l,d):this._localParentNotSampled.shouldSample(t,n,o,s,l,d)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),Pb=function(){function e(t){t===void 0&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}return e.prototype.shouldSample=function(t,n){return{decision:Jr(n)&&this._accumulate(n)<this._upperBound?Xt.RECORD_AND_SAMPLED:Xt.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t},e.prototype._accumulate=function(t){for(var n=0,o=0;o<t.length/8;o++){var s=o*8,l=parseInt(t.slice(s,s+8),16);n=(n^l)>>>0}return n},e}(),Wb="[object Object]",kb="[object Null]",Ab="[object Undefined]",Mb=Function.prototype,Rl=Mb.toString,xb=Rl.call(Object),Ub=Db(Object.getPrototypeOf,Object),Nl=Object.prototype,Zl=Nl.hasOwnProperty,tn=Symbol?Symbol.toStringTag:void 0,Cl=Nl.toString;function Db(e,t){return function(n){return e(t(n))}}function Ol(e){if(!Fb(e)||Yb(e)!==Wb)return!1;var t=Ub(e);if(t===null)return!0;var n=Zl.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&Rl.call(n)===xb}function Fb(e){return e!=null&&typeof e=="object"}function Yb(e){return e==null?e===void 0?Ab:kb:tn&&tn in Object(e)?Hb(e):Kb(e)}function Hb(e){var t=Zl.call(e,tn),n=e[tn],o=!1;try{e[tn]=void 0,o=!0}catch(l){}var s=Cl.call(e);return o&&(t?e[tn]=n:delete e[tn]),s}function Kb(e){return Cl.call(e)}var Jb=20;function wl(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var n=e.shift(),o=new WeakMap;e.length>0;)n=Ll(n,e.shift(),0,o);return n}function rs(e){return si(e)?e.slice():e}function Ll(e,t,n,o){n===void 0&&(n=0);var s;if(!(n>Jb)){if(n++,ai(e)||ai(t)||Vl(t))s=rs(t);else if(si(e)){if(s=e.slice(),si(t))for(var l=0,d=t.length;l<d;l++)s.push(rs(t[l]));else if(cr(t))for(var h=Object.keys(t),l=0,d=h.length;l<d;l++){var b=h[l];s[b]=rs(t[b])}}else if(cr(e))if(cr(t)){if(!Bb(e,t))return t;s=Object.assign({},e);for(var h=Object.keys(t),l=0,d=h.length;l<d;l++){var b=h[l],g=t[b];if(ai(g))typeof g=="undefined"?delete s[b]:s[b]=g;else{var S=s[b],_=g;if(Gl(e,b,o)||Gl(t,b,o))delete s[b];else{if(cr(S)&&cr(_)){var N=o.get(S)||[],R=o.get(_)||[];N.push({obj:e,key:b}),R.push({obj:t,key:b}),o.set(S,N),o.set(_,R)}s[b]=Ll(s[b],g,n,o)}}}}else s=t;return s}}function Gl(e,t,n){for(var o=n.get(e[t])||[],s=0,l=o.length;s<l;s++){var d=o[s];if(d.key===t&&d.obj===e)return!0}return!1}function si(e){return Array.isArray(e)}function Vl(e){return typeof e=="function"}function cr(e){return!ai(e)&&!si(e)&&!Vl(e)&&typeof e=="object"}function ai(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="undefined"||e instanceof Date||e instanceof RegExp||e===null}function Bb(e,t){return!(!Ol(e)||!Ol(t))}var zb=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),Xl=function(e){zb(t,e);function t(n){var o=e.call(this,n)||this;return Object.setPrototypeOf(o,t.prototype),o}return t}(Error);function jb(e,t){var n,o=new Promise(function(l,d){n=setTimeout(function(){d(new Xl("Operation timed out."))},t)});return Promise.race([e,o]).then(function(s){return clearTimeout(n),s},function(s){throw clearTimeout(n),s})}var Qb=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};function is(e,t){return typeof t=="string"?e===t:!!e.match(t)}function os(e,t){var n,o;if(!t)return!1;try{for(var s=Qb(t),l=s.next();!l.done;l=s.next()){var d=l.value;if(is(e,d))return!0}}catch(h){n={error:h}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return!1}function $b(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}var qb=function(){function e(){var t=this;this._promise=new Promise(function(n,o){t._resolve=n,t._reject=o})}return Object.defineProperty(e.prototype,"promise",{get:function(){return this._promise},enumerable:!1,configurable:!0}),e.prototype.resolve=function(t){this._resolve(t)},e.prototype.reject=function(t){this._reject(t)},e}(),ey=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l},ty=function(e,t,n){if(n||arguments.length===2)for(var o=0,s=t.length,l;o<s;o++)(l||!(o in t))&&(l||(l=Array.prototype.slice.call(t,0,o)),l[o]=t[o]);return e.concat(l||Array.prototype.slice.call(t))},li=function(){function e(t,n){this._callback=t,this._that=n,this._isCalled=!1,this._deferred=new qb}return Object.defineProperty(e.prototype,"isCalled",{get:function(){return this._isCalled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this._deferred.promise},enumerable:!1,configurable:!0}),e.prototype.call=function(){for(var t,n=this,o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];if(!this._isCalled){this._isCalled=!0;try{Promise.resolve((t=this._callback).call.apply(t,ty([this._that],ey(o),!1))).then(function(l){return n._deferred.resolve(l)},function(l){return n._deferred.reject(l)})}catch(l){this._deferred.reject(l)}}return this._deferred.promise},e}();function ny(e,t){return new Promise(function(n){Te.with(Mo(Te.active()),function(){e.export(t,function(o){n(o)})})})}var Pl={_export:ny};const ry=Object.freeze(Object.defineProperty({__proto__:null,AlwaysOffSampler:ns,AlwaysOnSampler:oi,AnchoredClock:qh,BindOnceFuture:li,CompositePropagator:Qo,DEFAULT_ATTRIBUTE_COUNT_LIMIT:sr,DEFAULT_ATTRIBUTE_VALUE_LENGTH_LIMIT:or,DEFAULT_ENVIRONMENT:Ko,DEFAULT_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT:dl,DEFAULT_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT:pl,get ExportResultCode(){return Ot},ParentBasedSampler:Xb,get RPCType(){return ts},RandomIdGenerator:_m,SDK_INFO:ei,TRACE_PARENT_HEADER:lr,TRACE_STATE_HEADER:ii,TimeoutError:Xl,TraceIdRatioBasedSampler:Pb,TraceState:El,get TracesSamplerValues(){return yt},VERSION:bl,W3CBaggagePropagator:Yo,W3CTraceContextPropagator:qo,_globalThis:Tn,addHrTimes:jo,baggageUtils:$h,callWithTimeout:jb,deleteRPCMetadata:Gb,getEnv:Ve,getEnvWithoutDefaults:hl,getRPCMetadata:Vb,getTimeOrigin:ni,globalErrorHandler:Pt,hexToBase64:gm,hexToBinary:ar,hrTime:en,hrTimeDuration:gl,hrTimeToMicroseconds:Bo,hrTimeToMilliseconds:fb,hrTimeToNanoseconds:Ct,hrTimeToTimeStamp:mb,internal:Pl,isAttributeKey:al,isAttributeValue:Ho,isTimeInput:zo,isTimeInputHrTime:ri,isTracingSuppressed:jr,isUrlIgnored:os,isWrapped:$b,loggingErrorHandler:cl,merge:wl,millisToHrTime:Zt,otperformance:lt,parseEnvironment:$r,parseTraceParent:Il,sanitizeAttributes:ir,setGlobalErrorHandler:im,setRPCMetadata:Lb,suppressTracing:Mo,timeInputToHrTime:_n,unrefTimer:db,unsuppressTracing:Kh,urlMatches:is},Symbol.toStringTag,{value:"Module"}));function iy(e){for(var t={},n=e.length,o=0;o<n;o++){var s=e[o];s&&(t[String(s).toUpperCase().replace(/[-.]/g,"_")]=s)}return t}var oy="aws.lambda.invoked_arn",sy="db.system",ay="db.connection_string",ly="db.user",cy="db.jdbc.driver_classname",uy="db.name",dy="db.statement",py="db.operation",hy="db.mssql.instance_name",my="db.cassandra.keyspace",fy="db.cassandra.page_size",by="db.cassandra.consistency_level",yy="db.cassandra.table",Sy="db.cassandra.idempotence",gy="db.cassandra.speculative_execution_count",Ty="db.cassandra.coordinator.id",vy="db.cassandra.coordinator.dc",_y="db.hbase.namespace",Ey="db.redis.database_index",Iy="db.mongodb.collection",Ry="db.sql.table",Ny="exception.type",Zy="exception.message",Cy="exception.stacktrace",Oy="exception.escaped",wy="faas.trigger",Ly="faas.execution",Gy="faas.document.collection",Vy="faas.document.operation",Xy="faas.document.time",Py="faas.document.name",Wy="faas.time",ky="faas.cron",Ay="faas.coldstart",My="faas.invoked_name",xy="faas.invoked_provider",Uy="faas.invoked_region",Dy="net.transport",Fy="net.peer.ip",Yy="net.peer.port",Hy="net.peer.name",Ky="net.host.ip",Jy="net.host.port",By="net.host.name",zy="net.host.connection.type",jy="net.host.connection.subtype",Qy="net.host.carrier.name",$y="net.host.carrier.mcc",qy="net.host.carrier.mnc",eS="net.host.carrier.icc",tS="peer.service",nS="enduser.id",rS="enduser.role",iS="enduser.scope",oS="thread.id",sS="thread.name",aS="code.function",lS="code.namespace",cS="code.filepath",uS="code.lineno",dS="http.method",pS="http.url",hS="http.target",mS="http.host",fS="http.scheme",bS="http.status_code",yS="http.flavor",SS="http.user_agent",gS="http.request_content_length",TS="http.request_content_length_uncompressed",vS="http.response_content_length",_S="http.response_content_length_uncompressed",ES="http.server_name",IS="http.route",RS="http.client_ip",NS="aws.dynamodb.table_names",ZS="aws.dynamodb.consumed_capacity",CS="aws.dynamodb.item_collection_metrics",OS="aws.dynamodb.provisioned_read_capacity",wS="aws.dynamodb.provisioned_write_capacity",LS="aws.dynamodb.consistent_read",GS="aws.dynamodb.projection",VS="aws.dynamodb.limit",XS="aws.dynamodb.attributes_to_get",PS="aws.dynamodb.index_name",WS="aws.dynamodb.select",kS="aws.dynamodb.global_secondary_indexes",AS="aws.dynamodb.local_secondary_indexes",MS="aws.dynamodb.exclusive_start_table",xS="aws.dynamodb.table_count",US="aws.dynamodb.scan_forward",DS="aws.dynamodb.segment",FS="aws.dynamodb.total_segments",YS="aws.dynamodb.count",HS="aws.dynamodb.scanned_count",KS="aws.dynamodb.attribute_definitions",JS="aws.dynamodb.global_secondary_index_updates",BS="messaging.system",zS="messaging.destination",jS="messaging.destination_kind",QS="messaging.temp_destination",$S="messaging.protocol",qS="messaging.protocol_version",eg="messaging.url",tg="messaging.message_id",ng="messaging.conversation_id",rg="messaging.message_payload_size_bytes",ig="messaging.message_payload_compressed_size_bytes",og="messaging.operation",sg="messaging.consumer_id",ag="messaging.rabbitmq.routing_key",lg="messaging.kafka.message_key",cg="messaging.kafka.consumer_group",ug="messaging.kafka.client_id",dg="messaging.kafka.partition",pg="messaging.kafka.tombstone",hg="rpc.system",mg="rpc.service",fg="rpc.method",bg="rpc.grpc.status_code",yg="rpc.jsonrpc.version",Sg="rpc.jsonrpc.request_id",gg="rpc.jsonrpc.error_code",Tg="rpc.jsonrpc.error_message",vg="message.type",_g="message.id",Eg="message.compressed_size",Ig="message.uncompressed_size",Wt=iy([oy,sy,ay,ly,cy,uy,dy,py,hy,my,fy,by,yy,Sy,gy,Ty,vy,_y,Ey,Iy,Ry,Ny,Zy,Cy,Oy,wy,Ly,Gy,Vy,Xy,Py,Wy,ky,Ay,My,xy,Uy,Dy,Fy,Yy,Hy,Ky,Jy,By,zy,jy,Qy,$y,qy,eS,tS,nS,rS,iS,oS,sS,aS,lS,cS,uS,dS,pS,hS,mS,fS,bS,yS,SS,gS,TS,vS,_S,ES,IS,RS,NS,ZS,CS,OS,wS,LS,GS,VS,XS,PS,WS,kS,AS,MS,xS,US,DS,FS,YS,HS,KS,JS,BS,zS,jS,QS,$S,qS,eg,tg,ng,rg,ig,og,sg,ag,lg,cg,ug,dg,pg,hg,mg,fg,bg,yg,Sg,gg,Tg,vg,_g,Eg,Ig]),Rg="exception",Ng=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Zg=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l},Cg=function(){function e(t,n,o,s,l,d,h,b,g,S){h===void 0&&(h=[]),this.attributes={},this.links=[],this.events=[],this._droppedAttributesCount=0,this._droppedEventsCount=0,this._droppedLinksCount=0,this.status={code:Br.UNSET},this.endTime=[0,0],this._ended=!1,this._duration=[-1,-1],this.name=o,this._spanContext=s,this.parentSpanId=d,this.kind=l,this.links=h;var _=Date.now();this._performanceStartTime=lt.now(),this._performanceOffset=_-(this._performanceStartTime+ni()),this._startTimeProvided=b!=null,this.startTime=this._getTime(b!=null?b:_),this.resource=t.resource,this.instrumentationLibrary=t.instrumentationLibrary,this._spanLimits=t.getSpanLimits(),this._attributeValueLengthLimit=this._spanLimits.attributeValueLengthLimit||0,S!=null&&this.setAttributes(S),this._spanProcessor=t.getActiveSpanProcessor(),this._spanProcessor.onStart(this,n)}return e.prototype.spanContext=function(){return this._spanContext},e.prototype.setAttribute=function(t,n){return n==null||this._isSpanEnded()?this:t.length===0?(de.warn("Invalid attribute key: "+t),this):Ho(n)?Object.keys(this.attributes).length>=this._spanLimits.attributeCountLimit&&!Object.prototype.hasOwnProperty.call(this.attributes,t)?(this._droppedAttributesCount++,this):(this.attributes[t]=this._truncateToSize(n),this):(de.warn("Invalid attribute value set for key: "+t),this)},e.prototype.setAttributes=function(t){var n,o;try{for(var s=Ng(Object.entries(t)),l=s.next();!l.done;l=s.next()){var d=Zg(l.value,2),h=d[0],b=d[1];this.setAttribute(h,b)}}catch(g){n={error:g}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return this},e.prototype.addEvent=function(t,n,o){if(this._isSpanEnded())return this;if(this._spanLimits.eventCountLimit===0)return de.warn("No events allowed."),this._droppedEventsCount++,this;this.events.length>=this._spanLimits.eventCountLimit&&(this._droppedEventsCount===0&&de.debug("Dropping extra events."),this.events.shift(),this._droppedEventsCount++),zo(n)&&(zo(o)||(o=n),n=void 0);var s=ir(n);return this.events.push({name:t,attributes:s,time:this._getTime(o),droppedAttributesCount:0}),this},e.prototype.setStatus=function(t){return this._isSpanEnded()?this:(this.status=t,this)},e.prototype.updateName=function(t){return this._isSpanEnded()?this:(this.name=t,this)},e.prototype.end=function(t){if(this._isSpanEnded()){de.error(this.name+" "+this._spanContext.traceId+"-"+this._spanContext.spanId+" - You can only call end() on a span once.");return}this._ended=!0,this.endTime=this._getTime(t),this._duration=gl(this.startTime,this.endTime),this._duration[0]<0&&(de.warn("Inconsistent start and end time, startTime > endTime. Setting span duration to 0ms.",this.startTime,this.endTime),this.endTime=this.startTime.slice(),this._duration=[0,0]),this._droppedEventsCount>0&&de.warn("Dropped "+this._droppedEventsCount+" events because eventCountLimit reached"),this._spanProcessor.onEnd(this)},e.prototype._getTime=function(t){if(typeof t=="number"&&t<lt.now())return en(t+this._performanceOffset);if(typeof t=="number")return Zt(t);if(t instanceof Date)return Zt(t.getTime());if(ri(t))return t;if(this._startTimeProvided)return Zt(Date.now());var n=lt.now()-this._performanceStartTime;return jo(this.startTime,Zt(n))},e.prototype.isRecording=function(){return this._ended===!1},e.prototype.recordException=function(t,n){var o={};typeof t=="string"?o[Wt.EXCEPTION_MESSAGE]=t:t&&(t.code?o[Wt.EXCEPTION_TYPE]=t.code.toString():t.name&&(o[Wt.EXCEPTION_TYPE]=t.name),t.message&&(o[Wt.EXCEPTION_MESSAGE]=t.message),t.stack&&(o[Wt.EXCEPTION_STACKTRACE]=t.stack)),o[Wt.EXCEPTION_TYPE]||o[Wt.EXCEPTION_MESSAGE]?this.addEvent(Rg,o,n):de.warn("Failed to record an exception "+t)},Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this._ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedAttributesCount",{get:function(){return this._droppedAttributesCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedEventsCount",{get:function(){return this._droppedEventsCount},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"droppedLinksCount",{get:function(){return this._droppedLinksCount},enumerable:!1,configurable:!0}),e.prototype._isSpanEnded=function(){return this._ended&&de.warn("Can not execute the operation on ended Span {traceId: "+this._spanContext.traceId+", spanId: "+this._spanContext.spanId+"}"),this._ended},e.prototype._truncateToLimitUtil=function(t,n){return t.length<=n?t:t.substr(0,n)},e.prototype._truncateToSize=function(t){var n=this,o=this._attributeValueLengthLimit;return o<=0?(de.warn("Attribute value limit must be positive, got "+o),t):typeof t=="string"?this._truncateToLimitUtil(t,o):Array.isArray(t)?t.map(function(s){return typeof s=="string"?n._truncateToLimitUtil(s,o):s}):t},e}(),En;(function(e){e[e.NOT_RECORD=0]="NOT_RECORD",e[e.RECORD=1]="RECORD",e[e.RECORD_AND_SAMPLED=2]="RECORD_AND_SAMPLED"})(En||(En={}));var ci=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:En.NOT_RECORD}},e.prototype.toString=function(){return"AlwaysOffSampler"},e}(),In=function(){function e(){}return e.prototype.shouldSample=function(){return{decision:En.RECORD_AND_SAMPLED}},e.prototype.toString=function(){return"AlwaysOnSampler"},e}(),ss=function(){function e(t){var n,o,s,l;this._root=t.root,this._root||(Pt(new Error("ParentBasedSampler must have a root sampler configured")),this._root=new In),this._remoteParentSampled=(n=t.remoteParentSampled)!==null&&n!==void 0?n:new In,this._remoteParentNotSampled=(o=t.remoteParentNotSampled)!==null&&o!==void 0?o:new ci,this._localParentSampled=(s=t.localParentSampled)!==null&&s!==void 0?s:new In,this._localParentNotSampled=(l=t.localParentNotSampled)!==null&&l!==void 0?l:new ci}return e.prototype.shouldSample=function(t,n,o,s,l,d){var h=we.getSpanContext(t);return!h||!Sn(h)?this._root.shouldSample(t,n,o,s,l,d):h.isRemote?h.traceFlags&at.SAMPLED?this._remoteParentSampled.shouldSample(t,n,o,s,l,d):this._remoteParentNotSampled.shouldSample(t,n,o,s,l,d):h.traceFlags&at.SAMPLED?this._localParentSampled.shouldSample(t,n,o,s,l,d):this._localParentNotSampled.shouldSample(t,n,o,s,l,d)},e.prototype.toString=function(){return"ParentBased{root="+this._root.toString()+", remoteParentSampled="+this._remoteParentSampled.toString()+", remoteParentNotSampled="+this._remoteParentNotSampled.toString()+", localParentSampled="+this._localParentSampled.toString()+", localParentNotSampled="+this._localParentNotSampled.toString()+"}"},e}(),Wl=function(){function e(t){t===void 0&&(t=0),this._ratio=t,this._ratio=this._normalize(t),this._upperBound=Math.floor(this._ratio*4294967295)}return e.prototype.shouldSample=function(t,n){return{decision:Jr(n)&&this._accumulate(n)<this._upperBound?En.RECORD_AND_SAMPLED:En.NOT_RECORD}},e.prototype.toString=function(){return"TraceIdRatioBased{"+this._ratio+"}"},e.prototype._normalize=function(t){return typeof t!="number"||isNaN(t)?0:t>=1?1:t<=0?0:t},e.prototype._accumulate=function(t){for(var n=0,o=0;o<t.length/8;o++){var s=o*8,l=parseInt(t.slice(s,s+8),16);n=(n^l)>>>0}return n},e}(),Og=Ve(),wg=yt.AlwaysOn,Rn=1;function kl(){return{sampler:Al(Og),forceFlushTimeoutMillis:3e4,generalLimits:{attributeValueLengthLimit:Ve().OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:Ve().OTEL_ATTRIBUTE_COUNT_LIMIT},spanLimits:{attributeValueLengthLimit:Ve().OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT,attributeCountLimit:Ve().OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT,linkCountLimit:Ve().OTEL_SPAN_LINK_COUNT_LIMIT,eventCountLimit:Ve().OTEL_SPAN_EVENT_COUNT_LIMIT,attributePerEventCountLimit:Ve().OTEL_SPAN_ATTRIBUTE_PER_EVENT_COUNT_LIMIT,attributePerLinkCountLimit:Ve().OTEL_SPAN_ATTRIBUTE_PER_LINK_COUNT_LIMIT}}}function Al(e){switch(e===void 0&&(e=Ve()),e.OTEL_TRACES_SAMPLER){case yt.AlwaysOn:return new In;case yt.AlwaysOff:return new ci;case yt.ParentBasedAlwaysOn:return new ss({root:new In});case yt.ParentBasedAlwaysOff:return new ss({root:new ci});case yt.TraceIdRatio:return new Wl(Ml(e));case yt.ParentBasedTraceIdRatio:return new ss({root:new Wl(Ml(e))});default:return de.error('OTEL_TRACES_SAMPLER value "'+e.OTEL_TRACES_SAMPLER+" invalid, defaulting to "+wg+'".'),new In}}function Ml(e){if(e.OTEL_TRACES_SAMPLER_ARG===void 0||e.OTEL_TRACES_SAMPLER_ARG==="")return de.error("OTEL_TRACES_SAMPLER_ARG is blank, defaulting to "+Rn+"."),Rn;var t=Number(e.OTEL_TRACES_SAMPLER_ARG);return isNaN(t)?(de.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is invalid, defaulting to "+Rn+"."),Rn):t<0||t>1?(de.error("OTEL_TRACES_SAMPLER_ARG="+e.OTEL_TRACES_SAMPLER_ARG+" was given, but it is out of range ([0..1]), defaulting to "+Rn+"."),Rn):t}function Lg(e){var t={sampler:Al()},n=kl(),o=Object.assign({},n,t,e);return o.generalLimits=Object.assign({},n.generalLimits,e.generalLimits||{}),o.spanLimits=Object.assign({},n.spanLimits,e.spanLimits||{}),o}function Gg(e){var t,n,o,s,l,d,h,b,g,S,_,N,R=Object.assign({},e.spanLimits),G=hl();return R.attributeCountLimit=(d=(l=(s=(n=(t=e.spanLimits)===null||t===void 0?void 0:t.attributeCountLimit)!==null&&n!==void 0?n:(o=e.generalLimits)===null||o===void 0?void 0:o.attributeCountLimit)!==null&&s!==void 0?s:G.OTEL_SPAN_ATTRIBUTE_COUNT_LIMIT)!==null&&l!==void 0?l:G.OTEL_ATTRIBUTE_COUNT_LIMIT)!==null&&d!==void 0?d:sr,R.attributeValueLengthLimit=(N=(_=(S=(b=(h=e.spanLimits)===null||h===void 0?void 0:h.attributeValueLengthLimit)!==null&&b!==void 0?b:(g=e.generalLimits)===null||g===void 0?void 0:g.attributeValueLengthLimit)!==null&&S!==void 0?S:G.OTEL_SPAN_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&_!==void 0?_:G.OTEL_ATTRIBUTE_VALUE_LENGTH_LIMIT)!==null&&N!==void 0?N:or,Object.assign({},e,{spanLimits:R})}var Vg=function(){function e(t,n){this._exporter=t,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;var o=Ve();this._maxExportBatchSize=typeof(n==null?void 0:n.maxExportBatchSize)=="number"?n.maxExportBatchSize:o.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(n==null?void 0:n.maxQueueSize)=="number"?n.maxQueueSize:o.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(n==null?void 0:n.scheduledDelayMillis)=="number"?n.scheduledDelayMillis:o.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(n==null?void 0:n.exportTimeoutMillis)=="number"?n.exportTimeoutMillis:o.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new li(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(de.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}return e.prototype.forceFlush=function(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()},e.prototype.onStart=function(t,n){},e.prototype.onEnd=function(t){this._shutdownOnce.isCalled||t.spanContext().traceFlags&at.SAMPLED&&this._addToBuffer(t)},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){var t=this;return Promise.resolve().then(function(){return t.onShutdown()}).then(function(){return t._flushAll()}).then(function(){return t._exporter.shutdown()})},e.prototype._addToBuffer=function(t){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&de.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(de.warn("Dropped "+this._droppedSpansCount+" spans because maxQueueSize reached"),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()},e.prototype._flushAll=function(){var t=this;return new Promise(function(n,o){for(var s=[],l=Math.ceil(t._finishedSpans.length/t._maxExportBatchSize),d=0,h=l;d<h;d++)s.push(t._flushOneBatch());Promise.all(s).then(function(){n()}).catch(o)})},e.prototype._flushOneBatch=function(){var t=this;return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise(function(n,o){var s=setTimeout(function(){o(new Error("Timeout"))},t._exportTimeoutMillis);Te.with(Mo(Te.active()),function(){var l;t._finishedSpans.length<=t._maxExportBatchSize?(l=t._finishedSpans,t._finishedSpans=[]):l=t._finishedSpans.splice(0,t._maxExportBatchSize);for(var d=function(){return t._exporter.export(l,function(_){var N;clearTimeout(s),_.code===Ot.SUCCESS?n():o((N=_.error)!==null&&N!==void 0?N:new Error("BatchSpanProcessor: span export failed"))})},h=null,b=0,g=l.length;b<g;b++){var S=l[b];S.resource.asyncAttributesPending&&S.resource.waitForAsyncAttributes&&(h!=null||(h=[]),h.push(S.resource.waitForAsyncAttributes()))}h===null?d():Promise.all(h).then(d,function(_){Pt(_),o(_)})})})},e.prototype._maybeStartTimer=function(){var t=this;if(!this._isExporting){var n=function(){t._isExporting=!0,t._flushOneBatch().finally(function(){t._isExporting=!1,t._finishedSpans.length>0&&(t._clearTimer(),t._maybeStartTimer())}).catch(function(o){t._isExporting=!1,Pt(o)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return n();this._timer===void 0&&(this._timer=setTimeout(function(){return n()},this._scheduledDelayMillis))}},e.prototype._clearTimer=function(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)},e}(),Xg=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),xl=function(e){Xg(t,e);function t(n,o){var s=e.call(this,n,o)||this;return s.onInit(o),s}return t.prototype.onInit=function(n){var o=this;(n==null?void 0:n.disableAutoFlushOnDocumentHide)!==!0&&typeof document!="undefined"&&(this._visibilityChangeListener=function(){document.visibilityState==="hidden"&&o.forceFlush()},this._pageHideListener=function(){o.forceFlush()},document.addEventListener("visibilitychange",this._visibilityChangeListener),document.addEventListener("pagehide",this._pageHideListener))},t.prototype.onShutdown=function(){typeof document!="undefined"&&(this._visibilityChangeListener&&document.removeEventListener("visibilitychange",this._visibilityChangeListener),this._pageHideListener&&document.removeEventListener("pagehide",this._pageHideListener))},t}(Vg),Pg=8,Wg=16,kg=function(){function e(){this.generateTraceId=Ul(Wg),this.generateSpanId=Ul(Pg)}return e}(),ui=Array(32);function Ul(e){return function(){for(var n=0;n<e*2;n++)ui[n]=Math.floor(Math.random()*16)+48,ui[n]>=58&&(ui[n]+=39);return String.fromCharCode.apply(null,ui.slice(0,e*2))}}var Ag=function(){function e(t,n,o){this._tracerProvider=o;var s=Lg(n);this._sampler=s.sampler,this._generalLimits=s.generalLimits,this._spanLimits=s.spanLimits,this._idGenerator=n.idGenerator||new kg,this.resource=o.resource,this.instrumentationLibrary=t}return e.prototype.startSpan=function(t,n,o){var s,l,d;n===void 0&&(n={}),o===void 0&&(o=Te.active()),n.root&&(o=we.deleteSpan(o));var h=we.getSpan(o);if(jr(o)){de.debug("Instrumentation suppressed, returning Noop Span");var b=we.wrapSpanContext(Zo);return b}var g=h==null?void 0:h.spanContext(),S=this._idGenerator.generateSpanId(),_,N,R;!g||!we.isSpanContextValid(g)?_=this._idGenerator.generateTraceId():(_=g.traceId,N=g.traceState,R=g.spanId);var G=(s=n.kind)!==null&&s!==void 0?s:gn.INTERNAL,w=((l=n.links)!==null&&l!==void 0?l:[]).map(function(it){return{context:it.context,attributes:ir(it.attributes)}}),z=ir(n.attributes),re=this._sampler.shouldSample(o,_,t,G,z,w);N=(d=re.traceState)!==null&&d!==void 0?d:N;var x=re.decision===Xt.RECORD_AND_SAMPLED?at.SAMPLED:at.NONE,Xe={traceId:_,spanId:S,traceFlags:x,traceState:N};if(re.decision===Xt.NOT_RECORD){de.debug("Recording is off, propagating context in a non-recording span");var b=we.wrapSpanContext(Xe);return b}var Me=ir(Object.assign(z,re.attributes)),Ie=new Cg(this,o,t,Xe,G,R,w,n.startTime,void 0,Me);return Ie},e.prototype.startActiveSpan=function(t,n,o,s){var l,d,h;if(!(arguments.length<2)){arguments.length===2?h=n:arguments.length===3?(l=n,h=o):(l=n,d=o,h=s);var b=d!=null?d:Te.active(),g=this.startSpan(t,l,b),S=we.setSpan(b,g);return Te.with(S,h,void 0,g)}},e.prototype.getGeneralLimits=function(){return this._generalLimits},e.prototype.getSpanLimits=function(){return this._spanLimits},e.prototype.getActiveSpanProcessor=function(){return this._tracerProvider.getActiveSpanProcessor()},e}();function Mg(){return"unknown_service"}var Ht=function(){return Ht=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ht.apply(this,arguments)},xg=function(e,t,n,o){function s(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function h(S){try{g(o.next(S))}catch(_){d(_)}}function b(S){try{g(o.throw(S))}catch(_){d(_)}}function g(S){S.done?l(S.value):s(S.value).then(h,b)}g((o=o.apply(e,t||[])).next())})},Ug=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},o,s,l,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(g){return function(S){return b([g,S])}}function b(g){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,s&&(l=g[0]&2?s.return:g[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,g[1])).done)return l;switch(s=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,s=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(S){g=[6,S],s=0}finally{o=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},Dg=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l},as=function(){function e(t,n){var o=this,s;this._attributes=t,this.asyncAttributesPending=n!=null,this._syncAttributes=(s=this._attributes)!==null&&s!==void 0?s:{},this._asyncAttributesPromise=n==null?void 0:n.then(function(l){return o._attributes=Object.assign({},o._attributes,l),o.asyncAttributesPending=!1,l},function(l){return de.debug("a resource's async attributes promise rejected: %s",l),o.asyncAttributesPending=!1,{}})}return e.empty=function(){return e.EMPTY},e.default=function(){var t;return new e((t={},t[St.SERVICE_NAME]=Mg(),t[St.TELEMETRY_SDK_LANGUAGE]=ei[St.TELEMETRY_SDK_LANGUAGE],t[St.TELEMETRY_SDK_NAME]=ei[St.TELEMETRY_SDK_NAME],t[St.TELEMETRY_SDK_VERSION]=ei[St.TELEMETRY_SDK_VERSION],t))},Object.defineProperty(e.prototype,"attributes",{get:function(){var t;return this.asyncAttributesPending&&de.error("Accessing resource attributes before async attributes settled"),(t=this._attributes)!==null&&t!==void 0?t:{}},enumerable:!1,configurable:!0}),e.prototype.waitForAsyncAttributes=function(){return xg(this,void 0,void 0,function(){return Ug(this,function(t){switch(t.label){case 0:return this.asyncAttributesPending?[4,this._asyncAttributesPromise]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.merge=function(t){var n=this,o;if(!t)return this;var s=Ht(Ht({},this._syncAttributes),(o=t._syncAttributes)!==null&&o!==void 0?o:t.attributes);if(!this._asyncAttributesPromise&&!t._asyncAttributesPromise)return new e(s);var l=Promise.all([this._asyncAttributesPromise,t._asyncAttributesPromise]).then(function(d){var h,b=Dg(d,2),g=b[0],S=b[1];return Ht(Ht(Ht(Ht({},n._syncAttributes),g),(h=t._syncAttributes)!==null&&h!==void 0?h:t.attributes),S)});return new e(s,l)},e.EMPTY=new e({}),e}(),di=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Fg=function(){function e(t){this._spanProcessors=t}return e.prototype.forceFlush=function(){var t,n,o=[];try{for(var s=di(this._spanProcessors),l=s.next();!l.done;l=s.next()){var d=l.value;o.push(d.forceFlush())}}catch(h){t={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return new Promise(function(h){Promise.all(o).then(function(){h()}).catch(function(b){Pt(b||new Error("MultiSpanProcessor: forceFlush failed")),h()})})},e.prototype.onStart=function(t,n){var o,s;try{for(var l=di(this._spanProcessors),d=l.next();!d.done;d=l.next()){var h=d.value;h.onStart(t,n)}}catch(b){o={error:b}}finally{try{d&&!d.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}},e.prototype.onEnd=function(t){var n,o;try{for(var s=di(this._spanProcessors),l=s.next();!l.done;l=s.next()){var d=l.value;d.onEnd(t)}}catch(h){n={error:h}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}},e.prototype.shutdown=function(){var t,n,o=[];try{for(var s=di(this._spanProcessors),l=s.next();!l.done;l=s.next()){var d=l.value;o.push(d.shutdown())}}catch(h){t={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return new Promise(function(h,b){Promise.all(o).then(function(){h()},b)})},e}(),Yg=function(){function e(){}return e.prototype.onStart=function(t,n){},e.prototype.onEnd=function(t){},e.prototype.shutdown=function(){return Promise.resolve()},e.prototype.forceFlush=function(){return Promise.resolve()},e}(),nn;(function(e){e[e.resolved=0]="resolved",e[e.timeout=1]="timeout",e[e.error=2]="error",e[e.unresolved=3]="unresolved"})(nn||(nn={}));var Hg=function(){function e(t){t===void 0&&(t={});var n;this._registeredSpanProcessors=[],this._tracers=new Map;var o=wl({},kl(),Gg(t));this.resource=(n=o.resource)!==null&&n!==void 0?n:as.empty(),this.resource=as.default().merge(this.resource),this._config=Object.assign({},o,{resource:this.resource});var s=this._buildExporterFromEnv();if(s!==void 0){var l=new xl(s);this.activeSpanProcessor=l}else this.activeSpanProcessor=new Yg}return e.prototype.getTracer=function(t,n,o){var s=t+"@"+(n||"")+":"+((o==null?void 0:o.schemaUrl)||"");return this._tracers.has(s)||this._tracers.set(s,new Ag({name:t,version:n,schemaUrl:o==null?void 0:o.schemaUrl},this._config,this)),this._tracers.get(s)},e.prototype.addSpanProcessor=function(t){this._registeredSpanProcessors.length===0&&this.activeSpanProcessor.shutdown().catch(function(n){return de.error("Error while trying to shutdown current span processor",n)}),this._registeredSpanProcessors.push(t),this.activeSpanProcessor=new Fg(this._registeredSpanProcessors)},e.prototype.getActiveSpanProcessor=function(){return this.activeSpanProcessor},e.prototype.register=function(t){t===void 0&&(t={}),we.setGlobalTracerProvider(this),t.propagator===void 0&&(t.propagator=this._buildPropagatorFromEnv()),t.contextManager&&Te.setGlobalContextManager(t.contextManager),t.propagator&&rt.setGlobalPropagator(t.propagator)},e.prototype.forceFlush=function(){var t=this._config.forceFlushTimeoutMillis,n=this._registeredSpanProcessors.map(function(o){return new Promise(function(s){var l,d=setTimeout(function(){s(new Error("Span processor did not completed within timeout period of "+t+" ms")),l=nn.timeout},t);o.forceFlush().then(function(){clearTimeout(d),l!==nn.timeout&&(l=nn.resolved,s(l))}).catch(function(h){clearTimeout(d),l=nn.error,s(h)})})});return new Promise(function(o,s){Promise.all(n).then(function(l){var d=l.filter(function(h){return h!==nn.resolved});d.length>0?s(d):o()}).catch(function(l){return s([l])})})},e.prototype.shutdown=function(){return this.activeSpanProcessor.shutdown()},e.prototype._getPropagator=function(t){var n;return(n=this.constructor._registeredPropagators.get(t))===null||n===void 0?void 0:n()},e.prototype._getSpanExporter=function(t){var n;return(n=this.constructor._registeredExporters.get(t))===null||n===void 0?void 0:n()},e.prototype._buildPropagatorFromEnv=function(){var t=this,n=Array.from(new Set(Ve().OTEL_PROPAGATORS)),o=n.map(function(l){var d=t._getPropagator(l);return d||de.warn('Propagator "'+l+'" requested through environment variable is unavailable.'),d}),s=o.reduce(function(l,d){return d&&l.push(d),l},[]);if(s.length!==0)return n.length===1?s[0]:new Qo({propagators:s})},e.prototype._buildExporterFromEnv=function(){var t=Ve().OTEL_TRACES_EXPORTER;if(!(t==="none"||t==="")){var n=this._getSpanExporter(t);return n||de.error('Exporter "'+t+'" requested through environment variable is unavailable.'),n}},e._registeredPropagators=new Map([["tracecontext",function(){return new qo}],["baggage",function(){return new Yo}]]),e._registeredExporters=new Map,e}(),Kg=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},Jg=function(){function e(){}return e.prototype.export=function(t,n){return this._sendSpans(t,n)},e.prototype.shutdown=function(){return this._sendSpans([]),this.forceFlush()},e.prototype.forceFlush=function(){return Promise.resolve()},e.prototype._exportInfo=function(t){var n;return{resource:{attributes:t.resource.attributes},traceId:t.spanContext().traceId,parentId:t.parentSpanId,traceState:(n=t.spanContext().traceState)===null||n===void 0?void 0:n.serialize(),name:t.name,id:t.spanContext().spanId,kind:t.kind,timestamp:Bo(t.startTime),duration:Bo(t.duration),attributes:t.attributes,status:t.status,events:t.events,links:t.links}},e.prototype._sendSpans=function(t,n){var o,s;try{for(var l=Kg(t),d=l.next();!d.done;d=l.next()){var h=d.value;console.dir(this._exportInfo(h),{depth:3})}}catch(b){o={error:b}}finally{try{d&&!d.done&&(s=l.return)&&s.call(l)}finally{if(o)throw o.error}}if(n)return n({code:Ot.SUCCESS})},e}(),Bg=function(e,t,n,o){function s(l){return l instanceof n?l:new n(function(d){d(l)})}return new(n||(n=Promise))(function(l,d){function h(S){try{g(o.next(S))}catch(_){d(_)}}function b(S){try{g(o.throw(S))}catch(_){d(_)}}function g(S){S.done?l(S.value):s(S.value).then(h,b)}g((o=o.apply(e,t||[])).next())})},zg=function(e,t){var n={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},o,s,l,d;return d={next:h(0),throw:h(1),return:h(2)},typeof Symbol=="function"&&(d[Symbol.iterator]=function(){return this}),d;function h(g){return function(S){return b([g,S])}}function b(g){if(o)throw new TypeError("Generator is already executing.");for(;n;)try{if(o=1,s&&(l=g[0]&2?s.return:g[0]?s.throw||((l=s.return)&&l.call(s),0):s.next)&&!(l=l.call(s,g[1])).done)return l;switch(s=0,l&&(g=[g[0]&2,l.value]),g[0]){case 0:case 1:l=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,s=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(l=n.trys,!(l=l.length>0&&l[l.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!l||g[1]>l[0]&&g[1]<l[3])){n.label=g[1];break}if(g[0]===6&&n.label<l[1]){n.label=l[1],l=g;break}if(l&&n.label<l[2]){n.label=l[2],n.ops.push(g);break}l[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(S){g=[6,S],s=0}finally{o=l=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}},jg=function(){function e(t){this._exporter=t,this._shutdownOnce=new li(this._shutdown,this),this._unresolvedExports=new Set}return e.prototype.forceFlush=function(){return Bg(this,void 0,void 0,function(){return zg(this,function(t){switch(t.label){case 0:return[4,Promise.all(Array.from(this._unresolvedExports))];case 1:return t.sent(),this._exporter.forceFlush?[4,this._exporter.forceFlush()]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},e.prototype.onStart=function(t,n){},e.prototype.onEnd=function(t){var n=this,o,s;if(!this._shutdownOnce.isCalled&&t.spanContext().traceFlags&at.SAMPLED){var l=function(){return Pl._export(n._exporter,[t]).then(function(h){var b;h.code!==Ot.SUCCESS&&Pt((b=h.error)!==null&&b!==void 0?b:new Error("SimpleSpanProcessor: span export failed (status "+h+")"))}).catch(function(h){Pt(h)})};if(t.resource.asyncAttributesPending){var d=(s=(o=t.resource).waitForAsyncAttributes)===null||s===void 0?void 0:s.call(o).then(function(){return d!=null&&n._unresolvedExports.delete(d),l()},function(h){return Pt(h)});d!=null&&this._unresolvedExports.add(d)}else l()}},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype._shutdown=function(){return this._exporter.shutdown()},e}(),Qg=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l},$g=function(e,t,n){if(n||arguments.length===2)for(var o=0,s=t.length,l;o<s;o++)(l||!(o in t))&&(l||(l=Array.prototype.slice.call(t,0,o)),l[o]=t[o]);return e.concat(l||Array.prototype.slice.call(t))},qg=function(){function e(){this._enabled=!1,this._currentContext=bt}return e.prototype._bindFunction=function(t,n){t===void 0&&(t=bt);var o=this,s=function(){for(var l=this,d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];return o.with(t,function(){return n.apply(l,d)})};return Object.defineProperty(s,"length",{enumerable:!1,configurable:!0,writable:!1,value:n.length}),s},e.prototype.active=function(){return this._currentContext},e.prototype.bind=function(t,n){return t===void 0&&(t=this.active()),typeof n=="function"?this._bindFunction(t,n):n},e.prototype.disable=function(){return this._currentContext=bt,this._enabled=!1,this},e.prototype.enable=function(){return this._enabled?this:(this._enabled=!0,this._currentContext=bt,this)},e.prototype.with=function(t,n,o){for(var s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];var d=this._currentContext;this._currentContext=t||bt;try{return n.call.apply(n,$g([o],Qg(s),!1))}finally{this._currentContext=d}},e}(),eT=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),tT=function(e){eT(t,e);function t(n){n===void 0&&(n={});var o=e.call(this,n)||this;if(n.contextManager)throw"contextManager should be defined in register method not in constructor";if(n.propagator)throw"propagator should be defined in register method not in constructor";return o}return t.prototype.register=function(n){n===void 0&&(n={}),n.contextManager===void 0&&(n.contextManager=new qg),n.contextManager&&n.contextManager.enable(),e.prototype.register.call(this,n)},t}(Hg),le;(function(e){e.CONNECT_END="connectEnd",e.CONNECT_START="connectStart",e.DECODED_BODY_SIZE="decodedBodySize",e.DOM_COMPLETE="domComplete",e.DOM_CONTENT_LOADED_EVENT_END="domContentLoadedEventEnd",e.DOM_CONTENT_LOADED_EVENT_START="domContentLoadedEventStart",e.DOM_INTERACTIVE="domInteractive",e.DOMAIN_LOOKUP_END="domainLookupEnd",e.DOMAIN_LOOKUP_START="domainLookupStart",e.ENCODED_BODY_SIZE="encodedBodySize",e.FETCH_START="fetchStart",e.LOAD_EVENT_END="loadEventEnd",e.LOAD_EVENT_START="loadEventStart",e.NAVIGATION_START="navigationStart",e.REDIRECT_END="redirectEnd",e.REDIRECT_START="redirectStart",e.REQUEST_START="requestStart",e.RESPONSE_END="responseEnd",e.RESPONSE_START="responseStart",e.SECURE_CONNECTION_START="secureConnectionStart",e.UNLOAD_EVENT_END="unloadEventEnd",e.UNLOAD_EVENT_START="unloadEventStart"})(le||(le={}));var ls;function nT(){return ls||(ls=document.createElement("a")),ls}function Kt(e,t){return t in e}function Ye(e,t,n,o){var s=void 0,l=void 0;Kt(n,t)&&typeof n[t]=="number"&&(s=n[t]);var d=o||le.FETCH_START;if(Kt(n,d)&&typeof n[d]=="number"&&(l=n[d]),s!==void 0&&l!==void 0&&s>=l)return e.addEvent(t,s),e}function Nn(e,t){Ye(e,le.FETCH_START,t),Ye(e,le.DOMAIN_LOOKUP_START,t),Ye(e,le.DOMAIN_LOOKUP_END,t),Ye(e,le.CONNECT_START,t),Kt(t,"name")&&t.name.startsWith("https:")&&Ye(e,le.SECURE_CONNECTION_START,t),Ye(e,le.CONNECT_END,t),Ye(e,le.REQUEST_START,t),Ye(e,le.RESPONSE_START,t),Ye(e,le.RESPONSE_END,t);var n=t[le.ENCODED_BODY_SIZE];n!==void 0&&e.setAttribute(Wt.HTTP_RESPONSE_CONTENT_LENGTH,n);var o=t[le.DECODED_BODY_SIZE];o!==void 0&&n!==o&&e.setAttribute(Wt.HTTP_RESPONSE_CONTENT_LENGTH_UNCOMPRESSED,o)}function rT(e){return e.slice().sort(function(t,n){var o=t[le.FETCH_START],s=n[le.FETCH_START];return o>s?1:o<s?-1:0})}function Dl(){return typeof location!="undefined"?location.origin:void 0}function Fl(e,t,n,o,s,l){s===void 0&&(s=new WeakSet);var d=kt(e);e=d.toString();var h=oT(e,t,n,o,s,l);if(h.length===0)return{mainRequest:void 0};if(h.length===1)return{mainRequest:h[0]};var b=rT(h);if(d.origin!==Dl()&&b.length>1){var g=b[0],S=iT(b,g[le.RESPONSE_END],n),_=g[le.RESPONSE_END],N=S[le.FETCH_START];return N<_&&(S=g,g=void 0),{corsPreFlightRequest:g,mainRequest:S}}else return{mainRequest:h[0]}}function iT(e,t,n){for(var o=Ct(n),s=Ct(_n(t)),l=e[1],d,h=e.length,b=1;b<h;b++){var g=e[b],S=Ct(_n(g[le.FETCH_START])),_=Ct(_n(g[le.RESPONSE_END])),N=o-_;S>=s&&(!d||N<d)&&(d=N,l=g)}return l}function oT(e,t,n,o,s,l){var d=Ct(t),h=Ct(n),b=o.filter(function(g){var S=Ct(_n(g[le.FETCH_START])),_=Ct(_n(g[le.RESPONSE_END]));return g.initiatorType.toLowerCase()===(l||"xmlhttprequest")&&g.name===e&&S>=d&&_<=h});return b.length>0&&(b=b.filter(function(g){return!s.has(g)})),b}function kt(e){if(typeof URL=="function")return new URL(e,typeof document!="undefined"?document.baseURI:typeof location!="undefined"?location.href:void 0);var t=nT();return t.href=e,t}function Yl(e,t){if(e.nodeType===Node.DOCUMENT_NODE)return"/";var n=aT(e,t);if(t&&n.indexOf("@id")>0)return n;var o="";return e.parentNode&&(o+=Yl(e.parentNode,!1)),o+=n,o}function sT(e){if(!e.parentNode)return 0;var t=[e.nodeType];e.nodeType===Node.CDATA_SECTION_NODE&&t.push(Node.TEXT_NODE);var n=Array.from(e.parentNode.childNodes);return n=n.filter(function(o){var s=o.localName;return t.indexOf(o.nodeType)>=0&&s===e.localName}),n.length>=1?n.indexOf(e)+1:0}function aT(e,t){var n=e.nodeType,o=sT(e),s="";if(n===Node.ELEMENT_NODE){var l=e.getAttribute("id");if(t&&l)return'//*[@id="'+l+'"]';s=e.localName}else if(n===Node.TEXT_NODE||n===Node.CDATA_SECTION_NODE)s="text()";else if(n===Node.COMMENT_NODE)s="comment()";else return"";return s&&o>1?"/"+s+"["+o+"]":"/"+s}function Hl(e,t){var n=t||[];(typeof n=="string"||n instanceof RegExp)&&(n=[n]);var o=kt(e);return o.origin===Dl()?!0:n.some(function(s){return is(e,s)})}var lT=function(){function e(){}return e.prototype.emit=function(t){},e}(),cT=function(){function e(){}return e.prototype.getLogger=function(t,n,o){return new lT},e}(),Kl=new cT,uT=typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof global=="object"?global:{},pi=Symbol.for("io.opentelemetry.js.api.logs"),ur=uT;function dT(e,t,n){return function(o){return o===e?t:n}}var Jl=1,pT=function(){function e(){}return e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e.prototype.setGlobalLoggerProvider=function(t){return ur[pi]?this.getLoggerProvider():(ur[pi]=dT(Jl,t,Kl),t)},e.prototype.getLoggerProvider=function(){var t,n;return(n=(t=ur[pi])===null||t===void 0?void 0:t.call(ur,Jl))!==null&&n!==void 0?n:Kl},e.prototype.getLogger=function(t,n,o){return this.getLoggerProvider().getLogger(t,n,o)},e.prototype.disable=function(){delete ur[pi]},e}(),Bl=pT.getInstance();function zl(e){e===void 0&&(e=[]);for(var t=[],n=0,o=e.length;n<o;n++){var s=e[n];if(Array.isArray(s)){var l=zl(s);t=t.concat(l.instrumentations)}else typeof s=="function"?t.push(new s):s.instrumentationName&&t.push(s)}return{instrumentations:t}}function hT(e,t,n,o){for(var s=0,l=e.length;s<l;s++){var d=e[s];t&&d.setTracerProvider(t),n&&d.setMeterProvider(n),o&&d.setLoggerProvider&&d.setLoggerProvider(o),d.getConfig().enabled||d.enable()}}function mT(e){e.forEach(function(t){return t.disable()})}function fT(e){var t=zl(e.instrumentations).instrumentations,n=e.tracerProvider||we.getTracerProvider(),o=e.meterProvider||zr.getMeterProvider(),s=e.loggerProvider||Bl.getLoggerProvider();return hT(t,n,o,s),function(){mT(t)}}function cs(e){return typeof e=="function"}var Qe=console.error.bind(console);function dr(e,t,n){var o=!!e[t]&&e.propertyIsEnumerable(t);Object.defineProperty(e,t,{configurable:!0,enumerable:o,writable:!0,value:n})}function pr(e){e&&e.logger&&(cs(e.logger)?Qe=e.logger:Qe("new logger isn't a function, not replacing"))}function jl(e,t,n){if(!e||!e[t]){Qe("no original function "+t+" to wrap");return}if(!n){Qe("no wrapper function"),Qe(new Error().stack);return}if(!cs(e[t])||!cs(n)){Qe("original object and wrapper must be functions");return}var o=e[t],s=n(o,t);return dr(s,"__original",o),dr(s,"__unwrap",function(){e[t]===s&&dr(e,t,o)}),dr(s,"__wrapped",!0),dr(e,t,s),s}function bT(e,t,n){if(e)Array.isArray(e)||(e=[e]);else{Qe("must provide one or more modules to patch"),Qe(new Error().stack);return}if(!(t&&Array.isArray(t))){Qe("must provide one or more functions to wrap on modules");return}e.forEach(function(o){t.forEach(function(s){jl(o,s,n)})})}function Ql(e,t){if(!e||!e[t]){Qe("no function to unwrap."),Qe(new Error().stack);return}if(!e[t].__unwrap)Qe("no original to unwrap to -- has "+t+" already been unwrapped?");else return e[t].__unwrap()}function yT(e,t){if(e)Array.isArray(e)||(e=[e]);else{Qe("must provide one or more modules to patch"),Qe(new Error().stack);return}if(!(t&&Array.isArray(t))){Qe("must provide one or more functions to unwrap on modules");return}e.forEach(function(n){t.forEach(function(o){Ql(n,o)})})}pr.wrap=jl,pr.massWrap=bT,pr.unwrap=Ql,pr.massUnwrap=yT;var hi=pr,us=function(){return us=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},us.apply(this,arguments)},ST=function(){function e(t,n,o){o===void 0&&(o={}),this.instrumentationName=t,this.instrumentationVersion=n,this._wrap=hi.wrap,this._unwrap=hi.unwrap,this._massWrap=hi.massWrap,this._massUnwrap=hi.massUnwrap,this._config=us({enabled:!0},o),this._diag=de.createComponentLogger({namespace:t}),this._tracer=we.getTracer(t,n),this._meter=zr.getMeter(t,n),this._logger=Bl.getLogger(t,n),this._updateMetricInstruments()}return Object.defineProperty(e.prototype,"meter",{get:function(){return this._meter},enumerable:!1,configurable:!0}),e.prototype.setMeterProvider=function(t){this._meter=t.getMeter(this.instrumentationName,this.instrumentationVersion),this._updateMetricInstruments()},Object.defineProperty(e.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),e.prototype.setLoggerProvider=function(t){this._logger=t.getLogger(this.instrumentationName,this.instrumentationVersion)},e.prototype.getModuleDefinitions=function(){var t,n=(t=this.init())!==null&&t!==void 0?t:[];return Array.isArray(n)?n:[n]},e.prototype._updateMetricInstruments=function(){},e.prototype.getConfig=function(){return this._config},e.prototype.setConfig=function(t){t===void 0&&(t={}),this._config=Object.assign({},t)},e.prototype.setTracerProvider=function(t){this._tracer=t.getTracer(this.instrumentationName,this.instrumentationVersion)},Object.defineProperty(e.prototype,"tracer",{get:function(){return this._tracer},enumerable:!1,configurable:!0}),e}(),gT=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),mi=function(e){gT(t,e);function t(n,o,s){s===void 0&&(s={});var l=e.call(this,n,o,s)||this;return l._config.enabled&&l.enable(),l}return t}(ST);function fi(e,t,n){var o,s;try{s=e()}catch(l){o=l}finally{if(t(o,s),o&&!n)throw o;return s}}function rn(e){return typeof e=="function"&&typeof e.__original=="function"&&typeof e.__unwrap=="function"&&e.__wrapped===!0}var hr;(function(e){e.DOCUMENT_LOAD="documentLoad",e.DOCUMENT_FETCH="documentFetch",e.RESOURCE_FETCH="resourceFetch"})(hr||(hr={}));var TT="0.38.0",bi;(function(e){e.FIRST_PAINT="firstPaint",e.FIRST_CONTENTFUL_PAINT="firstContentfulPaint"})(bi||(bi={}));var vT=function(){var e,t,n={},o=(t=(e=lt).getEntriesByType)===null||t===void 0?void 0:t.call(e,"navigation")[0];if(o){var s=Object.values(le);s.forEach(function(h){if(Kt(o,h)){var b=o[h];typeof b=="number"&&(n[h]=b)}})}else{var l=lt,d=l.timing;if(d){var s=Object.values(le);s.forEach(function(b){if(Kt(d,b)){var g=d[b];typeof g=="number"&&(n[b]=g)}})}}return n},$l={"first-paint":bi.FIRST_PAINT,"first-contentful-paint":bi.FIRST_CONTENTFUL_PAINT},_T=function(e){var t,n,o=(n=(t=lt).getEntriesByType)===null||n===void 0?void 0:n.call(t,"paint");o&&o.forEach(function(s){var l=s.name,d=s.startTime;Kt($l,l)&&e.addEvent($l[l],d)})},ET=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),IT=function(e){ET(t,e);function t(n){n===void 0&&(n={});var o=e.call(this,"@opentelemetry/instrumentation-document-load",TT,n)||this;return o.component="document-load",o.version="1",o.moduleName=o.component,o}return t.prototype.init=function(){},t.prototype._onDocumentLoaded=function(){var n=this;window.setTimeout(function(){n._collectPerformance()})},t.prototype._addResourcesSpans=function(n){var o=this,s,l,d=(l=(s=lt).getEntriesByType)===null||l===void 0?void 0:l.call(s,"resource");d&&d.forEach(function(h){o._initResourceSpan(h,n)})},t.prototype._collectPerformance=function(){var n=this,o=Array.from(document.getElementsByTagName("meta")).find(function(d){return d.getAttribute("name")===lr}),s=vT(),l=o&&o.content||"";Te.with(rt.extract(bt,{traceparent:l}),function(){var d,h=n._startSpan(hr.DOCUMENT_LOAD,le.FETCH_START,s);h&&(Te.with(we.setSpan(Te.active(),h),function(){var b=n._startSpan(hr.DOCUMENT_FETCH,le.FETCH_START,s);b&&(b.setAttribute(Jo,location.href),Te.with(we.setSpan(Te.active(),b),function(){var g;Nn(b,s),n._addCustomAttributesOnSpan(b,(g=n._getConfig().applyCustomAttributesOnSpan)===null||g===void 0?void 0:g.documentFetch),n._endSpan(b,le.RESPONSE_END,s)}))}),h.setAttribute(Jo,location.href),h.setAttribute(Rm,navigator.userAgent),n._addResourcesSpans(h),Ye(h,le.FETCH_START,s),Ye(h,le.UNLOAD_EVENT_START,s),Ye(h,le.UNLOAD_EVENT_END,s),Ye(h,le.DOM_INTERACTIVE,s),Ye(h,le.DOM_CONTENT_LOADED_EVENT_START,s),Ye(h,le.DOM_CONTENT_LOADED_EVENT_END,s),Ye(h,le.DOM_COMPLETE,s),Ye(h,le.LOAD_EVENT_START,s),Ye(h,le.LOAD_EVENT_END,s),_T(h),n._addCustomAttributesOnSpan(h,(d=n._getConfig().applyCustomAttributesOnSpan)===null||d===void 0?void 0:d.documentLoad),n._endSpan(h,le.LOAD_EVENT_END,s))})},t.prototype._endSpan=function(n,o,s){n&&(Kt(s,o)?n.end(s[o]):n.end())},t.prototype._initResourceSpan=function(n,o){var s,l=this._startSpan(hr.RESOURCE_FETCH,le.FETCH_START,n,o);l&&(l.setAttribute(Jo,n.name),Nn(l,n),this._addCustomAttributesOnResourceSpan(l,n,(s=this._getConfig().applyCustomAttributesOnSpan)===null||s===void 0?void 0:s.resourceFetch),this._endSpan(l,le.RESPONSE_END,n))},t.prototype._startSpan=function(n,o,s,l){if(Kt(s,o)&&typeof s[o]=="number"){var d=this.tracer.startSpan(n,{startTime:s[o]},l?we.setSpan(Te.active(),l):void 0);return d}},t.prototype._waitForPageLoad=function(){window.document.readyState==="complete"?this._onDocumentLoaded():(this._onDocumentLoaded=this._onDocumentLoaded.bind(this),window.addEventListener("load",this._onDocumentLoaded))},t.prototype._getConfig=function(){return this._config},t.prototype._addCustomAttributesOnSpan=function(n,o){var s=this;o&&fi(function(){return o(n)},function(l){l&&s._diag.error("addCustomAttributesOnSpan",l)},!0)},t.prototype._addCustomAttributesOnResourceSpan=function(n,o,s){var l=this;s&&fi(function(){return s(n,o)},function(d){d&&l._diag.error("addCustomAttributesOnResourceSpan",d)},!0)},t.prototype.enable=function(){window.removeEventListener("load",this._onDocumentLoaded),this._waitForPageLoad()},t.prototype.disable=function(){window.removeEventListener("load",this._onDocumentLoaded)},t}(mi),yi;(function(e){e.COMPONENT="component",e.HTTP_ERROR_NAME="http.error_name",e.HTTP_STATUS_TEXT="http.status_text"})(yi||(yi={}));function RT(e){for(var t={},n=e.length,o=0;o<n;o++){var s=e[o];s&&(t[String(s).toUpperCase().replace(/[-.]/g,"_")]=s)}return t}var NT="aws.lambda.invoked_arn",ZT="db.system",CT="db.connection_string",OT="db.user",wT="db.jdbc.driver_classname",LT="db.name",GT="db.statement",VT="db.operation",XT="db.mssql.instance_name",PT="db.cassandra.keyspace",WT="db.cassandra.page_size",kT="db.cassandra.consistency_level",AT="db.cassandra.table",MT="db.cassandra.idempotence",xT="db.cassandra.speculative_execution_count",UT="db.cassandra.coordinator.id",DT="db.cassandra.coordinator.dc",FT="db.hbase.namespace",YT="db.redis.database_index",HT="db.mongodb.collection",KT="db.sql.table",JT="exception.type",BT="exception.message",zT="exception.stacktrace",jT="exception.escaped",QT="faas.trigger",$T="faas.execution",qT="faas.document.collection",ev="faas.document.operation",tv="faas.document.time",nv="faas.document.name",rv="faas.time",iv="faas.cron",ov="faas.coldstart",sv="faas.invoked_name",av="faas.invoked_provider",lv="faas.invoked_region",cv="net.transport",uv="net.peer.ip",dv="net.peer.port",pv="net.peer.name",hv="net.host.ip",mv="net.host.port",fv="net.host.name",bv="net.host.connection.type",yv="net.host.connection.subtype",Sv="net.host.carrier.name",gv="net.host.carrier.mcc",Tv="net.host.carrier.mnc",vv="net.host.carrier.icc",_v="peer.service",Ev="enduser.id",Iv="enduser.role",Rv="enduser.scope",Nv="thread.id",Zv="thread.name",Cv="code.function",Ov="code.namespace",wv="code.filepath",Lv="code.lineno",Gv="http.method",Vv="http.url",Xv="http.target",Pv="http.host",Wv="http.scheme",kv="http.status_code",Av="http.flavor",Mv="http.user_agent",xv="http.request_content_length",Uv="http.request_content_length_uncompressed",Dv="http.response_content_length",Fv="http.response_content_length_uncompressed",Yv="http.server_name",Hv="http.route",Kv="http.client_ip",Jv="aws.dynamodb.table_names",Bv="aws.dynamodb.consumed_capacity",zv="aws.dynamodb.item_collection_metrics",jv="aws.dynamodb.provisioned_read_capacity",Qv="aws.dynamodb.provisioned_write_capacity",$v="aws.dynamodb.consistent_read",qv="aws.dynamodb.projection",e_="aws.dynamodb.limit",t_="aws.dynamodb.attributes_to_get",n_="aws.dynamodb.index_name",r_="aws.dynamodb.select",i_="aws.dynamodb.global_secondary_indexes",o_="aws.dynamodb.local_secondary_indexes",s_="aws.dynamodb.exclusive_start_table",a_="aws.dynamodb.table_count",l_="aws.dynamodb.scan_forward",c_="aws.dynamodb.segment",u_="aws.dynamodb.total_segments",d_="aws.dynamodb.count",p_="aws.dynamodb.scanned_count",h_="aws.dynamodb.attribute_definitions",m_="aws.dynamodb.global_secondary_index_updates",f_="messaging.system",b_="messaging.destination",y_="messaging.destination_kind",S_="messaging.temp_destination",g_="messaging.protocol",T_="messaging.protocol_version",v_="messaging.url",__="messaging.message_id",E_="messaging.conversation_id",I_="messaging.message_payload_size_bytes",R_="messaging.message_payload_compressed_size_bytes",N_="messaging.operation",Z_="messaging.consumer_id",C_="messaging.rabbitmq.routing_key",O_="messaging.kafka.message_key",w_="messaging.kafka.consumer_group",L_="messaging.kafka.client_id",G_="messaging.kafka.partition",V_="messaging.kafka.tombstone",X_="rpc.system",P_="rpc.service",W_="rpc.method",k_="rpc.grpc.status_code",A_="rpc.jsonrpc.version",M_="rpc.jsonrpc.request_id",x_="rpc.jsonrpc.error_code",U_="rpc.jsonrpc.error_message",D_="message.type",F_="message.id",Y_="message.compressed_size",H_="message.uncompressed_size",Zn=RT([NT,ZT,CT,OT,wT,LT,GT,VT,XT,PT,WT,kT,AT,MT,xT,UT,DT,FT,YT,HT,KT,JT,BT,zT,jT,QT,$T,qT,ev,tv,nv,rv,iv,ov,sv,av,lv,cv,uv,dv,pv,hv,mv,fv,bv,yv,Sv,gv,Tv,vv,_v,Ev,Iv,Rv,Nv,Zv,Cv,Ov,wv,Lv,Gv,Vv,Xv,Pv,Wv,kv,Av,Mv,xv,Uv,Dv,Fv,Yv,Hv,Kv,Jv,Bv,zv,jv,Qv,$v,qv,e_,t_,n_,r_,i_,o_,s_,a_,l_,c_,u_,d_,p_,h_,m_,f_,b_,y_,S_,g_,T_,v_,__,E_,I_,R_,N_,Z_,C_,O_,w_,L_,G_,V_,X_,P_,W_,k_,A_,M_,x_,U_,D_,F_,Y_,H_]),ql="0.51.1",K_=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),ds,J_=300,ec=typeof process=="object"&&((ds=process.release)===null||ds===void 0?void 0:ds.name)==="node",B_=function(e){K_(t,e);function t(n){var o=e.call(this,"@opentelemetry/instrumentation-fetch",ql,n)||this;return o.component="fetch",o.version=ql,o.moduleName=o.component,o._usedResources=new WeakSet,o._tasksCount=0,o}return t.prototype.init=function(){},t.prototype._getConfig=function(){return this._config},t.prototype._addChildSpan=function(n,o){var s=this.tracer.startSpan("CORS Preflight",{startTime:o[le.FETCH_START]},we.setSpan(Te.active(),n));this._getConfig().ignoreNetworkEvents||Nn(s,o),s.end(o[le.RESPONSE_END])},t.prototype._addFinalSpanAttributes=function(n,o){var s=kt(o.url);n.setAttribute(Zn.HTTP_STATUS_CODE,o.status),o.statusText!=null&&n.setAttribute(yi.HTTP_STATUS_TEXT,o.statusText),n.setAttribute(Zn.HTTP_HOST,s.host),n.setAttribute(Zn.HTTP_SCHEME,s.protocol.replace(":","")),typeof navigator!="undefined"&&n.setAttribute(Zn.HTTP_USER_AGENT,navigator.userAgent)},t.prototype._addHeaders=function(n,o){if(!Hl(o,this._getConfig().propagateTraceHeaderCorsUrls)){var s={};rt.inject(Te.active(),s),Object.keys(s).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}if(n instanceof Request)rt.inject(Te.active(),n.headers,{set:function(l,d,h){return l.set(d,typeof h=="string"?h:String(h))}});else if(n.headers instanceof Headers)rt.inject(Te.active(),n.headers,{set:function(l,d,h){return l.set(d,typeof h=="string"?h:String(h))}});else if(n.headers instanceof Map)rt.inject(Te.active(),n.headers,{set:function(l,d,h){return l.set(d,typeof h=="string"?h:String(h))}});else{var s={};rt.inject(Te.active(),s),n.headers=Object.assign({},s,n.headers||{})}},t.prototype._clearResources=function(){this._tasksCount===0&&this._getConfig().clearTimingResources&&(performance.clearResourceTimings(),this._usedResources=new WeakSet)},t.prototype._createSpan=function(n,o){var s;if(o===void 0&&(o={}),os(n,this._getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var l=(o.method||"GET").toUpperCase(),d="HTTP "+l;return this.tracer.startSpan(d,{kind:gn.CLIENT,attributes:(s={},s[yi.COMPONENT]=this.moduleName,s[Zn.HTTP_METHOD]=l,s[Zn.HTTP_URL]=n,s)})},t.prototype._findResourceAndAddNetworkEvents=function(n,o,s){var l=o.entries;if(!l.length){if(!performance.getEntriesByType)return;l=performance.getEntriesByType("resource")}var d=Fl(o.spanUrl,o.startTime,s,l,this._usedResources,"fetch");if(d.mainRequest){var h=d.mainRequest;this._markResourceAsUsed(h);var b=d.corsPreFlightRequest;b&&(this._addChildSpan(n,b),this._markResourceAsUsed(b)),this._getConfig().ignoreNetworkEvents||Nn(n,h)}},t.prototype._markResourceAsUsed=function(n){this._usedResources.add(n)},t.prototype._endSpan=function(n,o,s){var l=this,d=Zt(Date.now()),h=en();this._addFinalSpanAttributes(n,s),setTimeout(function(){var b;(b=o.observer)===null||b===void 0||b.disconnect(),l._findResourceAndAddNetworkEvents(n,o,h),l._tasksCount--,l._clearResources(),n.end(d)},J_)},t.prototype._patchConstructor=function(){var n=this;return function(o){var s=n;return function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];var b=this,g=kt(d[0]instanceof Request?d[0].url:String(d[0])).href,S=d[0]instanceof Request?d[0]:d[1]||{},_=s._createSpan(g,S);if(!_)return o.apply(this,d);var N=s._prepareSpanData(g);function R(re,x){s._applyAttributesAfterFetch(re,S,x),s._endSpan(re,N,{status:x.status||0,statusText:x.message,url:g})}function G(re,x){s._applyAttributesAfterFetch(re,S,x),x.status>=200&&x.status<400?s._endSpan(re,N,x):s._endSpan(re,N,{status:x.status,statusText:x.statusText,url:g})}function w(re,x,Xe){try{var Me=Xe.clone(),Ie=Xe.clone(),it=Me.body;if(it){var Gn=it.getReader(),Mt=function(){Gn.read().then(function(xt){var Jt=xt.done;Jt?G(re,Ie):Mt()},function(xt){R(re,xt)})};Mt()}else G(re,Xe)}finally{x(Xe)}}function z(re,x,Xe){try{R(re,Xe)}finally{x(Xe)}}return new Promise(function(re,x){return Te.with(we.setSpan(Te.active(),_),function(){return s._addHeaders(S,g),s._tasksCount++,o.apply(b,S instanceof Request?[S]:[g,S]).then(w.bind(b,_,re),z.bind(b,_,x))})})}}},t.prototype._applyAttributesAfterFetch=function(n,o,s){var l=this,d=this._getConfig().applyCustomAttributesOnSpan;d&&fi(function(){return d(n,o,s)},function(h){h&&l._diag.error("applyCustomAttributesOnSpan",h)},!0)},t.prototype._prepareSpanData=function(n){var o=en(),s=[];if(typeof PerformanceObserver!="function")return{entries:s,startTime:o,spanUrl:n};var l=new PerformanceObserver(function(d){var h=d.getEntries();h.forEach(function(b){b.initiatorType==="fetch"&&b.name===n&&s.push(b)})});return l.observe({entryTypes:["resource"]}),{entries:s,observer:l,startTime:o,spanUrl:n}},t.prototype.enable=function(){if(ec){this._diag.warn("this instrumentation is intended for web usage only, it does not instrument Node.js's fetch()");return}rn(fetch)&&(this._unwrap(Tn,"fetch"),this._diag.debug("removing previous patch for constructor")),this._wrap(Tn,"fetch",this._patchConstructor())},t.prototype.disable=function(){ec||(this._unwrap(Tn,"fetch"),this._usedResources=new WeakSet)},t}(mi);function z_(e){for(var t={},n=e.length,o=0;o<n;o++){var s=e[o];s&&(t[String(s).toUpperCase().replace(/[-.]/g,"_")]=s)}return t}var j_="aws.lambda.invoked_arn",Q_="db.system",$_="db.connection_string",q_="db.user",e0="db.jdbc.driver_classname",t0="db.name",n0="db.statement",r0="db.operation",i0="db.mssql.instance_name",o0="db.cassandra.keyspace",s0="db.cassandra.page_size",a0="db.cassandra.consistency_level",l0="db.cassandra.table",c0="db.cassandra.idempotence",u0="db.cassandra.speculative_execution_count",d0="db.cassandra.coordinator.id",p0="db.cassandra.coordinator.dc",h0="db.hbase.namespace",m0="db.redis.database_index",f0="db.mongodb.collection",b0="db.sql.table",y0="exception.type",S0="exception.message",g0="exception.stacktrace",T0="exception.escaped",v0="faas.trigger",_0="faas.execution",E0="faas.document.collection",I0="faas.document.operation",R0="faas.document.time",N0="faas.document.name",Z0="faas.time",C0="faas.cron",O0="faas.coldstart",w0="faas.invoked_name",L0="faas.invoked_provider",G0="faas.invoked_region",V0="net.transport",X0="net.peer.ip",P0="net.peer.port",W0="net.peer.name",k0="net.host.ip",A0="net.host.port",M0="net.host.name",x0="net.host.connection.type",U0="net.host.connection.subtype",D0="net.host.carrier.name",F0="net.host.carrier.mcc",Y0="net.host.carrier.mnc",H0="net.host.carrier.icc",K0="peer.service",J0="enduser.id",B0="enduser.role",z0="enduser.scope",j0="thread.id",Q0="thread.name",$0="code.function",q0="code.namespace",eE="code.filepath",tE="code.lineno",nE="http.method",rE="http.url",iE="http.target",oE="http.host",sE="http.scheme",aE="http.status_code",lE="http.flavor",cE="http.user_agent",uE="http.request_content_length",dE="http.request_content_length_uncompressed",pE="http.response_content_length",hE="http.response_content_length_uncompressed",mE="http.server_name",fE="http.route",bE="http.client_ip",yE="aws.dynamodb.table_names",SE="aws.dynamodb.consumed_capacity",gE="aws.dynamodb.item_collection_metrics",TE="aws.dynamodb.provisioned_read_capacity",vE="aws.dynamodb.provisioned_write_capacity",_E="aws.dynamodb.consistent_read",EE="aws.dynamodb.projection",IE="aws.dynamodb.limit",RE="aws.dynamodb.attributes_to_get",NE="aws.dynamodb.index_name",ZE="aws.dynamodb.select",CE="aws.dynamodb.global_secondary_indexes",OE="aws.dynamodb.local_secondary_indexes",wE="aws.dynamodb.exclusive_start_table",LE="aws.dynamodb.table_count",GE="aws.dynamodb.scan_forward",VE="aws.dynamodb.segment",XE="aws.dynamodb.total_segments",PE="aws.dynamodb.count",WE="aws.dynamodb.scanned_count",kE="aws.dynamodb.attribute_definitions",AE="aws.dynamodb.global_secondary_index_updates",ME="messaging.system",xE="messaging.destination",UE="messaging.destination_kind",DE="messaging.temp_destination",FE="messaging.protocol",YE="messaging.protocol_version",HE="messaging.url",KE="messaging.message_id",JE="messaging.conversation_id",BE="messaging.message_payload_size_bytes",zE="messaging.message_payload_compressed_size_bytes",jE="messaging.operation",QE="messaging.consumer_id",$E="messaging.rabbitmq.routing_key",qE="messaging.kafka.message_key",eI="messaging.kafka.consumer_group",tI="messaging.kafka.client_id",nI="messaging.kafka.partition",rI="messaging.kafka.tombstone",iI="rpc.system",oI="rpc.service",sI="rpc.method",aI="rpc.grpc.status_code",lI="rpc.jsonrpc.version",cI="rpc.jsonrpc.request_id",uI="rpc.jsonrpc.error_code",dI="rpc.jsonrpc.error_message",pI="message.type",hI="message.id",mI="message.compressed_size",fI="message.uncompressed_size",Cn=z_([j_,Q_,$_,q_,e0,t0,n0,r0,i0,o0,s0,a0,l0,c0,u0,d0,p0,h0,m0,f0,b0,y0,S0,g0,T0,v0,_0,E0,I0,R0,N0,Z0,C0,O0,w0,L0,G0,V0,X0,P0,W0,k0,A0,M0,x0,U0,D0,F0,Y0,H0,K0,J0,B0,z0,j0,Q0,$0,q0,eE,tE,nE,rE,iE,oE,sE,aE,lE,cE,uE,dE,pE,hE,mE,fE,bE,yE,SE,gE,TE,vE,_E,EE,IE,RE,NE,ZE,CE,OE,wE,LE,GE,VE,XE,PE,WE,kE,AE,ME,xE,UE,DE,FE,YE,HE,KE,JE,BE,zE,jE,QE,$E,qE,eI,tI,nI,rI,iI,oI,sI,aI,lI,cI,uI,dI,pI,hI,mI,fI]),At;(function(e){e.METHOD_OPEN="open",e.METHOD_SEND="send",e.EVENT_ABORT="abort",e.EVENT_ERROR="error",e.EVENT_LOAD="loaded",e.EVENT_TIMEOUT="timeout"})(At||(At={}));var tc="0.51.1",ps;(function(e){e.HTTP_STATUS_TEXT="http.status_text"})(ps||(ps={}));var bI=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),yI=300,SI=function(e){bI(t,e);function t(n){var o=e.call(this,"@opentelemetry/instrumentation-xml-http-request",tc,n)||this;return o.component="xml-http-request",o.version=tc,o.moduleName=o.component,o._tasksCount=0,o._xhrMem=new WeakMap,o._usedResources=new WeakSet,o}return t.prototype.init=function(){},t.prototype._getConfig=function(){return this._config},t.prototype._addHeaders=function(n,o){var s=kt(o).href;if(!Hl(s,this._getConfig().propagateTraceHeaderCorsUrls)){var l={};rt.inject(Te.active(),l),Object.keys(l).length>0&&this._diag.debug("headers inject skipped due to CORS policy");return}var d={};rt.inject(Te.active(),d),Object.keys(d).forEach(function(h){n.setRequestHeader(h,String(d[h]))})},t.prototype._addChildSpan=function(n,o){var s=this;Te.with(we.setSpan(Te.active(),n),function(){var l=s.tracer.startSpan("CORS Preflight",{startTime:o[le.FETCH_START]});s._getConfig().ignoreNetworkEvents||Nn(l,o),l.end(o[le.RESPONSE_END])})},t.prototype._addFinalSpanAttributes=function(n,o,s){if(typeof s=="string"){var l=kt(s);o.status!==void 0&&n.setAttribute(Cn.HTTP_STATUS_CODE,o.status),o.statusText!==void 0&&n.setAttribute(ps.HTTP_STATUS_TEXT,o.statusText),n.setAttribute(Cn.HTTP_HOST,l.host),n.setAttribute(Cn.HTTP_SCHEME,l.protocol.replace(":","")),n.setAttribute(Cn.HTTP_USER_AGENT,navigator.userAgent)}},t.prototype._applyAttributesAfterXHR=function(n,o){var s=this,l=this._getConfig().applyCustomAttributesOnSpan;typeof l=="function"&&fi(function(){return l(n,o)},function(d){d&&s._diag.error("applyCustomAttributesOnSpan",d)},!0)},t.prototype._addResourceObserver=function(n,o){var s=this._xhrMem.get(n);!s||typeof PerformanceObserver!="function"||typeof PerformanceResourceTiming!="function"||(s.createdResources={observer:new PerformanceObserver(function(l){var d=l.getEntries(),h=kt(o);d.forEach(function(b){b.initiatorType==="xmlhttprequest"&&b.name===h.href&&s.createdResources&&s.createdResources.entries.push(b)})}),entries:[]},s.createdResources.observer.observe({entryTypes:["resource"]}))},t.prototype._clearResources=function(){this._tasksCount===0&&this._getConfig().clearTimingResources&&(lt.clearResourceTimings(),this._xhrMem=new WeakMap,this._usedResources=new WeakSet)},t.prototype._findResourceAndAddNetworkEvents=function(n,o,s,l,d){if(!(!s||!l||!d||!n.createdResources)){var h=n.createdResources.entries;(!h||!h.length)&&(h=lt.getEntriesByType("resource"));var b=Fl(kt(s).href,l,d,h,this._usedResources);if(b.mainRequest){var g=b.mainRequest;this._markResourceAsUsed(g);var S=b.corsPreFlightRequest;S&&(this._addChildSpan(o,S),this._markResourceAsUsed(S)),this._getConfig().ignoreNetworkEvents||Nn(o,g)}}},t.prototype._cleanPreviousSpanInformation=function(n){var o=this._xhrMem.get(n);if(o){var s=o.callbackToRemoveEvents;s&&s(),this._xhrMem.delete(n)}},t.prototype._createSpan=function(n,o,s){var l;if(os(o,this._getConfig().ignoreUrls)){this._diag.debug("ignoring span as url matches ignored url");return}var d=s.toUpperCase(),h=this.tracer.startSpan(d,{kind:gn.CLIENT,attributes:(l={},l[Cn.HTTP_METHOD]=s,l[Cn.HTTP_URL]=kt(o).toString(),l)});return h.addEvent(At.METHOD_OPEN),this._cleanPreviousSpanInformation(n),this._xhrMem.set(n,{span:h,spanUrl:o}),h},t.prototype._markResourceAsUsed=function(n){this._usedResources.add(n)},t.prototype._patchOpen=function(){var n=this;return function(o){var s=n;return function(){for(var d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];var b=d[0],g=d[1];return s._createSpan(this,g,b),o.apply(this,d)}}},t.prototype._patchSend=function(){var n=this;function o(S,_,N,R){var G=_.callbackToRemoveEvents;typeof G=="function"&&G();var w=_.span,z=_.spanUrl,re=_.sendStartTime;w&&(n._findResourceAndAddNetworkEvents(_,w,z,re,N),w.addEvent(S,R),n._addFinalSpanAttributes(w,_,z),w.end(R),n._tasksCount--),n._clearResources()}function s(S,_){var N=n._xhrMem.get(_);if(N){N.status=_.status,N.statusText=_.statusText,n._xhrMem.delete(_),N.span&&n._applyAttributesAfterXHR(N.span,_);var R=en(),G=Date.now();setTimeout(function(){o(S,N,R,G)},yI)}}function l(){s(At.EVENT_ERROR,this)}function d(){s(At.EVENT_ABORT,this)}function h(){s(At.EVENT_TIMEOUT,this)}function b(){this.status<299?s(At.EVENT_LOAD,this):s(At.EVENT_ERROR,this)}function g(S){S.removeEventListener("abort",d),S.removeEventListener("error",l),S.removeEventListener("load",b),S.removeEventListener("timeout",h);var _=n._xhrMem.get(S);_&&(_.callbackToRemoveEvents=void 0)}return function(S){return function(){for(var N=this,R=[],G=0;G<arguments.length;G++)R[G]=arguments[G];var w=n._xhrMem.get(this);if(!w)return S.apply(this,R);var z=w.span,re=w.spanUrl;return z&&re&&Te.with(we.setSpan(Te.active(),z),function(){n._tasksCount++,w.sendStartTime=en(),z.addEvent(At.METHOD_SEND),N.addEventListener("abort",d),N.addEventListener("error",l),N.addEventListener("load",b),N.addEventListener("timeout",h),w.callbackToRemoveEvents=function(){g(N),w.createdResources&&w.createdResources.observer.disconnect()},n._addHeaders(N,re),n._addResourceObserver(N,re)}),S.apply(this,R)}}},t.prototype.enable=function(){this._diag.debug("applying patch to",this.moduleName,this.version),rn(XMLHttpRequest.prototype.open)&&(this._unwrap(XMLHttpRequest.prototype,"open"),this._diag.debug("removing previous patch from method open")),rn(XMLHttpRequest.prototype.send)&&(this._unwrap(XMLHttpRequest.prototype,"send"),this._diag.debug("removing previous patch from method send")),this._wrap(XMLHttpRequest.prototype,"open",this._patchOpen()),this._wrap(XMLHttpRequest.prototype,"send",this._patchSend())},t.prototype.disable=function(){this._diag.debug("removing patch from",this.moduleName,this.version),this._unwrap(XMLHttpRequest.prototype,"open"),this._unwrap(XMLHttpRequest.prototype,"send"),this._tasksCount=0,this._xhrMem=new WeakMap,this._usedResources=new WeakSet},t}(mi),gI=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l},nc=1e4,TI=5,vI=1e3,_I=5e3,EI=1.5;function II(e){e===void 0&&(e={});var t={};return Object.entries(e).forEach(function(n){var o=gI(n,2),s=o[0],l=o[1];typeof l!="undefined"?t[s]=String(l):de.warn('Header "'+s+'" has wrong value and will be ignored')}),t}function RI(e,t){return e.endsWith("/")||(e=e+"/"),e+t}function NI(e){try{var t=new URL(e);return t.pathname===""&&(t.pathname=t.pathname+"/"),t.toString()}catch(n){return de.warn("Could not parse export URL: '"+e+"'"),e}}function ZI(e){return typeof e=="number"?e<=0?rc(e,nc):e:CI()}function CI(){var e,t=Number((e=Ve().OTEL_EXPORTER_OTLP_TRACES_TIMEOUT)!==null&&e!==void 0?e:Ve().OTEL_EXPORTER_OTLP_TIMEOUT);return t<=0?rc(t,nc):t}function rc(e,t){return de.warn("Timeout must be greater than 0",e),t}function OI(e){var t=[429,502,503,504];return t.includes(e)}function wI(e){if(e==null)return-1;var t=Number.parseInt(e,10);if(Number.isInteger(t))return t>0?t*1e3:-1;var n=new Date(e).getTime()-Date.now();return n>=0?n:0}var LI=function(){function e(t){t===void 0&&(t={}),this._sendingPromises=[],this.url=this.getDefaultUrl(t),typeof t.hostname=="string"&&(this.hostname=t.hostname),this.shutdown=this.shutdown.bind(this),this._shutdownOnce=new li(this._shutdown,this),this._concurrencyLimit=typeof t.concurrencyLimit=="number"?t.concurrencyLimit:30,this.timeoutMillis=ZI(t.timeoutMillis),this.onInit(t)}return e.prototype.export=function(t,n){if(this._shutdownOnce.isCalled){n({code:Ot.FAILED,error:new Error("Exporter has been shutdown")});return}if(this._sendingPromises.length>=this._concurrencyLimit){n({code:Ot.FAILED,error:new Error("Concurrent export limit reached")});return}this._export(t).then(function(){n({code:Ot.SUCCESS})}).catch(function(o){n({code:Ot.FAILED,error:o})})},e.prototype._export=function(t){var n=this;return new Promise(function(o,s){try{de.debug("items to be sent",t),n.send(t,o,s)}catch(l){s(l)}})},e.prototype.shutdown=function(){return this._shutdownOnce.call()},e.prototype.forceFlush=function(){return Promise.all(this._sendingPromises).then(function(){})},e.prototype._shutdown=function(){return de.debug("shutdown started"),this.onShutdown(),this.forceFlush()},e}(),GI=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),mr=function(e){GI(t,e);function t(n,o,s){var l=e.call(this,n)||this;return l.name="OTLPExporterError",l.data=s,l.code=o,l}return t}(Error),Si=function(){return Si=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Si.apply(this,arguments)},VI=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l};function XI(e,t,n,o,s){if(navigator.sendBeacon(t,new Blob([e],n)))de.debug("sendBeacon - can send",e),o();else{var l=new mr("sendBeacon - cannot send "+e);s(l)}}function PI(e,t,n,o,s,l){var d,h,b=!1,g=setTimeout(function(){if(clearTimeout(d),b=!0,h.readyState===XMLHttpRequest.DONE){var _=new mr("Request Timeout");l(_)}else h.abort()},o),S=function(_,N){_===void 0&&(_=TI),N===void 0&&(N=vI),h=new XMLHttpRequest,h.open("POST",t);var R={Accept:"application/json","Content-Type":"application/json"};Object.entries(Si(Si({},R),n)).forEach(function(G){var w=VI(G,2),z=w[0],re=w[1];h.setRequestHeader(z,re)}),h.send(e),h.onreadystatechange=function(){if(h.readyState===XMLHttpRequest.DONE&&b===!1)if(h.status>=200&&h.status<=299)de.debug("xhr success",e),s(),clearTimeout(g),clearTimeout(d);else if(h.status&&OI(h.status)&&_>0){var G=void 0;N=EI*N,h.getResponseHeader("Retry-After")?G=wI(h.getResponseHeader("Retry-After")):G=Math.round(Math.random()*(_I-N)+N),d=setTimeout(function(){S(_-1,N)},G)}else{var w=new mr("Failed to export with XHR (status: "+h.status+")",h.status);l(w),clearTimeout(g),clearTimeout(d)}},h.onabort=function(){if(b){var G=new mr("Request Timeout");l(G)}clearTimeout(g),clearTimeout(d)},h.onerror=function(){if(b){var G=new mr("Request Timeout");l(G)}clearTimeout(g),clearTimeout(d)}};S()}var WI=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),kI=function(e){WI(t,e);function t(n){n===void 0&&(n={});var o=e.call(this,n)||this;return o._useXHR=!1,o._useXHR=!!n.headers||typeof navigator.sendBeacon!="function",o._useXHR?o._headers=Object.assign({},II(n.headers),Fo(Ve().OTEL_EXPORTER_OTLP_HEADERS)):o._headers={},o}return t.prototype.onInit=function(){},t.prototype.onShutdown=function(){},t.prototype.send=function(n,o,s){var l=this;if(this._shutdownOnce.isCalled){de.debug("Shutdown already started. Cannot send objects");return}var d=this.convert(n),h=JSON.stringify(d),b=new Promise(function(S,_){l._useXHR?PI(h,l.url,l._headers,l.timeoutMillis,S,_):XI(h,l.url,{type:"application/json"},S,_)}).then(o,s);this._sendingPromises.push(b);var g=function(){var S=l._sendingPromises.indexOf(b);l._sendingPromises.splice(S,1)};b.then(g,g)},t}(LI);function ic(e){var t=BigInt(1e9);return BigInt(e[0])*t+BigInt(e[1])}function AI(e){var t=Number(BigInt.asUintN(32,e)),n=Number(BigInt.asUintN(32,e>>BigInt(32)));return{low:t,high:n}}function oc(e){var t=ic(e);return AI(t)}function MI(e){var t=ic(e);return t.toString()}var xI=typeof BigInt!="undefined"?MI:Ct;function sc(e){return e}function ac(e){if(e!==void 0)return ar(e)}var UI={encodeHrTime:oc,encodeSpanContext:ar,encodeOptionalSpanContext:ac};function DI(e){var t,n;if(e===void 0)return UI;var o=(t=e.useLongBits)!==null&&t!==void 0?t:!0,s=(n=e.useHex)!==null&&n!==void 0?n:!1;return{encodeHrTime:o?oc:xI,encodeSpanContext:s?sc:ar,encodeOptionalSpanContext:s?sc:ac}}var FI=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l};function gi(e){return Object.keys(e).map(function(t){return lc(t,e[t])})}function lc(e,t){return{key:e,value:cc(t)}}function cc(e){var t=typeof e;return t==="string"?{stringValue:e}:t==="number"?Number.isInteger(e)?{intValue:e}:{doubleValue:e}:t==="boolean"?{boolValue:e}:e instanceof Uint8Array?{bytesValue:e}:Array.isArray(e)?{arrayValue:{values:e.map(cc)}}:t==="object"&&e!=null?{kvlistValue:{values:Object.entries(e).map(function(n){var o=FI(n,2),s=o[0],l=o[1];return lc(s,l)})}}:{}}function YI(e,t){var n,o=e.spanContext(),s=e.status;return{traceId:t.encodeSpanContext(o.traceId),spanId:t.encodeSpanContext(o.spanId),parentSpanId:t.encodeOptionalSpanContext(e.parentSpanId),traceState:(n=o.traceState)===null||n===void 0?void 0:n.serialize(),name:e.name,kind:e.kind==null?0:e.kind+1,startTimeUnixNano:t.encodeHrTime(e.startTime),endTimeUnixNano:t.encodeHrTime(e.endTime),attributes:gi(e.attributes),droppedAttributesCount:e.droppedAttributesCount,events:e.events.map(function(l){return KI(l,t)}),droppedEventsCount:e.droppedEventsCount,status:{code:s.code,message:s.message},links:e.links.map(function(l){return HI(l,t)}),droppedLinksCount:e.droppedLinksCount}}function HI(e,t){var n;return{attributes:e.attributes?gi(e.attributes):[],spanId:t.encodeSpanContext(e.context.spanId),traceId:t.encodeSpanContext(e.context.traceId),traceState:(n=e.context.traceState)===null||n===void 0?void 0:n.serialize(),droppedAttributesCount:e.droppedAttributesCount||0}}function KI(e,t){return{attributes:e.attributes?gi(e.attributes):[],name:e.name,timeUnixNano:t.encodeHrTime(e.time),droppedAttributesCount:e.droppedAttributesCount||0}}var JI=function(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")},BI=function(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var o=n.call(e),s,l=[],d;try{for(;(t===void 0||t-- >0)&&!(s=o.next()).done;)l.push(s.value)}catch(h){d={error:h}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(d)throw d.error}}return l};function zI(e,t){var n=DI(t);return{resourceSpans:QI(e,n)}}function jI(e){var t,n,o=new Map;try{for(var s=JI(e),l=s.next();!l.done;l=s.next()){var d=l.value,h=o.get(d.resource);h||(h=new Map,o.set(d.resource,h));var b=d.instrumentationLibrary.name+"@"+(d.instrumentationLibrary.version||"")+":"+(d.instrumentationLibrary.schemaUrl||""),g=h.get(b);g||(g=[],h.set(b,g)),g.push(d)}}catch(S){t={error:S}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(t)throw t.error}}return o}function QI(e,t){for(var n=jI(e),o=[],s=n.entries(),l=s.next();!l.done;){for(var d=BI(l.value,2),h=d[0],b=d[1],g=[],S=b.values(),_=S.next();!_.done;){var N=_.value;if(N.length>0){var R=N[0].instrumentationLibrary,G=R.name,w=R.version,z=R.schemaUrl,re=N.map(function(Xe){return YI(Xe,t)});g.push({scope:{name:G,version:w},spans:re,schemaUrl:z})}_=S.next()}var x={resource:{attributes:gi(h.attributes),droppedAttributesCount:0},scopeSpans:g,schemaUrl:void 0};o.push(x),l=s.next()}return o}var $I=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,s){o.__proto__=s}||function(o,s){for(var l in s)Object.prototype.hasOwnProperty.call(s,l)&&(o[l]=s[l])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function o(){this.constructor=t}t.prototype=n===null?Object.create(n):(o.prototype=n.prototype,new o)}}(),uc="v1/traces",qI="http://localhost:4318/"+uc,eR=function(e){$I(t,e);function t(n){n===void 0&&(n={});var o=e.call(this,n)||this;return o._headers=Object.assign(o._headers,Fo(Ve().OTEL_EXPORTER_OTLP_TRACES_HEADERS)),o}return t.prototype.convert=function(n){return zI(n,{useHex:!0,useLongBits:!1})},t.prototype.getDefaultUrl=function(n){return typeof n.url=="string"?n.url:Ve().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT.length>0?NI(Ve().OTEL_EXPORTER_OTLP_TRACES_ENDPOINT):Ve().OTEL_EXPORTER_OTLP_ENDPOINT.length>0?RI(Ve().OTEL_EXPORTER_OTLP_ENDPOINT,uc):qI},t}(kI),tR="deployment.environment",nR="service.name",rR=tR,iR=nR,hs={};const oR=Ia(Hh),sR=Ia(ry);Object.defineProperty(hs,"__esModule",{value:!0});var dc=hs.BatchSpanProcessorBase=void 0;const On=oR,on=sR;class aR{constructor(t,n){this._exporter=t,this._isExporting=!1,this._finishedSpans=[],this._droppedSpansCount=0;const o=(0,on.getEnv)();this._maxExportBatchSize=typeof(n==null?void 0:n.maxExportBatchSize)=="number"?n.maxExportBatchSize:o.OTEL_BSP_MAX_EXPORT_BATCH_SIZE,this._maxQueueSize=typeof(n==null?void 0:n.maxQueueSize)=="number"?n.maxQueueSize:o.OTEL_BSP_MAX_QUEUE_SIZE,this._scheduledDelayMillis=typeof(n==null?void 0:n.scheduledDelayMillis)=="number"?n.scheduledDelayMillis:o.OTEL_BSP_SCHEDULE_DELAY,this._exportTimeoutMillis=typeof(n==null?void 0:n.exportTimeoutMillis)=="number"?n.exportTimeoutMillis:o.OTEL_BSP_EXPORT_TIMEOUT,this._shutdownOnce=new on.BindOnceFuture(this._shutdown,this),this._maxExportBatchSize>this._maxQueueSize&&(On.diag.warn("BatchSpanProcessor: maxExportBatchSize must be smaller or equal to maxQueueSize, setting maxExportBatchSize to match maxQueueSize"),this._maxExportBatchSize=this._maxQueueSize)}forceFlush(){return this._shutdownOnce.isCalled?this._shutdownOnce.promise:this._flushAll()}onStart(t,n){}onEnd(t){this._shutdownOnce.isCalled||t.spanContext().traceFlags&On.TraceFlags.SAMPLED&&this._addToBuffer(t)}shutdown(){return this._shutdownOnce.call()}_shutdown(){return Promise.resolve().then(()=>this.onShutdown()).then(()=>this._flushAll()).then(()=>this._exporter.shutdown())}_addToBuffer(t){if(this._finishedSpans.length>=this._maxQueueSize){this._droppedSpansCount===0&&On.diag.debug("maxQueueSize reached, dropping spans"),this._droppedSpansCount++;return}this._droppedSpansCount>0&&(On.diag.warn(`Dropped ${this._droppedSpansCount} spans because maxQueueSize reached`),this._droppedSpansCount=0),this._finishedSpans.push(t),this._maybeStartTimer()}_flushAll(){return new Promise((t,n)=>{const o=[],s=Math.ceil(this._finishedSpans.length/this._maxExportBatchSize);for(let l=0,d=s;l<d;l++)o.push(this._flushOneBatch());Promise.all(o).then(()=>{t()}).catch(n)})}_flushOneBatch(){return this._clearTimer(),this._finishedSpans.length===0?Promise.resolve():new Promise((t,n)=>{const o=setTimeout(()=>{n(new Error("Timeout"))},this._exportTimeoutMillis);On.context.with((0,on.suppressTracing)(On.context.active()),()=>{const s=this._finishedSpans.splice(0,this._maxExportBatchSize),l=()=>this._exporter.export(s,h=>{var b;clearTimeout(o),h.code===on.ExportResultCode.SUCCESS?t():n((b=h.error)!==null&&b!==void 0?b:new Error("BatchSpanProcessor: span export failed"))}),d=s.map(h=>h.resource).filter(h=>h.asyncAttributesPending);d.length===0?l():Promise.all(d.map(h=>{var b;return(b=h.waitForAsyncAttributes)===null||b===void 0?void 0:b.call(h)})).then(l,h=>{(0,on.globalErrorHandler)(h),n(h)})})})}_maybeStartTimer(){if(this._isExporting)return;const t=()=>{this._isExporting=!0,this._flushOneBatch().finally(()=>{this._isExporting=!1,this._finishedSpans.length>0&&(this._clearTimer(),this._maybeStartTimer())}).catch(n=>{this._isExporting=!1,(0,on.globalErrorHandler)(n)})};if(this._finishedSpans.length>=this._maxExportBatchSize)return t();this._timer===void 0&&(this._timer=setTimeout(()=>t(),this._scheduledDelayMillis),(0,on.unrefTimer)(this._timer))}_clearTimer(){this._timer!==void 0&&(clearTimeout(this._timer),this._timer=void 0)}}dc=hs.BatchSpanProcessorBase=aR;var pc;(function(e){e.EVENT_TYPE="event_type",e.TARGET_ELEMENT="target_element",e.TARGET_XPATH="target_xpath",e.HTTP_URL="http.url"})(pc||(pc={}));const lR=["click","input","submit","scroll"];function cR(){return!1}class uR extends mi{constructor(n={}){var o;super("user-interaction","1.0.0",n);fe(this,"_spansData",new WeakMap);fe(this,"_wrappedListeners",new WeakMap);fe(this,"_eventsSpanMap",new WeakMap);fe(this,"_eventNames");fe(this,"_shouldPreventSpanCreation");this._eventNames=new Set((o=n==null?void 0:n.eventNames)!=null?o:lR),this._shouldPreventSpanCreation=typeof(n==null?void 0:n.shouldPreventSpanCreation)=="function"?n.shouldPreventSpanCreation:cR}init(){}_allowEventName(n){return this._eventNames.has(n)}_createSpan(n,o){var h;const s=n==null?void 0:n.target,l=n==null?void 0:n.type;if(!(s instanceof HTMLElement)||!s.getAttribute||s.hasAttribute("disabled")||!this._allowEventName(l))return;const d=Yl(s,!0);try{const b=this.tracer.startSpan(l,{attributes:{"event.type":l,"event.tag":s.tagName,"event.xpath":d,"event.id":s.id,"event.text":(h=s.textContent)!=null?h:"","event.url":window.location.href,"viewport.width":window.innerWidth,"viewport.height":window.innerHeight}},o?we.setSpan(Te.active(),o):void 0);return n instanceof MouseEvent&&(b.setAttribute("event.x",n.clientX),b.setAttribute("event.y",n.clientY),b.setAttribute("event.relativeX",n.clientX/window.innerWidth),b.setAttribute("event.relativeY",n.clientY/window.innerHeight),l==="scroll"&&(b.setAttribute("event.scrollX",window.scrollX),b.setAttribute("event.scrollY",window.scrollY))),this._shouldPreventSpanCreation(l,s,b)===!0?void 0:(this._spansData.set(b,{taskCount:0}),b)}catch(b){this._diag.error("failed to start create new user interaction span",b)}}addPatchedListener(n,o,s,l){let d=this._wrappedListeners.get(s);d||(d=new Map,this._wrappedListeners.set(s,d));let h=d.get(o);return h||(h=new Map,d.set(o,h)),h.has(n)?!1:(h.set(n,l),!0)}removePatchedListener(n,o,s){const l=this._wrappedListeners.get(s);if(!l)return;const d=l.get(o);if(!d)return;const h=d.get(n);return h&&(d.delete(n),d.size===0&&(l.delete(o),l.size===0&&this._wrappedListeners.delete(s))),h}_invokeListener(n,o,s){return typeof n=="function"?n.apply(o,s):n.handleEvent(s[0])}_patchAddEventListener(){const n=this;let o=0;return s=>function(d,h,b){if(!h)return s.call(this,d,h,b);const g=b&&typeof b=="object"&&b.once,S=function(..._){let N;const R=_[0];if((R==null?void 0:R.type)==="mousemove"&&Date.now()-o<100)return;o=Date.now(),R&&(N=n._eventsSpanMap.get(R)),g&&n.removePatchedListener(this,d,h);const G=n._createSpan(R,N);return G?(R&&n._eventsSpanMap.set(R,G),Te.with(we.setSpan(Te.active(),G),()=>{const w=n._invokeListener(h,this,_);return G.end(),w})):n._invokeListener(h,this,_)};if(n.addPatchedListener(this,d,h,S))return s.call(this,d,S,b)}}_patchRemoveEventListener(){const n=this;return o=>function(l,d,h){const b=n.removePatchedListener(this,l,d);return b?o.call(this,l,b,h):o.call(this,l,d,h)}}_getPatchableEventTargets(){return window.EventTarget?[EventTarget.prototype]:[Node.prototype,Window.prototype]}_tryToEndSpan(n,o){n&&this._spansData.get(n)&&(n.end(o),this._spansData.delete(n))}enable(){this._getPatchableEventTargets().forEach(o=>{rn(o.addEventListener)&&(this._unwrap(o,"addEventListener"),this._diag.debug("removing previous patch from method addEventListener")),rn(o.removeEventListener)&&(this._unwrap(o,"removeEventListener"),this._diag.debug("removing previous patch from method removeEventListener")),this._wrap(o,"addEventListener",this._patchAddEventListener()),this._wrap(o,"removeEventListener",this._patchRemoveEventListener())})}disable(){this._getPatchableEventTargets().forEach(o=>{rn(o.addEventListener)&&this._unwrap(o,"addEventListener"),rn(o.removeEventListener)&&this._unwrap(o,"removeEventListener")})}}function ms(e,t){if(!!!e)throw new Error(t)}function dR(e){return typeof e=="object"&&e!==null}function pR(e,t){if(!!!e)throw new Error(t!=null?t:"Unexpected invariant triggered.")}const hR=/\r\n|[\n\r]/g;function fs(e,t){let n=0,o=1;for(const s of e.body.matchAll(hR)){if(typeof s.index=="number"||pR(!1),s.index>=t)break;n=s.index+s[0].length,o+=1}return{line:o,column:t+1-n}}function mR(e){return hc(e.source,fs(e.source,e.start))}function hc(e,t){const n=e.locationOffset.column-1,o="".padStart(n)+e.body,s=t.line-1,l=e.locationOffset.line-1,d=t.line+l,h=t.line===1?n:0,b=t.column+h,g=`${e.name}:${d}:${b}
`,S=o.split(/\r\n|[\n\r]/g),_=S[s];if(_.length>120){const N=Math.floor(b/80),R=b%80,G=[];for(let w=0;w<_.length;w+=80)G.push(_.slice(w,w+80));return g+mc([[`${d} |`,G[0]],...G.slice(1,N+1).map(w=>["|",w]),["|","^".padStart(R)],["|",G[N+1]]])}return g+mc([[`${d-1} |`,S[s-1]],[`${d} |`,_],["|","^".padStart(b)],[`${d+1} |`,S[s+1]]])}function mc(e){const t=e.filter(([o,s])=>s!==void 0),n=Math.max(...t.map(([o])=>o.length));return t.map(([o,s])=>o.padStart(n)+(s?" "+s:"")).join(`
`)}function fR(e){const t=e[0];return t==null||"kind"in t||"length"in t?{nodes:t,source:e[1],positions:e[2],path:e[3],originalError:e[4],extensions:e[5]}:t}class bs extends Error{constructor(t,...n){var o,s,l;const{nodes:d,source:h,positions:b,path:g,originalError:S,extensions:_}=fR(n);super(t),this.name="GraphQLError",this.path=g!=null?g:void 0,this.originalError=S!=null?S:void 0,this.nodes=fc(Array.isArray(d)?d:d?[d]:void 0);const N=fc((o=this.nodes)===null||o===void 0?void 0:o.map(G=>G.loc).filter(G=>G!=null));this.source=h!=null?h:N==null||(s=N[0])===null||s===void 0?void 0:s.source,this.positions=b!=null?b:N==null?void 0:N.map(G=>G.start),this.locations=b&&h?b.map(G=>fs(h,G)):N==null?void 0:N.map(G=>fs(G.source,G.start));const R=dR(S==null?void 0:S.extensions)?S==null?void 0:S.extensions:void 0;this.extensions=(l=_!=null?_:R)!==null&&l!==void 0?l:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),S!=null&&S.stack?Object.defineProperty(this,"stack",{value:S.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,bs):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let t=this.message;if(this.nodes)for(const n of this.nodes)n.loc&&(t+=`

`+mR(n.loc));else if(this.source&&this.locations)for(const n of this.locations)t+=`

`+hc(this.source,n);return t}toJSON(){const t={message:this.message};return this.locations!=null&&(t.locations=this.locations),this.path!=null&&(t.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(t.extensions=this.extensions),t}}function fc(e){return e===void 0||e.length===0?void 0:e}function He(e,t,n){return new bs(`Syntax Error: ${n}`,{source:e,positions:[t]})}class bR{constructor(t,n,o){this.start=t.start,this.end=n.end,this.startToken=t,this.endToken=n,this.source=o}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class bc{constructor(t,n,o,s,l,d){this.kind=t,this.start=n,this.end=o,this.line=s,this.column=l,this.value=d,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const yR={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]};new Set(Object.keys(yR));var wn;(function(e){e.QUERY="query",e.MUTATION="mutation",e.SUBSCRIPTION="subscription"})(wn||(wn={}));var ys;(function(e){e.QUERY="QUERY",e.MUTATION="MUTATION",e.SUBSCRIPTION="SUBSCRIPTION",e.FIELD="FIELD",e.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",e.FRAGMENT_SPREAD="FRAGMENT_SPREAD",e.INLINE_FRAGMENT="INLINE_FRAGMENT",e.VARIABLE_DEFINITION="VARIABLE_DEFINITION",e.SCHEMA="SCHEMA",e.SCALAR="SCALAR",e.OBJECT="OBJECT",e.FIELD_DEFINITION="FIELD_DEFINITION",e.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",e.INTERFACE="INTERFACE",e.UNION="UNION",e.ENUM="ENUM",e.ENUM_VALUE="ENUM_VALUE",e.INPUT_OBJECT="INPUT_OBJECT",e.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION"})(ys||(ys={}));var se;(function(e){e.NAME="Name",e.DOCUMENT="Document",e.OPERATION_DEFINITION="OperationDefinition",e.VARIABLE_DEFINITION="VariableDefinition",e.SELECTION_SET="SelectionSet",e.FIELD="Field",e.ARGUMENT="Argument",e.FRAGMENT_SPREAD="FragmentSpread",e.INLINE_FRAGMENT="InlineFragment",e.FRAGMENT_DEFINITION="FragmentDefinition",e.VARIABLE="Variable",e.INT="IntValue",e.FLOAT="FloatValue",e.STRING="StringValue",e.BOOLEAN="BooleanValue",e.NULL="NullValue",e.ENUM="EnumValue",e.LIST="ListValue",e.OBJECT="ObjectValue",e.OBJECT_FIELD="ObjectField",e.DIRECTIVE="Directive",e.NAMED_TYPE="NamedType",e.LIST_TYPE="ListType",e.NON_NULL_TYPE="NonNullType",e.SCHEMA_DEFINITION="SchemaDefinition",e.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",e.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",e.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",e.FIELD_DEFINITION="FieldDefinition",e.INPUT_VALUE_DEFINITION="InputValueDefinition",e.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",e.UNION_TYPE_DEFINITION="UnionTypeDefinition",e.ENUM_TYPE_DEFINITION="EnumTypeDefinition",e.ENUM_VALUE_DEFINITION="EnumValueDefinition",e.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",e.DIRECTIVE_DEFINITION="DirectiveDefinition",e.SCHEMA_EXTENSION="SchemaExtension",e.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",e.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",e.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",e.UNION_TYPE_EXTENSION="UnionTypeExtension",e.ENUM_TYPE_EXTENSION="EnumTypeExtension",e.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension"})(se||(se={}));function SR(e){return e===9||e===32}function fr(e){return e>=48&&e<=57}function yc(e){return e>=97&&e<=122||e>=65&&e<=90}function Sc(e){return yc(e)||e===95}function gR(e){return yc(e)||fr(e)||e===95}function TR(e){var t;let n=Number.MAX_SAFE_INTEGER,o=null,s=-1;for(let d=0;d<e.length;++d){var l;const h=e[d],b=vR(h);b!==h.length&&(o=(l=o)!==null&&l!==void 0?l:d,s=d,d!==0&&b<n&&(n=b))}return e.map((d,h)=>h===0?d:d.slice(n)).slice((t=o)!==null&&t!==void 0?t:0,s+1)}function vR(e){let t=0;for(;t<e.length&&SR(e.charCodeAt(t));)++t;return t}var U;(function(e){e.SOF="<SOF>",e.EOF="<EOF>",e.BANG="!",e.DOLLAR="$",e.AMP="&",e.PAREN_L="(",e.PAREN_R=")",e.SPREAD="...",e.COLON=":",e.EQUALS="=",e.AT="@",e.BRACKET_L="[",e.BRACKET_R="]",e.BRACE_L="{",e.PIPE="|",e.BRACE_R="}",e.NAME="Name",e.INT="Int",e.FLOAT="Float",e.STRING="String",e.BLOCK_STRING="BlockString",e.COMMENT="Comment"})(U||(U={}));class _R{constructor(t){const n=new bc(U.SOF,0,0,0,0);this.source=t,this.lastToken=n,this.token=n,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let t=this.token;if(t.kind!==U.EOF)do if(t.next)t=t.next;else{const n=IR(this,t.end);t.next=n,n.prev=t,t=n}while(t.kind===U.COMMENT);return t}}function ER(e){return e===U.BANG||e===U.DOLLAR||e===U.AMP||e===U.PAREN_L||e===U.PAREN_R||e===U.SPREAD||e===U.COLON||e===U.EQUALS||e===U.AT||e===U.BRACKET_L||e===U.BRACKET_R||e===U.BRACE_L||e===U.PIPE||e===U.BRACE_R}function Ln(e){return e>=0&&e<=55295||e>=57344&&e<=1114111}function Ti(e,t){return gc(e.charCodeAt(t))&&Tc(e.charCodeAt(t+1))}function gc(e){return e>=55296&&e<=56319}function Tc(e){return e>=56320&&e<=57343}function sn(e,t){const n=e.source.body.codePointAt(t);if(n===void 0)return U.EOF;if(n>=32&&n<=126){const o=String.fromCodePoint(n);return o==='"'?`'"'`:`"${o}"`}return"U+"+n.toString(16).toUpperCase().padStart(4,"0")}function Ae(e,t,n,o,s){const l=e.line,d=1+n-e.lineStart;return new bc(t,n,o,l,d,s)}function IR(e,t){const n=e.source.body,o=n.length;let s=t;for(;s<o;){const l=n.charCodeAt(s);switch(l){case 65279:case 9:case 32:case 44:++s;continue;case 10:++s,++e.line,e.lineStart=s;continue;case 13:n.charCodeAt(s+1)===10?s+=2:++s,++e.line,e.lineStart=s;continue;case 35:return RR(e,s);case 33:return Ae(e,U.BANG,s,s+1);case 36:return Ae(e,U.DOLLAR,s,s+1);case 38:return Ae(e,U.AMP,s,s+1);case 40:return Ae(e,U.PAREN_L,s,s+1);case 41:return Ae(e,U.PAREN_R,s,s+1);case 46:if(n.charCodeAt(s+1)===46&&n.charCodeAt(s+2)===46)return Ae(e,U.SPREAD,s,s+3);break;case 58:return Ae(e,U.COLON,s,s+1);case 61:return Ae(e,U.EQUALS,s,s+1);case 64:return Ae(e,U.AT,s,s+1);case 91:return Ae(e,U.BRACKET_L,s,s+1);case 93:return Ae(e,U.BRACKET_R,s,s+1);case 123:return Ae(e,U.BRACE_L,s,s+1);case 124:return Ae(e,U.PIPE,s,s+1);case 125:return Ae(e,U.BRACE_R,s,s+1);case 34:return n.charCodeAt(s+1)===34&&n.charCodeAt(s+2)===34?LR(e,s):ZR(e,s)}if(fr(l)||l===45)return NR(e,s,l);if(Sc(l))return GR(e,s);throw He(e.source,s,l===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:Ln(l)||Ti(n,s)?`Unexpected character: ${sn(e,s)}.`:`Invalid character: ${sn(e,s)}.`)}return Ae(e,U.EOF,o,o)}function RR(e,t){const n=e.source.body,o=n.length;let s=t+1;for(;s<o;){const l=n.charCodeAt(s);if(l===10||l===13)break;if(Ln(l))++s;else if(Ti(n,s))s+=2;else break}return Ae(e,U.COMMENT,t,s,n.slice(t+1,s))}function NR(e,t,n){const o=e.source.body;let s=t,l=n,d=!1;if(l===45&&(l=o.charCodeAt(++s)),l===48){if(l=o.charCodeAt(++s),fr(l))throw He(e.source,s,`Invalid number, unexpected digit after 0: ${sn(e,s)}.`)}else s=Ss(e,s,l),l=o.charCodeAt(s);if(l===46&&(d=!0,l=o.charCodeAt(++s),s=Ss(e,s,l),l=o.charCodeAt(s)),(l===69||l===101)&&(d=!0,l=o.charCodeAt(++s),(l===43||l===45)&&(l=o.charCodeAt(++s)),s=Ss(e,s,l),l=o.charCodeAt(s)),l===46||Sc(l))throw He(e.source,s,`Invalid number, expected digit but got: ${sn(e,s)}.`);return Ae(e,d?U.FLOAT:U.INT,t,s,o.slice(t,s))}function Ss(e,t,n){if(!fr(n))throw He(e.source,t,`Invalid number, expected digit but got: ${sn(e,t)}.`);const o=e.source.body;let s=t+1;for(;fr(o.charCodeAt(s));)++s;return s}function ZR(e,t){const n=e.source.body,o=n.length;let s=t+1,l=s,d="";for(;s<o;){const h=n.charCodeAt(s);if(h===34)return d+=n.slice(l,s),Ae(e,U.STRING,t,s+1,d);if(h===92){d+=n.slice(l,s);const b=n.charCodeAt(s+1)===117?n.charCodeAt(s+2)===123?CR(e,s):OR(e,s):wR(e,s);d+=b.value,s+=b.size,l=s;continue}if(h===10||h===13)break;if(Ln(h))++s;else if(Ti(n,s))s+=2;else throw He(e.source,s,`Invalid character within String: ${sn(e,s)}.`)}throw He(e.source,s,"Unterminated string.")}function CR(e,t){const n=e.source.body;let o=0,s=3;for(;s<12;){const l=n.charCodeAt(t+s++);if(l===125){if(s<5||!Ln(o))break;return{value:String.fromCodePoint(o),size:s}}if(o=o<<4|br(l),o<0)break}throw He(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+s)}".`)}function OR(e,t){const n=e.source.body,o=vc(n,t+2);if(Ln(o))return{value:String.fromCodePoint(o),size:6};if(gc(o)&&n.charCodeAt(t+6)===92&&n.charCodeAt(t+7)===117){const s=vc(n,t+8);if(Tc(s))return{value:String.fromCodePoint(o,s),size:12}}throw He(e.source,t,`Invalid Unicode escape sequence: "${n.slice(t,t+6)}".`)}function vc(e,t){return br(e.charCodeAt(t))<<12|br(e.charCodeAt(t+1))<<8|br(e.charCodeAt(t+2))<<4|br(e.charCodeAt(t+3))}function br(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}function wR(e,t){const n=e.source.body;switch(n.charCodeAt(t+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw He(e.source,t,`Invalid character escape sequence: "${n.slice(t,t+2)}".`)}function LR(e,t){const n=e.source.body,o=n.length;let s=e.lineStart,l=t+3,d=l,h="";const b=[];for(;l<o;){const g=n.charCodeAt(l);if(g===34&&n.charCodeAt(l+1)===34&&n.charCodeAt(l+2)===34){h+=n.slice(d,l),b.push(h);const S=Ae(e,U.BLOCK_STRING,t,l+3,TR(b).join(`
`));return e.line+=b.length-1,e.lineStart=s,S}if(g===92&&n.charCodeAt(l+1)===34&&n.charCodeAt(l+2)===34&&n.charCodeAt(l+3)===34){h+=n.slice(d,l),d=l+1,l+=4;continue}if(g===10||g===13){h+=n.slice(d,l),b.push(h),g===13&&n.charCodeAt(l+1)===10?l+=2:++l,h="",d=l,s=l;continue}if(Ln(g))++l;else if(Ti(n,l))l+=2;else throw He(e.source,l,`Invalid character within String: ${sn(e,l)}.`)}throw He(e.source,l,"Unterminated string.")}function GR(e,t){const n=e.source.body,o=n.length;let s=t+1;for(;s<o;){const l=n.charCodeAt(s);if(gR(l))++s;else break}return Ae(e,U.NAME,t,s,n.slice(t,s))}const VR=10,_c=2;function Ec(e){return vi(e,[])}function vi(e,t){switch(typeof e){case"string":return JSON.stringify(e);case"function":return e.name?`[function ${e.name}]`:"[function]";case"object":return XR(e,t);default:return String(e)}}function XR(e,t){if(e===null)return"null";if(t.includes(e))return"[Circular]";const n=[...t,e];if(PR(e)){const o=e.toJSON();if(o!==e)return typeof o=="string"?o:vi(o,n)}else if(Array.isArray(e))return kR(e,n);return WR(e,n)}function PR(e){return typeof e.toJSON=="function"}function WR(e,t){const n=Object.entries(e);return n.length===0?"{}":t.length>_c?"["+AR(e)+"]":"{ "+n.map(([s,l])=>s+": "+vi(l,t)).join(", ")+" }"}function kR(e,t){if(e.length===0)return"[]";if(t.length>_c)return"[Array]";const n=Math.min(VR,e.length),o=e.length-n,s=[];for(let l=0;l<n;++l)s.push(vi(e[l],t));return o===1?s.push("... 1 more item"):o>1&&s.push(`... ${o} more items`),"["+s.join(", ")+"]"}function AR(e){const t=Object.prototype.toString.call(e).replace(/^\[object /,"").replace(/]$/,"");if(t==="Object"&&typeof e.constructor=="function"){const n=e.constructor.name;if(typeof n=="string"&&n!=="")return n}return t}const MR=globalThis.process&&globalThis.process.env.NODE_ENV==="production"?function(t,n){return t instanceof n}:function(t,n){if(t instanceof n)return!0;if(typeof t=="object"&&t!==null){var o;const s=n.prototype[Symbol.toStringTag],l=Symbol.toStringTag in t?t[Symbol.toStringTag]:(o=t.constructor)===null||o===void 0?void 0:o.name;if(s===l){const d=Ec(t);throw new Error(`Cannot use ${s} "${d}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class Ic{constructor(t,n="GraphQL request",o={line:1,column:1}){typeof t=="string"||ms(!1,`Body must be a string. Received: ${Ec(t)}.`),this.body=t,this.name=n,this.locationOffset=o,this.locationOffset.line>0||ms(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||ms(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function xR(e){return MR(e,Ic)}function UR(e,t){return new DR(e,t).parseDocument()}class DR{constructor(t,n={}){const o=xR(t)?t:new Ic(t);this._lexer=new _R(o),this._options=n,this._tokenCounter=0}parseName(){const t=this.expectToken(U.NAME);return this.node(t,{kind:se.NAME,value:t.value})}parseDocument(){return this.node(this._lexer.token,{kind:se.DOCUMENT,definitions:this.many(U.SOF,this.parseDefinition,U.EOF)})}parseDefinition(){if(this.peek(U.BRACE_L))return this.parseOperationDefinition();const t=this.peekDescription(),n=t?this._lexer.lookahead():this._lexer.token;if(n.kind===U.NAME){switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(t)throw He(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(n.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(n)}parseOperationDefinition(){const t=this._lexer.token;if(this.peek(U.BRACE_L))return this.node(t,{kind:se.OPERATION_DEFINITION,operation:wn.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const n=this.parseOperationType();let o;return this.peek(U.NAME)&&(o=this.parseName()),this.node(t,{kind:se.OPERATION_DEFINITION,operation:n,name:o,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const t=this.expectToken(U.NAME);switch(t.value){case"query":return wn.QUERY;case"mutation":return wn.MUTATION;case"subscription":return wn.SUBSCRIPTION}throw this.unexpected(t)}parseVariableDefinitions(){return this.optionalMany(U.PAREN_L,this.parseVariableDefinition,U.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:se.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(U.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(U.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const t=this._lexer.token;return this.expectToken(U.DOLLAR),this.node(t,{kind:se.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:se.SELECTION_SET,selections:this.many(U.BRACE_L,this.parseSelection,U.BRACE_R)})}parseSelection(){return this.peek(U.SPREAD)?this.parseFragment():this.parseField()}parseField(){const t=this._lexer.token,n=this.parseName();let o,s;return this.expectOptionalToken(U.COLON)?(o=n,s=this.parseName()):s=n,this.node(t,{kind:se.FIELD,alias:o,name:s,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(U.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(t){const n=t?this.parseConstArgument:this.parseArgument;return this.optionalMany(U.PAREN_L,n,U.PAREN_R)}parseArgument(t=!1){const n=this._lexer.token,o=this.parseName();return this.expectToken(U.COLON),this.node(n,{kind:se.ARGUMENT,name:o,value:this.parseValueLiteral(t)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const t=this._lexer.token;this.expectToken(U.SPREAD);const n=this.expectOptionalKeyword("on");return!n&&this.peek(U.NAME)?this.node(t,{kind:se.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(t,{kind:se.INLINE_FRAGMENT,typeCondition:n?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const t=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(t,{kind:se.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(t,{kind:se.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(t){const n=this._lexer.token;switch(n.kind){case U.BRACKET_L:return this.parseList(t);case U.BRACE_L:return this.parseObject(t);case U.INT:return this.advanceLexer(),this.node(n,{kind:se.INT,value:n.value});case U.FLOAT:return this.advanceLexer(),this.node(n,{kind:se.FLOAT,value:n.value});case U.STRING:case U.BLOCK_STRING:return this.parseStringLiteral();case U.NAME:switch(this.advanceLexer(),n.value){case"true":return this.node(n,{kind:se.BOOLEAN,value:!0});case"false":return this.node(n,{kind:se.BOOLEAN,value:!1});case"null":return this.node(n,{kind:se.NULL});default:return this.node(n,{kind:se.ENUM,value:n.value})}case U.DOLLAR:if(t)if(this.expectToken(U.DOLLAR),this._lexer.token.kind===U.NAME){const o=this._lexer.token.value;throw He(this._lexer.source,n.start,`Unexpected variable "$${o}" in constant value.`)}else throw this.unexpected(n);return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const t=this._lexer.token;return this.advanceLexer(),this.node(t,{kind:se.STRING,value:t.value,block:t.kind===U.BLOCK_STRING})}parseList(t){const n=()=>this.parseValueLiteral(t);return this.node(this._lexer.token,{kind:se.LIST,values:this.any(U.BRACKET_L,n,U.BRACKET_R)})}parseObject(t){const n=()=>this.parseObjectField(t);return this.node(this._lexer.token,{kind:se.OBJECT,fields:this.any(U.BRACE_L,n,U.BRACE_R)})}parseObjectField(t){const n=this._lexer.token,o=this.parseName();return this.expectToken(U.COLON),this.node(n,{kind:se.OBJECT_FIELD,name:o,value:this.parseValueLiteral(t)})}parseDirectives(t){const n=[];for(;this.peek(U.AT);)n.push(this.parseDirective(t));return n}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(t){const n=this._lexer.token;return this.expectToken(U.AT),this.node(n,{kind:se.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(t)})}parseTypeReference(){const t=this._lexer.token;let n;if(this.expectOptionalToken(U.BRACKET_L)){const o=this.parseTypeReference();this.expectToken(U.BRACKET_R),n=this.node(t,{kind:se.LIST_TYPE,type:o})}else n=this.parseNamedType();return this.expectOptionalToken(U.BANG)?this.node(t,{kind:se.NON_NULL_TYPE,type:n}):n}parseNamedType(){return this.node(this._lexer.token,{kind:se.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(U.STRING)||this.peek(U.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("schema");const o=this.parseConstDirectives(),s=this.many(U.BRACE_L,this.parseOperationTypeDefinition,U.BRACE_R);return this.node(t,{kind:se.SCHEMA_DEFINITION,description:n,directives:o,operationTypes:s})}parseOperationTypeDefinition(){const t=this._lexer.token,n=this.parseOperationType();this.expectToken(U.COLON);const o=this.parseNamedType();return this.node(t,{kind:se.OPERATION_TYPE_DEFINITION,operation:n,type:o})}parseScalarTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("scalar");const o=this.parseName(),s=this.parseConstDirectives();return this.node(t,{kind:se.SCALAR_TYPE_DEFINITION,description:n,name:o,directives:s})}parseObjectTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("type");const o=this.parseName(),s=this.parseImplementsInterfaces(),l=this.parseConstDirectives(),d=this.parseFieldsDefinition();return this.node(t,{kind:se.OBJECT_TYPE_DEFINITION,description:n,name:o,interfaces:s,directives:l,fields:d})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(U.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(U.BRACE_L,this.parseFieldDefinition,U.BRACE_R)}parseFieldDefinition(){const t=this._lexer.token,n=this.parseDescription(),o=this.parseName(),s=this.parseArgumentDefs();this.expectToken(U.COLON);const l=this.parseTypeReference(),d=this.parseConstDirectives();return this.node(t,{kind:se.FIELD_DEFINITION,description:n,name:o,arguments:s,type:l,directives:d})}parseArgumentDefs(){return this.optionalMany(U.PAREN_L,this.parseInputValueDef,U.PAREN_R)}parseInputValueDef(){const t=this._lexer.token,n=this.parseDescription(),o=this.parseName();this.expectToken(U.COLON);const s=this.parseTypeReference();let l;this.expectOptionalToken(U.EQUALS)&&(l=this.parseConstValueLiteral());const d=this.parseConstDirectives();return this.node(t,{kind:se.INPUT_VALUE_DEFINITION,description:n,name:o,type:s,defaultValue:l,directives:d})}parseInterfaceTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("interface");const o=this.parseName(),s=this.parseImplementsInterfaces(),l=this.parseConstDirectives(),d=this.parseFieldsDefinition();return this.node(t,{kind:se.INTERFACE_TYPE_DEFINITION,description:n,name:o,interfaces:s,directives:l,fields:d})}parseUnionTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("union");const o=this.parseName(),s=this.parseConstDirectives(),l=this.parseUnionMemberTypes();return this.node(t,{kind:se.UNION_TYPE_DEFINITION,description:n,name:o,directives:s,types:l})}parseUnionMemberTypes(){return this.expectOptionalToken(U.EQUALS)?this.delimitedMany(U.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("enum");const o=this.parseName(),s=this.parseConstDirectives(),l=this.parseEnumValuesDefinition();return this.node(t,{kind:se.ENUM_TYPE_DEFINITION,description:n,name:o,directives:s,values:l})}parseEnumValuesDefinition(){return this.optionalMany(U.BRACE_L,this.parseEnumValueDefinition,U.BRACE_R)}parseEnumValueDefinition(){const t=this._lexer.token,n=this.parseDescription(),o=this.parseEnumValueName(),s=this.parseConstDirectives();return this.node(t,{kind:se.ENUM_VALUE_DEFINITION,description:n,name:o,directives:s})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw He(this._lexer.source,this._lexer.token.start,`${_i(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("input");const o=this.parseName(),s=this.parseConstDirectives(),l=this.parseInputFieldsDefinition();return this.node(t,{kind:se.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:o,directives:s,fields:l})}parseInputFieldsDefinition(){return this.optionalMany(U.BRACE_L,this.parseInputValueDef,U.BRACE_R)}parseTypeSystemExtension(){const t=this._lexer.lookahead();if(t.kind===U.NAME)switch(t.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(t)}parseSchemaExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const n=this.parseConstDirectives(),o=this.optionalMany(U.BRACE_L,this.parseOperationTypeDefinition,U.BRACE_R);if(n.length===0&&o.length===0)throw this.unexpected();return this.node(t,{kind:se.SCHEMA_EXTENSION,directives:n,operationTypes:o})}parseScalarTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const n=this.parseName(),o=this.parseConstDirectives();if(o.length===0)throw this.unexpected();return this.node(t,{kind:se.SCALAR_TYPE_EXTENSION,name:n,directives:o})}parseObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const n=this.parseName(),o=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),l=this.parseFieldsDefinition();if(o.length===0&&s.length===0&&l.length===0)throw this.unexpected();return this.node(t,{kind:se.OBJECT_TYPE_EXTENSION,name:n,interfaces:o,directives:s,fields:l})}parseInterfaceTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const n=this.parseName(),o=this.parseImplementsInterfaces(),s=this.parseConstDirectives(),l=this.parseFieldsDefinition();if(o.length===0&&s.length===0&&l.length===0)throw this.unexpected();return this.node(t,{kind:se.INTERFACE_TYPE_EXTENSION,name:n,interfaces:o,directives:s,fields:l})}parseUnionTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const n=this.parseName(),o=this.parseConstDirectives(),s=this.parseUnionMemberTypes();if(o.length===0&&s.length===0)throw this.unexpected();return this.node(t,{kind:se.UNION_TYPE_EXTENSION,name:n,directives:o,types:s})}parseEnumTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const n=this.parseName(),o=this.parseConstDirectives(),s=this.parseEnumValuesDefinition();if(o.length===0&&s.length===0)throw this.unexpected();return this.node(t,{kind:se.ENUM_TYPE_EXTENSION,name:n,directives:o,values:s})}parseInputObjectTypeExtension(){const t=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const n=this.parseName(),o=this.parseConstDirectives(),s=this.parseInputFieldsDefinition();if(o.length===0&&s.length===0)throw this.unexpected();return this.node(t,{kind:se.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:o,fields:s})}parseDirectiveDefinition(){const t=this._lexer.token,n=this.parseDescription();this.expectKeyword("directive"),this.expectToken(U.AT);const o=this.parseName(),s=this.parseArgumentDefs(),l=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const d=this.parseDirectiveLocations();return this.node(t,{kind:se.DIRECTIVE_DEFINITION,description:n,name:o,arguments:s,repeatable:l,locations:d})}parseDirectiveLocations(){return this.delimitedMany(U.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const t=this._lexer.token,n=this.parseName();if(Object.prototype.hasOwnProperty.call(ys,n.value))return n;throw this.unexpected(t)}node(t,n){return this._options.noLocation!==!0&&(n.loc=new bR(t,this._lexer.lastToken,this._lexer.source)),n}peek(t){return this._lexer.token.kind===t}expectToken(t){const n=this._lexer.token;if(n.kind===t)return this.advanceLexer(),n;throw He(this._lexer.source,n.start,`Expected ${Rc(t)}, found ${_i(n)}.`)}expectOptionalToken(t){return this._lexer.token.kind===t?(this.advanceLexer(),!0):!1}expectKeyword(t){const n=this._lexer.token;if(n.kind===U.NAME&&n.value===t)this.advanceLexer();else throw He(this._lexer.source,n.start,`Expected "${t}", found ${_i(n)}.`)}expectOptionalKeyword(t){const n=this._lexer.token;return n.kind===U.NAME&&n.value===t?(this.advanceLexer(),!0):!1}unexpected(t){const n=t!=null?t:this._lexer.token;return He(this._lexer.source,n.start,`Unexpected ${_i(n)}.`)}any(t,n,o){this.expectToken(t);const s=[];for(;!this.expectOptionalToken(o);)s.push(n.call(this));return s}optionalMany(t,n,o){if(this.expectOptionalToken(t)){const s=[];do s.push(n.call(this));while(!this.expectOptionalToken(o));return s}return[]}many(t,n,o){this.expectToken(t);const s=[];do s.push(n.call(this));while(!this.expectOptionalToken(o));return s}delimitedMany(t,n){this.expectOptionalToken(t);const o=[];do o.push(n.call(this));while(this.expectOptionalToken(t));return o}advanceLexer(){const{maxTokens:t}=this._options,n=this._lexer.advance();if(t!==void 0&&n.kind!==U.EOF&&(++this._tokenCounter,this._tokenCounter>t))throw He(this._lexer.source,n.start,`Document contains more that ${t} tokens. Parsing aborted.`)}}function _i(e){const t=e.value;return Rc(e.kind)+(t!=null?` "${t}"`:"")}function Rc(e){return ER(e)?`"${e}"`:e}function FR(e){return e===void 0&&(e={}),typeof e.addEventListener=="function"&&typeof e.removeEventListener=="function"}var Nc="OT_ZONE_CONTEXT",YR=function(){function e(){this._enabled=!1,this._zoneCounter=0}return e.prototype._activeContextFromZone=function(t){return t&&t.get(Nc)||bt},e.prototype._bindFunction=function(t,n){var o=this,s=function(){for(var l=this,d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];return o.with(t,function(){return n.apply(l,d)})};return Object.defineProperty(s,"length",{enumerable:!1,configurable:!0,writable:!1,value:n.length}),s},e.prototype._bindListener=function(t,n){var o=n;return o.__ot_listeners!==void 0||(o.__ot_listeners={},typeof o.addEventListener=="function"&&(o.addEventListener=this._patchAddEventListener(o,o.addEventListener,t)),typeof o.removeEventListener=="function"&&(o.removeEventListener=this._patchRemoveEventListener(o,o.removeEventListener))),n},e.prototype._createZoneName=function(){this._zoneCounter++;var t=Math.random();return this._zoneCounter+"-"+t},e.prototype._createZone=function(t,n){var o;return Zone.current.fork({name:t,properties:(o={},o[Nc]=n,o)})},e.prototype._getActiveZone=function(){return Zone.current},e.prototype._patchAddEventListener=function(t,n,o){var s=this;return function(l,d,h){t.__ot_listeners===void 0&&(t.__ot_listeners={});var b=t.__ot_listeners[l];b===void 0&&(b=new WeakMap,t.__ot_listeners[l]=b);var g=s.bind(o,d);return b.set(d,g),n.call(this,l,g,h)}},e.prototype._patchRemoveEventListener=function(t,n){return function(o,s){if(t.__ot_listeners===void 0||t.__ot_listeners[o]===void 0)return n.call(this,o,s);var l=t.__ot_listeners[o],d=l.get(s);return l.delete(s),n.call(this,o,d||s)}},e.prototype.active=function(){if(!this._enabled)return bt;var t=this._getActiveZone(),n=this._activeContextFromZone(t);return n||bt},e.prototype.bind=function(t,n){return t===void 0&&(t=this.active()),typeof n=="function"?this._bindFunction(t,n):(FR(n)&&this._bindListener(t,n),n)},e.prototype.disable=function(){return this._enabled=!1,this},e.prototype.enable=function(){return this._enabled=!0,this},e.prototype.with=function(t,n,o){for(var s=[],l=3;l<arguments.length;l++)s[l-3]=arguments[l];var d=this._createZoneName(),h=this._createZone(d,t);return h.run(n,o,s)},e}(),Zc={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};let gt;const HR=e=>{var b,g,S,_;if(gt!==void 0){console.warn("OTEL already initialized. Skipping...");return}const t=e.backendUrl||Zc.REACT_APP_PUBLIC_GRAPH_URI||"https://pub.highlight.run",n=[...(b=e.urlBlocklist)!=null?b:[],...mo],o=Zc.DEBUG==="true",s=(g=e.endpoint)!=null?g:"https://otel.highlight.io:4318",l=(S=e.environment)!=null?S:"production";gt=new tT({resource:new as({[iR]:(_=e.serviceName)!=null?_:"highlight-browser",[rR]:l,"highlight.project_id":e.projectId,"highlight.session_id":e.sessionSecureId})}),gt.register({propagator:new Qo({propagators:[new Yo,new qo]})}),o&&gt.addSpanProcessor(new jg(new Jg));const d=new eR({url:s+"/v1/traces",concurrencyLimit:10,compression:"gzip"}),h=new KR(d,{backendUrl:t,urlBlocklist:n,tracingOrigins:e.tracingOrigins});gt.addSpanProcessor(h),gt.addSpanProcessor(new xl(d)),fT({instrumentations:[new IT,new uR,new B_({propagateTraceHeaderCorsUrls:/.*/,applyCustomAttributesOnSpan:(N,R,G)=>Rt(this,null,function*(){var x,Xe,Me;const w=N.attributes["http.url"],z=(x=R.method)!=null?x:"GET";if(N.updateName(Oc(w,z,R.body)),!(G instanceof Response)){N.setAttributes({"http.response.error":G.message,"http.response.status":G.status});return}wc(N,R.body,R.headers,e.networkRecordingOptions);const re=yield Da(G,(Xe=e.networkRecordingOptions)==null?void 0:Xe.bodyKeysToRecord,(Me=e.networkRecordingOptions)==null?void 0:Me.networkBodyKeysToRedact);N.setAttribute("http.response.body",re)})}),new SI({propagateTraceHeaderCorsUrls:/.*/,applyCustomAttributesOnSpan:(N,R)=>{var re,x;const G=R,w=Oc(G._url,G._method,R.responseText);N.updateName(w),wc(N,G._body,G._requestHeaders,e.networkRecordingOptions);const z=Yt(G._body,(re=e.networkRecordingOptions)==null?void 0:re.networkBodyKeysToRedact,(x=e.networkRecordingOptions)==null?void 0:x.bodyKeysToRecord,G._requestHeaders);N.setAttribute("http.request.body",z)}})]}),gt.register({contextManager:new YR})};class KR extends dc{constructor(n,o){var s,l,d;super(n);fe(this,"backendUrl");fe(this,"urlBlocklist");fe(this,"tracingOrigins");this.backendUrl=(s=o.backendUrl)!=null?s:"",this.urlBlocklist=(l=o.urlBlocklist)!=null?l:mo,this.tracingOrigins=(d=o.tracingOrigins)!=null?d:!1}onStart(){}onEnd(n){const o=n.attributes["http.url"];if(typeof o=="string"){const s=!this.urlBlocklist.some(h=>o.toLowerCase().includes(h)),l=Ur(o,this.backendUrl,this.tracingOrigins),d=Dr(o,this.tracingOrigins);(!s||!l||!d)&&(n.spanContext().traceFlags=0)}}onShutdown(){}}const Cc="highlight-browser",JR=()=>gt.getTracer(Cc),BR=()=>Rt(this,null,function*(){gt!==void 0&&(yield gt.forceFlush(),gt.shutdown())}),Oc=(e,t,n)=>{var d,h,b;let o;const s=new URL(e).pathname;let l=`${t} - ${s}`;try{if(o=typeof n=="string"?JSON.parse(n):n,o&&o.query){const g=UR(o.query),S=((d=g.definitions[0])==null?void 0:d.kind)==="OperationDefinition"?(b=(h=g.definitions[0])==null?void 0:h.name)==null?void 0:b.value:void 0;S&&(l=`${S} (GraphQL: ${s})`)}}catch(g){}return l},wc=(e,t,n,o)=>{var h;const s=typeof t=="string"?t:String(t);let l;try{l=t?JSON.parse(s):void 0,l.operationName&&e.setAttribute("graphql.operation.name",l.operationName)}catch(b){}const d=Ga((h=o==null?void 0:o.networkHeadersToRedact)!=null?h:[],n,o==null?void 0:o.headerKeysToRecord);e.setAttributes({"highlight.type":"http.request","http.request.headers":JSON.stringify(d),"http.request.body":s})},Lc=Object.freeze(Object.defineProperty({__proto__:null,BROWSER_TRACER_NAME:Cc,getTracer:JR,setupBrowserTracing:HR,shutdown:BR},Symbol.toStringTag,{value:"Module"}));var gs={exports:{}};(function(e,t){(function(n,o){o(t)})(jn,function(n){var o=Object.defineProperty,s=Object.defineProperties,l=Object.getOwnPropertyDescriptors,d=Object.getOwnPropertySymbols,h=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,g=(i,r,a)=>r in i?o(i,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):i[r]=a,S=(i,r)=>{for(var a in r||(r={}))h.call(r,a)&&g(i,a,r[a]);if(d)for(var a of d(r))b.call(r,a)&&g(i,a,r[a]);return i},_=(i,r)=>s(i,l(r)),N=(i,r)=>{var a={};for(var c in i)h.call(i,c)&&r.indexOf(c)<0&&(a[c]=i[c]);if(i!=null&&d)for(var c of d(i))r.indexOf(c)<0&&b.call(i,c)&&(a[c]=i[c]);return a},R=(i,r,a)=>(g(i,typeof r!="symbol"?r+"":r,a),a),G=(i,r,a)=>new Promise((c,u)=>{var p=f=>{try{y(a.next(f))}catch(T){u(T)}},m=f=>{try{y(a.throw(f))}catch(T){u(T)}},y=f=>f.done?c(f.value):Promise.resolve(f.value).then(p,m);y((a=a.apply(i,r)).next())});function w(i,r){for(var a=0;a<r.length;a++){const c=r[a];if(typeof c!="string"&&!Array.isArray(c)){for(const u in c)if(u!=="default"&&!(u in i)){const p=Object.getOwnPropertyDescriptor(c,u);p&&Object.defineProperty(i,u,p.get?p:{enumerable:!0,get:()=>c[u]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}var z,re=Object.defineProperty,x=(i,r,a)=>(((c,u,p)=>{u in c?re(c,u,{enumerable:!0,configurable:!0,writable:!0,value:p}):c[u]=p})(i,typeof r!="symbol"?r+"":r,a),a),Xe=Object.defineProperty,Me=(i,r,a)=>(((c,u,p)=>{u in c?Xe(c,u,{enumerable:!0,configurable:!0,writable:!0,value:p}):c[u]=p})(i,typeof r!="symbol"?r+"":r,a),a),Ie=(i=>(i[i.Document=0]="Document",i[i.DocumentType=1]="DocumentType",i[i.Element=2]="Element",i[i.Text=3]="Text",i[i.CDATA=4]="CDATA",i[i.Comment=5]="Comment",i))(Ie||{});const it={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Gn={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Mt={},xt={};function Jt(i,r,a){var c;const u=`${i}.${String(a)}`;if(xt[u])return xt[u].call(r);const p=function(y){if(Mt[y])return Mt[y];const f=globalThis[y],T=f.prototype,v=y in it?it[y]:void 0,I=!!(v&&v.every(k=>{var L,A;return!!((A=(L=Object.getOwnPropertyDescriptor(T,k))==null?void 0:L.get)!=null&&A.toString().includes("[native code]"))})),Z=y in Gn?Gn[y]:void 0,C=!!(Z&&Z.every(k=>{var L;return typeof T[k]=="function"&&((L=T[k])==null?void 0:L.toString().includes("[native code]"))}));if(I&&C)return Mt[y]=f.prototype,f.prototype;try{const k=document.createElement("iframe");document.body.appendChild(k);const L=k.contentWindow;if(!L)return f.prototype;const A=L[y].prototype;return document.body.removeChild(k),A?Mt[y]=A:T}catch(k){return T}}(i),m=(c=Object.getOwnPropertyDescriptor(p,a))==null?void 0:c.get;return m?(xt[u]=m,m.call(r)):r[a]}function Ts(i){return Jt("Node",i,"childNodes")}function Ei(i){return Jt("Node",i,"parentNode")}function vs(i){return Jt("Node",i,"parentElement")}function _s(i){return Jt("Node",i,"textContent")}function Es(i){return i&&"shadowRoot"in i?Jt("Element",i,"shadowRoot"):null}function Gc(i){return i.nodeType===i.ELEMENT_NODE}function yr(i){const r=i&&"host"in i&&"mode"in i&&function(a){return a&&"host"in a?Jt("ShadowRoot",a,"host"):null}(i)||null;return!!(r&&"shadowRoot"in r&&Es(r)===i)}function Sr(i){return Object.prototype.toString.call(i)==="[object ShadowRoot]"}function Ii(i){try{const a=i.rules||i.cssRules;return a?((r=Array.from(a,Vc).join("")).includes(" background-clip: text;")&&!r.includes(" -webkit-background-clip: text;")&&(r=r.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),r):null}catch(a){return null}var r}function Vc(i){let r;if(function(a){return"styleSheet"in a}(i))try{r=Ii(i.styleSheet)||function(a){const{cssText:c}=a;if(c.split('"').length<3)return c;const u=["@import",`url(${JSON.stringify(a.href)})`];return a.layerName===""?u.push("layer"):a.layerName&&u.push(`layer(${a.layerName})`),a.supportsText&&u.push(`supports(${a.supportsText})`),a.media.length&&u.push(a.media.mediaText),u.join(" ")+";"}(i)}catch(a){}else if(function(a){return"selectorText"in a}(i)&&i.selectorText.includes(":"))return function(a){const c=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return a.replace(c,"$1\\$2")}(i.cssText);return r||i.cssText}class Xc{constructor(){Me(this,"idNodeMap",new Map),Me(this,"nodeMetaMap",new WeakMap)}getId(r){var a;if(!r)return-1;const c=(a=this.getMeta(r))==null?void 0:a.id;return c!=null?c:-1}getNode(r){return this.idNodeMap.get(r)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(r){return this.nodeMetaMap.get(r)||null}removeNodeFromMap(r){const a=this.getId(r);this.idNodeMap.delete(a),r.childNodes&&r.childNodes.forEach(c=>this.removeNodeFromMap(c))}has(r){return this.idNodeMap.has(r)}hasNode(r){return this.nodeMetaMap.has(r)}add(r,a){const c=a.id;this.idNodeMap.set(c,r),this.nodeMetaMap.set(r,a)}replace(r,a){const c=this.getNode(r);if(c){const u=this.nodeMetaMap.get(c);u&&this.nodeMetaMap.set(a,u)}this.idNodeMap.set(r,a)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function Is({element:i,maskInputOptions:r,tagName:a,type:c,value:u,overwriteRecord:p,maskInputFn:m}){let y=u||"";return Ac({maskInputOptions:r,tagName:a,type:c,overwriteRecord:p})&&(y=m?m(y,i):"*".repeat(y.length)),y}function Vn(i){return i.toLowerCase()}const Pc="__rrweb_original__";function Rs(i){const r=i.type;return i.hasAttribute("data-rr-is-password")?"password":r?Vn(r):null}function Wc(i,r){var a;let c;try{c=new URL(i,r!=null?r:window.location.href)}catch(p){return null}const u=c.pathname.match(/\.([0-9a-z]+)(?:$)/i);return(a=u==null?void 0:u[1])!=null?a:null}function Ns(i){return i=((i=i.replace(/[^ -~]+/g,""))==null?void 0:i.split(" ").map(r=>Math.random().toString(20).substr(2,r.length)).join(" "))||""}function Zs(i){return i==="img"||i==="video"||i==="audio"||i==="source"}const QR=[new RegExp(/[a-zA-Z0-9.!#$%&'*+=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:.[a-zA-Z0-9-]+)*/),new RegExp(/[0-9]{9,16}/),new RegExp(/[0-9]{3}-?[0-9]{2}-?[0-9]{4}/),new RegExp(/[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}/),new RegExp(/[0-9]{4}-?[0-9]{4}-?[0-9]{4}-?[0-9]{4}/),new RegExp(/[0-9]{1,5}.?[0-9]{0,3}\s[a-zA-Z]{2,30}\s[a-zA-Z]{2,15}/),new RegExp(/(?:[0-9]{1,3}.){3}[0-9]{1,3}/)];function kc(i){return!!i&&QR.some(r=>r.test(i))}const Ac=({maskInputOptions:i,tagName:r,type:a,overwriteRecord:c})=>{const u=a&&a.toLowerCase();return!(c==="true"||!i[r.toLowerCase()]&&(!u||!i[u]))};let $R=1;const qR=new RegExp("[^a-z0-9-_:]"),gr=-2;function Mc(){return $R++}let Xn,xc;const eN=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,tN=/^(?:[a-z+]+:)?\/\//i,nN=/^www\..*/i,rN=/^(data:)([^,]*),(.*)/i;function Ri(i,r){return(i||"").replace(eN,(a,c,u,p,m,y)=>{const f=u||m||y,T=c||p||"";if(!f)return a;if(tN.test(f)||nN.test(f))return`url(${T}${f}${T})`;if(rN.test(f))return`url(${T}${f}${T})`;if(f[0]==="/")return`url(${T}${function(Z){let C="";return C=Z.indexOf("//")>-1?Z.split("/").slice(0,3).join("/"):Z.split("/")[0],C=C.split("?")[0],C}(r)+f}${T})`;const v=r.split("/"),I=f.split("/");v.pop();for(const Z of I)Z!=="."&&(Z===".."?v.pop():v.push(Z));return`url(${T}${v.join("/")}${T})`})}const iN=/^[^ \t\n\r\u000c]+/,oN=/^[, \t\n\r\u000c]+/,Uc=new WeakMap;function Tr(i,r){return r&&r.trim()!==""?Ni(i,r):r}function sN(i){return!!(i.tagName==="svg"||i.ownerSVGElement)}function Ni(i,r){let a=Uc.get(i);if(a||(a=i.createElement("a"),Uc.set(i,a)),r){if(r.startsWith("blob:")||r.startsWith("data:"))return r}else r="";return a.setAttribute("href",r),a.href}function Dc(i,r,a,c){return c&&(a==="src"||a==="href"&&(r!=="use"||c[0]!=="#")||a==="xlink:href"&&c[0]!=="#"?Tr(i,c):a!=="background"||r!=="table"&&r!=="td"&&r!=="th"?a==="srcset"?function(u,p){if(p.trim()==="")return p;let m=0;function y(T){let v;const I=T.exec(p.substring(m));return I?(v=I[0],m+=v.length,v):""}const f=[];for(;y(oN),!(m>=p.length);){let T=y(iN);if(T.slice(-1)===",")T=Tr(u,T.substring(0,T.length-1)),f.push(T);else{let v="";T=Tr(u,T);let I=!1;for(;;){const Z=p.charAt(m);if(Z===""){f.push((T+v).trim());break}if(I)Z===")"&&(I=!1);else{if(Z===","){m+=1,f.push((T+v).trim());break}Z==="("&&(I=!0)}v+=Z,m+=1}}}return f.join(", ")}(i,c):a==="style"?Ri(c,Ni(i)):r==="object"&&a==="data"?Tr(i,c):c:Tr(i,c))}function Fc(i,r,a){return(i==="video"||i==="audio")&&r==="autoplay"}function Yc(i,r,a){try{if(typeof r=="string"){if(i.classList.contains(r))return!0}else for(let c=i.classList.length;c--;){const u=i.classList[c];if(r.test(u))return!0}if(a)return i.matches(a)}catch(c){}return!1}function Zi(i,r,a){if(!i)return!1;if(i.nodeType!==i.ELEMENT_NODE)return!!a&&Zi(Ei(i),r,a);for(let c=i.classList.length;c--;){const u=i.classList[c];if(r.test(u))return!0}return!!a&&Zi(Ei(i),r,a)}function Hc(i,r,a,c){let u;if(Gc(i)){if(u=i,!Ts(u).length)return!1}else{if(vs(i)===null)return!1;u=vs(i)}try{if(typeof r=="string"){if(c){if(u.closest(`.${r}`))return!0}else if(u.classList.contains(r))return!0}else if(Zi(u,r,c))return!0;if(a){if(c){if(u.closest(a))return!0}else if(u.matches(a))return!0}}catch(p){}return!1}function aN(i,r){const{doc:a,mirror:c,blockClass:u,blockSelector:p,needsMask:m,inlineStylesheet:y,maskInputOptions:f={},maskTextClass:T,maskTextFn:v,maskInputFn:I,dataURLOptions:Z={},inlineImages:C,recordCanvas:k,keepIframeSrcFn:L,newlyAddedElement:A=!1,privacySetting:V}=r,X=function(O,P){if(!P.hasNode(O))return;const Y=P.getId(O);return Y===1?void 0:Y}(a,c);switch(i.nodeType){case i.DOCUMENT_NODE:return i.compatMode!=="CSS1Compat"?{type:Ie.Document,childNodes:[],compatMode:i.compatMode}:{type:Ie.Document,childNodes:[]};case i.DOCUMENT_TYPE_NODE:return{type:Ie.DocumentType,name:i.name,publicId:i.publicId,systemId:i.systemId,rootId:X};case i.ELEMENT_NODE:return function(O,P){const{doc:Y,blockClass:j,blockSelector:te,inlineStylesheet:ne,maskInputOptions:Q={},maskInputFn:B,maskTextClass:ee,dataURLOptions:K={},inlineImages:E,recordCanvas:M,keepIframeSrcFn:H,newlyAddedElement:F=!1,privacySetting:oe,rootId:W}=P;let J=Yc(O,j,te);const _e=Yc(O,ee,null),ye=oe==="strict";let pe=function($){if($ instanceof HTMLFormElement)return"form";const ue=Vn($.tagName);return qR.test(ue)?"div":ue}(O),ae={};const tt=O.attributes.length;for(let $=0;$<tt;$++){const ue=O.attributes[$];Fc(pe,ue.name)||(ae[ue.name]=Dc(Y,pe,Vn(ue.name),ue.value))}if(pe==="link"&&ne){const $=Array.from(Y.styleSheets).find(Fe=>Fe.href===O.href);let ue=null;$&&(ue=Ii($)),ue&&(delete ae.rel,delete ae.href,ae._cssText=Ri(ue,$.href))}if(pe==="style"&&O.sheet&&!(O.innerText||_s(O)||"").trim().length){const $=Ii(O.sheet);$&&(ae._cssText=Ri($,Ni(Y)))}if(pe==="input"||pe==="textarea"||pe==="select"){const $=O.value,ue=O.checked;ae.type!=="radio"&&ae.type!=="checkbox"&&ae.type!=="submit"&&ae.type!=="button"&&$?ae.value=Is({element:O,type:Rs(O),tagName:pe,value:$,overwriteRecord:O.getAttribute("data-hl-record"),maskInputOptions:Q,maskInputFn:B}):ue&&(ae.checked=ue)}if(pe==="option"&&(O.selected&&!Q.select?ae.selected=!0:delete ae.selected),pe==="canvas"&&M){if(O.__context==="2d")(function($){const ue=$.getContext("2d");if(!ue)return!0;for(let Fe=0;Fe<$.width;Fe+=50)for(let Je=0;Je<$.height;Je+=50){const Qt=ue.getImageData,Wr=Pc in Qt?Qt[Pc]:Qt;if(new Uint32Array(Wr.call(ue,Fe,Je,Math.min(50,$.width-Fe),Math.min(50,$.height-Je)).data.buffer).some(no=>no!==0))return!1}return!0})(O)||(ae.rr_dataURL=O.toDataURL(K.type,K.quality));else if(!("__context"in O)){const $=O.toDataURL(K.type,K.quality),ue=Y.createElement("canvas");ue.width=O.width,ue.height=O.height,$!==ue.toDataURL(K.type,K.quality)&&(ae.rr_dataURL=$)}}if(pe==="img"&&E&&!J&&!_e&&!ye){Xn||(Xn=Y.createElement("canvas"),xc=Xn.getContext("2d"));const $=O,ue=$.currentSrc||$.getAttribute("src")||"<unknown-src>",Fe=$.crossOrigin,Je=()=>{$.removeEventListener("load",Je);try{Xn.width=$.naturalWidth,Xn.height=$.naturalHeight,xc.drawImage($,0,0),ae.rr_dataURL=Xn.toDataURL(K.type,K.quality)}catch(Qt){if($.crossOrigin!=="anonymous")return $.crossOrigin="anonymous",void($.complete&&$.naturalWidth!==0?Je():$.addEventListener("load",Je));console.warn(`Cannot inline img src=${ue}! Error: ${Qt}`)}$.crossOrigin==="anonymous"&&(Fe?ae.crossOrigin=Fe:$.removeAttribute("crossorigin"))};$.complete&&$.naturalWidth!==0?Je():$.addEventListener("load",Je)}if(pe==="audio"||pe==="video"){const $=ae;$.rr_mediaState=O.paused?"paused":"played",$.rr_mediaCurrentTime=O.currentTime,$.rr_mediaPlaybackRate=O.playbackRate,$.rr_mediaMuted=O.muted,$.rr_mediaLoop=O.loop,$.rr_mediaVolume=O.volume}if(F||(O.scrollLeft&&(ae.rr_scrollLeft=O.scrollLeft),O.scrollTop&&(ae.rr_scrollTop=O.scrollTop)),J||_e||ye&&Zs(pe)){const{width:$,height:ue}=O.getBoundingClientRect();ae={class:ae.class,rr_width:`${$}px`,rr_height:`${ue}px`}}ye&&Zs(pe)&&(J=!0),pe!=="iframe"||H(ae.src)||(O.contentDocument||(ae.rr_src=ae.src),delete ae.src);let je;try{customElements.get(pe)&&(je=!0)}catch($){}if(E&&pe==="video"){const $=O;if($.src===""||$.src.indexOf("blob:")!==-1){const{width:ue,height:Fe}=O.getBoundingClientRect();ae={width:ue,height:Fe,rr_width:`${ue}px`,rr_height:`${Fe}px`,rr_inlined_video:!0},pe="canvas";const Je=Y.createElement("canvas");Je.width=O.width,Je.height=O.height,ae.rr_dataURL=Je.toDataURL(K.type,K.quality)}}return{type:Ie.Element,tagName:pe,attributes:ae,childNodes:[],isSVG:sN(O)||void 0,needBlock:J,needMask:_e,rootId:W,isCustom:je}}(i,{doc:a,blockClass:u,blockSelector:p,inlineStylesheet:y,maskInputOptions:f,maskInputFn:I,maskTextClass:T,dataURLOptions:Z,inlineImages:C,recordCanvas:k,keepIframeSrcFn:L,newlyAddedElement:A,privacySetting:V,rootId:X});case i.TEXT_NODE:return function(O,P){var Y,j;const{needsMask:te,maskTextFn:ne,privacySetting:Q,rootId:B}=P,ee=Ei(O),K=ee&&ee.tagName;let E=_s(O);const M=K==="STYLE"||void 0,H=K==="SCRIPT"||void 0;let F=!1;if(M&&E){try{O.nextSibling||O.previousSibling||(Y=ee.sheet)!=null&&Y.cssRules&&(E=Ii(ee.sheet))}catch(_e){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${_e}`,O)}E=Ri(E,Ni(P.doc)),F=!0}H?(E="SCRIPT_PLACEHOLDER",F=!0):K==="NOSCRIPT"&&(E="",F=!0),!M&&!H&&E&&te&&(E=ne?ne(E,vs(O)):E.replace(/[\S]/g,"*"));const oe=Q==="strict",W=(j=O.parentElement)==null?void 0:j.getAttribute("data-hl-record"),J=Q==="default"&&kc(E);return(oe||J)&&!W&&!F&&K&&!new Set(["HEAD","TITLE","STYLE","SCRIPT","HTML","BODY","NOSCRIPT"]).has(K)&&E&&(E=Ns(E)),{type:Ie.Text,textContent:E||"",isStyle:M,rootId:B}}(i,{doc:a,needsMask:m,maskTextFn:v,privacySetting:V,rootId:X});case i.CDATA_SECTION_NODE:return{type:Ie.CDATA,textContent:"",rootId:X};case i.COMMENT_NODE:return{type:Ie.Comment,textContent:_s(i)||"",rootId:X};default:return!1}}function Ze(i){return i==null?"":i.toLowerCase()}function Pn(i,r){const{doc:a,mirror:c,blockClass:u,blockSelector:p,maskTextClass:m,maskTextSelector:y,skipChild:f=!1,inlineStylesheet:T=!0,maskInputOptions:v={},maskTextFn:I,maskInputFn:Z,slimDOMOptions:C,dataURLOptions:k={},inlineImages:L=!1,recordCanvas:A=!1,onSerialize:V,onIframeLoad:X,iframeLoadTimeout:O=5e3,onStylesheetLoad:P,stylesheetLoadTimeout:Y=5e3,keepIframeSrcFn:j=()=>!1,newlyAddedElement:te=!1,privacySetting:ne}=r;let{needsMask:Q}=r,{preserveWhiteSpace:B=!0}=r;Q||(Q=Hc(i,m,y,Q===void 0));const ee=aN(i,{doc:a,mirror:c,blockClass:u,blockSelector:p,needsMask:Q,inlineStylesheet:T,maskInputOptions:v,maskTextClass:m,maskTextFn:I,maskInputFn:Z,dataURLOptions:k,inlineImages:L,recordCanvas:A,keepIframeSrcFn:j,newlyAddedElement:te,privacySetting:ne});if(!ee)return console.warn(i,"not serialized"),null;let K;K=c.hasNode(i)?c.getId(i):!function(W,J){return!!(J.comment&&W.type===Ie.Comment||W.type===Ie.Element&&(J.script&&(W.tagName==="script"||W.tagName==="link"&&(W.attributes.rel==="preload"||W.attributes.rel==="modulepreload")&&W.attributes.as==="script"||W.tagName==="link"&&W.attributes.rel==="prefetch"&&typeof W.attributes.href=="string"&&Wc(W.attributes.href)==="js")||J.headFavicon&&(W.tagName==="link"&&W.attributes.rel==="shortcut icon"||W.tagName==="meta"&&(Ze(W.attributes.name).match(/^msapplication-tile(image|color)$/)||Ze(W.attributes.name)==="application-name"||Ze(W.attributes.rel)==="icon"||Ze(W.attributes.rel)==="apple-touch-icon"||Ze(W.attributes.rel)==="shortcut icon"))||W.tagName==="meta"&&(J.headMetaDescKeywords&&Ze(W.attributes.name).match(/^description|keywords$/)||J.headMetaSocial&&(Ze(W.attributes.property).match(/^(og|twitter|fb):/)||Ze(W.attributes.name).match(/^(og|twitter):/)||Ze(W.attributes.name)==="pinterest")||J.headMetaRobots&&(Ze(W.attributes.name)==="robots"||Ze(W.attributes.name)==="googlebot"||Ze(W.attributes.name)==="bingbot")||J.headMetaHttpEquiv&&W.attributes["http-equiv"]!==void 0||J.headMetaAuthorship&&(Ze(W.attributes.name)==="author"||Ze(W.attributes.name)==="generator"||Ze(W.attributes.name)==="framework"||Ze(W.attributes.name)==="publisher"||Ze(W.attributes.name)==="progid"||Ze(W.attributes.property).match(/^article:/)||Ze(W.attributes.property).match(/^product:/))||J.headMetaVerification&&(Ze(W.attributes.name)==="google-site-verification"||Ze(W.attributes.name)==="yandex-verification"||Ze(W.attributes.name)==="csrf-token"||Ze(W.attributes.name)==="p:domain_verify"||Ze(W.attributes.name)==="verify-v1"||Ze(W.attributes.name)==="verification"||Ze(W.attributes.name)==="shopify-checkout-api-token"))))}(ee,C)&&(B||ee.type!==Ie.Text||ee.isStyle||ee.textContent.replace(/^\s+|\s+$/gm,"").length)?Mc():gr;const E=Object.assign(ee,{id:K});if(c.add(i,E),K===gr)return null;V&&V(i);let M=!f,H=ne,F=ne==="strict";if(E.type===Ie.Element){if(M=M&&!E.needBlock,F||(F=!!E.needBlock||!!E.needMask),H=F?"strict":H,F&&Zs(E.tagName)){const J=i.cloneNode();J.src="",c.add(J,E)}delete E.needBlock,delete E.needMask;const W=Es(i);W&&Sr(W)&&(E.isShadowHost=!0)}if((E.type===Ie.Document||E.type===Ie.Element)&&M){C.headWhitespace&&E.type===Ie.Element&&E.tagName==="head"&&(B=!1);const W={doc:a,mirror:c,blockClass:u,blockSelector:p,needsMask:Q,maskTextClass:m,maskTextSelector:y,skipChild:f,inlineStylesheet:T,maskInputOptions:v,maskTextFn:I,maskInputFn:Z,slimDOMOptions:C,dataURLOptions:k,inlineImages:L,recordCanvas:A,preserveWhiteSpace:B,onSerialize:V,onIframeLoad:X,iframeLoadTimeout:O,onStylesheetLoad:P,stylesheetLoadTimeout:Y,keepIframeSrcFn:j,privacySetting:H};if(!(E.type===Ie.Element&&E.tagName==="textarea"&&E.attributes.value!==void 0))for(const _e of Array.from(Ts(i))){const ye=Pn(_e,W);ye&&E.childNodes.push(ye)}let J=null;if(Gc(i)&&(J=Es(i)))for(const _e of Array.from(Ts(J))){const ye=Pn(_e,W);ye&&(Sr(J)&&(ye.isShadow=!0),E.childNodes.push(ye))}}const oe=Ei(i);return oe&&yr(oe)&&Sr(oe)&&(E.isShadow=!0),E.type===Ie.Element&&E.tagName==="iframe"&&function(W,J,_e){const ye=W.contentWindow;if(!ye)return;let pe,ae=!1;try{pe=ye.document.readyState}catch(je){return}if(pe!=="complete"){const je=setTimeout(()=>{ae||(J(),ae=!0)},_e);return void W.addEventListener("load",()=>{clearTimeout(je),ae=!0,J()})}const tt="about:blank";if(ye.location.href!==tt||W.src===tt||W.src==="")return setTimeout(J,0),W.addEventListener("load",J);W.addEventListener("load",J)}(i,()=>{const W=i.contentDocument;if(W&&X){const J=Pn(W,{doc:W,mirror:c,blockClass:u,blockSelector:p,needsMask:Q,maskTextClass:m,maskTextSelector:y,skipChild:!1,inlineStylesheet:T,maskInputOptions:v,maskTextFn:I,maskInputFn:Z,slimDOMOptions:C,dataURLOptions:k,inlineImages:L,recordCanvas:A,preserveWhiteSpace:B,onSerialize:V,onIframeLoad:X,iframeLoadTimeout:O,onStylesheetLoad:P,stylesheetLoadTimeout:Y,keepIframeSrcFn:j,privacySetting:ne});J&&X(i,J)}},O),E.type===Ie.Element&&E.tagName==="link"&&typeof E.attributes.rel=="string"&&(E.attributes.rel==="stylesheet"||E.attributes.rel==="preload"&&typeof E.attributes.href=="string"&&Wc(E.attributes.href)==="css")&&function(W,J,_e){let ye,pe=!1;try{ye=W.sheet}catch(tt){return}if(ye)return;const ae=setTimeout(()=>{pe||(J(),pe=!0)},_e);W.addEventListener("load",()=>{clearTimeout(ae),pe=!0,J()})}(i,()=>{if(P){const W=Pn(i,{doc:a,mirror:c,blockClass:u,blockSelector:p,needsMask:Q,maskTextClass:m,maskTextSelector:y,skipChild:!1,inlineStylesheet:T,maskInputOptions:v,maskTextFn:I,maskInputFn:Z,slimDOMOptions:C,dataURLOptions:k,inlineImages:L,recordCanvas:A,preserveWhiteSpace:B,onSerialize:V,onIframeLoad:X,iframeLoadTimeout:O,onStylesheetLoad:P,stylesheetLoadTimeout:Y,keepIframeSrcFn:j,privacySetting:ne});W&&P(i,W)}},Y),E}var lN=Object.defineProperty,ut=(i,r,a)=>(((c,u,p)=>{u in c?lN(c,u,{enumerable:!0,configurable:!0,writable:!0,value:p}):c[u]=p})(i,typeof r!="symbol"?r+"":r,a),a);class Cs{constructor(...r){ut(this,"parentElement",null),ut(this,"parentNode",null),ut(this,"ownerDocument"),ut(this,"firstChild",null),ut(this,"lastChild",null),ut(this,"previousSibling",null),ut(this,"nextSibling",null),ut(this,"ELEMENT_NODE",1),ut(this,"TEXT_NODE",3),ut(this,"nodeType"),ut(this,"nodeName"),ut(this,"RRNodeType")}get childNodes(){const r=[];let a=this.firstChild;for(;a;)r.push(a),a=a.nextSibling;return r}contains(r){if(!(r instanceof Cs)||r.ownerDocument!==this.ownerDocument)return!1;if(r===this)return!0;for(;r.parentNode;){if(r.parentNode===this)return!0;r=r.parentNode}return!1}appendChild(r){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(r,a){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(r){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}}const Kc={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Jc={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Ci={};function Os(i){if(Ci[i])return Ci[i];const r=globalThis[i],a=r.prototype,c=i in Kc?Kc[i]:void 0,u=!!(c&&c.every(y=>{var f,T;return!!((T=(f=Object.getOwnPropertyDescriptor(a,y))==null?void 0:f.get)!=null&&T.toString().includes("[native code]"))})),p=i in Jc?Jc[i]:void 0,m=!!(p&&p.every(y=>{var f;return typeof a[y]=="function"&&((f=a[y])==null?void 0:f.toString().includes("[native code]"))}));if(u&&m)return Ci[i]=r.prototype,r.prototype;try{const y=document.createElement("iframe");document.body.appendChild(y);const f=y.contentWindow;if(!f)return r.prototype;const T=f[i].prototype;return document.body.removeChild(y),T?Ci[i]=T:a}catch(y){return a}}const ws={};function Wn(i,r,a){var c;const u=`${i}.${String(a)}`;if(ws[u])return ws[u].call(r);const p=Os(i),m=(c=Object.getOwnPropertyDescriptor(p,a))==null?void 0:c.get;return m?(ws[u]=m,m.call(r)):r[a]}const Ls={};function Bc(i,r,a){const c=`${i}.${String(a)}`;if(Ls[c])return Ls[c].bind(r);const u=Os(i)[a];return typeof u!="function"?r[a]:(Ls[c]=u,u.bind(r))}function Oi(i){return Wn("Node",i,"childNodes")}function wt(i){return Wn("Node",i,"parentNode")}function wi(i){return Wn("Node",i,"parentElement")}function zc(i){return Wn("Node",i,"textContent")}function jc(i,r){return Bc("Node",i,"contains")(r)}function Gs(i){return Bc("Node",i,"getRootNode")()}function kn(i){return i&&"host"in i?Wn("ShadowRoot",i,"host"):null}function vr(i){return i&&"shadowRoot"in i?Wn("Element",i,"shadowRoot"):null}function $e(i,r,a=document){const c={capture:!0};return a.addEventListener(i,r,c),()=>a.removeEventListener(i,r,c)}const An=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`;let Qc={map:{},getId:()=>(console.error(An),-1),getNode:()=>(console.error(An),null),removeNodeFromMap(){console.error(An)},has:()=>(console.error(An),!1),reset(){console.error(An)}};function _r(i,r,a={}){let c=null,u=0;return function(...p){const m=Date.now();u||a.leading!==!1||(u=m);const y=r-(m-u),f=this;y<=0||y>r?(c&&(clearTimeout(c),c=null),u=m,i.apply(f,p)):c||a.trailing===!1||(c=setTimeout(()=>{u=a.leading===!1?0:Date.now(),c=null,i.apply(f,p)},y))}}function Li(i,r,a,c,u=window){const p=u.Object.getOwnPropertyDescriptor(i,r);return u.Object.defineProperty(i,r,c?a:{set(m){setTimeout(()=>{a.set.call(this,m)},0),p&&p.set&&p.set.call(this,m)}}),()=>Li(i,r,p||{},!0)}function Mn(i,r,a){try{if(!(r in i))return()=>{};const c=i[r],u=a(c);return typeof u=="function"&&(u.prototype=u.prototype||{},Object.defineProperties(u,{__rrweb_original__:{enumerable:!1,value:c}})),i[r]=u,()=>{i[r]=c}}catch(c){return()=>{}}}typeof window!="undefined"&&window.Proxy&&window.Reflect&&(Qc=new Proxy(Qc,{get:(i,r,a)=>(r==="map"&&console.error(An),Reflect.get(i,r,a))}));let Gi=Date.now;function $c(i){var r,a,c,u;const p=i.document;return{left:p.scrollingElement?p.scrollingElement.scrollLeft:i.pageXOffset!==void 0?i.pageXOffset:p.documentElement.scrollLeft||(p==null?void 0:p.body)&&((r=wi(p.body))==null?void 0:r.scrollLeft)||((a=p==null?void 0:p.body)==null?void 0:a.scrollLeft)||0,top:p.scrollingElement?p.scrollingElement.scrollTop:i.pageYOffset!==void 0?i.pageYOffset:(p==null?void 0:p.documentElement.scrollTop)||(p==null?void 0:p.body)&&((c=wi(p.body))==null?void 0:c.scrollTop)||((u=p==null?void 0:p.body)==null?void 0:u.scrollTop)||0}}function qc(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function eu(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function tu(i){return i?i.nodeType===i.ELEMENT_NODE?i:wi(i):null}/[1-9][0-9]{12}/.test(Date.now().toString())||(Gi=()=>new Date().getTime());const cN=i=>{try{if(i instanceof HTMLElement)return i.tagName==="CANVAS"}catch(r){return!1}return!1};function ze(i,r,a,c){if(!i)return!1;const u=tu(i);if(!u)return!1;try{if(typeof r=="string"){if(u.classList.contains(r)||c&&u.closest("."+r)!==null)return!0}else if(Zi(u,r,c))return!0}catch(p){}return!!(a&&(u.matches(a)||c&&u.closest(a)!==null))}function Vs(i,r,a){return!(i.tagName!=="TITLE"||!a.headTitleMutations)||r.getId(i)===gr}function nu(i,r){if(yr(i))return!1;const a=r.getId(i);if(!r.has(a))return!0;const c=wt(i);return(!c||c.nodeType!==i.DOCUMENT_NODE)&&(!c||nu(c,r))}function Xs(i){return!!i.changedTouches}function ru(i,r){return!!(i.nodeName==="IFRAME"&&r.getMeta(i))}function iu(i,r){return!!(i.nodeName==="LINK"&&i.nodeType===i.ELEMENT_NODE&&i.getAttribute&&i.getAttribute("rel")==="stylesheet"&&r.getMeta(i))}function Ps(i){return!!i&&(i instanceof Cs&&"shadowRoot"in i?!!i.shadowRoot:!!vr(i))}class uN{constructor(){x(this,"id",1),x(this,"styleIDMap",new WeakMap),x(this,"idStyleMap",new Map)}getId(r){var a;return(a=this.styleIDMap.get(r))!=null?a:-1}has(r){return this.styleIDMap.has(r)}add(r,a){if(this.has(r))return this.getId(r);let c;return c=a===void 0?this.id++:a,this.styleIDMap.set(r,c),this.idStyleMap.set(c,r),c}getStyle(r){return this.idStyleMap.get(r)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function ou(i){var r;let a=null;return"getRootNode"in i&&((r=Gs(i))==null?void 0:r.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&kn(Gs(i))&&(a=kn(Gs(i))),a}function dN(i){const r=i.ownerDocument;if(!r)return!1;const a=function(c){let u,p=c;for(;u=ou(p);)p=u;return p}(i);return jc(r,a)}function su(i){const r=i.ownerDocument;return!!r&&(jc(r,i)||dN(i))}var ve=(i=>(i[i.DomContentLoaded=0]="DomContentLoaded",i[i.Load=1]="Load",i[i.FullSnapshot=2]="FullSnapshot",i[i.IncrementalSnapshot=3]="IncrementalSnapshot",i[i.Meta=4]="Meta",i[i.Custom=5]="Custom",i[i.Plugin=6]="Plugin",i))(ve||{}),be=(i=>(i[i.Mutation=0]="Mutation",i[i.MouseMove=1]="MouseMove",i[i.MouseInteraction=2]="MouseInteraction",i[i.Scroll=3]="Scroll",i[i.ViewportResize=4]="ViewportResize",i[i.Input=5]="Input",i[i.TouchMove=6]="TouchMove",i[i.MediaInteraction=7]="MediaInteraction",i[i.StyleSheetRule=8]="StyleSheetRule",i[i.CanvasMutation=9]="CanvasMutation",i[i.Font=10]="Font",i[i.Log=11]="Log",i[i.Drag=12]="Drag",i[i.StyleDeclaration=13]="StyleDeclaration",i[i.Selection=14]="Selection",i[i.AdoptedStyleSheet=15]="AdoptedStyleSheet",i[i.CustomElement=16]="CustomElement",i))(be||{}),ot=(i=>(i[i.MouseUp=0]="MouseUp",i[i.MouseDown=1]="MouseDown",i[i.Click=2]="Click",i[i.ContextMenu=3]="ContextMenu",i[i.DblClick=4]="DblClick",i[i.Focus=5]="Focus",i[i.Blur=6]="Blur",i[i.TouchStart=7]="TouchStart",i[i.TouchMove_Departed=8]="TouchMove_Departed",i[i.TouchEnd=9]="TouchEnd",i[i.TouchCancel=10]="TouchCancel",i))(ot||{}),Bt=(i=>(i[i.Mouse=0]="Mouse",i[i.Pen=1]="Pen",i[i.Touch=2]="Touch",i))(Bt||{}),xn=(i=>(i[i["2D"]=0]="2D",i[i.WebGL=1]="WebGL",i[i.WebGL2=2]="WebGL2",i))(xn||{}),Un=(i=>(i[i.Play=0]="Play",i[i.Pause=1]="Pause",i[i.Seeked=2]="Seeked",i[i.VolumeChange=3]="VolumeChange",i[i.RateChange=4]="RateChange",i))(Un||{});function au(i){return"__ln"in i}class pN{constructor(){x(this,"length",0),x(this,"head",null),x(this,"tail",null)}get(r){if(r>=this.length)throw new Error("Position outside of list range");let a=this.head;for(let c=0;c<r;c++)a=(a==null?void 0:a.next)||null;return a}addNode(r){const a={value:r,previous:null,next:null};if(r.__ln=a,r.previousSibling&&au(r.previousSibling)){const c=r.previousSibling.__ln.next;a.next=c,a.previous=r.previousSibling.__ln,r.previousSibling.__ln.next=a,c&&(c.previous=a)}else if(r.nextSibling&&au(r.nextSibling)&&r.nextSibling.__ln.previous){const c=r.nextSibling.__ln.previous;a.previous=c,a.next=r.nextSibling.__ln,r.nextSibling.__ln.previous=a,c&&(c.next=a)}else this.head&&(this.head.previous=a),a.next=this.head,this.head=a;a.next===null&&(this.tail=a),this.length++}removeNode(r){const a=r.__ln;this.head&&(a.previous?(a.previous.next=a.next,a.next?a.next.previous=a.previous:this.tail=a.previous):(this.head=a.next,this.head?this.head.previous=null:this.tail=null),r.__ln&&delete r.__ln,this.length--)}}const lu=(i,r)=>`${i}@${r}`;class hN{constructor(){x(this,"frozen",!1),x(this,"locked",!1),x(this,"texts",[]),x(this,"attributes",[]),x(this,"attributeMap",new WeakMap),x(this,"removes",[]),x(this,"mapRemoves",[]),x(this,"movedMap",{}),x(this,"addedSet",new Set),x(this,"movedSet",new Set),x(this,"droppedSet",new Set),x(this,"mutationCb"),x(this,"blockClass"),x(this,"blockSelector"),x(this,"maskTextClass"),x(this,"maskTextSelector"),x(this,"inlineStylesheet"),x(this,"maskInputOptions"),x(this,"maskTextFn"),x(this,"maskInputFn"),x(this,"keepIframeSrcFn"),x(this,"recordCanvas"),x(this,"inlineImages"),x(this,"privacySetting"),x(this,"slimDOMOptions"),x(this,"dataURLOptions"),x(this,"doc"),x(this,"mirror"),x(this,"iframeManager"),x(this,"stylesheetManager"),x(this,"shadowDomManager"),x(this,"canvasManager"),x(this,"processedNodeManager"),x(this,"unattachedDoc"),x(this,"processMutations",r=>{r.forEach(this.processMutation),this.emit()}),x(this,"emit",()=>{if(this.frozen||this.locked)return;const r=[],a=new Set,c=new pN,u=f=>{let T=f,v=gr;for(;v===gr;)T=T&&T.nextSibling,v=T&&this.mirror.getId(T);return v},p=f=>{const T=wt(f);if(!T||!su(f)||T.tagName==="TEXTAREA")return;const v=yr(T)?this.mirror.getId(ou(f)):this.mirror.getId(T),I=u(f);if(v===-1||I===-1)return c.addNode(f);const Z=Pn(f,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,privacySetting:this.privacySetting,onSerialize:C=>{ru(C,this.mirror)&&this.iframeManager.addIframe(C),iu(C,this.mirror)&&this.stylesheetManager.trackLinkElement(C),Ps(f)&&this.shadowDomManager.addShadowRoot(vr(f),this.doc)},onIframeLoad:(C,k)=>{this.iframeManager.attachIframe(C,k),this.shadowDomManager.observeAttachShadow(C)},onStylesheetLoad:(C,k)=>{this.stylesheetManager.attachLinkElement(C,k)}});Z&&(r.push({parentId:v,nextId:I,node:Z}),a.add(Z.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const f of this.movedSet)cu(this.removes,f,this.mirror)&&!this.movedSet.has(wt(f))||p(f);for(const f of this.addedSet)uu(this.droppedSet,f)||cu(this.removes,f,this.mirror)?uu(this.movedSet,f)?p(f):this.droppedSet.add(f):p(f);let m=null;for(;c.length;){let f=null;if(m){const T=this.mirror.getId(wt(m.value)),v=u(m.value);T!==-1&&v!==-1&&(f=m)}if(!f){let T=c.tail;for(;T;){const v=T;if(T=T.previous,v){const I=this.mirror.getId(wt(v.value));if(u(v.value)===-1)continue;if(I!==-1){f=v;break}{const Z=wt(v.value);if(Z&&Z.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const C=kn(Z);if(this.mirror.getId(C)!==-1){f=v;break}}}}}}if(!f){for(;c.head;)c.removeNode(c.head.value);break}m=f.previous,c.removeNode(f.value),p(f.value)}const y={texts:this.texts.map(f=>{var T,v;const I=f.node,Z=wt(I);Z&&Z.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(Z);let C=f.value;const k=this.privacySetting==="strict",L=this.privacySetting==="default"&&kc(C),A=(v=(T=f.node)==null?void 0:T.parentElement)==null?void 0:v.getAttribute("data-hl-record");return(k||L)&&!A&&C&&(C=Ns(C)),{id:this.mirror.getId(I),value:C}}).filter(f=>!a.has(f.id)).filter(f=>this.mirror.has(f.id)),attributes:this.attributes.map(f=>{const{attributes:T}=f;if(typeof T.style=="string"){const v=JSON.stringify(f.styleDiff),I=JSON.stringify(f._unchangedStyles);v.length<T.style.length&&(v+I).split("var(").length===T.style.split("var(").length&&(T.style=f.styleDiff)}return{id:this.mirror.getId(f.node),attributes:T}}).filter(f=>!a.has(f.id)).filter(f=>this.mirror.has(f.id)),removes:this.removes,adds:r};(y.texts.length||y.attributes.length||y.removes.length||y.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(y))}),x(this,"genTextAreaValueMutation",r=>{let a=this.attributeMap.get(r);a||(a={node:r,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(a),this.attributeMap.set(r,a)),a.attributes.value=Array.from(Oi(r),c=>zc(c)||"").join("")}),x(this,"processMutation",r=>{if(!Vs(r.target,this.mirror,this.slimDOMOptions))switch(r.type){case"characterData":{const a=zc(r.target);ze(r.target,this.blockClass,this.blockSelector,!1)||a===r.oldValue||this.texts.push({value:Hc(r.target,this.maskTextClass,this.maskTextSelector,!0)&&a?this.maskTextFn?this.maskTextFn(a,tu(r.target)):a.replace(/[\S]/g,"*"):a,node:r.target});break}case"attributes":{const a=r.target;let c=r.attributeName,u=r.target.getAttribute(c);if(c==="value"){const m=Rs(a);u=Is({element:a,maskInputOptions:this.maskInputOptions,tagName:a.tagName,type:m,value:u,overwriteRecord:a.getAttribute("data-hl-record"),maskInputFn:this.maskInputFn})}if(ze(r.target,this.blockClass,this.blockSelector,!1)||u===r.oldValue)return;let p=this.attributeMap.get(r.target);if(a.tagName==="IFRAME"&&c==="src"&&!this.keepIframeSrcFn(u)){if(a.contentDocument)return;c="rr_src"}if(p||(p={node:r.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(p),this.attributeMap.set(r.target,p)),c==="type"&&a.tagName==="INPUT"&&(r.oldValue||"").toLowerCase()==="password"&&a.setAttribute("data-rr-is-password","true"),!Fc(a.tagName,c)){if(r.target.tagName==="INPUT"){const m=r.target;if(m.type==="password"){p.attributes.value="*".repeat(m.value.length);break}}if(p.attributes[c]=Dc(this.doc,Vn(a.tagName),Vn(c),u),c==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(y){this.unattachedDoc=this.doc}const m=this.unattachedDoc.createElement("span");r.oldValue&&m.setAttribute("style",r.oldValue);for(const y of Array.from(a.style)){const f=a.style.getPropertyValue(y),T=a.style.getPropertyPriority(y);f!==m.style.getPropertyValue(y)||T!==m.style.getPropertyPriority(y)?p.styleDiff[y]=T===""?f:[f,T]:p._unchangedStyles[y]=[f,T]}for(const y of Array.from(m.style))a.style.getPropertyValue(y)===""&&(p.styleDiff[y]=!1)}}break}case"childList":if(ze(r.target,this.blockClass,this.blockSelector,!0))return;if(r.target.tagName==="TEXTAREA")return void this.genTextAreaValueMutation(r.target);r.addedNodes.forEach(a=>this.genAdds(a,r.target)),r.removedNodes.forEach(a=>{const c=this.mirror.getId(a),u=yr(r.target)?this.mirror.getId(kn(r.target)):this.mirror.getId(r.target);ze(r.target,this.blockClass,this.blockSelector,!1)||Vs(a,this.mirror,this.slimDOMOptions)||!function(p,m){return m.getId(p)!==-1}(a,this.mirror)||(this.addedSet.has(a)?(Ws(this.addedSet,a),this.droppedSet.add(a)):this.addedSet.has(r.target)&&c===-1||nu(r.target,this.mirror)||(this.movedSet.has(a)&&this.movedMap[lu(c,u)]?Ws(this.movedSet,a):this.removes.push({parentId:u,id:c,isShadow:!(!yr(r.target)||!Sr(r.target))||void 0})),this.mapRemoves.push(a))})}}),x(this,"genAdds",(r,a)=>{if(!this.processedNodeManager.inOtherBuffer(r,this)&&!this.addedSet.has(r)&&!this.movedSet.has(r)){if(this.mirror.hasNode(r)){if(Vs(r,this.mirror,this.slimDOMOptions))return;this.movedSet.add(r);let c=null;a&&this.mirror.hasNode(a)&&(c=this.mirror.getId(a)),c&&c!==-1&&(this.movedMap[lu(this.mirror.getId(r),c)]=!0)}else this.addedSet.add(r),this.droppedSet.delete(r);ze(r,this.blockClass,this.blockSelector,!1)||(Oi(r).forEach(c=>this.genAdds(c)),Ps(r)&&Oi(vr(r)).forEach(c=>{this.processedNodeManager.add(c,this),this.genAdds(c,r)}))}})}init(r){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","privacySetting","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(a=>{this[a]=r[a]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Ws(i,r){i.delete(r),Oi(r).forEach(a=>Ws(i,a))}function cu(i,r,a){return i.length!==0&&function(c,u,p){let m=wt(u);for(;m;){const y=p.getId(m);if(c.some(f=>f.id===y))return!0;m=wt(m)}return!1}(i,r,a)}function uu(i,r){return i.size!==0&&du(i,r)}function du(i,r){const a=wt(r);return!!a&&(!!i.has(a)||du(i,a))}let Er;const ge=i=>Er?(...r)=>{try{return i(...r)}catch(a){if(Er&&Er(a)===!0)return;throw a}}:i,an=[];function Ir(i){try{if("composedPath"in i){const r=i.composedPath();if(r.length)return r[0]}else if("path"in i&&i.path.length)return i.path[0]}catch(r){}return i&&i.target}function pu(i,r){const a=new hN;an.push(a),a.init(i);const c=new(Os("MutationObserver")).constructor(ge(a.processMutations.bind(a)));return c.observe(r,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),c}function mN({mouseInteractionCb:i,doc:r,mirror:a,blockClass:c,blockSelector:u,sampling:p}){if(p.mouseInteraction===!1)return()=>{};const m=p.mouseInteraction===!0||p.mouseInteraction===void 0?{}:p.mouseInteraction,y=[];let f=null;return Object.keys(ot).filter(T=>Number.isNaN(Number(T))&&!T.endsWith("_Departed")&&m[T]!==!1).forEach(T=>{let v=Vn(T);const I=(Z=>C=>{const k=Ir(C);if(ze(k,c,u,!0)||cN(k))return;let L=null,A=Z;if("pointerType"in C){switch(C.pointerType){case"mouse":L=Bt.Mouse;break;case"touch":L=Bt.Touch;break;case"pen":L=Bt.Pen}L===Bt.Touch&&(ot[Z]===ot.MouseDown?A="TouchStart":ot[Z]===ot.MouseUp&&(A="TouchEnd"))}else Xs(C)&&(L=Bt.Touch);L!==null?(f=L,(A.startsWith("Touch")&&L===Bt.Touch||A.startsWith("Mouse")&&L===Bt.Mouse)&&(L=null)):ot[Z]===ot.Click&&(L=f,f=null);const V=Xs(C)?C.changedTouches[0]:C;if(!V)return;const X=a.getId(k),{clientX:O,clientY:P}=V;ge(i)(S({type:ot[A],id:X,x:O,y:P},L!==null&&{pointerType:L}))})(T);if(window.PointerEvent)switch(ot[T]){case ot.MouseDown:case ot.MouseUp:v=v.replace("mouse","pointer");break;case ot.TouchStart:case ot.TouchEnd:return}y.push($e(v,I,r))}),ge(()=>{y.forEach(T=>T())})}function hu({scrollCb:i,doc:r,mirror:a,blockClass:c,blockSelector:u,sampling:p}){return $e("scroll",ge(_r(ge(m=>{const y=Ir(m);if(!y||ze(y,c,u,!0))return;const f=a.getId(y);if(y===r&&r.defaultView){const T=$c(r.defaultView);i({id:f,x:T.left,y:T.top})}else i({id:f,x:y.scrollLeft,y:y.scrollTop})}),p.scroll||100)),r)}const fN=["INPUT","TEXTAREA","SELECT"],mu=new WeakMap;function Vi(i){return function(r,a){if(Xi("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||Xi("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||Xi("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||Xi("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){const c=Array.from(r.parentRule.cssRules).indexOf(r);a.unshift(c)}else if(r.parentStyleSheet){const c=Array.from(r.parentStyleSheet.cssRules).indexOf(r);a.unshift(c)}return a}(i,[])}function zt(i,r,a){let c,u;return i?(i.ownerNode?c=r.getId(i.ownerNode):u=a.getId(i),{styleId:u,id:c}):{}}function fu({mirror:i,stylesheetManager:r},a){var c,u,p;let m=null;m=a.nodeName==="#document"?i.getId(a):i.getId(kn(a));const y=a.nodeName==="#document"?(c=a.defaultView)==null?void 0:c.Document:(p=(u=a.ownerDocument)==null?void 0:u.defaultView)==null?void 0:p.ShadowRoot,f=y!=null&&y.prototype?Object.getOwnPropertyDescriptor(y==null?void 0:y.prototype,"adoptedStyleSheets"):void 0;return m!==null&&m!==-1&&y&&f?(Object.defineProperty(a,"adoptedStyleSheets",{configurable:f.configurable,enumerable:f.enumerable,get(){var T;return(T=f.get)==null?void 0:T.call(this)},set(T){var v;const I=(v=f.set)==null?void 0:v.call(this,T);if(m!==null&&m!==-1)try{r.adoptStyleSheets(T,m)}catch(Z){}return I}}),ge(()=>{Object.defineProperty(a,"adoptedStyleSheets",{configurable:f.configurable,enumerable:f.enumerable,get:f.get,set:f.set})})):()=>{}}function bN(i,r={}){const a=i.doc.defaultView;if(!a)return()=>{};let c;(function(V,X){const{mutationCb:O,mousemoveCb:P,mouseInteractionCb:Y,scrollCb:j,viewportResizeCb:te,inputCb:ne,mediaInteractionCb:Q,styleSheetRuleCb:B,styleDeclarationCb:ee,canvasMutationCb:K,fontCb:E,selectionCb:M,customElementCb:H}=V;V.mutationCb=(...F)=>{X.mutation&&X.mutation(...F),O(...F)},V.mousemoveCb=(...F)=>{X.mousemove&&X.mousemove(...F),P(...F)},V.mouseInteractionCb=(...F)=>{X.mouseInteraction&&X.mouseInteraction(...F),Y(...F)},V.scrollCb=(...F)=>{X.scroll&&X.scroll(...F),j(...F)},V.viewportResizeCb=(...F)=>{X.viewportResize&&X.viewportResize(...F),te(...F)},V.inputCb=(...F)=>{X.input&&X.input(...F),ne(...F)},V.mediaInteractionCb=(...F)=>{X.mediaInteaction&&X.mediaInteaction(...F),Q(...F)},V.styleSheetRuleCb=(...F)=>{X.styleSheetRule&&X.styleSheetRule(...F),B(...F)},V.styleDeclarationCb=(...F)=>{X.styleDeclaration&&X.styleDeclaration(...F),ee(...F)},V.canvasMutationCb=(...F)=>{X.canvasMutation&&X.canvasMutation(...F),K(...F)},V.fontCb=(...F)=>{X.font&&X.font(...F),E(...F)},V.selectionCb=(...F)=>{X.selection&&X.selection(...F),M(...F)},V.customElementCb=(...F)=>{X.customElement&&X.customElement(...F),H(...F)}})(i,r),i.recordDOM&&(c=pu(i,i.doc));const u=function({mousemoveCb:V,sampling:X,doc:O,mirror:P}){if(X.mousemove===!1)return()=>{};const Y=typeof X.mousemove=="number"?X.mousemove:50,j=typeof X.mousemoveCallback=="number"?X.mousemoveCallback:500;let te,ne=[];const Q=_r(ge(K=>{const E=Date.now()-te;V(ne.map(M=>(M.timeOffset-=E,M)),K),ne=[],te=null}),j),B=ge(_r(ge(K=>{const E=Ir(K),{clientX:M,clientY:H}=Xs(K)?K.changedTouches[0]:K;te||(te=Gi()),ne.push({x:M,y:H,id:P.getId(E),timeOffset:Gi()-te}),Q(typeof DragEvent!="undefined"&&K instanceof DragEvent?be.Drag:K instanceof MouseEvent?be.MouseMove:be.TouchMove)}),Y,{trailing:!1})),ee=[$e("mousemove",B,O),$e("touchmove",B,O),$e("drag",B,O)];return ge(()=>{ee.forEach(K=>K())})}(i),p=mN(i),m=hu(i),y=function({viewportResizeCb:V},{win:X}){let O=-1,P=-1;return $e("resize",ge(_r(ge(()=>{const Y=qc(),j=eu();O===Y&&P===j||(V({width:Number(j),height:Number(Y)}),O=Y,P=j)}),200)),X)}(i,{win:a}),f=function({inputCb:V,doc:X,mirror:O,blockClass:P,blockSelector:Y,ignoreClass:j,ignoreSelector:te,maskInputOptions:ne,maskInputFn:Q,sampling:B,userTriggeredOnInput:ee}){function K(W){let J=Ir(W);const _e=W.isTrusted,ye=J&&J.tagName;if(J&&ye==="OPTION"&&(J=wi(J)),!J||!ye||fN.indexOf(ye)<0||ze(J,P,Y,!0)||J.classList.contains(j)||te&&J.matches(te))return;let pe=J.value,ae=!1;const tt=Rs(J)||"",je=J.getAttribute("data-hl-record");tt==="radio"||tt==="checkbox"?ae=J.checked:Ac({maskInputOptions:ne,type:tt,tagName:ye,overwriteRecord:je})&&(pe=Is({element:J,maskInputOptions:ne,tagName:ye,type:tt,value:pe,overwriteRecord:je,maskInputFn:Q})),E(J,ee?{text:pe,isChecked:ae,userTriggered:_e}:{text:pe,isChecked:ae});const $=J.name;tt==="radio"&&$&&ae&&X.querySelectorAll(`input[type="radio"][name="${$}"]`).forEach(ue=>{if(ue!==J){const Fe=ue.value;E(ue,ee?{text:Fe,isChecked:!ae,userTriggered:!1}:{text:Fe,isChecked:!ae})}})}function E(W,J){const _e=mu.get(W);if(!_e||_e.text!==J.text||_e.isChecked!==J.isChecked){mu.set(W,J);const ye=O.getId(W);ge(V)(_(S({},J),{id:ye}))}}const M=(B.input==="last"?["change"]:["input","change"]).map(W=>$e(W,ge(K),X)),H=X.defaultView;if(!H)return()=>{M.forEach(W=>W())};const F=H.Object.getOwnPropertyDescriptor(H.HTMLInputElement.prototype,"value"),oe=[[H.HTMLInputElement.prototype,"value"],[H.HTMLInputElement.prototype,"checked"],[H.HTMLSelectElement.prototype,"value"],[H.HTMLTextAreaElement.prototype,"value"],[H.HTMLSelectElement.prototype,"selectedIndex"],[H.HTMLOptionElement.prototype,"selected"]];return F&&F.set&&M.push(...oe.map(W=>Li(W[0],W[1],{set(){ge(K)({target:this,isTrusted:!1})}},!1,H))),ge(()=>{M.forEach(W=>W())})}(i),T=function({mediaInteractionCb:V,blockClass:X,blockSelector:O,mirror:P,sampling:Y,doc:j}){const te=ge(Q=>_r(ge(B=>{const ee=Ir(B);if(!ee||ze(ee,X,O,!0))return;const{currentTime:K,volume:E,muted:M,playbackRate:H,loop:F}=ee;V({type:Q,id:P.getId(ee),currentTime:K,volume:E,muted:M,playbackRate:H,loop:F})}),Y.media||500)),ne=[$e("play",te(Un.Play),j),$e("pause",te(Un.Pause),j),$e("seeked",te(Un.Seeked),j),$e("volumechange",te(Un.VolumeChange),j),$e("ratechange",te(Un.RateChange),j)];return ge(()=>{ne.forEach(Q=>Q())})}(i);let v=()=>{},I=()=>{},Z=()=>{},C=()=>{};i.recordDOM&&(v=function({styleSheetRuleCb:V,mirror:X,stylesheetManager:O},{win:P}){if(!P.CSSStyleSheet||!P.CSSStyleSheet.prototype)return()=>{};const Y=P.CSSStyleSheet.prototype.insertRule;P.CSSStyleSheet.prototype.insertRule=new Proxy(Y,{apply:ge((ee,K,E)=>{const[M,H]=E,{id:F,styleId:oe}=zt(K,X,O.styleMirror);return(F&&F!==-1||oe&&oe!==-1)&&V({id:F,styleId:oe,adds:[{rule:M,index:H}]}),ee.apply(K,E)})});const j=P.CSSStyleSheet.prototype.deleteRule;let te,ne;P.CSSStyleSheet.prototype.deleteRule=new Proxy(j,{apply:ge((ee,K,E)=>{const[M]=E,{id:H,styleId:F}=zt(K,X,O.styleMirror);return(H&&H!==-1||F&&F!==-1)&&V({id:H,styleId:F,removes:[{index:M}]}),ee.apply(K,E)})}),P.CSSStyleSheet.prototype.replace&&(te=P.CSSStyleSheet.prototype.replace,P.CSSStyleSheet.prototype.replace=new Proxy(te,{apply:ge((ee,K,E)=>{const[M]=E,{id:H,styleId:F}=zt(K,X,O.styleMirror);return(H&&H!==-1||F&&F!==-1)&&V({id:H,styleId:F,replace:M}),ee.apply(K,E)})})),P.CSSStyleSheet.prototype.replaceSync&&(ne=P.CSSStyleSheet.prototype.replaceSync,P.CSSStyleSheet.prototype.replaceSync=new Proxy(ne,{apply:ge((ee,K,E)=>{const[M]=E,{id:H,styleId:F}=zt(K,X,O.styleMirror);return(H&&H!==-1||F&&F!==-1)&&V({id:H,styleId:F,replaceSync:M}),ee.apply(K,E)})}));const Q={};Pi("CSSGroupingRule")?Q.CSSGroupingRule=P.CSSGroupingRule:(Pi("CSSMediaRule")&&(Q.CSSMediaRule=P.CSSMediaRule),Pi("CSSConditionRule")&&(Q.CSSConditionRule=P.CSSConditionRule),Pi("CSSSupportsRule")&&(Q.CSSSupportsRule=P.CSSSupportsRule));const B={};return Object.entries(Q).forEach(([ee,K])=>{B[ee]={insertRule:K.prototype.insertRule,deleteRule:K.prototype.deleteRule},K.prototype.insertRule=new Proxy(B[ee].insertRule,{apply:ge((E,M,H)=>{const[F,oe]=H,{id:W,styleId:J}=zt(M.parentStyleSheet,X,O.styleMirror);return(W&&W!==-1||J&&J!==-1)&&V({id:W,styleId:J,adds:[{rule:F,index:[...Vi(M),oe||0]}]}),E.apply(M,H)})}),K.prototype.deleteRule=new Proxy(B[ee].deleteRule,{apply:ge((E,M,H)=>{const[F]=H,{id:oe,styleId:W}=zt(M.parentStyleSheet,X,O.styleMirror);return(oe&&oe!==-1||W&&W!==-1)&&V({id:oe,styleId:W,removes:[{index:[...Vi(M),F]}]}),E.apply(M,H)})})}),ge(()=>{P.CSSStyleSheet.prototype.insertRule=Y,P.CSSStyleSheet.prototype.deleteRule=j,te&&(P.CSSStyleSheet.prototype.replace=te),ne&&(P.CSSStyleSheet.prototype.replaceSync=ne),Object.entries(Q).forEach(([ee,K])=>{K.prototype.insertRule=B[ee].insertRule,K.prototype.deleteRule=B[ee].deleteRule})})}(i,{win:a}),I=fu(i,i.doc),Z=function({styleDeclarationCb:V,mirror:X,ignoreCSSAttributes:O,stylesheetManager:P},{win:Y}){const j=Y.CSSStyleDeclaration.prototype.setProperty;Y.CSSStyleDeclaration.prototype.setProperty=new Proxy(j,{apply:ge((ne,Q,B)=>{var ee;const[K,E,M]=B;if(O.has(K))return j.apply(Q,[K,E,M]);const{id:H,styleId:F}=zt((ee=Q.parentRule)==null?void 0:ee.parentStyleSheet,X,P.styleMirror);return(H&&H!==-1||F&&F!==-1)&&V({id:H,styleId:F,set:{property:K,value:E,priority:M},index:Vi(Q.parentRule)}),ne.apply(Q,B)})});const te=Y.CSSStyleDeclaration.prototype.removeProperty;return Y.CSSStyleDeclaration.prototype.removeProperty=new Proxy(te,{apply:ge((ne,Q,B)=>{var ee;const[K]=B;if(O.has(K))return te.apply(Q,[K]);const{id:E,styleId:M}=zt((ee=Q.parentRule)==null?void 0:ee.parentStyleSheet,X,P.styleMirror);return(E&&E!==-1||M&&M!==-1)&&V({id:E,styleId:M,remove:{property:K},index:Vi(Q.parentRule)}),ne.apply(Q,B)})}),ge(()=>{Y.CSSStyleDeclaration.prototype.setProperty=j,Y.CSSStyleDeclaration.prototype.removeProperty=te})}(i,{win:a}),i.collectFonts&&(C=function({fontCb:V,doc:X}){const O=X.defaultView;if(!O)return()=>{};const P=[],Y=new WeakMap,j=O.FontFace;O.FontFace=function(ne,Q,B){const ee=new j(ne,Q,B);return Y.set(ee,{family:ne,buffer:typeof Q!="string",descriptors:B,fontSource:typeof Q=="string"?Q:JSON.stringify(Array.from(new Uint8Array(Q)))}),ee};const te=Mn(X.fonts,"add",function(ne){return function(Q){return setTimeout(ge(()=>{const B=Y.get(Q);B&&(V(B),Y.delete(Q))}),0),ne.apply(this,[Q])}});return P.push(()=>{O.FontFace=j}),P.push(te),ge(()=>{P.forEach(ne=>ne())})}(i)));const k=function(V){const{doc:X,mirror:O,blockClass:P,blockSelector:Y,selectionCb:j}=V;let te=!0;const ne=ge(()=>{const Q=X.getSelection();if(!Q||te&&(Q!=null&&Q.isCollapsed))return;te=Q.isCollapsed||!1;const B=[],ee=Q.rangeCount||0;for(let K=0;K<ee;K++){const E=Q.getRangeAt(K),{startContainer:M,startOffset:H,endContainer:F,endOffset:oe}=E;ze(M,P,Y,!0)||ze(F,P,Y,!0)||B.push({start:O.getId(M),startOffset:H,end:O.getId(F),endOffset:oe})}j({ranges:B})});return ne(),$e("selectionchange",ne)}(i),L=function({doc:V,customElementCb:X}){const O=V.defaultView;return O&&O.customElements?Mn(O.customElements,"define",function(P){return function(Y,j,te){try{X({define:{name:Y}})}catch(ne){console.warn(`Custom element callback failed for ${Y}`)}return P.apply(this,[Y,j,te])}}):()=>{}}(i),A=[];for(const V of i.plugins)A.push(V.observer(V.callback,a,V.options));return ge(()=>{an.forEach(V=>V.reset()),c==null||c.disconnect(),u(),p(),m(),y(),f(),T(),v(),I(),Z(),C(),k(),L(),A.forEach(V=>V())})}function Xi(i){return window[i]!==void 0}function Pi(i){return!!(window[i]!==void 0&&window[i].prototype&&"insertRule"in window[i].prototype&&"deleteRule"in window[i].prototype)}class bu{constructor(r){x(this,"iframeIdToRemoteIdMap",new WeakMap),x(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=r}getId(r,a,c,u){const p=c||this.getIdToRemoteIdMap(r),m=u||this.getRemoteIdToIdMap(r);let y=p.get(a);return y||(y=this.generateIdFn(),p.set(a,y),m.set(y,a)),y}getIds(r,a){const c=this.getIdToRemoteIdMap(r),u=this.getRemoteIdToIdMap(r);return a.map(p=>this.getId(r,p,c,u))}getRemoteId(r,a,c){const u=c||this.getRemoteIdToIdMap(r);return typeof a!="number"?a:u.get(a)||-1}getRemoteIds(r,a){const c=this.getRemoteIdToIdMap(r);return a.map(u=>this.getRemoteId(r,u,c))}reset(r){if(!r)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(r),this.iframeRemoteIdToIdMap.delete(r)}getIdToRemoteIdMap(r){let a=this.iframeIdToRemoteIdMap.get(r);return a||(a=new Map,this.iframeIdToRemoteIdMap.set(r,a)),a}getRemoteIdToIdMap(r){let a=this.iframeRemoteIdToIdMap.get(r);return a||(a=new Map,this.iframeRemoteIdToIdMap.set(r,a)),a}}class yN{constructor(r){x(this,"iframes",new WeakMap),x(this,"crossOriginIframeMap",new WeakMap),x(this,"crossOriginIframeMirror",new bu(Mc)),x(this,"crossOriginIframeStyleMirror"),x(this,"crossOriginIframeRootIdMap",new WeakMap),x(this,"mirror"),x(this,"mutationCb"),x(this,"wrappedEmit"),x(this,"loadListener"),x(this,"stylesheetManager"),x(this,"recordCrossOriginIframes"),this.mutationCb=r.mutationCb,this.wrappedEmit=r.wrappedEmit,this.stylesheetManager=r.stylesheetManager,this.recordCrossOriginIframes=r.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new bu(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=r.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(r){this.iframes.set(r,!0),r.contentWindow&&this.crossOriginIframeMap.set(r.contentWindow,r)}addLoadListener(r){this.loadListener=r}attachIframe(r,a){var c,u;this.mutationCb({adds:[{parentId:this.mirror.getId(r),nextId:null,node:a}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((c=r.contentWindow)==null||c.addEventListener("message",this.handleMessage.bind(this))),(u=this.loadListener)==null||u.call(this,r),r.contentDocument&&r.contentDocument.adoptedStyleSheets&&r.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(r.contentDocument.adoptedStyleSheets,this.mirror.getId(r.contentDocument))}handleMessage(r){const a=r;if(a.data.type!=="rrweb"||a.origin!==a.data.origin)return;const c=r.source;if(!c)return;const u=this.crossOriginIframeMap.get(c);if(!u)return;const p=this.transformCrossOriginEvent(u,a.data.event);p&&this.wrappedEmit(p,a.data.isCheckout)}transformCrossOriginEvent(r,a){var c;switch(a.type){case ve.FullSnapshot:{this.crossOriginIframeMirror.reset(r),this.crossOriginIframeStyleMirror.reset(r),this.replaceIdOnNode(a.data.node,r);const u=a.data.node.id;return this.crossOriginIframeRootIdMap.set(r,u),this.patchRootIdOnNode(a.data.node,u),{timestamp:a.timestamp,type:ve.IncrementalSnapshot,data:{source:be.Mutation,adds:[{parentId:this.mirror.getId(r),nextId:null,node:a.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case ve.Meta:case ve.Load:case ve.DomContentLoaded:return!1;case ve.Plugin:return a;case ve.Custom:return this.replaceIds(a.data.payload,r,["id","parentId","previousId","nextId"]),a;case ve.IncrementalSnapshot:switch(a.data.source){case be.Mutation:return a.data.adds.forEach(u=>{this.replaceIds(u,r,["parentId","nextId","previousId"]),this.replaceIdOnNode(u.node,r);const p=this.crossOriginIframeRootIdMap.get(r);p&&this.patchRootIdOnNode(u.node,p)}),a.data.removes.forEach(u=>{this.replaceIds(u,r,["parentId","id"])}),a.data.attributes.forEach(u=>{this.replaceIds(u,r,["id"])}),a.data.texts.forEach(u=>{this.replaceIds(u,r,["id"])}),a;case be.Drag:case be.TouchMove:case be.MouseMove:return a.data.positions.forEach(u=>{this.replaceIds(u,r,["id"])}),a;case be.ViewportResize:return!1;case be.MediaInteraction:case be.MouseInteraction:case be.Scroll:case be.CanvasMutation:case be.Input:return this.replaceIds(a.data,r,["id"]),a;case be.StyleSheetRule:case be.StyleDeclaration:return this.replaceIds(a.data,r,["id"]),this.replaceStyleIds(a.data,r,["styleId"]),a;case be.Font:return a;case be.Selection:return a.data.ranges.forEach(u=>{this.replaceIds(u,r,["start","end"])}),a;case be.AdoptedStyleSheet:return this.replaceIds(a.data,r,["id"]),this.replaceStyleIds(a.data,r,["styleIds"]),(c=a.data.styles)==null||c.forEach(u=>{this.replaceStyleIds(u,r,["styleId"])}),a}}return!1}replace(r,a,c,u){for(const p of u)(Array.isArray(a[p])||typeof a[p]=="number")&&(Array.isArray(a[p])?a[p]=r.getIds(c,a[p]):a[p]=r.getId(c,a[p]));return a}replaceIds(r,a,c){return this.replace(this.crossOriginIframeMirror,r,a,c)}replaceStyleIds(r,a,c){return this.replace(this.crossOriginIframeStyleMirror,r,a,c)}replaceIdOnNode(r,a){this.replaceIds(r,a,["id","rootId"]),"childNodes"in r&&r.childNodes.forEach(c=>{this.replaceIdOnNode(c,a)})}patchRootIdOnNode(r,a){r.type===Ie.Document||r.rootId||(r.rootId=a),"childNodes"in r&&r.childNodes.forEach(c=>{this.patchRootIdOnNode(c,a)})}}class SN{constructor(r){x(this,"shadowDoms",new WeakSet),x(this,"mutationCb"),x(this,"scrollCb"),x(this,"bypassOptions"),x(this,"mirror"),x(this,"restoreHandlers",[]),this.mutationCb=r.mutationCb,this.scrollCb=r.scrollCb,this.bypassOptions=r.bypassOptions,this.mirror=r.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(r,a){if(!Sr(r)||this.shadowDoms.has(r))return;this.shadowDoms.add(r);const c=pu(_(S({},this.bypassOptions),{doc:a,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),r);this.restoreHandlers.push(()=>c.disconnect()),this.restoreHandlers.push(hu(_(S({},this.bypassOptions),{scrollCb:this.scrollCb,doc:r,mirror:this.mirror}))),setTimeout(()=>{r.adoptedStyleSheets&&r.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(r.adoptedStyleSheets,this.mirror.getId(kn(r))),this.restoreHandlers.push(fu({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},r))},0)}observeAttachShadow(r){r.contentWindow&&r.contentDocument&&this.patchAttachShadow(r.contentWindow.Element,r.contentDocument)}patchAttachShadow(r,a){const c=this;this.restoreHandlers.push(Mn(r.prototype,"attachShadow",function(u){return function(p){const m=u.call(this,p),y=vr(this);return y&&su(this)&&c.addShadowRoot(y,a),m}}))}reset(){this.restoreHandlers.forEach(r=>{try{r()}catch(a){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}for(var Rr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gN=typeof Uint8Array=="undefined"?[]:new Uint8Array(256),Wi=0;Wi<64;Wi++)gN[Rr.charCodeAt(Wi)]=Wi;const yu=new Map,Su=(i,r,a)=>{if(!i||!Tu(i,r)&&typeof i!="object")return;const c=function(p,m){let y=yu.get(p);return y||(y=new Map,yu.set(p,y)),y.has(m)||y.set(m,[]),y.get(m)}(a,i.constructor.name);let u=c.indexOf(i);return u===-1&&(u=c.length,c.push(i)),u};function ki(i,r,a){if(i instanceof Array)return i.map(c=>ki(c,r,a));if(i===null)return i;if(i instanceof Float32Array||i instanceof Float64Array||i instanceof Int32Array||i instanceof Uint32Array||i instanceof Uint8Array||i instanceof Uint16Array||i instanceof Int16Array||i instanceof Int8Array||i instanceof Uint8ClampedArray)return{rr_type:i.constructor.name,args:[Object.values(i)]};if(i instanceof ArrayBuffer)return{rr_type:i.constructor.name,base64:function(c){var u,p=new Uint8Array(c),m=p.length,y="";for(u=0;u<m;u+=3)y+=Rr[p[u]>>2],y+=Rr[(3&p[u])<<4|p[u+1]>>4],y+=Rr[(15&p[u+1])<<2|p[u+2]>>6],y+=Rr[63&p[u+2]];return m%3==2?y=y.substring(0,y.length-1)+"=":m%3==1&&(y=y.substring(0,y.length-2)+"=="),y}(i)};if(i instanceof DataView)return{rr_type:i.constructor.name,args:[ki(i.buffer,r,a),i.byteOffset,i.byteLength]};if(i instanceof HTMLImageElement){const c=i.constructor.name,{src:u}=i;return{rr_type:c,src:u}}return i instanceof HTMLCanvasElement?{rr_type:"HTMLImageElement",src:i.toDataURL()}:i instanceof ImageData?{rr_type:i.constructor.name,args:[ki(i.data,r,a),i.width,i.height]}:Tu(i,r)||typeof i=="object"?{rr_type:i.constructor.name,index:Su(i,r,a)}:i}const gu=(i,r,a)=>i.map(c=>ki(c,r,a)),Tu=(i,r)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(c=>typeof r[c]=="function").find(c=>i instanceof r[c]);function vu(i,r,a,c){const u=[];try{const p=Mn(i.HTMLCanvasElement.prototype,"getContext",function(m){return function(y,...f){if(!ze(this,r,a,!0)){const T=function(v){return v==="experimental-webgl"?"webgl":v}(y);if("__context"in this||(this.__context=T),c&&["webgl","webgl2"].includes(T))if(f[0]&&typeof f[0]=="object"){const v=f[0];v.preserveDrawingBuffer||(v.preserveDrawingBuffer=!0)}else f.splice(0,1,{preserveDrawingBuffer:!0})}return m.apply(this,[y,...f])}});u.push(p)}catch(p){console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{u.forEach(p=>p())}}function _u(i,r,a,c,u,p){const m=[],y=Object.getOwnPropertyNames(i);for(const f of y)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(f))try{if(typeof i[f]!="function")continue;const T=Mn(i,f,function(v){return function(...I){const Z=v.apply(this,I);if(Su(Z,p,this),"tagName"in this.canvas&&!ze(this.canvas,c,u,!0)){const C=gu(I,p,this),k={type:r,property:f,args:C};a(this.canvas,k)}return Z}});m.push(T)}catch(T){const v=Li(i,f,{set(I){a(this.canvas,{type:r,property:f,args:[I],setter:!0})}});m.push(v)}return m}const Eu="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpCiAgICAgICAgcmV0dXJuIHRyYW5zcGFyZW50QmxvYk1hcC5nZXQoaWQpOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIHRyYW5zcGFyZW50QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICAgIHJldHVybiBiYXNlNjQ7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gIiI7CiAgICB9CiAgfQogIGNvbnN0IHdvcmtlciA9IHNlbGY7CiAgbGV0IGxvZ0RlYnVnID0gZmFsc2U7CiAgY29uc3QgZGVidWcgPSAoLi4uYXJncykgPT4gewogICAgaWYgKGxvZ0RlYnVnKSB7CiAgICAgIGNvbnNvbGUuZGVidWcoLi4uYXJncyk7CiAgICB9CiAgfTsKICB3b3JrZXIub25tZXNzYWdlID0gYXN5bmMgZnVuY3Rpb24oZSkgewogICAgbG9nRGVidWcgPSAhIWUuZGF0YS5sb2dEZWJ1ZzsKICAgIGlmICgiT2Zmc2NyZWVuQ2FudmFzIiBpbiBnbG9iYWxUaGlzKSB7CiAgICAgIGNvbnN0IHsgaWQsIGJpdG1hcCwgd2lkdGgsIGhlaWdodCwgZHgsIGR5LCBkdywgZGgsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDAsIHdpZHRoLCBoZWlnaHQpOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgZGVidWcoIltoaWdobGlnaHQtd29ya2VyXSBjYW52YXMgYml0bWFwIGlzIHRyYW5zcGFyZW50IiwgewogICAgICAgICAgaWQsCiAgICAgICAgICBiYXNlNjQKICAgICAgICB9KTsKICAgICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICAgICAgcmV0dXJuIHdvcmtlci5wb3N0TWVzc2FnZSh7IGlkLCBzdGF0dXM6ICJ0cmFuc3BhcmVudCIgfSk7CiAgICAgIH0KICAgICAgaWYgKGxhc3RCbG9iTWFwLmdldChpZCkgPT09IGJhc2U2NCkgewogICAgICAgIGRlYnVnKCJbaGlnaGxpZ2h0LXdvcmtlcl0gY2FudmFzIGJpdG1hcCBpcyB1bmNoYW5nZWQiLCB7CiAgICAgICAgICBpZCwKICAgICAgICAgIGJhc2U2NAogICAgICAgIH0pOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCwgc3RhdHVzOiAidW5jaGFuZ2VkIiB9KTsKICAgICAgfQogICAgICBjb25zdCBtc2cgPSB7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0LAogICAgICAgIGR4LAogICAgICAgIGR5LAogICAgICAgIGR3LAogICAgICAgIGRoCiAgICAgIH07CiAgICAgIGRlYnVnKCJbaGlnaGxpZ2h0LXdvcmtlcl0gY2FudmFzIGJpdG1hcCBwcm9jZXNzZWQiLCBtc2cpOwogICAgICB3b3JrZXIucG9zdE1lc3NhZ2UobXNnKTsKICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgfSBlbHNlIHsKICAgICAgZGVidWcoIltoaWdobGlnaHQtd29ya2VyXSBubyBvZmZzY3JlZW5jYW52YXMgc3VwcG9ydCIsIHsKICAgICAgICBpZDogZS5kYXRhLmlkCiAgICAgIH0pOwogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCwgc3RhdHVzOiAidW5zdXBwb3J0ZWQiIH0pOwogICAgfQogIH07Cn0pKCk7Ci8vIyBzb3VyY2VNYXBwaW5nVVJMPWltYWdlLWJpdG1hcC1kYXRhLXVybC13b3JrZXItS0tvQ2VrWjEuanMubWFwCg==",Iu=typeof window!="undefined"&&window.Blob&&new Blob([(Ru=Eu,Uint8Array.from(atob(Ru),i=>i.charCodeAt(0)))],{type:"text/javascript;charset=utf-8"});var Ru;function TN(i){let r;try{if(r=Iu&&(window.URL||window.webkitURL).createObjectURL(Iu),!r)throw"";const a=new Worker(r,{name:i==null?void 0:i.name});return a.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(r)}),a}catch(a){return new Worker("data:text/javascript;base64,"+Eu,{name:i==null?void 0:i.name})}finally{r&&(window.URL||window.webkitURL).revokeObjectURL(r)}}class vN{constructor(r){x(this,"pendingCanvasMutations",new Map),x(this,"rafStamps",{latestId:0,invokeId:null}),x(this,"mirror"),x(this,"logger"),x(this,"worker"),x(this,"snapshotInProgressMap",new Map),x(this,"lastSnapshotTime",new Map),x(this,"options"),x(this,"mutationCb"),x(this,"resetObservers"),x(this,"frozen",!1),x(this,"locked",!1),x(this,"processMutation",(v,I)=>{!(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId)&&this.rafStamps.invokeId||(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(v)||this.pendingCanvasMutations.set(v,[]),this.pendingCanvasMutations.get(v).push(I)});const{sampling:a,win:c,blockClass:u,blockSelector:p,recordCanvas:m,recordVideos:y,initialSnapshotDelay:f,dataURLOptions:T}=r;this.mutationCb=r.mutationCb,this.mirror=r.mirror,this.logger=r.logger,this.worker=new TN,this.worker.onmessage=v=>{const{id:I}=v.data;if(this.snapshotInProgressMap.set(I,!1),!("base64"in v.data))return void this.debug(null,"canvas worker received empty message",{data:v.data,status:v.data.status});const{base64:Z,type:C,dx:k,dy:L,dw:A,dh:V}=v.data,X={id:I,type:xn["2D"],commands:[{property:"clearRect",args:[k,L,A,V]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:Z}],type:C}]},k,L,A,V]}]};this.debug(null,"canvas worker recording mutation",X),this.mutationCb(X)},this.options=r,m&&a==="all"?(this.debug(null,"initializing canvas mutation observer",{sampling:a}),this.initCanvasMutationObserver(c,u,p)):m&&typeof a=="number"&&(this.debug(null,"initializing canvas fps observer",{sampling:a}),this.initCanvasFPSObserver(y,a,c,u,p,{initialSnapshotDelay:f,dataURLOptions:T},r.resizeFactor,r.maxSnapshotDimension))}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}debug(r,...a){if(!this.logger)return;const c=this.mirror.getId(r);let u="[highlight-canvas-manager]";r&&(u=`[highlight-canvas] [id:${c}]`,r.tagName.toLowerCase()==="canvas"&&(u+=` [ctx:${r.__context}]`)),this.logger.debug(u,r,...a)}snapshot(r){return G(this,null,function*(){var a;const c=this.mirror.getId(r);if(this.snapshotInProgressMap.get(c))return void this.debug(r,"snapshotting already in progress for",c);const u=1e3/(typeof this.options.samplingManual=="number"?this.options.samplingManual:1),p=this.lastSnapshotTime.get(c);if(!(p&&new Date().getTime()-p<u))if(this.debug(r,"starting snapshotting"),r.width!==0&&r.height!==0){this.lastSnapshotTime.set(c,new Date().getTime()),this.snapshotInProgressMap.set(c,!0);try{if(this.options.clearWebGLBuffer!==!1&&["webgl","webgl2"].includes(r.__context)){const v=r.getContext(r.__context);((a=v==null?void 0:v.getContextAttributes())==null?void 0:a.preserveDrawingBuffer)===!1&&(v.clear(v.COLOR_BUFFER_BIT),this.debug(r,"cleared webgl canvas to load it into memory",{attributes:v==null?void 0:v.getContextAttributes()}))}if(r.width===0||r.height===0)return void this.debug(r,"not yet ready",{width:r.width,height:r.height});let m=this.options.resizeFactor||1;if(this.options.maxSnapshotDimension){const v=Math.max(r.width,r.height);m=Math.min(m,this.options.maxSnapshotDimension/v)}const y=r.width*m,f=r.height*m,T=yield createImageBitmap(r,{resizeWidth:y,resizeHeight:f});this.debug(r,"created image bitmap",{width:T.width,height:T.height}),this.worker.postMessage({id:c,bitmap:T,width:y,height:f,dx:0,dy:0,dw:r.width,dh:r.height,dataURLOptions:this.options.dataURLOptions,logDebug:!!this.logger},[T]),this.debug(r,"sent message")}catch(m){this.debug(r,"failed to snapshot",m)}finally{this.snapshotInProgressMap.set(c,!1)}}else this.debug(r,"not yet ready",{width:r.width,height:r.height})})}initCanvasFPSObserver(r,a,c,u,p,m,y,f){const T=vu(c,u,p,!0),v=1e3/a;let I,Z=0;const C=new Map,k=V=>{const X=[];return c.document.querySelectorAll("canvas").forEach(O=>{if(!ze(O,u,p,!0)){this.debug(O,"discovered canvas"),X.push(O);const P=this.mirror.getId(O);C.has(P)||C.set(P,V)}}),X},L=V=>{const X=[];return r&&c.document.querySelectorAll("video").forEach(O=>{if((O.src===""||O.src.indexOf("blob:")!==-1)&&!ze(O,u,p,!0)){X.push(O);const P=this.mirror.getId(O);C.has(P)||C.set(P,V)}}),X},A=V=>G(this,null,function*(){if(Z&&V-Z<v)return void(I=requestAnimationFrame(A));Z=V;const X=P=>{const Y=this.mirror.getId(P),j=C.get(Y),te=!m.initialSnapshotDelay||V-j>m.initialSnapshotDelay;return this.debug(P,{delay:m.initialSnapshotDelay,delta:V-j,hadLoadingTime:te}),te},O=[];O.push(...k(V).filter(X).map(P=>this.snapshot(P))),O.push(...L(V).filter(X).map(P=>G(this,null,function*(){this.debug(P,"starting video snapshotting");const Y=this.mirror.getId(P);if(this.snapshotInProgressMap.get(Y))this.debug(P,"video snapshotting already in progress for",Y);else{this.snapshotInProgressMap.set(Y,!0);try{const{width:j,height:te}=P.getBoundingClientRect(),{actualWidth:ne,actualHeight:Q}={actualWidth:P.videoWidth,actualHeight:P.videoHeight},B=Math.max(ne,Q);if(P.width===0||P.height===0||ne===0||Q===0||j===0||te===0)return void this.debug(P,"not yet ready",{width:P.width,height:P.height});let ee=y||1;f&&(ee=Math.min(ee,f/B));const K=ne*ee,E=Q*ee,M=yield createImageBitmap(P,{resizeWidth:K,resizeHeight:E}),H=Math.max(j,te)/B,F=ne*H,oe=Q*H,W=(j-F)/2,J=(te-oe)/2;this.debug(P,"created image bitmap",{actualWidth:ne,actualHeight:Q,boxWidth:j,boxHeight:te,outputWidth:F,outputHeight:oe,resizeWidth:K,resizeHeight:E,scale:ee,outputScale:H,offsetX:W,offsetY:J}),this.worker.postMessage({id:Y,bitmap:M,width:K,height:E,dx:W,dy:J,dw:F,dh:oe,dataURLOptions:m.dataURLOptions,logDebug:!!this.logger},[M]),this.debug(P,"send message")}catch(j){this.debug(P,"failed to snapshot",j)}finally{this.snapshotInProgressMap.set(Y,!1)}}}))),yield Promise.all(O).catch(console.error),I=requestAnimationFrame(A)});I=requestAnimationFrame(A),this.resetObservers=()=>{T(),I&&cancelAnimationFrame(I)}}initCanvasMutationObserver(r,a,c){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();const u=vu(r,a,c,!1),p=function(y,f,T,v){const I=[],Z=Object.getOwnPropertyNames(f.CanvasRenderingContext2D.prototype);for(const C of Z)try{if(typeof f.CanvasRenderingContext2D.prototype[C]!="function")continue;const k=Mn(f.CanvasRenderingContext2D.prototype,C,function(L){return function(...A){return ze(this.canvas,T,v,!0)||setTimeout(()=>{const V=gu(A,f,this);y(this.canvas,{type:xn["2D"],property:C,args:V})},0),L.apply(this,A)}});I.push(k)}catch(k){const L=Li(f.CanvasRenderingContext2D.prototype,C,{set(A){y(this.canvas,{type:xn["2D"],property:C,args:[A],setter:!0})}});I.push(L)}return()=>{I.forEach(C=>C())}}(this.processMutation.bind(this),r,a,c),m=function(y,f,T,v){const I=[];return I.push(..._u(f.WebGLRenderingContext.prototype,xn.WebGL,y,T,v,f)),f.WebGL2RenderingContext!==void 0&&I.push(..._u(f.WebGL2RenderingContext.prototype,xn.WebGL2,y,T,v,f)),()=>{I.forEach(Z=>Z())}}(this.processMutation.bind(this),r,a,c);this.resetObservers=()=>{u(),p(),m()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){const r=a=>{this.rafStamps.latestId=a,requestAnimationFrame(r)};requestAnimationFrame(r)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((r,a)=>{const c=this.mirror.getId(a);this.flushPendingCanvasMutationFor(a,c)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(r,a){if(this.frozen||this.locked)return;const c=this.pendingCanvasMutations.get(r);if(!c||a===-1)return;const u=c.map(m=>N(m,["type"])),{type:p}=c[0];this.mutationCb({id:a,type:p,commands:u}),this.pendingCanvasMutations.delete(r)}}class _N{constructor(r){x(this,"trackedLinkElements",new WeakSet),x(this,"mutationCb"),x(this,"adoptedStyleSheetCb"),x(this,"styleMirror",new uN),this.mutationCb=r.mutationCb,this.adoptedStyleSheetCb=r.adoptedStyleSheetCb}attachLinkElement(r,a){"_cssText"in a.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:a.id,attributes:a.attributes}]}),this.trackLinkElement(r)}trackLinkElement(r){this.trackedLinkElements.has(r)||(this.trackedLinkElements.add(r),this.trackStylesheetInLinkElement(r))}adoptStyleSheets(r,a){if(r.length===0)return;const c={id:a,styleIds:[]},u=[];for(const p of r){let m;this.styleMirror.has(p)?m=this.styleMirror.getId(p):(m=this.styleMirror.add(p),u.push({styleId:m,rules:Array.from(p.rules||CSSRule,(y,f)=>({rule:Vc(y),index:f}))})),c.styleIds.push(m)}u.length>0&&(c.styles=u),this.adoptedStyleSheetCb(c)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(r){}}class EN{constructor(){x(this,"nodeMap",new WeakMap),x(this,"active",!1)}inOtherBuffer(r,a){const c=this.nodeMap.get(r);return c&&Array.from(c).some(u=>u!==a)}add(r,a){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(r,(this.nodeMap.get(r)||new Set).add(a))}destroy(){}}let Pe,Ai,Nr,Mi=!1;try{if(Array.from([1],i=>2*i)[0]!==2){const i=document.createElement("iframe");document.body.appendChild(i),Array.from=((z=i.contentWindow)==null?void 0:z.Array.from)||Array.from,document.body.removeChild(i)}}catch(i){console.debug("Unable to override Array.from",i)}const Tt=new Xc;function Ut(i={}){var r,a,c,u,p,m,y,f;const{emit:T,checkoutEveryNms:v,checkoutEveryNth:I,blockClass:Z="highlight-block",blockSelector:C=null,ignoreClass:k="highlight-ignore",ignoreSelector:L=null,maskTextClass:A="highlight-mask",maskTextSelector:V=null,inlineStylesheet:X=!0,maskAllInputs:O,maskInputOptions:P,slimDOMOptions:Y,maskInputFn:j,maskTextFn:te=Ns,hooks:ne,packFn:Q,sampling:B={},mousemoveWait:ee,recordDOM:K=!0,recordCanvas:E=!1,recordCrossOriginIframes:M=!1,recordAfter:H=i.recordAfter==="DOMContentLoaded"?i.recordAfter:"load",userTriggeredOnInput:F=!1,collectFonts:oe=!1,inlineImages:W=!1,plugins:J,keepIframeSrcFn:_e=()=>!1,privacySetting:ye="default",ignoreCSSAttributes:pe=new Set([]),errorHandler:ae,logger:tt}=i,je=S(S({},i.dataURLOptions),(a=(r=i.sampling)==null?void 0:r.canvas)==null?void 0:a.dataURLOptions);Er=ae;const $=!M||window.parent===window;let ue=!1;if(!$)try{window.parent.document&&(ue=!1)}catch(he){ue=!0}if($&&!T)throw new Error("emit function is required");if(!$&&!ue)return()=>{};ee!==void 0&&B.mousemove===void 0&&(B.mousemove=ee),Tt.reset();const Fe=O===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:P!==void 0?P:{password:!0},Je=Y===!0||Y==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:Y==="all",headMetaDescKeywords:Y==="all",headTitleMutations:Y==="all"}:Y||{};let Qt;(function(he=window){"NodeList"in he&&!he.NodeList.prototype.forEach&&(he.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in he&&!he.DOMTokenList.prototype.forEach&&(he.DOMTokenList.prototype.forEach=Array.prototype.forEach)})();let Wr=0;const no=he=>{for(const Et of J||[])Et.eventProcessor&&(he=Et.eventProcessor(he));return Q&&!ue&&(he=Q(he)),he};Pe=(he,Et)=>{var Ce;const Le=he;if(Le.timestamp=Gi(),!((Ce=an[0])!=null&&Ce.isFrozen())||Le.type===ve.FullSnapshot||Le.type===ve.IncrementalSnapshot&&Le.data.source===be.Mutation||an.forEach(mt=>mt.unfreeze()),$)T==null||T(no(Le),Et);else if(ue){const mt={type:"rrweb",event:no(Le),origin:window.location.origin,isCheckout:Et};window.parent.postMessage(mt,"*")}if(Le.type===ve.FullSnapshot)Qt=Le,Wr=0;else if(Le.type===ve.IncrementalSnapshot){if(Le.data.source===be.Mutation&&Le.data.isAttachIframe)return;Wr++;const mt=I&&Wr>=I,Re=v&&Le.timestamp-Qt.timestamp>v;(mt||Re)&&Ai(!0)}};const ro=he=>{Pe({type:ve.IncrementalSnapshot,data:S({source:be.Mutation},he)})},Bd=he=>Pe({type:ve.IncrementalSnapshot,data:S({source:be.Scroll},he)}),zd=he=>Pe({type:ve.IncrementalSnapshot,data:S({source:be.CanvasMutation},he)}),mn=new _N({mutationCb:ro,adoptedStyleSheetCb:he=>Pe({type:ve.IncrementalSnapshot,data:S({source:be.AdoptedStyleSheet},he)})}),fn=new yN({mirror:Tt,mutationCb:ro,stylesheetManager:mn,recordCrossOriginIframes:M,wrappedEmit:Pe});for(const he of J||[])he.getMirror&&he.getMirror({nodeMirror:Tt,crossOriginIframeMirror:fn.crossOriginIframeMirror,crossOriginIframeStyleMirror:fn.crossOriginIframeStyleMirror});const ga=new EN;Nr=new vN({recordCanvas:E,recordVideos:W,mutationCb:zd,win:window,blockClass:Z,blockSelector:C,mirror:Tt,sampling:(c=B==null?void 0:B.canvas)==null?void 0:c.fps,samplingManual:(u=B==null?void 0:B.canvas)==null?void 0:u.fpsManual,clearWebGLBuffer:(p=B==null?void 0:B.canvas)==null?void 0:p.clearWebGLBuffer,initialSnapshotDelay:(m=B==null?void 0:B.canvas)==null?void 0:m.initialSnapshotDelay,dataURLOptions:je,resizeFactor:(y=B==null?void 0:B.canvas)==null?void 0:y.resizeFactor,maxSnapshotDimension:(f=B==null?void 0:B.canvas)==null?void 0:f.maxSnapshotDimension,logger:tt});const io=new SN({mutationCb:ro,scrollCb:Bd,bypassOptions:{blockClass:Z,blockSelector:C,maskTextClass:A,maskTextSelector:V,inlineStylesheet:X,maskInputOptions:Fe,dataURLOptions:je,maskTextFn:te,maskInputFn:j,recordCanvas:E,inlineImages:W,privacySetting:ye,sampling:B,slimDOMOptions:Je,iframeManager:fn,stylesheetManager:mn,canvasManager:Nr,keepIframeSrcFn:_e,processedNodeManager:ga},mirror:Tt});Ai=(he=!1)=>{if(!K)return;Pe({type:ve.Meta,data:{href:window.location.href,width:eu(),height:qc()}},he),mn.reset(),io.init(),an.forEach(Ce=>Ce.lock());const Et=function(Ce,Le){const{mirror:mt=new Xc,blockClass:Re="highlight-block",blockSelector:kr=null,maskTextClass:cC="highlight-mask",maskTextSelector:uC=null,inlineStylesheet:dC=!0,inlineImages:pC=!1,recordCanvas:hC=!1,maskAllInputs:Ta=!1,maskTextFn:mC,maskInputFn:fC,slimDOM:oo=!1,dataURLOptions:bC,preserveWhiteSpace:yC,onSerialize:SC,onIframeLoad:gC,iframeLoadTimeout:TC,onStylesheetLoad:vC,stylesheetLoadTimeout:_C,keepIframeSrcFn:EC=()=>!1,privacySetting:IC="default"}=Le||{};return Pn(Ce,{doc:Ce,mirror:mt,blockClass:Re,blockSelector:kr,maskTextClass:cC,maskTextSelector:uC,skipChild:!1,inlineStylesheet:dC,maskInputOptions:Ta===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:Ta===!1?{password:!0}:Ta,maskTextFn:mC,maskInputFn:fC,slimDOMOptions:oo||oo==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:oo==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:oo||{},dataURLOptions:bC,inlineImages:pC,recordCanvas:hC,preserveWhiteSpace:yC,onSerialize:SC,onIframeLoad:gC,iframeLoadTimeout:TC,onStylesheetLoad:vC,stylesheetLoadTimeout:_C,keepIframeSrcFn:EC,newlyAddedElement:!1,privacySetting:IC})}(document,{mirror:Tt,blockClass:Z,blockSelector:C,maskTextClass:A,maskTextSelector:V,inlineStylesheet:X,maskAllInputs:Fe,maskTextFn:te,maskInputFn:j,slimDOM:Je,dataURLOptions:je,recordCanvas:E,inlineImages:W,privacySetting:ye,onSerialize:Ce=>{ru(Ce,Tt)&&fn.addIframe(Ce),iu(Ce,Tt)&&mn.trackLinkElement(Ce),Ps(Ce)&&io.addShadowRoot(vr(Ce),document)},onIframeLoad:(Ce,Le)=>{fn.attachIframe(Ce,Le),io.observeAttachShadow(Ce)},onStylesheetLoad:(Ce,Le)=>{mn.attachLinkElement(Ce,Le)},keepIframeSrcFn:_e});if(!Et)return console.warn("Failed to snapshot the document");Pe({type:ve.FullSnapshot,data:{node:Et,initialOffset:$c(window)}},he),an.forEach(Ce=>Ce.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&mn.adoptStyleSheets(document.adoptedStyleSheets,Tt.getId(document))};try{const he=[],Et=Le=>{var mt;return ge(bN)({mutationCb:ro,mousemoveCb:(Re,kr)=>Pe({type:ve.IncrementalSnapshot,data:{source:kr,positions:Re}}),mouseInteractionCb:Re=>Pe({type:ve.IncrementalSnapshot,data:S({source:be.MouseInteraction},Re)}),scrollCb:Bd,viewportResizeCb:Re=>Pe({type:ve.IncrementalSnapshot,data:S({source:be.ViewportResize},Re)}),inputCb:Re=>Pe({type:ve.IncrementalSnapshot,data:S({source:be.Input},Re)}),mediaInteractionCb:Re=>Pe({type:ve.IncrementalSnapshot,data:S({source:be.MediaInteraction},Re)}),styleSheetRuleCb:Re=>Pe({type:ve.IncrementalSnapshot,data:S({source:be.StyleSheetRule},Re)}),styleDeclarationCb:Re=>Pe({type:ve.IncrementalSnapshot,data:S({source:be.StyleDeclaration},Re)}),canvasMutationCb:zd,fontCb:Re=>Pe({type:ve.IncrementalSnapshot,data:S({source:be.Font},Re)}),selectionCb:Re=>{Pe({type:ve.IncrementalSnapshot,data:S({source:be.Selection},Re)})},customElementCb:Re=>{Pe({type:ve.IncrementalSnapshot,data:S({source:be.CustomElement},Re)})},blockClass:Z,ignoreClass:k,ignoreSelector:L,maskTextClass:A,maskTextSelector:V,maskInputOptions:Fe,inlineStylesheet:X,sampling:B,recordDOM:K,recordCanvas:E,inlineImages:W,userTriggeredOnInput:F,collectFonts:oe,doc:Le,maskInputFn:j,maskTextFn:te,keepIframeSrcFn:_e,blockSelector:C,slimDOMOptions:Je,dataURLOptions:je,mirror:Tt,iframeManager:fn,stylesheetManager:mn,shadowDomManager:io,processedNodeManager:ga,canvasManager:Nr,ignoreCSSAttributes:pe,privacySetting:ye,plugins:((mt=J==null?void 0:J.filter(Re=>Re.observer))==null?void 0:mt.map(Re=>({observer:Re.observer,options:Re.options,callback:kr=>Pe({type:ve.Plugin,data:{plugin:Re.name,payload:kr}})})))||[]},ne)};fn.addLoadListener(Le=>{try{he.push(Et(Le.contentDocument))}catch(mt){console.warn(mt)}});const Ce=()=>{Ai(),he.push(Et(document)),Mi=!0};return document.readyState==="interactive"||document.readyState==="complete"?Ce():(he.push($e("DOMContentLoaded",()=>{Pe({type:ve.DomContentLoaded,data:{}}),H==="DOMContentLoaded"&&Ce()})),he.push($e("load",()=>{Pe({type:ve.Load,data:{}}),H==="load"&&Ce()},window))),()=>{he.forEach(Le=>Le()),ga.destroy(),Mi=!1,Er=void 0}}catch(he){console.warn(he)}}var Nu,Dn;Ut.addCustomEvent=(i,r)=>{Mi&&Pe({type:ve.Custom,data:{tag:i,payload:r}})},Ut.freezePage=()=>{an.forEach(i=>i.freeze())},Ut.takeFullSnapshot=i=>{if(!Mi)throw new Error("please take full snapshot after start recording");Ai(i)},Ut.snapshotCanvas=i=>G(this,null,function*(){if(!Nr)throw new Error("canvas manager is not initialized");yield Nr.snapshot(i)}),Ut.mirror=Tt,(Dn=Nu||(Nu={}))[Dn.NotStarted=0]="NotStarted",Dn[Dn.Running=1]="Running",Dn[Dn.Stopped=2]="Stopped";const{addCustomEvent:Zu}=Ut,Cu={key:"_sid"},IN=i=>{const r=i?Object.assign({},Cu,i):Cu;let a=0;return{name:"rrweb/sequential-id@1",eventProcessor:c=>(Object.assign(c,{[r.key]:++a}),c),options:r}};function RN(i){if(!i||!i.outerHTML)return"";let r="";for(;i.parentElement;){let a=i.localName;if(!a)break;a=a.toLowerCase();let c=i.parentElement,u=[];if(c.children&&c.children.length>0)for(let p=0;p<c.children.length;p++){let m=c.children[p];m.localName&&m.localName.toLowerCase&&m.localName.toLowerCase()===a&&u.push(m)}u.length>1&&(a+=":eq("+u.indexOf(i)+")"),r=a+(r?">"+r:""),i=c}return r}function ks(i){return Object.prototype.toString.call(i)==="[object Object]"}function Ou(i,r){if(r===0)return!0;const a=Object.keys(i);for(const c of a)if(ks(i[c])&&Ou(i[c],r-1))return!0;return!1}function As(i,r){const a={numOfKeysLimit:50,depthOfLimit:4};Object.assign(a,r);const c=[],u=[];return JSON.stringify(i,function(p,m){if(c.length>0){const y=c.indexOf(this);~y?c.splice(y+1):c.push(this),~y?u.splice(y,1/0,p):u.push(p),~c.indexOf(m)&&(m=c[0]===m?"[Circular ~]":"[Circular ~."+u.slice(0,c.indexOf(m)).join(".")+"]")}else c.push(m);if(m==null)return m;if(function(y){return ks(y)&&Object.keys(y).length>a.numOfKeysLimit||typeof y=="function"?!0:y instanceof Event&&y.isTrusted===!1?Object.keys(y).length===1:!!(ks(y)&&Ou(y,a.depthOfLimit))}(m))return function(y){let f=y.toString();return a.stringLengthLimit&&f.length>a.stringLengthLimit&&(f=`${f.slice(0,a.stringLengthLimit)}...`),f}(m);if(m instanceof Event){const y={};for(const f in m){const T=m[f];Array.isArray(T)?y[f]=RN(T.length?T[0]:null):y[f]=T}return y}return m instanceof Node?m instanceof HTMLElement?m?m.outerHTML:"":m.nodeName:m instanceof Error?m.name+": "+m.message:m})}function NN(){return(i=document.createElement("canvas")).getContext&&i.getContext("2d")&&i.toDataURL("image/webp").indexOf("data:image/webp")==0?{type:"image/webp",quality:.9}:{type:"image/jpeg",quality:.6};var i}var ZN=typeof globalThis!="undefined"?globalThis:typeof window!="undefined"?window:typeof jn!="undefined"?jn:typeof self!="undefined"?self:{};function Ms(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var wu,ln,Lu,xs,Gu,Vu={exports:{}},Xu={exports:{}};function CN(){return wu||(wu=1,Xu.exports=function(){function i(C){return!isNaN(parseFloat(C))&&isFinite(C)}function r(C){return C.charAt(0).toUpperCase()+C.substring(1)}function a(C){return function(){return this[C]}}var c=["isConstructor","isEval","isNative","isToplevel"],u=["columnNumber","lineNumber"],p=["fileName","functionName","source"],m=["args"],y=["evalOrigin"],f=c.concat(u,p,m,y);function T(C){if(C)for(var k=0;k<f.length;k++)C[f[k]]!==void 0&&this["set"+r(f[k])](C[f[k]])}T.prototype={getArgs:function(){return this.args},setArgs:function(C){if(Object.prototype.toString.call(C)!=="[object Array]")throw new TypeError("Args must be an Array");this.args=C},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(C){if(C instanceof T)this.evalOrigin=C;else{if(!(C instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new T(C)}},toString:function(){var C=this.getFileName()||"",k=this.getLineNumber()||"",L=this.getColumnNumber()||"",A=this.getFunctionName()||"";return this.getIsEval()?C?"[eval] ("+C+":"+k+":"+L+")":"[eval]:"+k+":"+L:A?A+" ("+C+":"+k+":"+L+")":C+":"+k+":"+L}},T.fromString=function(C){var k=C.indexOf("("),L=C.lastIndexOf(")"),A=C.substring(0,k),V=C.substring(k+1,L).split(","),X=C.substring(L+1);if(X.indexOf("@")===0)var O=/@(.+?)(?::(\d+))?(?::(\d+))?$/.exec(X,""),P=O[1],Y=O[2],j=O[3];return new T({functionName:A,args:V||void 0,fileName:P,lineNumber:Y||void 0,columnNumber:j||void 0})};for(var v=0;v<c.length;v++)T.prototype["get"+r(c[v])]=a(c[v]),T.prototype["set"+r(c[v])]=function(C){return function(k){this[C]=!!k}}(c[v]);for(var I=0;I<u.length;I++)T.prototype["get"+r(u[I])]=a(u[I]),T.prototype["set"+r(u[I])]=function(C){return function(k){if(!i(k))throw new TypeError(C+" must be a Number");this[C]=Number(k)}}(u[I]);for(var Z=0;Z<p.length;Z++)T.prototype["get"+r(p[Z])]=a(p[Z]),T.prototype["set"+r(p[Z])]=function(C){return function(k){this[C]=String(k)}}(p[Z]);return T}()),Xu.exports}Vu.exports=(ln=CN(),Lu=/(^|@)\S+:\d+/,xs=/^\s*at .*(\S+:\d+|\(native\))/m,Gu=/^(eval@)?(\[native code])?$/,{parse:function(i){if(i.stacktrace!==void 0||i["opera#sourceloc"]!==void 0)return this.parseOpera(i);if(i.stack&&i.stack.match(xs))return this.parseV8OrIE(i);if(i.stack)return this.parseFFOrSafari(i);throw new Error("Cannot parse given Error object")},extractLocation:function(i){if(i.indexOf(":")===-1)return[i];var r=/(.+?)(?::(\d+))?(?::(\d+))?$/.exec(i.replace(/[()]/g,""));return[r[1],r[2]||void 0,r[3]||void 0]},parseV8OrIE:function(i){return i.stack.split(`
`).filter(function(r){return!!r.match(xs)},this).map(function(r){r.indexOf("(eval ")>-1&&(r=r.replace(/eval code/g,"eval").replace(/(\(eval at [^()]*)|(\),.*$)/g,""));var a=r.replace(/^\s+/,"").replace(/\(eval code/g,"("),c=a.match(/ (\((.+):(\d+):(\d+)\)$)/),u=(a=c?a.replace(c[0],""):a).split(/\s+/).slice(1),p=this.extractLocation(c?c[1]:u.pop()),m=u.join(" ")||void 0,y=["eval","<anonymous>"].indexOf(p[0])>-1?void 0:p[0];return new ln({functionName:m,fileName:y,lineNumber:p[1],columnNumber:p[2],source:r})},this)},parseFFOrSafari:function(i){return i.stack.split(`
`).filter(function(r){return!r.match(Gu)},this).map(function(r){if(r.indexOf(" > eval")>-1&&(r=r.replace(/ line (\d+)(?: > eval line \d+)* > eval:\d+:\d+/g,":$1")),r.indexOf("@")===-1&&r.indexOf(":")===-1)return new ln({functionName:r});var a=/((.*".+"[^@]*)?[^@]*)(?:@)/,c=r.match(a),u=c&&c[1]?c[1]:void 0,p=this.extractLocation(r.replace(a,""));return new ln({functionName:u,fileName:p[0],lineNumber:p[1],columnNumber:p[2],source:r})},this)},parseOpera:function(i){return!i.stacktrace||i.message.indexOf(`
`)>-1&&i.message.split(`
`).length>i.stacktrace.split(`
`).length?this.parseOpera9(i):i.stack?this.parseOpera11(i):this.parseOpera10(i)},parseOpera9:function(i){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,a=i.message.split(`
`),c=[],u=2,p=a.length;u<p;u+=2){var m=r.exec(a[u]);m&&c.push(new ln({fileName:m[2],lineNumber:m[1],source:a[u]}))}return c},parseOpera10:function(i){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,a=i.stacktrace.split(`
`),c=[],u=0,p=a.length;u<p;u+=2){var m=r.exec(a[u]);m&&c.push(new ln({functionName:m[3]||void 0,fileName:m[2],lineNumber:m[1],source:a[u]}))}return c},parseOpera11:function(i){return i.stack.split(`
`).filter(function(r){return!!r.match(Lu)&&!r.match(/^Error created at/)},this).map(function(r){var a,c=r.split("@"),u=this.extractLocation(c.pop()),p=c.shift()||"",m=p.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^)]*\)/g,"")||void 0;p.match(/\(([^)]*)\)/)&&(a=p.replace(/^[^(]+\(([^)]*)\)$/,"$1"));var y=a===void 0||a==="[arguments not available]"?void 0:a.split(",");return new ln({functionName:m,args:y,fileName:u[0],lineNumber:u[1],columnNumber:u[2],source:r})},this)}});const Zr=Ms(Vu.exports);function ON(i,r){const a=r.logger;if(!a)return()=>{};let c;c=typeof a=="string"?window[a]:a;const u=[];if(r.level.includes("error")&&window){const m=y=>{const{message:f,error:T}=y;let v=[];T&&(v=Zr.parse(T));const I=[As(f,r.stringifyOptions)];i({type:"Error",trace:v,time:Date.now(),value:I})};window.addEventListener("error",m),u.push(()=>{window&&window.removeEventListener("error",m)})}for(const m of r.level)u.push(p(c,m));return()=>{u.forEach(m=>m())};function p(m,y){return m[y]?function(f,T,v){try{if(!(T in f))return()=>{};const I=f[T],Z=v(I);return typeof Z=="function"&&(Z.prototype=Z.prototype||{},Object.defineProperties(Z,{__rrweb_original__:{enumerable:!1,value:I}})),f[T]=Z,()=>{f[T]=I}}catch(I){return()=>{}}}(m,y,f=>(...T)=>{f.apply(this,T);try{const v=Zr.parse(new Error),I=r.serializeConsoleAttributes?T.map(Z=>typeof Z=="object"?As(Z,r.stringifyOptions):Z):T.filter(Z=>typeof Z!="object").map(Z=>`${Z}`);i({type:y,trace:v.slice(1),value:I,attributes:As(T.filter(Z=>typeof Z=="object").reduce((Z,C)=>S(S({},Z),C),{}),r.stringifyOptions),time:Date.now()})}catch(v){f("highlight logger error:",v,...T)}}):()=>{}}}var Pu={exports:{}};(function(i,r){function a(c,u){var p=[],m=[];return u==null&&(u=function(y,f){return p[0]===f?"[Circular ~]":"[Circular ~."+m.slice(0,p.indexOf(f)).join(".")+"]"}),function(y,f){if(p.length>0){var T=p.indexOf(this);~T?p.splice(T+1):p.push(this),~T?m.splice(T,1/0,y):m.push(y),~p.indexOf(f)&&(f=u.call(this,y,f))}else p.push(f);return c==null?f:c.call(this,y,f)}}(i.exports=function(c,u,p,m){return JSON.stringify(c,a(u,m),p)}).getSerialize=a})(Pu);const cn=Ms(Pu.exports);function Us(i,r,a,c){var u,p,m,y;let f=[];try{f=Zr.parse(c!=null?c:r)}catch(I){f=Zr.parse(new Error)}let T={};r instanceof Error&&(r=r.message).cause&&(T={"exception.cause":r.cause});const v=LN(f);i({event:cn(r),type:"window.onerror",url:window.location.href,source:a!=null?a:"",lineNumber:(u=v[0])!=null&&u.lineNumber?(p=v[0])==null?void 0:p.lineNumber:0,columnNumber:(m=v[0])!=null&&m.columnNumber?(y=v[0])==null?void 0:y.columnNumber:0,stackTrace:v,timestamp:new Date().toISOString(),payload:T?cn(T):void 0})}const wN=(i,{enablePromisePatch:r})=>{if(typeof window=="undefined")return()=>{};const a=window.onerror=(m,y,f,T,v)=>{Us(i,m,y,v)},c=window.onunhandledrejection=m=>{if(m.reason){const y=m.promise;y.getStack?Us(i,m.reason,m.type,y.getStack()):Us(i,m.reason,m.type)}},u=window.Promise,p=class extends u{constructor(m){super(m),R(this,"promiseCreationError"),this.promiseCreationError=new Error}getStack(){return this.promiseCreationError}static shouldPatch(){const m=window.Zone===void 0;return r&&m}};return p.shouldPatch()&&(window.Promise=p),()=>{window.Promise=u,window.onunhandledrejection=c,window.onerror=a}},LN=i=>{var r,a;if(i.length===0)return i;const c=i[0];return(r=c.fileName)!=null&&r.includes("highlight.run")||(a=c.fileName)!=null&&a.includes("highlight.io")||c.functionName==="new highlightPromise"?i.slice(1):i},GN=["assert","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"];var un=(i=>(i.DeviceMemory="DeviceMemory",i.ViewportHeight="ViewportHeight",i.ViewportWidth="ViewportWidth",i.ScreenHeight="ScreenHeight",i.ScreenWidth="ScreenWidth",i.ViewportArea="ViewportArea",i))(un||{}),dt=(i=>(i.Device="Device",i.WebVital="WebVital",i.Performance="Performance",i.Frontend="Frontend",i.Backend="Backend",i))(dt||{});const Wu=['["\\"Script error.\\""]','"Script error."','["\\"Load failed.\\""]','"Load failed."','["\\"Network request failed.\\""]','"Network request failed."','["\\"Document is not focused.\\""]','"Document is not focused."','["\\"Failed to fetch\\""]','"Failed to fetch"','[{"isTrusted":true}]','{"isTrusted":true}','["{}"]','"{}"','[""]','""','["\\"\\""]','""'],ku=["websocket error",'\\"ResizeObserver loop'],Au=(i,r,a)=>{const c=VN(r,i.headers,a);return _(S({},i),{headers:c})},VN=(i,r,a)=>{var c,u;const p=S({},r);return a?((c=Object.keys(p))==null||c.forEach(m=>{[...a].includes(m==null?void 0:m.toLowerCase())||(p[m]="[REDACTED]")}),p):((u=Object.keys(p))==null||u.forEach(m=>{[...XN,...i].includes(m==null?void 0:m.toLowerCase())&&(p[m]="[REDACTED]")}),p)},XN=["authorization","cookie","proxy-authorization","token"],PN=["https://www.googleapis.com/identitytoolkit","https://securetoken.googleapis.com"];var Ue=(i=>(i.RECORDING_START_TIME="highlightRecordingStartTime",i.SEGMENT_LAST_SENT_HASH_KEY="HIGHLIGHT_SEGMENT_LAST_SENT_HASH_KEY",i.SESSION_DATA="sessionData",i.SESSION_SECURE_ID="sessionSecureID",i.USER_IDENTIFIER="highlightIdentifier",i.USER_OBJECT="highlightUserObject",i.PAYLOAD_ID="payloadId",i))(Ue||{});let Ds="localStorage",WN=new class{constructor(){R(this,"storage",{})}getItem(i){var r;return(r=this.storage[i])!=null?r:""}setItem(i,r){this.storage[i]=r}removeItem(i){delete this.storage[i]}};const Fs=()=>{try{switch(Ds){case"localStorage":return window.localStorage;case"sessionStorage":return window.sessionStorage}}catch(i){return WN}},st=i=>Fs().getItem(i),vt=(i,r)=>Fs().setItem(i,r),Ys=i=>Fs().removeItem(i),kN=i=>{if(Ds==="sessionStorage")return void console.warn("highlight.io cannot use local storage; segment integration will not work");const r=window.localStorage.setItem;window.localStorage.setItem=function(){const[a,c]=arguments;i({keyName:a,keyValue:c}),r.apply(this,[a,c])}},Mu={normal:{bytes:1e7,time:24e4},canvas:{bytes:16e6,time:5e3}},xu=()=>{let i=JSON.parse(st(Ue.SESSION_DATA)||"{}");if(i&&i.lastPushTime&&Date.now()-i.lastPushTime<9e5)return i},Hs=function(i){i!==null?(vt(Ue.SESSION_DATA,JSON.stringify(i)),Uu(i.sessionSecureID)):Ys(Ue.SESSION_DATA)},Uu=function(i){return vt(Ue.SESSION_SECURE_ID,i)},Du="X-Highlight-Request",Fu=i=>{let r=i;return i.startsWith("https://")||i.startsWith("http://")||(r=`${window.location.origin}${r}`),r.replace(/\/+$/,"")},Yu=(i,r,a,c)=>{i.sort((y,f)=>y.responseEnd-f.responseEnd);const u=i.reduce((y,f)=>{const T=Fu(f.name);return f.initiatorType===a?y[a][T]=[...y[a][T]||[],f]:y.others[T]=[...y.others[T]||[],f],y},{xmlhttprequest:{},others:{},fetch:{}});let p={};p=r.reduce((y,f)=>{const T=Fu(f.request.url);return y[T]=[...y[T]||[],f],y},p);for(let y in u[a]){const f=u[a][y],T=p[y];if(!T)continue;const v=Math.max(f.length-T.length,0);for(let I=v;I<f.length;I++)f[I]&&(f[I].requestResponsePair=T[I-v])}let m=[];for(let y in u)for(let f in u[y])m=m.concat(u[y][f]);return m.sort((y,f)=>y.fetchStart-f.fetchStart).reduce((y,f)=>{let T=f.requestResponsePair;return T&&(T=((v,{headersToRedact:I,headersToRecord:Z,requestResponseSanitizer:C})=>{var k,L;let A=v;if(C){let Y=!0;try{A.request.body=JSON.parse(A.request.body)}catch(te){Y=!1}let j=!0;try{A.response.body=JSON.parse(A.response.body)}catch(te){j=!1}try{A=C(A)}catch(te){}finally{Y=Y&&!!((k=A==null?void 0:A.request)!=null&&k.body),j=j&&!!((L=A==null?void 0:A.response)!=null&&L.body),Y&&(A.request.body=JSON.stringify(A.request.body)),j&&(A.response.body=JSON.stringify(A.response.body))}if(!A)return null}const V=A,{request:X,response:O}=V,P=N(V,["request","response"]);return S({request:Au(X,I,Z),response:Au(O,I,Z)},P)})(f.requestResponsePair,c),!T)||(f.toJSON=function(){const v=window.performance.timeOrigin;return{initiatorType:this.initiatorType,startTimeAbs:v+this.startTime,connectStartAbs:v+this.connectStart,connectEndAbs:v+this.connectEnd,domainLookupStartAbs:v+this.domainLookupStart,domainLookupEndAbs:v+this.domainLookupEnd,fetchStartAbs:v+this.fetchStart,redirectStartAbs:v+this.redirectStart,redirectEndAbs:v+this.redirectEnd,requestStartAbs:v+this.requestStart,responseStartAbs:v+this.responseStart,responseEndAbs:v+this.responseEnd,secureConnectionStartAbs:v+this.secureConnectionStart,workerStartAbs:v+this.workerStart,name:this.name,transferSize:this.transferSize,encodedBodySize:this.encodedBodySize,decodedBodySize:this.decodedBodySize,nextHopProtocol:this.nextHopProtocol,requestResponsePairs:T}},y.push(f)),y},[])},Ks=(i,r,a)=>{return u=r,!((c=i).toLocaleLowerCase().includes("https://localhost:8082/public")||c.toLocaleLowerCase().includes("highlight.io")||c.toLocaleLowerCase().includes(u))||Js(i,a);var c,u},Js=(i,r)=>{var a;let c=[];r===!0?(c=["localhost",/^\//],(a=window==null?void 0:window.location)!=null&&a.host&&c.push(window.location.host)):r instanceof Array&&(c=r);let u=!1;return c.forEach(p=>{i.match(p)&&(u=!0)}),u};function AN(i){for(var r="",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",c=0;c<i;c++)r+=a.charAt(Math.floor(62*Math.random()));return r}const Hu=()=>{return[(i=st(Ue.SESSION_SECURE_ID))!=null?i:"",AN(10)];var i},Ku=(i,r)=>i+"/"+r,MN=(i,r,a,c,u,p)=>{const m=XMLHttpRequest.prototype,y=m.open,f=m.send,T=m.setRequestHeader;return m.open=function(v,I){return this._url=typeof I=="string"?I:I.toString(),this._method=v,this._requestHeaders={},this._shouldRecordHeaderAndBody=!c.some(Z=>this._url.toLowerCase().includes(Z)),y.apply(this,arguments)},m.setRequestHeader=function(v,I){return this._requestHeaders[v]=I,T.apply(this,arguments)},m.send=function(v){if(!Ks(this._url,r,a))return f.apply(this,arguments);const[I,Z]=Hu();Js(this._url,a)&&this.setRequestHeader(Du,Ku(I,Z));const C=this._shouldRecordHeaderAndBody,k={sessionSecureID:I,id:Z,url:this._url,verb:this._method,headers:C?this._requestHeaders:{},body:void 0};if(C&&v){const L=Ju(v,k.url);L&&(this._body=L,k.body=dn(L,u,p,k.headers))}return this.addEventListener("load",function(){return G(this,null,function*(){const L={status:this.status,headers:{},body:void 0};if(C){const A=this.getAllResponseHeaders().trim().split(/[\r\n]+/),V={};if(A.forEach(function(X){const O=X.split(": "),P=O.shift();V[P]=O.join(": ")}),L.headers=V,v){const X=Ju(v,k.url);X&&(k.body=dn(X,u,p,L.headers))}if(this.responseType===""||this.responseType==="text")L.body=dn(this.responseText,u,p,L.headers),L.size=8*this.responseText.length;else if(this.responseType==="blob"){if(this.response instanceof Blob)try{const X=yield this.response.text();L.body=dn(X,u,p,L.headers),L.size=this.response.size}catch(X){}}else try{L.body=dn(this.response,u,p,L.headers)}catch(X){}}i({request:k,response:L,urlBlocked:!C})})}),this.addEventListener("error",function(){return G(this,null,function*(){const L={status:this.status,headers:void 0,body:void 0};i({request:k,response:L,urlBlocked:!1})})}),f.apply(this,arguments)},()=>{m.open=y,m.send=f,m.setRequestHeader=T}},Ju=(i,r)=>{if(typeof i=="string"){if(!(r!=null&&r.includes("localhost"))&&!(r!=null&&r.includes("highlight.run"))||!i.includes("pushPayload"))return i}else if(typeof i=="object"||typeof i=="number"||typeof i=="boolean")return cn(i);return null},xN={"application/json":67108864,"text/plain":67108864},dn=(i,r,a,c)=>{var u,p,m;let y=65536;if(c){let f="";f=typeof c.get=="function"?(u=c.get("content-type"))!=null?u:"":(p=c["content-type"])!=null?p:"";try{f=f.split(";")[0]}catch(T){}y=(m=xN[f])!=null?m:65536}if(i){if(r)try{const f=JSON.parse(i);Array.isArray(f)?f.forEach(T=>{Object.keys(T).forEach(v=>{r.includes(v.toLocaleLowerCase())&&(T[v]="[REDACTED]")})}):Object.keys(f).forEach(T=>{r.includes(T.toLocaleLowerCase())&&(f[T]="[REDACTED]")}),i=JSON.stringify(f)}catch(f){}if(a)try{const f=JSON.parse(i);Object.keys(f).forEach(T=>{a.includes(T.toLocaleLowerCase())||(f[T]="[REDACTED]")}),i=JSON.stringify(f)}catch(f){}}try{i=i.slice(0,y)}catch(f){}return i},UN=(i,r,a,c,u,p)=>{const m=window._fetchProxy;return window._fetchProxy=function(y,f){const{method:T,url:v}=DN(y,f);if(!Ks(v,r,a))return m.call(this,y,f);const[I,Z]=Hu();if(Js(v,a)){f=f||{};let A=new Headers(f.headers);y instanceof Request&&[...y.headers].forEach(([V,X])=>A.set(V,X)),A.set(Du,Ku(I,Z)),f.headers=Object.fromEntries(A.entries())}const C={sessionSecureID:I,id:Z,headers:{},body:void 0,url:v,verb:T},k=!c.some(A=>v.toLowerCase().includes(A));k&&(C.headers=Object.fromEntries(new Headers(f==null?void 0:f.headers).entries()),C.body=dn(f==null?void 0:f.body,u,p,f==null?void 0:f.headers));let L=m.call(this,y,f);return FN(L,C,i,k,u,p),L},()=>{window._fetchProxy=m}},DN=(i,r)=>{const a=r&&r.method||typeof i=="object"&&"method"in i&&i.method||"GET";let c;return c=typeof i=="object"?"url"in i&&i.url?i.url:i.toString():i,{method:a,url:c}},FN=(i,r,a,c,u,p)=>{i.then(m=>G(this,null,function*(){let y={body:void 0,headers:void 0,status:0,size:0},f=!1,T=!c;"stack"in m||m instanceof Error?(y=_(S({},y),{body:m.message,status:0,size:void 0}),f=!0):"status"in m&&(y=_(S({},y),{status:m.status}),c&&(y.body=yield YN(m,p,u),y.headers=Object.fromEntries(m.headers.entries()),y.size=8*y.body.length),m.type!=="opaque"&&m.type!=="opaqueredirect"||(T=!0,y=_(S({},y),{body:"CORS blocked request"})),f=!0),f&&a({request:r,response:y,urlBlocked:T})})).catch(()=>{})},YN=(i,r,a)=>G(this,null,function*(){let c;try{const u=i.clone().body;if(u){let p,m=u.getReader(),y=new TextDecoder,f="";for(;!(p=yield m.read()).done;){let T=p.value;f+=y.decode(T)}c=f,c=dn(c,a,r,i.headers)}else c=""}catch(u){c=`Unable to clone response: ${u}`}return c}),HN=({xhrCallback:i,fetchCallback:r,webSocketRequestCallback:a,webSocketEventCallback:c,disableWebSocketRecording:u,bodyKeysToRedact:p,backendUrl:m,tracingOrigins:y,urlBlocklist:f,sessionSecureID:T,bodyKeysToRecord:v})=>{const I=MN(i,m,y,f,p,v),Z=UN(r,m,y,f,p,v),C=u?()=>{}:((k,L,A)=>{const V=window._highlightWebSocketRequestCallback;window._highlightWebSocketRequestCallback=k;const X=window._highlightWebSocketEventCallback;return window._highlightWebSocketEventCallback=O=>{const P=O,Y=N(P,["message","size"]),j=A.some(te=>O.name.toLowerCase().includes(te));L(j?Y:O)},()=>{window._highlightWebSocketRequestCallback=V,window._highlightWebSocketEventCallback=X}})(a,c,f);return()=>{I(),Z(),C()}};class Dt{constructor(r){var a,c;R(this,"disableConsoleRecording"),R(this,"reportConsoleErrors"),R(this,"enablePromisePatch"),R(this,"consoleMethodsToRecord"),R(this,"listeners"),R(this,"errors"),R(this,"messages"),R(this,"options"),R(this,"hasNetworkRecording",!0),R(this,"_backendUrl"),R(this,"disableNetworkRecording"),R(this,"enableRecordingNetworkContents"),R(this,"xhrNetworkContents"),R(this,"fetchNetworkContents"),R(this,"disableRecordingWebSocketContents"),R(this,"webSocketNetworkContents"),R(this,"webSocketEventContents"),R(this,"tracingOrigins"),R(this,"networkHeadersToRedact"),R(this,"networkBodyKeysToRedact"),R(this,"networkBodyKeysToRecord"),R(this,"networkHeaderKeysToRecord"),R(this,"lastNetworkRequestTimestamp"),R(this,"urlBlocklist"),R(this,"requestResponseSanitizer"),this.options=r,this.disableConsoleRecording=!!r.disableConsoleRecording,this.reportConsoleErrors=(a=r.reportConsoleErrors)!=null&&a,this.enablePromisePatch=(c=r.enablePromisePatch)==null||c,this.consoleMethodsToRecord=r.consoleMethodsToRecord||[...GN],this.listeners=[],this.errors=[],this.messages=[],this.lastNetworkRequestTimestamp=0}isListening(){return this.listeners.length>0}startListening(){if(this.isListening())return;const r=this;this.disableConsoleRecording||this.listeners.push(ON(a=>{var c,u,p;if(this.reportConsoleErrors&&(a.type==="Error"||a.type==="error")&&a.value&&a.trace){const m=cn(a.value);if(Wu.includes(m)||ku.some(y=>m.includes(y)))return;r.errors.push({event:m,type:"console.error",url:window.location.href,source:(c=a.trace[0])!=null&&c.fileName?a.trace[0].fileName:"",lineNumber:(u=a.trace[0])!=null&&u.lineNumber?a.trace[0].lineNumber:0,columnNumber:(p=a.trace[0])!=null&&p.columnNumber?a.trace[0].columnNumber:0,stackTrace:a.trace,timestamp:new Date().toISOString()})}r.messages.push(a)},{level:this.consoleMethodsToRecord,logger:"console",stringifyOptions:{depthOfLimit:10,numOfKeysLimit:100,stringLengthLimit:1e3}})),this.listeners.push(wN(a=>{Wu.includes(a.event)||ku.some(c=>a.event.includes(c))||r.errors.push(a)},{enablePromisePatch:this.enablePromisePatch})),this.options.enableOtelTracing&&Promise.resolve().then(()=>lC).then(({shutdown:a})=>{this.listeners.push(a)}),Dt.setupNetworkListener(this,this.options)}stopListening(){this.listeners.forEach(r=>r()),this.listeners=[]}static setupNetworkListener(r,a){var c,u,p,m,y,f,T,v,I,Z,C,k;r._backendUrl=(a==null?void 0:a.backendUrl)||"https://localhost:8082/public",r.xhrNetworkContents=[],r.fetchNetworkContents=[],r.webSocketNetworkContents=[],r.webSocketEventContents=[],r.networkHeadersToRedact=[],r.urlBlocklist=[],r.tracingOrigins=a.tracingOrigins||[],(a==null?void 0:a.disableNetworkRecording)!==void 0?(r.disableNetworkRecording=a==null?void 0:a.disableNetworkRecording,r.enableRecordingNetworkContents=!1,r.disableRecordingWebSocketContents=!0,r.networkHeadersToRedact=[],r.networkBodyKeysToRedact=[],r.urlBlocklist=[],r.networkBodyKeysToRecord=[],r.networkBodyKeysToRecord=[]):typeof(a==null?void 0:a.networkRecording)=="boolean"?(r.disableNetworkRecording=!a.networkRecording,r.enableRecordingNetworkContents=!1,r.disableRecordingWebSocketContents=!0,r.networkHeadersToRedact=[],r.networkBodyKeysToRedact=[],r.urlBlocklist=[]):(((c=a.networkRecording)==null?void 0:c.enabled)!==void 0?r.disableNetworkRecording=!a.networkRecording.enabled:r.disableNetworkRecording=!1,r.enableRecordingNetworkContents=((u=a.networkRecording)==null?void 0:u.recordHeadersAndBody)||!1,r.disableRecordingWebSocketContents=((p=a.networkRecording)==null?void 0:p.disableWebSocketEventRecordings)||!1,r.networkHeadersToRedact=((y=(m=a.networkRecording)==null?void 0:m.networkHeadersToRedact)==null?void 0:y.map(L=>L.toLowerCase()))||[],r.networkBodyKeysToRedact=((T=(f=a.networkRecording)==null?void 0:f.networkBodyKeysToRedact)==null?void 0:T.map(L=>L.toLowerCase()))||[],r.urlBlocklist=((I=(v=a.networkRecording)==null?void 0:v.urlBlocklist)==null?void 0:I.map(L=>L.toLowerCase()))||[],r.urlBlocklist=[...r.urlBlocklist,...PN],r.requestResponseSanitizer=(Z=a.networkRecording)==null?void 0:Z.requestResponseSanitizer,r.networkHeaderKeysToRecord=(C=a.networkRecording)==null?void 0:C.headerKeysToRecord,r.networkHeaderKeysToRecord&&(r.networkHeadersToRedact=[],r.networkHeaderKeysToRecord=r.networkHeaderKeysToRecord.map(L=>L.toLocaleLowerCase())),r.networkBodyKeysToRecord=(k=a.networkRecording)==null?void 0:k.bodyKeysToRecord,r.networkBodyKeysToRecord&&(r.networkBodyKeysToRedact=[],r.networkBodyKeysToRecord=r.networkBodyKeysToRecord.map(L=>L.toLocaleLowerCase()))),!r.disableNetworkRecording&&r.enableRecordingNetworkContents&&r.listeners.push(HN({xhrCallback:L=>{r.xhrNetworkContents.push(L)},fetchCallback:L=>{r.fetchNetworkContents.push(L)},webSocketRequestCallback:L=>{r.webSocketNetworkContents&&r.webSocketNetworkContents.push(L)},webSocketEventCallback:L=>{r.webSocketEventContents.push(L)},disableWebSocketRecording:r.disableRecordingWebSocketContents,bodyKeysToRedact:r.networkBodyKeysToRedact,backendUrl:r._backendUrl,tracingOrigins:r.tracingOrigins,urlBlocklist:r.urlBlocklist,sessionSecureID:a.sessionSecureID,bodyKeysToRecord:r.networkBodyKeysToRecord}))}static getRecordedNetworkResources(r,a){var c,u;let p=[],m=[];if(!r.disableNetworkRecording){const y=((c=window==null?void 0:window.performance)==null?void 0:c.timeOrigin)||0;p=performance.getEntriesByType("resource");const f=2*(a-y);if(p=p.filter(T=>!(T.responseEnd<r.lastNetworkRequestTimestamp)&&Ks(T.name,r._backendUrl,r.tracingOrigins)).map(T=>_(S({},T.toJSON()),{offsetStartTime:T.startTime-f,offsetResponseEnd:T.responseEnd-f,offsetFetchStart:T.fetchStart-f})),r.lastNetworkRequestTimestamp=((u=p.at(-1))==null?void 0:u.responseEnd)||r.lastNetworkRequestTimestamp,r.enableRecordingNetworkContents){const T={headersToRedact:r.networkHeadersToRedact,headersToRecord:r.networkHeaderKeysToRecord,requestResponseSanitizer:r.requestResponseSanitizer};p=Yu(p,r.xhrNetworkContents,"xmlhttprequest",T),p=Yu(p,r.fetchNetworkContents,"fetch",T)}}return r.disableRecordingWebSocketContents||(m=r.webSocketNetworkContents||[]),[...p,...m]}static getRecordedWebSocketEvents(r){let a=[];return r.disableNetworkRecording||r.disableRecordingWebSocketContents||(a=r.webSocketEventContents),a}static clearRecordedNetworkResources(r){r.disableNetworkRecording||(r.xhrNetworkContents=[],r.fetchNetworkContents=[],r.webSocketNetworkContents=[],r.webSocketEventContents=[],performance.clearResourceTimings())}}const KN=i=>{i(window.location.href);const r=history.pushState;history.pushState=(p=>function(){var m=p.apply(this,arguments);return window.dispatchEvent(new Event("pushstate")),window.dispatchEvent(new Event("locationchange")),m})(history.pushState);const a=history.replaceState;history.replaceState=(p=>function(){var m=p.apply(this,arguments);return window.dispatchEvent(new Event("replacestate")),window.dispatchEvent(new Event("locationchange")),m})(history.replaceState);const c=()=>{window.dispatchEvent(new Event("locationchange"))};window.addEventListener("popstate",c);const u=function(){i(window.location.href)};return window.addEventListener("locationchange",u),()=>{window.removeEventListener("popstate",c),window.removeEventListener("locationchange",u),history.pushState=r,history.replaceState=a}},Bs=JSON;function xi(i,r){if(!i)throw new Error(r)}function JN(i,r){if(!i)throw new Error(r!=null?r:"Unexpected invariant triggered.")}const BN=/\r\n|[\n\r]/g;function zs(i,r){let a=0,c=1;for(const u of i.body.matchAll(BN)){if(typeof u.index=="number"||JN(!1),u.index>=r)break;a=u.index+u[0].length,c+=1}return{line:c,column:r+1-a}}function Bu(i,r){const a=i.locationOffset.column-1,c="".padStart(a)+i.body,u=r.line-1,p=i.locationOffset.line-1,m=r.line+p,y=r.line===1?a:0,f=r.column+y,T=`${i.name}:${m}:${f}
`,v=c.split(/\r\n|[\n\r]/g),I=v[u];if(I.length>120){const Z=Math.floor(f/80),C=f%80,k=[];for(let L=0;L<I.length;L+=80)k.push(I.slice(L,L+80));return T+zu([[`${m} |`,k[0]],...k.slice(1,Z+1).map(L=>["|",L]),["|","^".padStart(C)],["|",k[Z+1]]])}return T+zu([[m-1+" |",v[u-1]],[`${m} |`,I],["|","^".padStart(f)],[`${m+1} |`,v[u+1]]])}function zu(i){const r=i.filter(([c,u])=>u!==void 0),a=Math.max(...r.map(([c])=>c.length));return r.map(([c,u])=>c.padStart(a)+(u?" "+u:"")).join(`
`)}class js extends Error{constructor(r,...a){var c,u,p;const{nodes:m,source:y,positions:f,path:T,originalError:v,extensions:I}=function(L){const A=L[0];return A==null||"kind"in A||"length"in A?{nodes:A,source:L[1],positions:L[2],path:L[3],originalError:L[4],extensions:L[5]}:A}(a);super(r),this.name="GraphQLError",this.path=T!=null?T:void 0,this.originalError=v!=null?v:void 0,this.nodes=ju(Array.isArray(m)?m:m?[m]:void 0);const Z=ju((c=this.nodes)===null||c===void 0?void 0:c.map(L=>L.loc).filter(L=>L!=null));this.source=y!=null?y:Z==null||(u=Z[0])===null||u===void 0?void 0:u.source,this.positions=f!=null?f:Z==null?void 0:Z.map(L=>L.start),this.locations=f&&y?f.map(L=>zs(y,L)):Z==null?void 0:Z.map(L=>zs(L.source,L.start));const C=typeof(k=v==null?void 0:v.extensions)=="object"&&k!==null?v==null?void 0:v.extensions:void 0;var k;this.extensions=(p=I!=null?I:C)!==null&&p!==void 0?p:Object.create(null),Object.defineProperties(this,{message:{writable:!0,enumerable:!0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),v!=null&&v.stack?Object.defineProperty(this,"stack",{value:v.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,js):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}get[Symbol.toStringTag](){return"GraphQLError"}toString(){let r=this.message;if(this.nodes)for(const c of this.nodes)c.loc&&(r+=`

`+Bu((a=c.loc).source,zs(a.source,a.start)));else if(this.source&&this.locations)for(const c of this.locations)r+=`

`+Bu(this.source,c);var a;return r}toJSON(){const r={message:this.message};return this.locations!=null&&(r.locations=this.locations),this.path!=null&&(r.path=this.path),this.extensions!=null&&Object.keys(this.extensions).length>0&&(r.extensions=this.extensions),r}}function ju(i){return i===void 0||i.length===0?void 0:i}function Ke(i,r,a){return new js(`Syntax Error: ${a}`,{source:i,positions:[r]})}class zN{constructor(r,a,c){this.start=r.start,this.end=a.end,this.startToken=r,this.endToken=a,this.source=c}get[Symbol.toStringTag](){return"Location"}toJSON(){return{start:this.start,end:this.end}}}class Qu{constructor(r,a,c,u,p,m){this.kind=r,this.start=a,this.end=c,this.line=u,this.column=p,this.value=m,this.prev=null,this.next=null}get[Symbol.toStringTag](){return"Token"}toJSON(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}}const $u={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},jN=new Set(Object.keys($u));function qu(i){const r=i==null?void 0:i.kind;return typeof r=="string"&&jN.has(r)}var Fn,Qs,$s,De,ie,ce,D,We;function qs(i){return i===9||i===32}function Cr(i){return i>=48&&i<=57}function ed(i){return i>=97&&i<=122||i>=65&&i<=90}function td(i){return ed(i)||i===95}function QN(i){return ed(i)||Cr(i)||i===95}function $N(i){var r;let a=Number.MAX_SAFE_INTEGER,c=null,u=-1;for(let m=0;m<i.length;++m){var p;const y=i[m],f=qN(y);f!==y.length&&(c=(p=c)!==null&&p!==void 0?p:m,u=m,m!==0&&f<a&&(a=f))}return i.map((m,y)=>y===0?m:m.slice(a)).slice((r=c)!==null&&r!==void 0?r:0,u+1)}function qN(i){let r=0;for(;r<i.length&&qs(i.charCodeAt(r));)++r;return r}(Qs=Fn||(Fn={})).QUERY="query",Qs.MUTATION="mutation",Qs.SUBSCRIPTION="subscription",(De=$s||($s={})).QUERY="QUERY",De.MUTATION="MUTATION",De.SUBSCRIPTION="SUBSCRIPTION",De.FIELD="FIELD",De.FRAGMENT_DEFINITION="FRAGMENT_DEFINITION",De.FRAGMENT_SPREAD="FRAGMENT_SPREAD",De.INLINE_FRAGMENT="INLINE_FRAGMENT",De.VARIABLE_DEFINITION="VARIABLE_DEFINITION",De.SCHEMA="SCHEMA",De.SCALAR="SCALAR",De.OBJECT="OBJECT",De.FIELD_DEFINITION="FIELD_DEFINITION",De.ARGUMENT_DEFINITION="ARGUMENT_DEFINITION",De.INTERFACE="INTERFACE",De.UNION="UNION",De.ENUM="ENUM",De.ENUM_VALUE="ENUM_VALUE",De.INPUT_OBJECT="INPUT_OBJECT",De.INPUT_FIELD_DEFINITION="INPUT_FIELD_DEFINITION",(ce=ie||(ie={})).NAME="Name",ce.DOCUMENT="Document",ce.OPERATION_DEFINITION="OperationDefinition",ce.VARIABLE_DEFINITION="VariableDefinition",ce.SELECTION_SET="SelectionSet",ce.FIELD="Field",ce.ARGUMENT="Argument",ce.FRAGMENT_SPREAD="FragmentSpread",ce.INLINE_FRAGMENT="InlineFragment",ce.FRAGMENT_DEFINITION="FragmentDefinition",ce.VARIABLE="Variable",ce.INT="IntValue",ce.FLOAT="FloatValue",ce.STRING="StringValue",ce.BOOLEAN="BooleanValue",ce.NULL="NullValue",ce.ENUM="EnumValue",ce.LIST="ListValue",ce.OBJECT="ObjectValue",ce.OBJECT_FIELD="ObjectField",ce.DIRECTIVE="Directive",ce.NAMED_TYPE="NamedType",ce.LIST_TYPE="ListType",ce.NON_NULL_TYPE="NonNullType",ce.SCHEMA_DEFINITION="SchemaDefinition",ce.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",ce.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",ce.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",ce.FIELD_DEFINITION="FieldDefinition",ce.INPUT_VALUE_DEFINITION="InputValueDefinition",ce.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",ce.UNION_TYPE_DEFINITION="UnionTypeDefinition",ce.ENUM_TYPE_DEFINITION="EnumTypeDefinition",ce.ENUM_VALUE_DEFINITION="EnumValueDefinition",ce.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",ce.DIRECTIVE_DEFINITION="DirectiveDefinition",ce.SCHEMA_EXTENSION="SchemaExtension",ce.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",ce.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",ce.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",ce.UNION_TYPE_EXTENSION="UnionTypeExtension",ce.ENUM_TYPE_EXTENSION="EnumTypeExtension",ce.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension",(We=D||(D={})).SOF="<SOF>",We.EOF="<EOF>",We.BANG="!",We.DOLLAR="$",We.AMP="&",We.PAREN_L="(",We.PAREN_R=")",We.SPREAD="...",We.COLON=":",We.EQUALS="=",We.AT="@",We.BRACKET_L="[",We.BRACKET_R="]",We.BRACE_L="{",We.PIPE="|",We.BRACE_R="}",We.NAME="Name",We.INT="Int",We.FLOAT="Float",We.STRING="String",We.BLOCK_STRING="BlockString",We.COMMENT="Comment";class eZ{constructor(r){const a=new Qu(D.SOF,0,0,0,0);this.source=r,this.lastToken=a,this.token=a,this.line=1,this.lineStart=0}get[Symbol.toStringTag](){return"Lexer"}advance(){return this.lastToken=this.token,this.token=this.lookahead()}lookahead(){let r=this.token;if(r.kind!==D.EOF)do if(r.next)r=r.next;else{const a=tZ(this,r.end);r.next=a,a.prev=r,r=a}while(r.kind===D.COMMENT);return r}}function Yn(i){return i>=0&&i<=55295||i>=57344&&i<=1114111}function Ui(i,r){return nd(i.charCodeAt(r))&&rd(i.charCodeAt(r+1))}function nd(i){return i>=55296&&i<=56319}function rd(i){return i>=56320&&i<=57343}function pn(i,r){const a=i.source.body.codePointAt(r);if(a===void 0)return D.EOF;if(a>=32&&a<=126){const c=String.fromCodePoint(a);return c==='"'?`'"'`:`"${c}"`}return"U+"+a.toString(16).toUpperCase().padStart(4,"0")}function xe(i,r,a,c,u){const p=i.line,m=1+a-i.lineStart;return new Qu(r,a,c,p,m,u)}function tZ(i,r){const a=i.source.body,c=a.length;let u=r;for(;u<c;){const p=a.charCodeAt(u);switch(p){case 65279:case 9:case 32:case 44:++u;continue;case 10:++u,++i.line,i.lineStart=u;continue;case 13:a.charCodeAt(u+1)===10?u+=2:++u,++i.line,i.lineStart=u;continue;case 35:return nZ(i,u);case 33:return xe(i,D.BANG,u,u+1);case 36:return xe(i,D.DOLLAR,u,u+1);case 38:return xe(i,D.AMP,u,u+1);case 40:return xe(i,D.PAREN_L,u,u+1);case 41:return xe(i,D.PAREN_R,u,u+1);case 46:if(a.charCodeAt(u+1)===46&&a.charCodeAt(u+2)===46)return xe(i,D.SPREAD,u,u+3);break;case 58:return xe(i,D.COLON,u,u+1);case 61:return xe(i,D.EQUALS,u,u+1);case 64:return xe(i,D.AT,u,u+1);case 91:return xe(i,D.BRACKET_L,u,u+1);case 93:return xe(i,D.BRACKET_R,u,u+1);case 123:return xe(i,D.BRACE_L,u,u+1);case 124:return xe(i,D.PIPE,u,u+1);case 125:return xe(i,D.BRACE_R,u,u+1);case 34:return a.charCodeAt(u+1)===34&&a.charCodeAt(u+2)===34?lZ(i,u):iZ(i,u)}if(Cr(p)||p===45)return rZ(i,u,p);if(td(p))return cZ(i,u);throw Ke(i.source,u,p===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:Yn(p)||Ui(a,u)?`Unexpected character: ${pn(i,u)}.`:`Invalid character: ${pn(i,u)}.`)}return xe(i,D.EOF,c,c)}function nZ(i,r){const a=i.source.body,c=a.length;let u=r+1;for(;u<c;){const p=a.charCodeAt(u);if(p===10||p===13)break;if(Yn(p))++u;else{if(!Ui(a,u))break;u+=2}}return xe(i,D.COMMENT,r,u,a.slice(r+1,u))}function rZ(i,r,a){const c=i.source.body;let u=r,p=a,m=!1;if(p===45&&(p=c.charCodeAt(++u)),p===48){if(p=c.charCodeAt(++u),Cr(p))throw Ke(i.source,u,`Invalid number, unexpected digit after 0: ${pn(i,u)}.`)}else u=ea(i,u,p),p=c.charCodeAt(u);if(p===46&&(m=!0,p=c.charCodeAt(++u),u=ea(i,u,p),p=c.charCodeAt(u)),p!==69&&p!==101||(m=!0,p=c.charCodeAt(++u),p!==43&&p!==45||(p=c.charCodeAt(++u)),u=ea(i,u,p),p=c.charCodeAt(u)),p===46||td(p))throw Ke(i.source,u,`Invalid number, expected digit but got: ${pn(i,u)}.`);return xe(i,m?D.FLOAT:D.INT,r,u,c.slice(r,u))}function ea(i,r,a){if(!Cr(a))throw Ke(i.source,r,`Invalid number, expected digit but got: ${pn(i,r)}.`);const c=i.source.body;let u=r+1;for(;Cr(c.charCodeAt(u));)++u;return u}function iZ(i,r){const a=i.source.body,c=a.length;let u=r+1,p=u,m="";for(;u<c;){const y=a.charCodeAt(u);if(y===34)return m+=a.slice(p,u),xe(i,D.STRING,r,u+1,m);if(y!==92){if(y===10||y===13)break;if(Yn(y))++u;else{if(!Ui(a,u))throw Ke(i.source,u,`Invalid character within String: ${pn(i,u)}.`);u+=2}}else{m+=a.slice(p,u);const f=a.charCodeAt(u+1)===117?a.charCodeAt(u+2)===123?oZ(i,u):sZ(i,u):aZ(i,u);m+=f.value,u+=f.size,p=u}}throw Ke(i.source,u,"Unterminated string.")}function oZ(i,r){const a=i.source.body;let c=0,u=3;for(;u<12;){const p=a.charCodeAt(r+u++);if(p===125){if(u<5||!Yn(c))break;return{value:String.fromCodePoint(c),size:u}}if(c=c<<4|Or(p),c<0)break}throw Ke(i.source,r,`Invalid Unicode escape sequence: "${a.slice(r,r+u)}".`)}function sZ(i,r){const a=i.source.body,c=id(a,r+2);if(Yn(c))return{value:String.fromCodePoint(c),size:6};if(nd(c)&&a.charCodeAt(r+6)===92&&a.charCodeAt(r+7)===117){const u=id(a,r+8);if(rd(u))return{value:String.fromCodePoint(c,u),size:12}}throw Ke(i.source,r,`Invalid Unicode escape sequence: "${a.slice(r,r+6)}".`)}function id(i,r){return Or(i.charCodeAt(r))<<12|Or(i.charCodeAt(r+1))<<8|Or(i.charCodeAt(r+2))<<4|Or(i.charCodeAt(r+3))}function Or(i){return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:-1}function aZ(i,r){const a=i.source.body;switch(a.charCodeAt(r+1)){case 34:return{value:'"',size:2};case 92:return{value:"\\",size:2};case 47:return{value:"/",size:2};case 98:return{value:"\b",size:2};case 102:return{value:"\f",size:2};case 110:return{value:`
`,size:2};case 114:return{value:"\r",size:2};case 116:return{value:"	",size:2}}throw Ke(i.source,r,`Invalid character escape sequence: "${a.slice(r,r+2)}".`)}function lZ(i,r){const a=i.source.body,c=a.length;let u=i.lineStart,p=r+3,m=p,y="";const f=[];for(;p<c;){const T=a.charCodeAt(p);if(T===34&&a.charCodeAt(p+1)===34&&a.charCodeAt(p+2)===34){y+=a.slice(m,p),f.push(y);const v=xe(i,D.BLOCK_STRING,r,p+3,$N(f).join(`
`));return i.line+=f.length-1,i.lineStart=u,v}if(T!==92||a.charCodeAt(p+1)!==34||a.charCodeAt(p+2)!==34||a.charCodeAt(p+3)!==34)if(T!==10&&T!==13)if(Yn(T))++p;else{if(!Ui(a,p))throw Ke(i.source,p,`Invalid character within String: ${pn(i,p)}.`);p+=2}else y+=a.slice(m,p),f.push(y),T===13&&a.charCodeAt(p+1)===10?p+=2:++p,y="",m=p,u=p;else y+=a.slice(m,p),m=p+1,p+=4}throw Ke(i.source,p,"Unterminated string.")}function cZ(i,r){const a=i.source.body,c=a.length;let u=r+1;for(;u<c&&QN(a.charCodeAt(u));)++u;return xe(i,D.NAME,r,u,a.slice(r,u))}const uZ=10,od=2;function ta(i){return Di(i,[])}function Di(i,r){switch(typeof i){case"string":return JSON.stringify(i);case"function":return i.name?`[function ${i.name}]`:"[function]";case"object":return function(a,c){if(a===null)return"null";if(c.includes(a))return"[Circular]";const u=[...c,a];if(function(p){return typeof p.toJSON=="function"}(a)){const p=a.toJSON();if(p!==a)return typeof p=="string"?p:Di(p,u)}else if(Array.isArray(a))return function(p,m){if(p.length===0)return"[]";if(m.length>od)return"[Array]";const y=Math.min(uZ,p.length),f=p.length-y,T=[];for(let v=0;v<y;++v)T.push(Di(p[v],m));return f===1?T.push("... 1 more item"):f>1&&T.push(`... ${f} more items`),"["+T.join(", ")+"]"}(a,u);return function(p,m){const y=Object.entries(p);return y.length===0?"{}":m.length>od?"["+function(T){const v=Object.prototype.toString.call(T).replace(/^\[object /,"").replace(/]$/,"");if(v==="Object"&&typeof T.constructor=="function"){const I=T.constructor.name;if(typeof I=="string"&&I!=="")return I}return v}(p)+"]":"{ "+y.map(([T,v])=>T+": "+Di(v,m)).join(", ")+" }"}(a,u)}(i,r);default:return String(i)}}const dZ=globalThis.process&&globalThis.process.env.NODE_ENV==="production"?function(i,r){return i instanceof r}:function(i,r){if(i instanceof r)return!0;if(typeof i=="object"&&i!==null){var a;const c=r.prototype[Symbol.toStringTag];if(c===(Symbol.toStringTag in i?i[Symbol.toStringTag]:(a=i.constructor)===null||a===void 0?void 0:a.name)){const u=ta(i);throw new Error(`Cannot use ${c} "${u}" from another module or realm.

Ensure that there is only one instance of "graphql" in the node_modules
directory. If different versions of "graphql" are the dependencies of other
relied on modules, use "resolutions" to ensure only one version is installed.

https://yarnpkg.com/en/docs/selective-version-resolutions

Duplicate "graphql" modules cannot be used at the same time since different
versions may have different capabilities and behavior. The data from one
version used in the function from another could produce confusing and
spurious results.`)}}return!1};class sd{constructor(r,a="GraphQL request",c={line:1,column:1}){typeof r=="string"||xi(!1,`Body must be a string. Received: ${ta(r)}.`),this.body=r,this.name=a,this.locationOffset=c,this.locationOffset.line>0||xi(!1,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||xi(!1,"column in locationOffset is 1-indexed and must be positive.")}get[Symbol.toStringTag](){return"Source"}}function ad(i,r){return new pZ(i,r).parseDocument()}class pZ{constructor(r,a={}){const c=function(u){return dZ(u,sd)}(r)?r:new sd(r);this._lexer=new eZ(c),this._options=a,this._tokenCounter=0}parseName(){const r=this.expectToken(D.NAME);return this.node(r,{kind:ie.NAME,value:r.value})}parseDocument(){return this.node(this._lexer.token,{kind:ie.DOCUMENT,definitions:this.many(D.SOF,this.parseDefinition,D.EOF)})}parseDefinition(){if(this.peek(D.BRACE_L))return this.parseOperationDefinition();const r=this.peekDescription(),a=r?this._lexer.lookahead():this._lexer.token;if(a.kind===D.NAME){switch(a.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}if(r)throw Ke(this._lexer.source,this._lexer.token.start,"Unexpected description, descriptions are supported only on type definitions.");switch(a.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"extend":return this.parseTypeSystemExtension()}}throw this.unexpected(a)}parseOperationDefinition(){const r=this._lexer.token;if(this.peek(D.BRACE_L))return this.node(r,{kind:ie.OPERATION_DEFINITION,operation:Fn.QUERY,name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet()});const a=this.parseOperationType();let c;return this.peek(D.NAME)&&(c=this.parseName()),this.node(r,{kind:ie.OPERATION_DEFINITION,operation:a,name:c,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseOperationType(){const r=this.expectToken(D.NAME);switch(r.value){case"query":return Fn.QUERY;case"mutation":return Fn.MUTATION;case"subscription":return Fn.SUBSCRIPTION}throw this.unexpected(r)}parseVariableDefinitions(){return this.optionalMany(D.PAREN_L,this.parseVariableDefinition,D.PAREN_R)}parseVariableDefinition(){return this.node(this._lexer.token,{kind:ie.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(D.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(D.EQUALS)?this.parseConstValueLiteral():void 0,directives:this.parseConstDirectives()})}parseVariable(){const r=this._lexer.token;return this.expectToken(D.DOLLAR),this.node(r,{kind:ie.VARIABLE,name:this.parseName()})}parseSelectionSet(){return this.node(this._lexer.token,{kind:ie.SELECTION_SET,selections:this.many(D.BRACE_L,this.parseSelection,D.BRACE_R)})}parseSelection(){return this.peek(D.SPREAD)?this.parseFragment():this.parseField()}parseField(){const r=this._lexer.token,a=this.parseName();let c,u;return this.expectOptionalToken(D.COLON)?(c=a,u=this.parseName()):u=a,this.node(r,{kind:ie.FIELD,alias:c,name:u,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(D.BRACE_L)?this.parseSelectionSet():void 0})}parseArguments(r){const a=r?this.parseConstArgument:this.parseArgument;return this.optionalMany(D.PAREN_L,a,D.PAREN_R)}parseArgument(r=!1){const a=this._lexer.token,c=this.parseName();return this.expectToken(D.COLON),this.node(a,{kind:ie.ARGUMENT,name:c,value:this.parseValueLiteral(r)})}parseConstArgument(){return this.parseArgument(!0)}parseFragment(){const r=this._lexer.token;this.expectToken(D.SPREAD);const a=this.expectOptionalKeyword("on");return!a&&this.peek(D.NAME)?this.node(r,{kind:ie.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1)}):this.node(r,{kind:ie.INLINE_FRAGMENT,typeCondition:a?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentDefinition(){const r=this._lexer.token;return this.expectKeyword("fragment"),this._options.allowLegacyFragmentVariables===!0?this.node(r,{kind:ie.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()}):this.node(r,{kind:ie.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet()})}parseFragmentName(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()}parseValueLiteral(r){const a=this._lexer.token;switch(a.kind){case D.BRACKET_L:return this.parseList(r);case D.BRACE_L:return this.parseObject(r);case D.INT:return this.advanceLexer(),this.node(a,{kind:ie.INT,value:a.value});case D.FLOAT:return this.advanceLexer(),this.node(a,{kind:ie.FLOAT,value:a.value});case D.STRING:case D.BLOCK_STRING:return this.parseStringLiteral();case D.NAME:switch(this.advanceLexer(),a.value){case"true":return this.node(a,{kind:ie.BOOLEAN,value:!0});case"false":return this.node(a,{kind:ie.BOOLEAN,value:!1});case"null":return this.node(a,{kind:ie.NULL});default:return this.node(a,{kind:ie.ENUM,value:a.value})}case D.DOLLAR:if(r){if(this.expectToken(D.DOLLAR),this._lexer.token.kind===D.NAME){const c=this._lexer.token.value;throw Ke(this._lexer.source,a.start,`Unexpected variable "$${c}" in constant value.`)}throw this.unexpected(a)}return this.parseVariable();default:throw this.unexpected()}}parseConstValueLiteral(){return this.parseValueLiteral(!0)}parseStringLiteral(){const r=this._lexer.token;return this.advanceLexer(),this.node(r,{kind:ie.STRING,value:r.value,block:r.kind===D.BLOCK_STRING})}parseList(r){return this.node(this._lexer.token,{kind:ie.LIST,values:this.any(D.BRACKET_L,()=>this.parseValueLiteral(r),D.BRACKET_R)})}parseObject(r){return this.node(this._lexer.token,{kind:ie.OBJECT,fields:this.any(D.BRACE_L,()=>this.parseObjectField(r),D.BRACE_R)})}parseObjectField(r){const a=this._lexer.token,c=this.parseName();return this.expectToken(D.COLON),this.node(a,{kind:ie.OBJECT_FIELD,name:c,value:this.parseValueLiteral(r)})}parseDirectives(r){const a=[];for(;this.peek(D.AT);)a.push(this.parseDirective(r));return a}parseConstDirectives(){return this.parseDirectives(!0)}parseDirective(r){const a=this._lexer.token;return this.expectToken(D.AT),this.node(a,{kind:ie.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(r)})}parseTypeReference(){const r=this._lexer.token;let a;if(this.expectOptionalToken(D.BRACKET_L)){const c=this.parseTypeReference();this.expectToken(D.BRACKET_R),a=this.node(r,{kind:ie.LIST_TYPE,type:c})}else a=this.parseNamedType();return this.expectOptionalToken(D.BANG)?this.node(r,{kind:ie.NON_NULL_TYPE,type:a}):a}parseNamedType(){return this.node(this._lexer.token,{kind:ie.NAMED_TYPE,name:this.parseName()})}peekDescription(){return this.peek(D.STRING)||this.peek(D.BLOCK_STRING)}parseDescription(){if(this.peekDescription())return this.parseStringLiteral()}parseSchemaDefinition(){const r=this._lexer.token,a=this.parseDescription();this.expectKeyword("schema");const c=this.parseConstDirectives(),u=this.many(D.BRACE_L,this.parseOperationTypeDefinition,D.BRACE_R);return this.node(r,{kind:ie.SCHEMA_DEFINITION,description:a,directives:c,operationTypes:u})}parseOperationTypeDefinition(){const r=this._lexer.token,a=this.parseOperationType();this.expectToken(D.COLON);const c=this.parseNamedType();return this.node(r,{kind:ie.OPERATION_TYPE_DEFINITION,operation:a,type:c})}parseScalarTypeDefinition(){const r=this._lexer.token,a=this.parseDescription();this.expectKeyword("scalar");const c=this.parseName(),u=this.parseConstDirectives();return this.node(r,{kind:ie.SCALAR_TYPE_DEFINITION,description:a,name:c,directives:u})}parseObjectTypeDefinition(){const r=this._lexer.token,a=this.parseDescription();this.expectKeyword("type");const c=this.parseName(),u=this.parseImplementsInterfaces(),p=this.parseConstDirectives(),m=this.parseFieldsDefinition();return this.node(r,{kind:ie.OBJECT_TYPE_DEFINITION,description:a,name:c,interfaces:u,directives:p,fields:m})}parseImplementsInterfaces(){return this.expectOptionalKeyword("implements")?this.delimitedMany(D.AMP,this.parseNamedType):[]}parseFieldsDefinition(){return this.optionalMany(D.BRACE_L,this.parseFieldDefinition,D.BRACE_R)}parseFieldDefinition(){const r=this._lexer.token,a=this.parseDescription(),c=this.parseName(),u=this.parseArgumentDefs();this.expectToken(D.COLON);const p=this.parseTypeReference(),m=this.parseConstDirectives();return this.node(r,{kind:ie.FIELD_DEFINITION,description:a,name:c,arguments:u,type:p,directives:m})}parseArgumentDefs(){return this.optionalMany(D.PAREN_L,this.parseInputValueDef,D.PAREN_R)}parseInputValueDef(){const r=this._lexer.token,a=this.parseDescription(),c=this.parseName();this.expectToken(D.COLON);const u=this.parseTypeReference();let p;this.expectOptionalToken(D.EQUALS)&&(p=this.parseConstValueLiteral());const m=this.parseConstDirectives();return this.node(r,{kind:ie.INPUT_VALUE_DEFINITION,description:a,name:c,type:u,defaultValue:p,directives:m})}parseInterfaceTypeDefinition(){const r=this._lexer.token,a=this.parseDescription();this.expectKeyword("interface");const c=this.parseName(),u=this.parseImplementsInterfaces(),p=this.parseConstDirectives(),m=this.parseFieldsDefinition();return this.node(r,{kind:ie.INTERFACE_TYPE_DEFINITION,description:a,name:c,interfaces:u,directives:p,fields:m})}parseUnionTypeDefinition(){const r=this._lexer.token,a=this.parseDescription();this.expectKeyword("union");const c=this.parseName(),u=this.parseConstDirectives(),p=this.parseUnionMemberTypes();return this.node(r,{kind:ie.UNION_TYPE_DEFINITION,description:a,name:c,directives:u,types:p})}parseUnionMemberTypes(){return this.expectOptionalToken(D.EQUALS)?this.delimitedMany(D.PIPE,this.parseNamedType):[]}parseEnumTypeDefinition(){const r=this._lexer.token,a=this.parseDescription();this.expectKeyword("enum");const c=this.parseName(),u=this.parseConstDirectives(),p=this.parseEnumValuesDefinition();return this.node(r,{kind:ie.ENUM_TYPE_DEFINITION,description:a,name:c,directives:u,values:p})}parseEnumValuesDefinition(){return this.optionalMany(D.BRACE_L,this.parseEnumValueDefinition,D.BRACE_R)}parseEnumValueDefinition(){const r=this._lexer.token,a=this.parseDescription(),c=this.parseEnumValueName(),u=this.parseConstDirectives();return this.node(r,{kind:ie.ENUM_VALUE_DEFINITION,description:a,name:c,directives:u})}parseEnumValueName(){if(this._lexer.token.value==="true"||this._lexer.token.value==="false"||this._lexer.token.value==="null")throw Ke(this._lexer.source,this._lexer.token.start,`${Fi(this._lexer.token)} is reserved and cannot be used for an enum value.`);return this.parseName()}parseInputObjectTypeDefinition(){const r=this._lexer.token,a=this.parseDescription();this.expectKeyword("input");const c=this.parseName(),u=this.parseConstDirectives(),p=this.parseInputFieldsDefinition();return this.node(r,{kind:ie.INPUT_OBJECT_TYPE_DEFINITION,description:a,name:c,directives:u,fields:p})}parseInputFieldsDefinition(){return this.optionalMany(D.BRACE_L,this.parseInputValueDef,D.BRACE_R)}parseTypeSystemExtension(){const r=this._lexer.lookahead();if(r.kind===D.NAME)switch(r.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(r)}parseSchemaExtension(){const r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");const a=this.parseConstDirectives(),c=this.optionalMany(D.BRACE_L,this.parseOperationTypeDefinition,D.BRACE_R);if(a.length===0&&c.length===0)throw this.unexpected();return this.node(r,{kind:ie.SCHEMA_EXTENSION,directives:a,operationTypes:c})}parseScalarTypeExtension(){const r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");const a=this.parseName(),c=this.parseConstDirectives();if(c.length===0)throw this.unexpected();return this.node(r,{kind:ie.SCALAR_TYPE_EXTENSION,name:a,directives:c})}parseObjectTypeExtension(){const r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");const a=this.parseName(),c=this.parseImplementsInterfaces(),u=this.parseConstDirectives(),p=this.parseFieldsDefinition();if(c.length===0&&u.length===0&&p.length===0)throw this.unexpected();return this.node(r,{kind:ie.OBJECT_TYPE_EXTENSION,name:a,interfaces:c,directives:u,fields:p})}parseInterfaceTypeExtension(){const r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");const a=this.parseName(),c=this.parseImplementsInterfaces(),u=this.parseConstDirectives(),p=this.parseFieldsDefinition();if(c.length===0&&u.length===0&&p.length===0)throw this.unexpected();return this.node(r,{kind:ie.INTERFACE_TYPE_EXTENSION,name:a,interfaces:c,directives:u,fields:p})}parseUnionTypeExtension(){const r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");const a=this.parseName(),c=this.parseConstDirectives(),u=this.parseUnionMemberTypes();if(c.length===0&&u.length===0)throw this.unexpected();return this.node(r,{kind:ie.UNION_TYPE_EXTENSION,name:a,directives:c,types:u})}parseEnumTypeExtension(){const r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");const a=this.parseName(),c=this.parseConstDirectives(),u=this.parseEnumValuesDefinition();if(c.length===0&&u.length===0)throw this.unexpected();return this.node(r,{kind:ie.ENUM_TYPE_EXTENSION,name:a,directives:c,values:u})}parseInputObjectTypeExtension(){const r=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");const a=this.parseName(),c=this.parseConstDirectives(),u=this.parseInputFieldsDefinition();if(c.length===0&&u.length===0)throw this.unexpected();return this.node(r,{kind:ie.INPUT_OBJECT_TYPE_EXTENSION,name:a,directives:c,fields:u})}parseDirectiveDefinition(){const r=this._lexer.token,a=this.parseDescription();this.expectKeyword("directive"),this.expectToken(D.AT);const c=this.parseName(),u=this.parseArgumentDefs(),p=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");const m=this.parseDirectiveLocations();return this.node(r,{kind:ie.DIRECTIVE_DEFINITION,description:a,name:c,arguments:u,repeatable:p,locations:m})}parseDirectiveLocations(){return this.delimitedMany(D.PIPE,this.parseDirectiveLocation)}parseDirectiveLocation(){const r=this._lexer.token,a=this.parseName();if(Object.prototype.hasOwnProperty.call($s,a.value))return a;throw this.unexpected(r)}node(r,a){return this._options.noLocation!==!0&&(a.loc=new zN(r,this._lexer.lastToken,this._lexer.source)),a}peek(r){return this._lexer.token.kind===r}expectToken(r){const a=this._lexer.token;if(a.kind===r)return this.advanceLexer(),a;throw Ke(this._lexer.source,a.start,`Expected ${ld(r)}, found ${Fi(a)}.`)}expectOptionalToken(r){return this._lexer.token.kind===r&&(this.advanceLexer(),!0)}expectKeyword(r){const a=this._lexer.token;if(a.kind!==D.NAME||a.value!==r)throw Ke(this._lexer.source,a.start,`Expected "${r}", found ${Fi(a)}.`);this.advanceLexer()}expectOptionalKeyword(r){const a=this._lexer.token;return a.kind===D.NAME&&a.value===r&&(this.advanceLexer(),!0)}unexpected(r){const a=r!=null?r:this._lexer.token;return Ke(this._lexer.source,a.start,`Unexpected ${Fi(a)}.`)}any(r,a,c){this.expectToken(r);const u=[];for(;!this.expectOptionalToken(c);)u.push(a.call(this));return u}optionalMany(r,a,c){if(this.expectOptionalToken(r)){const u=[];do u.push(a.call(this));while(!this.expectOptionalToken(c));return u}return[]}many(r,a,c){this.expectToken(r);const u=[];do u.push(a.call(this));while(!this.expectOptionalToken(c));return u}delimitedMany(r,a){this.expectOptionalToken(r);const c=[];do c.push(a.call(this));while(this.expectOptionalToken(r));return c}advanceLexer(){const{maxTokens:r}=this._options,a=this._lexer.advance();if(r!==void 0&&a.kind!==D.EOF&&(++this._tokenCounter,this._tokenCounter>r))throw Ke(this._lexer.source,a.start,`Document contains more that ${r} tokens. Parsing aborted.`)}}function Fi(i){const r=i.value;return ld(i.kind)+(r!=null?` "${r}"`:"")}function ld(i){return function(r){return r===D.BANG||r===D.DOLLAR||r===D.AMP||r===D.PAREN_L||r===D.PAREN_R||r===D.SPREAD||r===D.COLON||r===D.EQUALS||r===D.AT||r===D.BRACKET_L||r===D.BRACKET_R||r===D.BRACE_L||r===D.PIPE||r===D.BRACE_R}(i)?`"${i}"`:i}const hZ=/[\x00-\x1f\x22\x5c\x7f-\x9f]/g;function mZ(i){return fZ[i.charCodeAt(0)]}const fZ=["\\u0000","\\u0001","\\u0002","\\u0003","\\u0004","\\u0005","\\u0006","\\u0007","\\b","\\t","\\n","\\u000B","\\f","\\r","\\u000E","\\u000F","\\u0010","\\u0011","\\u0012","\\u0013","\\u0014","\\u0015","\\u0016","\\u0017","\\u0018","\\u0019","\\u001A","\\u001B","\\u001C","\\u001D","\\u001E","\\u001F","","",'\\"',"","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\\\","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","\\u007F","\\u0080","\\u0081","\\u0082","\\u0083","\\u0084","\\u0085","\\u0086","\\u0087","\\u0088","\\u0089","\\u008A","\\u008B","\\u008C","\\u008D","\\u008E","\\u008F","\\u0090","\\u0091","\\u0092","\\u0093","\\u0094","\\u0095","\\u0096","\\u0097","\\u0098","\\u0099","\\u009A","\\u009B","\\u009C","\\u009D","\\u009E","\\u009F"],bZ=Object.freeze({});function yZ(i,r){const a=i[r];return typeof a=="object"?a:typeof a=="function"?{enter:a,leave:void 0}:{enter:i.enter,leave:i.leave}}function cd(i){return function(r,a,c=$u){const u=new Map;for(const X of Object.values(ie))u.set(X,yZ(a,X));let p,m,y,f=Array.isArray(r),T=[r],v=-1,I=[],Z=r;const C=[],k=[];do{v++;const X=v===T.length,O=X&&I.length!==0;if(X){if(m=k.length===0?void 0:C[C.length-1],Z=y,y=k.pop(),O)if(f){Z=Z.slice();let Y=0;for(const[j,te]of I){const ne=j-Y;te===null?(Z.splice(ne,1),Y++):Z[ne]=te}}else{Z=Object.defineProperties({},Object.getOwnPropertyDescriptors(Z));for(const[Y,j]of I)Z[Y]=j}v=p.index,T=p.keys,I=p.edits,f=p.inArray,p=p.prev}else if(y){if(m=f?v:T[v],Z=y[m],Z==null)continue;C.push(m)}let P;if(!Array.isArray(Z)){var L,A;qu(Z)||xi(!1,`Invalid AST Node: ${ta(Z)}.`);const Y=X?(L=u.get(Z.kind))===null||L===void 0?void 0:L.leave:(A=u.get(Z.kind))===null||A===void 0?void 0:A.enter;if(P=Y==null?void 0:Y.call(a,Z,m,y,C,k),P===bZ)break;if(P===!1){if(!X){C.pop();continue}}else if(P!==void 0&&(I.push([m,P]),!X)){if(!qu(P)){C.pop();continue}Z=P}}var V;P===void 0&&O&&I.push([m,Z]),X?C.pop():(p={inArray:f,index:v,keys:T,edits:I,prev:p},f=Array.isArray(Z),T=f?Z:(V=c[Z.kind])!==null&&V!==void 0?V:[],v=-1,I=[],y&&k.push(y),y=Z)}while(p!==void 0);return I.length!==0?I[I.length-1][1]:r}(i,SZ)}const SZ={Name:{leave:i=>i.value},Variable:{leave:i=>"$"+i.name},Document:{leave:i=>q(i.definitions,`

`)},OperationDefinition:{leave(i){const r=me("(",q(i.variableDefinitions,", "),")"),a=q([i.operation,q([i.name,r]),q(i.directives," ")]," ");return(a==="query"?"":a+" ")+i.selectionSet}},VariableDefinition:{leave:({variable:i,type:r,defaultValue:a,directives:c})=>i+": "+r+me(" = ",a)+me(" ",q(c," "))},SelectionSet:{leave:({selections:i})=>_t(i)},Field:{leave({alias:i,name:r,arguments:a,directives:c,selectionSet:u}){const p=me("",i,": ")+r;let m=p+me("(",q(a,", "),")");return m.length>80&&(m=p+me(`(
`,Yi(q(a,`
`)),`
)`)),q([m,q(c," "),u]," ")}},Argument:{leave:({name:i,value:r})=>i+": "+r},FragmentSpread:{leave:({name:i,directives:r})=>"..."+i+me(" ",q(r," "))},InlineFragment:{leave:({typeCondition:i,directives:r,selectionSet:a})=>q(["...",me("on ",i),q(r," "),a]," ")},FragmentDefinition:{leave:({name:i,typeCondition:r,variableDefinitions:a,directives:c,selectionSet:u})=>`fragment ${i}${me("(",q(a,", "),")")} on ${r} ${me("",q(c," ")," ")}`+u},IntValue:{leave:({value:i})=>i},FloatValue:{leave:({value:i})=>i},StringValue:{leave:({value:i,block:r})=>r?function(a,c){const u=a.replace(/"""/g,'\\"""'),p=u.split(/\r\n|[\n\r]/g),m=p.length===1,y=p.length>1&&p.slice(1).every(L=>L.length===0||qs(L.charCodeAt(0))),f=u.endsWith('\\"""'),T=a.endsWith('"')&&!f,v=a.endsWith("\\"),I=T||v,Z=!(c!=null&&c.minimize)&&(!m||a.length>70||I||y||f);let C="";const k=m&&qs(a.charCodeAt(0));return(Z&&!k||y)&&(C+=`
`),C+=u,(Z||I)&&(C+=`
`),'"""'+C+'"""'}(i):`"${i.replace(hZ,mZ)}"`},BooleanValue:{leave:({value:i})=>i?"true":"false"},NullValue:{leave:()=>"null"},EnumValue:{leave:({value:i})=>i},ListValue:{leave:({values:i})=>"["+q(i,", ")+"]"},ObjectValue:{leave:({fields:i})=>"{"+q(i,", ")+"}"},ObjectField:{leave:({name:i,value:r})=>i+": "+r},Directive:{leave:({name:i,arguments:r})=>"@"+i+me("(",q(r,", "),")")},NamedType:{leave:({name:i})=>i},ListType:{leave:({type:i})=>"["+i+"]"},NonNullType:{leave:({type:i})=>i+"!"},SchemaDefinition:{leave:({description:i,directives:r,operationTypes:a})=>me("",i,`
`)+q(["schema",q(r," "),_t(a)]," ")},OperationTypeDefinition:{leave:({operation:i,type:r})=>i+": "+r},ScalarTypeDefinition:{leave:({description:i,name:r,directives:a})=>me("",i,`
`)+q(["scalar",r,q(a," ")]," ")},ObjectTypeDefinition:{leave:({description:i,name:r,interfaces:a,directives:c,fields:u})=>me("",i,`
`)+q(["type",r,me("implements ",q(a," & ")),q(c," "),_t(u)]," ")},FieldDefinition:{leave:({description:i,name:r,arguments:a,type:c,directives:u})=>me("",i,`
`)+r+(ud(a)?me(`(
`,Yi(q(a,`
`)),`
)`):me("(",q(a,", "),")"))+": "+c+me(" ",q(u," "))},InputValueDefinition:{leave:({description:i,name:r,type:a,defaultValue:c,directives:u})=>me("",i,`
`)+q([r+": "+a,me("= ",c),q(u," ")]," ")},InterfaceTypeDefinition:{leave:({description:i,name:r,interfaces:a,directives:c,fields:u})=>me("",i,`
`)+q(["interface",r,me("implements ",q(a," & ")),q(c," "),_t(u)]," ")},UnionTypeDefinition:{leave:({description:i,name:r,directives:a,types:c})=>me("",i,`
`)+q(["union",r,q(a," "),me("= ",q(c," | "))]," ")},EnumTypeDefinition:{leave:({description:i,name:r,directives:a,values:c})=>me("",i,`
`)+q(["enum",r,q(a," "),_t(c)]," ")},EnumValueDefinition:{leave:({description:i,name:r,directives:a})=>me("",i,`
`)+q([r,q(a," ")]," ")},InputObjectTypeDefinition:{leave:({description:i,name:r,directives:a,fields:c})=>me("",i,`
`)+q(["input",r,q(a," "),_t(c)]," ")},DirectiveDefinition:{leave:({description:i,name:r,arguments:a,repeatable:c,locations:u})=>me("",i,`
`)+"directive @"+r+(ud(a)?me(`(
`,Yi(q(a,`
`)),`
)`):me("(",q(a,", "),")"))+(c?" repeatable":"")+" on "+q(u," | ")},SchemaExtension:{leave:({directives:i,operationTypes:r})=>q(["extend schema",q(i," "),_t(r)]," ")},ScalarTypeExtension:{leave:({name:i,directives:r})=>q(["extend scalar",i,q(r," ")]," ")},ObjectTypeExtension:{leave:({name:i,interfaces:r,directives:a,fields:c})=>q(["extend type",i,me("implements ",q(r," & ")),q(a," "),_t(c)]," ")},InterfaceTypeExtension:{leave:({name:i,interfaces:r,directives:a,fields:c})=>q(["extend interface",i,me("implements ",q(r," & ")),q(a," "),_t(c)]," ")},UnionTypeExtension:{leave:({name:i,directives:r,types:a})=>q(["extend union",i,q(r," "),me("= ",q(a," | "))]," ")},EnumTypeExtension:{leave:({name:i,directives:r,values:a})=>q(["extend enum",i,q(r," "),_t(a)]," ")},InputObjectTypeExtension:{leave:({name:i,directives:r,fields:a})=>q(["extend input",i,q(r," "),_t(a)]," ")}};function q(i,r=""){var a;return(a=i==null?void 0:i.filter(c=>c).join(r))!==null&&a!==void 0?a:""}function _t(i){return me(`{
`,Yi(q(i,`
`)),`
}`)}function me(i,r,a=""){return r!=null&&r!==""?i+r+a:""}function Yi(i){return me("  ",i.replace(/\n/g,`
  `))}function ud(i){var r;return(r=i==null?void 0:i.some(a=>a.includes(`
`)))!==null&&r!==void 0&&r}const dd=i=>{var r,a;let c;const u=i.definitions.filter(p=>p.kind==="OperationDefinition");return u.length===1&&(c=(a=(r=u[0])==null?void 0:r.name)==null?void 0:a.value),c},na=i=>{if(typeof i=="string"){let a;try{const c=ad(i);a=dd(c)}catch(c){}return{query:i,operationName:a}}const r=dd(i);return{query:cd(i),operationName:r}};class Hn extends Error{constructor(r,a){super(`${Hn.extractMessage(r)}: ${JSON.stringify({response:r,request:a})}`),Object.setPrototypeOf(this,Hn.prototype),this.response=r,this.request=a,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,Hn)}static extractMessage(r){var a,c,u;return(u=(c=(a=r.errors)==null?void 0:a[0])==null?void 0:c.message)!=null?u:`GraphQL Error (Code: ${r.status})`}}var ra={exports:{}};(function(i,r){var a,c=typeof self!="undefined"?self:ZN,u=function(){function m(){this.fetch=!1,this.DOMException=c.DOMException}return m.prototype=c,new m}();a=u,function(m){var y="URLSearchParams"in a,f="Symbol"in a&&"iterator"in Symbol,T="FileReader"in a&&"Blob"in a&&function(){try{return new Blob,!0}catch(E){return!1}}(),v="FormData"in a,I="ArrayBuffer"in a;if(I)var Z=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],C=ArrayBuffer.isView||function(E){return E&&Z.indexOf(Object.prototype.toString.call(E))>-1};function k(E){if(typeof E!="string"&&(E=String(E)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(E))throw new TypeError("Invalid character in header field name");return E.toLowerCase()}function L(E){return typeof E!="string"&&(E=String(E)),E}function A(E){var M={next:function(){var H=E.shift();return{done:H===void 0,value:H}}};return f&&(M[Symbol.iterator]=function(){return M}),M}function V(E){this.map={},E instanceof V?E.forEach(function(M,H){this.append(H,M)},this):Array.isArray(E)?E.forEach(function(M){this.append(M[0],M[1])},this):E&&Object.getOwnPropertyNames(E).forEach(function(M){this.append(M,E[M])},this)}function X(E){if(E.bodyUsed)return Promise.reject(new TypeError("Already read"));E.bodyUsed=!0}function O(E){return new Promise(function(M,H){E.onload=function(){M(E.result)},E.onerror=function(){H(E.error)}})}function P(E){var M=new FileReader,H=O(M);return M.readAsArrayBuffer(E),H}function Y(E){if(E.slice)return E.slice(0);var M=new Uint8Array(E.byteLength);return M.set(new Uint8Array(E)),M.buffer}function j(){return this.bodyUsed=!1,this._initBody=function(E){var M;this._bodyInit=E,E?typeof E=="string"?this._bodyText=E:T&&Blob.prototype.isPrototypeOf(E)?this._bodyBlob=E:v&&FormData.prototype.isPrototypeOf(E)?this._bodyFormData=E:y&&URLSearchParams.prototype.isPrototypeOf(E)?this._bodyText=E.toString():I&&T&&(M=E)&&DataView.prototype.isPrototypeOf(M)?(this._bodyArrayBuffer=Y(E.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):I&&(ArrayBuffer.prototype.isPrototypeOf(E)||C(E))?this._bodyArrayBuffer=Y(E):this._bodyText=E=Object.prototype.toString.call(E):this._bodyText="",this.headers.get("content-type")||(typeof E=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):y&&URLSearchParams.prototype.isPrototypeOf(E)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},T&&(this.blob=function(){var E=X(this);if(E)return E;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?X(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(P)}),this.text=function(){var E,M,H,F=X(this);if(F)return F;if(this._bodyBlob)return E=this._bodyBlob,M=new FileReader,H=O(M),M.readAsText(E),H;if(this._bodyArrayBuffer)return Promise.resolve(function(oe){for(var W=new Uint8Array(oe),J=new Array(W.length),_e=0;_e<W.length;_e++)J[_e]=String.fromCharCode(W[_e]);return J.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v&&(this.formData=function(){return this.text().then(Q)}),this.json=function(){return this.text().then(JSON.parse)},this}V.prototype.append=function(E,M){E=k(E),M=L(M);var H=this.map[E];this.map[E]=H?H+", "+M:M},V.prototype.delete=function(E){delete this.map[k(E)]},V.prototype.get=function(E){return E=k(E),this.has(E)?this.map[E]:null},V.prototype.has=function(E){return this.map.hasOwnProperty(k(E))},V.prototype.set=function(E,M){this.map[k(E)]=L(M)},V.prototype.forEach=function(E,M){for(var H in this.map)this.map.hasOwnProperty(H)&&E.call(M,this.map[H],H,this)},V.prototype.keys=function(){var E=[];return this.forEach(function(M,H){E.push(H)}),A(E)},V.prototype.values=function(){var E=[];return this.forEach(function(M){E.push(M)}),A(E)},V.prototype.entries=function(){var E=[];return this.forEach(function(M,H){E.push([H,M])}),A(E)},f&&(V.prototype[Symbol.iterator]=V.prototype.entries);var te=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ne(E,M){var H,F,oe=(M=M||{}).body;if(E instanceof ne){if(E.bodyUsed)throw new TypeError("Already read");this.url=E.url,this.credentials=E.credentials,M.headers||(this.headers=new V(E.headers)),this.method=E.method,this.mode=E.mode,this.signal=E.signal,oe||E._bodyInit==null||(oe=E._bodyInit,E.bodyUsed=!0)}else this.url=String(E);if(this.credentials=M.credentials||this.credentials||"same-origin",!M.headers&&this.headers||(this.headers=new V(M.headers)),this.method=(H=M.method||this.method||"GET",F=H.toUpperCase(),te.indexOf(F)>-1?F:H),this.mode=M.mode||this.mode||null,this.signal=M.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&oe)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(oe)}function Q(E){var M=new FormData;return E.trim().split("&").forEach(function(H){if(H){var F=H.split("="),oe=F.shift().replace(/\+/g," "),W=F.join("=").replace(/\+/g," ");M.append(decodeURIComponent(oe),decodeURIComponent(W))}}),M}function B(E,M){M||(M={}),this.type="default",this.status=M.status===void 0?200:M.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in M?M.statusText:"OK",this.headers=new V(M.headers),this.url=M.url||"",this._initBody(E)}ne.prototype.clone=function(){return new ne(this,{body:this._bodyInit})},j.call(ne.prototype),j.call(B.prototype),B.prototype.clone=function(){return new B(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new V(this.headers),url:this.url})},B.error=function(){var E=new B(null,{status:0,statusText:""});return E.type="error",E};var ee=[301,302,303,307,308];B.redirect=function(E,M){if(ee.indexOf(M)===-1)throw new RangeError("Invalid status code");return new B(null,{status:M,headers:{location:E}})},m.DOMException=a.DOMException;try{new m.DOMException}catch(E){m.DOMException=function(M,H){this.message=M,this.name=H;var F=Error(M);this.stack=F.stack},m.DOMException.prototype=Object.create(Error.prototype),m.DOMException.prototype.constructor=m.DOMException}function K(E,M){return new Promise(function(H,F){var oe=new ne(E,M);if(oe.signal&&oe.signal.aborted)return F(new m.DOMException("Aborted","AbortError"));var W=new XMLHttpRequest;function J(){W.abort()}W.onload=function(){var _e,ye,pe={status:W.status,statusText:W.statusText,headers:(_e=W.getAllResponseHeaders()||"",ye=new V,_e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(tt){var je=tt.split(":"),$=je.shift().trim();if($){var ue=je.join(":").trim();ye.append($,ue)}}),ye)};pe.url="responseURL"in W?W.responseURL:pe.headers.get("X-Request-URL");var ae="response"in W?W.response:W.responseText;H(new B(ae,pe))},W.onerror=function(){F(new TypeError("Network request failed"))},W.ontimeout=function(){F(new TypeError("Network request failed"))},W.onabort=function(){F(new m.DOMException("Aborted","AbortError"))},W.open(oe.method,oe.url,!0),oe.credentials==="include"?W.withCredentials=!0:oe.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&T&&(W.responseType="blob"),oe.headers.forEach(function(_e,ye){W.setRequestHeader(ye,_e)}),oe.signal&&(oe.signal.addEventListener("abort",J),W.onreadystatechange=function(){W.readyState===4&&oe.signal.removeEventListener("abort",J)}),W.send(oe._bodyInit===void 0?null:oe._bodyInit)})}K.polyfill=!0,a.fetch||(a.fetch=K,a.Headers=V,a.Request=ne,a.Response=B),m.Headers=V,m.Request=ne,m.Response=B,m.fetch=K,Object.defineProperty(m,"__esModule",{value:!0})}({}),u.fetch.ponyfill=!0,delete u.fetch.polyfill;var p=u;(r=p.fetch).default=p.fetch,r.fetch=p.fetch,r.Headers=p.Headers,r.Request=p.Request,r.Response=p.Response,i.exports=r})(ra,ra.exports);var Hi=ra.exports;const Ki=Ms(Hi),gZ=w({__proto__:null,default:Ki},[Hi]),Kn=i=>{let r={};return i&&(typeof Headers!="undefined"&&i instanceof Headers||gZ&&Hi.Headers&&i instanceof Hi.Headers?r=(a=>{const c={};return a.forEach((u,p)=>{c[p]=u}),c})(i):Array.isArray(i)?i.forEach(([a,c])=>{a&&c!==void 0&&(r[a]=c)}):r=i),r},pd=i=>i.replace(/([\s,]|#[^\n\r]+)+/g," ").trim(),TZ=i=>r=>G(this,null,function*(){var a;const{url:c,query:u,variables:p,operationName:m,fetch:y,fetchOptions:f,middleware:T}=r,v=S({},r.headers);let I,Z="";i==="POST"?(I=_Z(u,p,m,f.jsonSerializer),typeof I=="string"&&(v["Content-Type"]="application/json")):Z=(A=>{if(!Array.isArray(A.query)){const O=A,P=[`query=${encodeURIComponent(pd(O.query))}`];return A.variables&&P.push(`variables=${encodeURIComponent(O.jsonSerializer.stringify(O.variables))}`),O.operationName&&P.push(`operationName=${encodeURIComponent(O.operationName)}`),P.join("&")}if(A.variables!==void 0&&!Array.isArray(A.variables))throw new Error("Cannot create query with given variable type, array expected");const V=A,X=A.query.reduce((O,P,Y)=>(O.push({query:pd(P),variables:V.variables?V.jsonSerializer.stringify(V.variables[Y]):void 0}),O),[]);return`query=${encodeURIComponent(V.jsonSerializer.stringify(X))}`})({query:u,variables:p,operationName:m,jsonSerializer:(a=f.jsonSerializer)!=null?a:Bs});const C=S({method:i,headers:v,body:I},f);let k=c,L=C;if(T){const A=yield Promise.resolve(T(_(S({},C),{url:c,operationName:m,variables:p}))),{url:V}=A;k=V,L=N(A,["url"])}return Z&&(k=`${k}?${Z}`),yield y(k,L)});class vZ{constructor(r,a={}){this.url=r,this.requestConfig=a,this.rawRequest=(...c)=>G(this,null,function*(){const[u,p,m]=c,y=((V,X,O)=>V.query?V:{query:V,variables:X,requestHeaders:O,signal:void 0})(u,p,m),f=this.requestConfig,{headers:T,fetch:v=Ki,method:I="POST",requestMiddleware:Z,responseMiddleware:C}=f,k=N(f,["headers","fetch","method","requestMiddleware","responseMiddleware"]),{url:L}=this;y.signal!==void 0&&(k.signal=y.signal);const{operationName:A}=na(y.query);return ia({url:L,query:y.query,variables:y.variables,headers:S(S({},Kn(oa(T))),Kn(y.requestHeaders)),operationName:A,fetch:v,method:I,fetchOptions:k,middleware:Z}).then(V=>(C&&C(V),V)).catch(V=>{throw C&&C(V),V})})}request(r,...a){return G(this,null,function*(){const[c,u]=a,p=((A,V,X)=>A.document?A:{document:A,variables:V,requestHeaders:X,signal:void 0})(r,c,u),m=this.requestConfig,{headers:y,fetch:f=Ki,method:T="POST",requestMiddleware:v,responseMiddleware:I}=m,Z=N(m,["headers","fetch","method","requestMiddleware","responseMiddleware"]),{url:C}=this;p.signal!==void 0&&(Z.signal=p.signal);const{query:k,operationName:L}=na(p.document);return ia({url:C,query:k,variables:p.variables,headers:S(S({},Kn(oa(y))),Kn(p.requestHeaders)),operationName:L,fetch:f,method:T,fetchOptions:Z,middleware:v}).then(A=>(I&&I(A),A.data)).catch(A=>{throw I&&I(A),A})})}batchRequests(r,a){var c;const u=((v,I)=>v.documents?v:{documents:v,requestHeaders:I,signal:void 0})(r,a),p=this.requestConfig,{headers:m}=p,y=N(p,["headers"]);u.signal!==void 0&&(y.signal=u.signal);const f=u.documents.map(({document:v})=>na(v).query),T=u.documents.map(({variables:v})=>v);return ia({url:this.url,query:f,variables:T,headers:S(S({},Kn(oa(m))),Kn(u.requestHeaders)),operationName:void 0,fetch:(c=this.requestConfig.fetch)!=null?c:Ki,method:this.requestConfig.method||"POST",fetchOptions:y,middleware:this.requestConfig.requestMiddleware}).then(v=>(this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(v),v.data)).catch(v=>{throw this.requestConfig.responseMiddleware&&this.requestConfig.responseMiddleware(v),v})}setHeaders(r){return this.requestConfig.headers=r,this}setHeader(r,a){const{headers:c}=this.requestConfig;return c?c[r]=a:this.requestConfig.headers={[r]:a},this}setEndpoint(r){return this.url=r,this}}const ia=i=>G(this,null,function*(){var r,a;const{query:c,variables:u,fetchOptions:p}=i,m=TZ(((r=i.method)!=null?r:"post").toUpperCase()),y=Array.isArray(i.query),f=yield m(i),T=yield EZ(f,(a=p.jsonSerializer)!=null?a:Bs),v=Array.isArray(T)?!T.some(({data:Z})=>!Z):!!T.data,I=Array.isArray(T)||!T.errors||Array.isArray(T.errors)&&!T.errors.length||p.errorPolicy==="all"||p.errorPolicy==="ignore";if(f.ok&&I&&v){const Z=T,C=N(Z,["errors"]),k=p.errorPolicy==="ignore"?C:T;return _(S({},y?{data:k}:k),{headers:f.headers,status:f.status})}throw new Hn(_(S({},typeof T=="string"?{error:T}:T),{status:f.status,headers:f.headers}),{query:c,variables:u})}),_Z=(i,r,a,c)=>{const u=c!=null?c:Bs;if(!Array.isArray(i))return u.stringify({query:i,variables:r,operationName:a});if(r!==void 0&&!Array.isArray(r))throw new Error("Cannot create request body with given variable type, array expected");const p=i.reduce((m,y,f)=>(m.push({query:y,variables:r?r[f]:void 0}),m),[]);return u.stringify(p)},EZ=(i,r)=>G(this,null,function*(){let a;return i.headers.forEach((c,u)=>{u.toLowerCase()==="content-type"&&(a=c)}),a&&(a.toLowerCase().startsWith("application/json")||a.toLowerCase().startsWith("application/graphql+json")||a.toLowerCase().startsWith("application/graphql-response+json"))?r.parse(yield i.text()):i.text()}),oa=i=>typeof i=="function"?i():i;var Ji=function(){return Ji=Object.assign||function(i){for(var r,a=1,c=arguments.length;a<c;a++)for(var u in r=arguments[a])Object.prototype.hasOwnProperty.call(r,u)&&(i[u]=r[u]);return i},Ji.apply(this,arguments)},Bi=new Map,sa=new Map,hd=!0,zi=!1;function md(i){return i.replace(/[\s,]+/g," ").trim()}function IZ(i){var r=new Set,a=[];return i.definitions.forEach(function(c){if(c.kind==="FragmentDefinition"){var u=c.name.value,p=md((y=c.loc).source.body.substring(y.start,y.end)),m=sa.get(u);m&&!m.has(p)?hd&&console.warn("Warning: fragment with name "+u+` already exists.
graphql-tag enforces all fragment names across your application to be unique; read more about
this in the docs: http://dev.apollodata.com/core/fragments.html#unique-names`):m||sa.set(u,m=new Set),m.add(p),r.has(p)||(r.add(p),a.push(c))}else a.push(c);var y}),Ji(Ji({},i),{definitions:a})}function RZ(i){var r=md(i);if(!Bi.has(r)){var a=ad(i,{experimentalFragmentVariables:zi,allowLegacyFragmentVariables:zi});if(!a||a.kind!=="Document")throw new Error("Not a valid GraphQL document.");Bi.set(r,function(c){var u=new Set(c.definitions);u.forEach(function(m){m.loc&&delete m.loc,Object.keys(m).forEach(function(y){var f=m[y];f&&typeof f=="object"&&u.add(f)})});var p=c.loc;return p&&(delete p.startToken,delete p.endToken),c}(IZ(a)))}return Bi.get(r)}function ct(i){for(var r=[],a=1;a<arguments.length;a++)r[a-1]=arguments[a];typeof i=="string"&&(i=[i]);var c=i[0];return r.forEach(function(u,p){u&&u.kind==="Document"?c+=u.loc.source.body:c+=u,c+=i[p+1]}),RZ(c)}var wr,NZ=ct,ZZ=function(){Bi.clear(),sa.clear()},CZ=function(){hd=!1},OZ=function(){zi=!0},wZ=function(){zi=!1};(wr=ct||(ct={})).gql=NZ,wr.resetCaches=ZZ,wr.disableFragmentWarnings=CZ,wr.enableExperimentalFragmentVariables=OZ,wr.disableExperimentalFragmentVariables=wZ,ct.default=ct;const fd=ct`
	mutation PushPayload(
		$session_secure_id: String!
		$payload_id: ID!
		$events: ReplayEventsInput!
		$messages: String!
		$resources: String!
		$web_socket_events: String!
		$errors: [ErrorObjectInput]!
		$is_beacon: Boolean
		$has_session_unloaded: Boolean
		$highlight_logs: String
	) {
		pushPayload(
			session_secure_id: $session_secure_id
			payload_id: $payload_id
			events: $events
			messages: $messages
			resources: $resources
			web_socket_events: $web_socket_events
			errors: $errors
			is_beacon: $is_beacon
			has_session_unloaded: $has_session_unloaded
			highlight_logs: $highlight_logs
		)
	}
`,LZ=ct`
	mutation PushPayloadCompressed(
		$session_secure_id: String!
		$payload_id: ID!
		$data: String!
	) {
		pushPayloadCompressed(
			session_secure_id: $session_secure_id
			payload_id: $payload_id
			data: $data
		)
	}
`,GZ=ct`
	mutation identifySession(
		$session_secure_id: String!
		$user_identifier: String!
		$user_object: Any
	) {
		identifySession(
			session_secure_id: $session_secure_id
			user_identifier: $user_identifier
			user_object: $user_object
		)
	}
`,VZ=ct`
	mutation addSessionProperties(
		$session_secure_id: String!
		$properties_object: Any
	) {
		addSessionProperties(
			session_secure_id: $session_secure_id
			properties_object: $properties_object
		)
	}
`,XZ=ct`
	mutation pushMetrics($metrics: [MetricInput]!) {
		pushMetrics(metrics: $metrics)
	}
`,PZ=ct`
	mutation addSessionFeedback(
		$session_secure_id: String!
		$user_name: String
		$user_email: String
		$verbatim: String!
		$timestamp: Timestamp!
	) {
		addSessionFeedback(
			session_secure_id: $session_secure_id
			user_name: $user_name
			user_email: $user_email
			verbatim: $verbatim
			timestamp: $timestamp
		)
	}
`,WZ=ct`
	mutation initializeSession(
		$session_secure_id: String!
		$organization_verbose_id: String!
		$enable_strict_privacy: Boolean!
		$privacy_setting: String!
		$enable_recording_network_contents: Boolean!
		$clientVersion: String!
		$firstloadVersion: String!
		$clientConfig: String!
		$environment: String!
		$id: String!
		$appVersion: String
		$serviceName: String!
		$client_id: String!
		$network_recording_domains: [String!]
		$disable_session_recording: Boolean
	) {
		initializeSession(
			session_secure_id: $session_secure_id
			organization_verbose_id: $organization_verbose_id
			enable_strict_privacy: $enable_strict_privacy
			enable_recording_network_contents: $enable_recording_network_contents
			clientVersion: $clientVersion
			firstloadVersion: $firstloadVersion
			clientConfig: $clientConfig
			environment: $environment
			appVersion: $appVersion
			serviceName: $serviceName
			fingerprint: $id
			client_id: $client_id
			network_recording_domains: $network_recording_domains
			disable_session_recording: $disable_session_recording
			privacy_setting: $privacy_setting
		) {
			secure_id
			project_id
		}
	}
`,kZ=ct`
	query Ignore($id: ID!) {
		ignore(id: $id)
	}
`,AZ=(i,r,a,c)=>i(),MZ=i=>{i(window.location.href);var r=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(p){setTimeout(()=>{var m,y;try{y=JSON.parse((m=p==null?void 0:p.toString())!=null?m:"")}catch(f){return}y.type!=="track"&&y.type!=="identify"||aa(y)&&i(y)},100),r.call(this,p)};const a=p=>{if(p.key==="ajs_user_id"||p.key==="ajs_anonymous_id"||p.key==="ajs_user_traits"){const{userId:m,userTraits:y}=bd();if(m){let f={};y&&(f=JSON.parse(y));const T={type:"identify",userId:m.toString(),traits:f};aa(T)&&i(T)}}},{userId:c,userTraits:u}=bd();if(c){let p={};u&&(p=JSON.parse(u));const m={type:"identify",userId:c.toString(),traits:p};aa(m)&&i(m)}return window.addEventListener("storage",a),kN(({keyName:p})=>{a({key:p})}),()=>{window.removeEventListener("storage",a),XMLHttpRequest.prototype.send=r}},bd=()=>({userId:st("ajs_user_id"),userTraits:st("ajs_user_traits"),anonymousId:st("ajs_anonymous_id")}),aa=i=>{if(!i)return!1;let r="";try{r=JSON.stringify(i)}catch(u){return!1}const a=xZ(r),c=st(Ue.SEGMENT_LAST_SENT_HASH_KEY);return(c===void 0||a!==c)&&(vt(Ue.SEGMENT_LAST_SENT_HASH_KEY,a),!0)},xZ=i=>{var r=0,a=i.length,c=0;if(a>0)for(;c<a;)r=(r<<5)-r+i.charCodeAt(c++)|0;return r.toString()};function yd(i,r){return UZ(i)}function Sd(i){if(i.id.length)return`#${i.id}`;if(i.classList.length){let r=[];for(const a of i.classList)r.push(`.${a}`);return`${i.nodeName.toLowerCase()}${r.join(",")}`}return i.nodeName.toLowerCase()}const UZ=i=>{let r="";const a=i.getAttribute("class"),c=i.getAttribute("id");return c&&(r=r.concat(gd(c,"#"))),a&&(r=r.concat(gd(a,"."))),r===""&&(r=r.concat(i.tagName.toLowerCase())),r},gd=(i,r)=>`${r}${i.trim().split(" ").join(r)}`,DZ=(i,r)=>{const a=function(y){typeof y!="string"&&(y="");const f=(y=y.replace(/\s/g,"")).split(",");let T=f.lastIndexOf("");for(;T>=0;)f[T-1]+=",",f.splice(T,1),T=f.lastIndexOf("");return f}(i);let c=[];for(let y=0;y<a.length;y++){let f=a[y].split("+");c=[],f.length>1&&(c=HZ(vd,f)),f=f[f.length-1],f=f==="*"?"*":YZ(f),f in Lt||(Lt[f]=[]),Lt[f].push({mods:c,shortcut:a[y],key:a[y],method:r,keyup:!1,keydown:!0,scope:"all",splitKey:"+"})}var u,p,m;u=document,p="keydown",m=y=>{(function(f){const T=Lt["*"];let v=f.keyCode||f.which||f.charCode;if(v!==93&&v!==224||(v=91),qe.indexOf(v)===-1&&v!==229&&qe.push(v),["ctrlKey","altKey","shiftKey","metaKey"].forEach(I=>{const Z=Td[I];f[I]&&qe.indexOf(Z)===-1?qe.push(Z):!f[I]&&qe.indexOf(Z)>-1?qe.splice(qe.indexOf(Z),1):I==="metaKey"&&f[I]&&qe.length===3&&(f.ctrlKey||f.shiftKey||f.altKey||(qe=qe.slice(qe.indexOf(Z))))}),!(v in et)||(et[v]=!0,T)){for(const I in et)Object.prototype.hasOwnProperty.call(et,I)&&(et[I]=f[Td[I]]);if(f.getModifierState&&(!f.altKey||f.ctrlKey)&&f.getModifierState("AltGraph")&&(qe.indexOf(17)===-1&&qe.push(17),qe.indexOf(18)===-1&&qe.push(18),et[17]=!0,et[18]=!0),v in Lt){for(let I=0;I<Lt[v].length;I++)if((f.type==="keydown"&&Lt[v][I].keydown||f.type==="keyup"&&Lt[v][I].keyup)&&Lt[v][I].key){const Z=Lt[v][I];KZ(f,Z,"all")}}}})(y)},u.addEventListener?u.addEventListener(p,m,!1):u.attachEvent&&u.attachEvent(`on${p}`,()=>{m(window.event)})};let qe=[];const Lt={},la=typeof navigator!="undefined"&&navigator.userAgent.toLowerCase().indexOf("firefox")>0,FZ={backspace:8,tab:9,clear:12,enter:13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"⇪":20,",":188,".":190,"/":191,"`":192,"-":la?173:189,"=":la?61:187,";":la?59:186,"'":222,"[":219,"]":221,"\\":220},Td={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},et={16:!1,18:!1,17:!1,91:!1},vd={"⇧":16,shift:16,"⌥":18,alt:18,option:18,"⌃":17,ctrl:17,control:17,"⌘":91,cmd:91,command:91},YZ=i=>FZ[i.toLowerCase()]||vd[i.toLowerCase()]||i.toUpperCase().charCodeAt(0);function HZ(i,r){const a=r.slice(0,r.length-1);for(let c=0;c<a.length;c++)a[c]=i[a[c].toLowerCase()];return a}function KZ(i,r,a){let c;if(r.scope===a||r.scope==="all"){c=r.mods.length>0;for(const u in et)Object.prototype.hasOwnProperty.call(et,u)&&(!et[u]&&r.mods.indexOf(+u)>-1||et[u]&&r.mods.indexOf(+u)===-1)&&(c=!1);(r.mods.length!==0||et[16]||et[18]||et[17]||et[91])&&!c&&r.shortcut!=="*"||r.method(i,r)===!1&&(i.preventDefault?i.preventDefault():i.returnValue=!1,i.stopPropagation&&i.stopPropagation(),i.cancelBubble&&(i.cancelBubble=!0))}}var jt,Lr,_d,ji,ca,Ed=-1,hn=function(i){addEventListener("pageshow",function(r){r.persisted&&(Ed=r.timeStamp,i(r))},!0)},ua=function(){return window.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]},Qi=function(){var i=ua();return i&&i.activationStart||0},pt=function(i,r){var a=ua(),c="navigate";return Ed>=0?c="back-forward-cache":a&&(document.prerendering||Qi()>0?c="prerender":document.wasDiscarded?c="restore":a.type&&(c=a.type.replace(/_/g,"-"))),{name:i,value:r===void 0?-1:r,rating:"good",delta:0,entries:[],id:"v3-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:c}},Jn=function(i,r,a){try{if(PerformanceObserver.supportedEntryTypes.includes(i)){var c=new PerformanceObserver(function(u){Promise.resolve().then(function(){r(u.getEntries())})});return c.observe(Object.assign({type:i,buffered:!0},a||{})),c}}catch(u){}},ht=function(i,r,a,c){var u,p;return function(m){var y,f;r.value>=0&&(m||c)&&((p=r.value-(u||0))||u===void 0)&&(u=r.value,r.delta=p,r.rating=(y=r.value)>(f=a)[1]?"poor":y>f[0]?"needs-improvement":"good",i(r))}},da=function(i){requestAnimationFrame(function(){return requestAnimationFrame(function(){return i()})})},$i=function(i){var r=function(a){a.type!=="pagehide"&&document.visibilityState!=="hidden"||i(a)};addEventListener("visibilitychange",r,!0),addEventListener("pagehide",r,!0)},pa=function(i){var r=!1;return function(a){r||(i(a),r=!0)}},Bn=-1,Id=function(){return document.visibilityState!=="hidden"||document.prerendering?1/0:0},qi=function(i){document.visibilityState==="hidden"&&Bn>-1&&(Bn=i.type==="visibilitychange"?i.timeStamp:0,JZ())},Rd=function(){addEventListener("visibilitychange",qi,!0),addEventListener("prerenderingchange",qi,!0)},JZ=function(){removeEventListener("visibilitychange",qi,!0),removeEventListener("prerenderingchange",qi,!0)},ha=function(){return Bn<0&&(Bn=Id(),Rd(),hn(function(){setTimeout(function(){Bn=Id(),Rd()},0)})),{get firstHiddenTime(){return Bn}}},Gr=function(i){document.prerendering?addEventListener("prerenderingchange",function(){return i()},!0):i()},Nd=[1800,3e3],Zd=function(i,r){r=r||{},Gr(function(){var a,c=ha(),u=pt("FCP"),p=Jn("paint",function(m){m.forEach(function(y){y.name==="first-contentful-paint"&&(p.disconnect(),y.startTime<c.firstHiddenTime&&(u.value=Math.max(y.startTime-Qi(),0),u.entries.push(y),a(!0)))})});p&&(a=ht(i,u,Nd,r.reportAllChanges),hn(function(m){u=pt("FCP"),a=ht(i,u,Nd,r.reportAllChanges),da(function(){u.value=performance.now()-m.timeStamp,a(!0)})}))})},Cd=[.1,.25],Vr={passive:!0,capture:!0},BZ=new Date,Od=function(i,r){jt||(jt=r,Lr=i,_d=new Date,Ld(removeEventListener),wd())},wd=function(){if(Lr>=0&&Lr<_d-BZ){var i={entryType:"first-input",name:jt.type,target:jt.target,cancelable:jt.cancelable,startTime:jt.timeStamp,processingStart:jt.timeStamp+Lr};ji.forEach(function(r){r(i)}),ji=[]}},zZ=function(i){if(i.cancelable){var r=(i.timeStamp>1e12?new Date:performance.now())-i.timeStamp;i.type=="pointerdown"?function(a,c){var u=function(){Od(a,c),m()},p=function(){m()},m=function(){removeEventListener("pointerup",u,Vr),removeEventListener("pointercancel",p,Vr)};addEventListener("pointerup",u,Vr),addEventListener("pointercancel",p,Vr)}(r,i):Od(r,i)}},Ld=function(i){["mousedown","keydown","touchstart","pointerdown"].forEach(function(r){return i(r,zZ,Vr)})},Gd=[100,300],Vd=0,ma=1/0,eo=0,jZ=function(i){i.forEach(function(r){r.interactionId&&(ma=Math.min(ma,r.interactionId),eo=Math.max(eo,r.interactionId),Vd=eo?(eo-ma)/7+1:0)})},Xd=function(){return ca?Vd:performance.interactionCount||0},Pd=[200,500],Wd=0,kd=function(){return Xd()-Wd},Gt=[],fa={},Ad=function(i){var r=Gt[Gt.length-1],a=fa[i.interactionId];if(a||Gt.length<10||i.duration>r.latency){if(a)a.entries.push(i),a.latency=Math.max(a.latency,i.duration);else{var c={id:i.interactionId,latency:i.duration,entries:[i]};fa[c.id]=c,Gt.push(c)}Gt.sort(function(u,p){return p.latency-u.latency}),Gt.splice(10).forEach(function(u){delete fa[u.id]})}},QZ=function(i,r){r=r||{},Gr(function(){var a;"interactionCount"in performance||ca||(ca=Jn("event",jZ,{type:"event",buffered:!0,durationThreshold:0}));var c,u=pt("INP"),p=function(y){y.forEach(function(v){v.interactionId&&Ad(v),v.entryType==="first-input"&&!Gt.some(function(I){return I.entries.some(function(Z){return v.duration===Z.duration&&v.startTime===Z.startTime})})&&Ad(v)});var f,T=(f=Math.min(Gt.length-1,Math.floor(kd()/50)),Gt[f]);T&&T.latency!==u.value&&(u.value=T.latency,u.entries=T.entries,c())},m=Jn("event",p,{durationThreshold:(a=r.durationThreshold)!==null&&a!==void 0?a:40});c=ht(i,u,Pd,r.reportAllChanges),m&&("interactionId"in PerformanceEventTiming.prototype&&m.observe({type:"first-input",buffered:!0}),$i(function(){p(m.takeRecords()),u.value<0&&kd()>0&&(u.value=0,u.entries=[]),c(!0)}),hn(function(){Gt=[],Wd=Xd(),u=pt("INP"),c=ht(i,u,Pd,r.reportAllChanges)}))})},Md=[2500,4e3],ba={},xd=[800,1800],$Z=function i(r){document.prerendering?Gr(function(){return i(r)}):document.readyState!=="complete"?addEventListener("load",function(){return i(r)},!0):setTimeout(r,0)},qZ=function(i,r){r=r||{};var a=pt("TTFB"),c=ht(i,a,xd,r.reportAllChanges);$Z(function(){var u=ua();if(u){var p=u.responseStart;if(p<=0||p>performance.now())return;a.value=Math.max(p-Qi(),0),a.entries=[u],c(!0),hn(function(){a=pt("TTFB",0),(c=ht(i,a,xd,r.reportAllChanges))(!0)})}})};const eC=i=>{var r,a;return r=i,a=a||{},Zd(pa(function(){var c,u=pt("CLS",0),p=0,m=[],y=function(T){T.forEach(function(v){if(!v.hadRecentInput){var I=m[0],Z=m[m.length-1];p&&v.startTime-Z.startTime<1e3&&v.startTime-I.startTime<5e3?(p+=v.value,m.push(v)):(p=v.value,m=[v])}}),p>u.value&&(u.value=p,u.entries=m,c())},f=Jn("layout-shift",y);f&&(c=ht(r,u,Cd,a.reportAllChanges),$i(function(){y(f.takeRecords()),c(!0)}),hn(function(){p=0,u=pt("CLS",0),c=ht(r,u,Cd,a.reportAllChanges),da(function(){return c()})}),setTimeout(c,0))})),Zd(i),function(c,u){u=u||{},Gr(function(){var p,m=ha(),y=pt("FID"),f=function(I){I.startTime<m.firstHiddenTime&&(y.value=I.processingStart-I.startTime,y.entries.push(I),p(!0))},T=function(I){I.forEach(f)},v=Jn("first-input",T);p=ht(c,y,Gd,u.reportAllChanges),v&&$i(pa(function(){T(v.takeRecords()),v.disconnect()})),v&&hn(function(){var I;y=pt("FID"),p=ht(c,y,Gd,u.reportAllChanges),ji=[],Lr=-1,jt=null,Ld(addEventListener),I=f,ji.push(I),wd()})})}(i),function(c,u){u=u||{},Gr(function(){var p,m=ha(),y=pt("LCP"),f=function(I){var Z=I[I.length-1];Z&&Z.startTime<m.firstHiddenTime&&(y.value=Math.max(Z.startTime-Qi(),0),y.entries=[Z],p())},T=Jn("largest-contentful-paint",f);if(T){p=ht(c,y,Md,u.reportAllChanges);var v=pa(function(){ba[y.id]||(f(T.takeRecords()),T.disconnect(),ba[y.id]=!0,p(!0))});["keydown","click"].forEach(function(I){addEventListener(I,function(){return setTimeout(v,0)},!0)}),$i(v),hn(function(I){y=pt("LCP"),p=ht(c,y,Md,u.reportAllChanges),da(function(){y.value=performance.now()-I.timeStamp,ba[y.id]=!0,p(!0)})})}})}(i),qZ(i),QZ(i),()=>{}},ya=i=>i/Math.pow(1e3,2),tC=i=>1024*i,Ud=typeof window!="undefined"&&"performance"in window&&"memory"in performance?performance:{memory:{}},Xr="highlightLogs",nC=i=>{if(!i)return;let r=st(Xr)||"";r&&(r.startsWith(i)?(r=r.slice(i.length),vt(Xr,r)):(a=>{let c=st(Xr)||"";c=c+"["+new Date().getTime()+"] "+a+`
`,vt(Xr,c)})("Unable to clear logs "+i.replace(`
`," ")+" from "+r.replace(`
`," ")))},to=()=>{var i;const r="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";var a="";const c=typeof window!="undefined"&&((i=window.crypto)==null?void 0:i.getRandomValues),u=new Uint32Array(28);c&&window.crypto.getRandomValues(u);for(let p=0;p<28;p++)a+=r.charAt(c?u[p]%62:Math.floor(62*Math.random()));return a},Dd="dmFyIF9fZGVmUHJvcD1PYmplY3QuZGVmaW5lUHJvcGVydHksX19kZWZQcm9wcz1PYmplY3QuZGVmaW5lUHJvcGVydGllcyxfX2dldE93blByb3BEZXNjcz1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyxfX2dldE93blByb3BTeW1ib2xzPU9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMsX19oYXNPd25Qcm9wPU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHksX19wcm9wSXNFbnVtPU9iamVjdC5wcm90b3R5cGUucHJvcGVydHlJc0VudW1lcmFibGUsX19kZWZOb3JtYWxQcm9wPShlLHQsbik9PnQgaW4gZT9fX2RlZlByb3AoZSx0LHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpufSk6ZVt0XT1uLF9fc3ByZWFkVmFsdWVzPShlLHQpPT57Zm9yKHZhciBuIGluIHR8fCh0PXt9KSlfX2hhc093blByb3AuY2FsbCh0LG4pJiZfX2RlZk5vcm1hbFByb3AoZSxuLHRbbl0pO2lmKF9fZ2V0T3duUHJvcFN5bWJvbHMpZm9yKHZhciBuIG9mIF9fZ2V0T3duUHJvcFN5bWJvbHModCkpX19wcm9wSXNFbnVtLmNhbGwodCxuKSYmX19kZWZOb3JtYWxQcm9wKGUsbix0W25dKTtyZXR1cm4gZX0sX19zcHJlYWRQcm9wcz0oZSx0KT0+X19kZWZQcm9wcyhlLF9fZ2V0T3duUHJvcERlc2NzKHQpKSxfX29ialJlc3Q9KGUsdCk9Pnt2YXIgbj17fTtmb3IodmFyIHIgaW4gZSlfX2hhc093blByb3AuY2FsbChlLHIpJiZ0LmluZGV4T2Yocik8MCYmKG5bcl09ZVtyXSk7aWYobnVsbCE9ZSYmX19nZXRPd25Qcm9wU3ltYm9scylmb3IodmFyIHIgb2YgX19nZXRPd25Qcm9wU3ltYm9scyhlKSl0LmluZGV4T2Yocik8MCYmX19wcm9wSXNFbnVtLmNhbGwoZSxyKSYmKG5bcl09ZVtyXSk7cmV0dXJuIG59LF9fcHVibGljRmllbGQ9KGUsdCxuKT0+KF9fZGVmTm9ybWFsUHJvcChlLCJzeW1ib2wiIT10eXBlb2YgdD90KyIiOnQsbiksbiksX19hc3luYz0oZSx0LG4pPT5uZXcgUHJvbWlzZSgoKHIsaSk9Pnt2YXIgcz1lPT57dHJ5e2Eobi5uZXh0KGUpKX1jYXRjaCh0KXtpKHQpfX0sbz1lPT57dHJ5e2Eobi50aHJvdyhlKSl9Y2F0Y2godCl7aSh0KX19LGE9ZT0+ZS5kb25lP3IoZS52YWx1ZSk6UHJvbWlzZS5yZXNvbHZlKGUudmFsdWUpLnRoZW4ocyxvKTthKChuPW4uYXBwbHkoZSx0KSkubmV4dCgpKX0pKTshZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7ZnVuY3Rpb24gZShlLHQpe3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQpe3QmJiJzdHJpbmciIT10eXBlb2YgdCYmIUFycmF5LmlzQXJyYXkodCkmJk9iamVjdC5rZXlzKHQpLmZvckVhY2goKGZ1bmN0aW9uKG4pe2lmKCJkZWZhdWx0IiE9PW4mJiEobiBpbiBlKSl7dmFyIHI9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LG4pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLG4sci5nZXQ/cjp7ZW51bWVyYWJsZTohMCxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdFtuXX19KX19KSl9KSksT2JqZWN0LmZyZWV6ZShlKX12YXIgdD0oZT0+KGVbZS5Jbml0aWFsaXplPTBdPSJJbml0aWFsaXplIixlW2UuQXN5bmNFdmVudHM9MV09IkFzeW5jRXZlbnRzIixlW2UuSWRlbnRpZnk9Ml09IklkZW50aWZ5IixlW2UuUHJvcGVydGllcz0zXT0iUHJvcGVydGllcyIsZVtlLk1ldHJpY3M9NF09Ik1ldHJpY3MiLGVbZS5GZWVkYmFjaz01XT0iRmVlZGJhY2siLGVbZS5DdXN0b21FdmVudD02XT0iQ3VzdG9tRXZlbnQiLGUpKSh0fHx7fSksbj0idW5kZWZpbmVkIiE9dHlwZW9mIGdsb2JhbFRoaXM/Z2xvYmFsVGhpczoidW5kZWZpbmVkIiE9dHlwZW9mIHdpbmRvdz93aW5kb3c6InVuZGVmaW5lZCIhPXR5cGVvZiBnbG9iYWw/Z2xvYmFsOiJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOnt9O2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGUmJmUuX19lc01vZHVsZSYmT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKGUsImRlZmF1bHQiKT9lLmRlZmF1bHQ6ZX12YXIgaT17ZXhwb3J0czp7fX07IWZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQpe3ZhciBuPVtdLHI9W107cmV0dXJuIG51bGw9PXQmJih0PWZ1bmN0aW9uKGUsdCl7cmV0dXJuIG5bMF09PT10PyJbQ2lyY3VsYXIgfl0iOiJbQ2lyY3VsYXIgfi4iK3Iuc2xpY2UoMCxuLmluZGV4T2YodCkpLmpvaW4oIi4iKSsiXSJ9KSxmdW5jdGlvbihpLHMpe2lmKG4ubGVuZ3RoPjApe3ZhciBvPW4uaW5kZXhPZih0aGlzKTt+bz9uLnNwbGljZShvKzEpOm4ucHVzaCh0aGlzKSx+bz9yLnNwbGljZShvLDEvMCxpKTpyLnB1c2goaSksfm4uaW5kZXhPZihzKSYmKHM9dC5jYWxsKHRoaXMsaSxzKSl9ZWxzZSBuLnB1c2gocyk7cmV0dXJuIG51bGw9PWU/czplLmNhbGwodGhpcyxpLHMpfX0oZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxyLGkpe3JldHVybiBKU09OLnN0cmluZ2lmeShlLG4odCxpKSxyKX0pLmdldFNlcmlhbGl6ZT1ufShpKTt2YXIgcz1yKGkuZXhwb3J0cyksbz1mdW5jdGlvbigpe3JldHVybiBvPU9iamVjdC5hc3NpZ258fGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTEscj1hcmd1bWVudHMubGVuZ3RoO248cjtuKyspZm9yKHZhciBpIGluIHQ9YXJndW1lbnRzW25dKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbCh0LGkpJiYoZVtpXT10W2ldKTtyZXR1cm4gZX0sby5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIGEoZSx0KXtpZighQm9vbGVhbihlKSl0aHJvdyBuZXcgRXJyb3IodCl9ZnVuY3Rpb24gYyhlLHQpe2lmKCFCb29sZWFuKGUpKXRocm93IG5ldyBFcnJvcihudWxsIT10P3Q6IlVuZXhwZWN0ZWQgaW52YXJpYW50IHRyaWdnZXJlZC4iKX1jb25zdCBsPS9cclxufFtcblxyXS9nO2Z1bmN0aW9uIHUoZSx0KXtsZXQgbj0wLHI9MTtmb3IoY29uc3QgaSBvZiBlLmJvZHkubWF0Y2hBbGwobCkpe2lmKCJudW1iZXIiPT10eXBlb2YgaS5pbmRleHx8YyghMSksaS5pbmRleD49dClicmVhaztuPWkuaW5kZXgraVswXS5sZW5ndGgscis9MX1yZXR1cm57bGluZTpyLGNvbHVtbjp0KzEtbn19ZnVuY3Rpb24gZChlLHQpe2NvbnN0IG49ZS5sb2NhdGlvbk9mZnNldC5jb2x1bW4tMSxyPSIiLnBhZFN0YXJ0KG4pK2UuYm9keSxpPXQubGluZS0xLHM9ZS5sb2NhdGlvbk9mZnNldC5saW5lLTEsbz10LmxpbmUrcyxhPTE9PT10LmxpbmU/bjowLGM9dC5jb2x1bW4rYSxsPWAke2UubmFtZX06JHtvfToke2N9XG5gLHU9ci5zcGxpdCgvXHJcbnxbXG5ccl0vZyksZD11W2ldO2lmKGQubGVuZ3RoPjEyMCl7Y29uc3QgZT1NYXRoLmZsb29yKGMvODApLHQ9YyU4MCxuPVtdO2ZvcihsZXQgcj0wO3I8ZC5sZW5ndGg7cis9ODApbi5wdXNoKGQuc2xpY2UocixyKzgwKSk7cmV0dXJuIGwrcChbW2Ake299IHxgLG5bMF1dLC4uLm4uc2xpY2UoMSxlKzEpLm1hcCgoZT0+WyJ8IixlXSkpLFsifCIsIl4iLnBhZFN0YXJ0KHQpXSxbInwiLG5bZSsxXV1dKX1yZXR1cm4gbCtwKFtbby0xKyIgfCIsdVtpLTFdXSxbYCR7b30gfGAsZF0sWyJ8IiwiXiIucGFkU3RhcnQoYyldLFtgJHtvKzF9IHxgLHVbaSsxXV1dKX1mdW5jdGlvbiBwKGUpe2NvbnN0IHQ9ZS5maWx0ZXIoKChbZSx0XSk9PnZvaWQgMCE9PXQpKSxuPU1hdGgubWF4KC4uLnQubWFwKCgoW2VdKT0+ZS5sZW5ndGgpKSk7cmV0dXJuIHQubWFwKCgoW2UsdF0pPT5lLnBhZFN0YXJ0KG4pKyh0PyIgIit0OiIiKSkpLmpvaW4oIlxuIil9Y2xhc3MgaCBleHRlbmRzIEVycm9ye2NvbnN0cnVjdG9yKGUsLi4udCl7dmFyIG4scixpO2NvbnN0e25vZGVzOnMsc291cmNlOm8scG9zaXRpb25zOmEscGF0aDpjLG9yaWdpbmFsRXJyb3I6bCxleHRlbnNpb25zOmR9PWZ1bmN0aW9uKGUpe2NvbnN0IHQ9ZVswXTtyZXR1cm4gbnVsbD09dHx8ImtpbmQiaW4gdHx8Imxlbmd0aCJpbiB0P3tub2Rlczp0LHNvdXJjZTplWzFdLHBvc2l0aW9uczplWzJdLHBhdGg6ZVszXSxvcmlnaW5hbEVycm9yOmVbNF0sZXh0ZW5zaW9uczplWzVdfTp0fSh0KTtzdXBlcihlKSx0aGlzLm5hbWU9IkdyYXBoUUxFcnJvciIsdGhpcy5wYXRoPW51bGwhPWM/Yzp2b2lkIDAsdGhpcy5vcmlnaW5hbEVycm9yPW51bGwhPWw/bDp2b2lkIDAsdGhpcy5ub2Rlcz1mKEFycmF5LmlzQXJyYXkocyk/czpzP1tzXTp2b2lkIDApO2NvbnN0IHA9ZihudWxsPT09KG49dGhpcy5ub2Rlcyl8fHZvaWQgMD09PW4/dm9pZCAwOm4ubWFwKChlPT5lLmxvYykpLmZpbHRlcigoZT0+bnVsbCE9ZSkpKTt0aGlzLnNvdXJjZT1udWxsIT1vP286bnVsbD09cHx8bnVsbD09PShyPXBbMF0pfHx2b2lkIDA9PT1yP3ZvaWQgMDpyLnNvdXJjZSx0aGlzLnBvc2l0aW9ucz1udWxsIT1hP2E6bnVsbD09cD92b2lkIDA6cC5tYXAoKGU9PmUuc3RhcnQpKSx0aGlzLmxvY2F0aW9ucz1hJiZvP2EubWFwKChlPT51KG8sZSkpKTpudWxsPT1wP3ZvaWQgMDpwLm1hcCgoZT0+dShlLnNvdXJjZSxlLnN0YXJ0KSkpO2NvbnN0IHk9Im9iamVjdCI9PXR5cGVvZihtPW51bGw9PWw/dm9pZCAwOmwuZXh0ZW5zaW9ucykmJm51bGwhPT1tP251bGw9PWw/dm9pZCAwOmwuZXh0ZW5zaW9uczp2b2lkIDA7dmFyIG07dGhpcy5leHRlbnNpb25zPW51bGwhPT0oaT1udWxsIT1kP2Q6eSkmJnZvaWQgMCE9PWk/aTpPYmplY3QuY3JlYXRlKG51bGwpLE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHRoaXMse21lc3NhZ2U6e3dyaXRhYmxlOiEwLGVudW1lcmFibGU6ITB9LG5hbWU6e2VudW1lcmFibGU6ITF9LG5vZGVzOntlbnVtZXJhYmxlOiExfSxzb3VyY2U6e2VudW1lcmFibGU6ITF9LHBvc2l0aW9uczp7ZW51bWVyYWJsZTohMX0sb3JpZ2luYWxFcnJvcjp7ZW51bWVyYWJsZTohMX19KSxudWxsIT1sJiZsLnN0YWNrP09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCJzdGFjayIse3ZhbHVlOmwuc3RhY2ssd3JpdGFibGU6ITAsY29uZmlndXJhYmxlOiEwfSk6RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2U/RXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcyxoKTpPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywic3RhY2siLHt2YWx1ZTpFcnJvcigpLnN0YWNrLHdyaXRhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMH0pfWdldFtTeW1ib2wudG9TdHJpbmdUYWddKCl7cmV0dXJuIkdyYXBoUUxFcnJvciJ9dG9TdHJpbmcoKXtsZXQgZT10aGlzLm1lc3NhZ2U7aWYodGhpcy5ub2Rlcylmb3IoY29uc3QgbiBvZiB0aGlzLm5vZGVzKW4ubG9jJiYoZSs9IlxuXG4iK2QoKHQ9bi5sb2MpLnNvdXJjZSx1KHQuc291cmNlLHQuc3RhcnQpKSk7ZWxzZSBpZih0aGlzLnNvdXJjZSYmdGhpcy5sb2NhdGlvbnMpZm9yKGNvbnN0IG4gb2YgdGhpcy5sb2NhdGlvbnMpZSs9IlxuXG4iK2QodGhpcy5zb3VyY2Usbik7dmFyIHQ7cmV0dXJuIGV9dG9KU09OKCl7Y29uc3QgZT17bWVzc2FnZTp0aGlzLm1lc3NhZ2V9O3JldHVybiBudWxsIT10aGlzLmxvY2F0aW9ucyYmKGUubG9jYXRpb25zPXRoaXMubG9jYXRpb25zKSxudWxsIT10aGlzLnBhdGgmJihlLnBhdGg9dGhpcy5wYXRoKSxudWxsIT10aGlzLmV4dGVuc2lvbnMmJk9iamVjdC5rZXlzKHRoaXMuZXh0ZW5zaW9ucykubGVuZ3RoPjAmJihlLmV4dGVuc2lvbnM9dGhpcy5leHRlbnNpb25zKSxlfX1mdW5jdGlvbiBmKGUpe3JldHVybiB2b2lkIDA9PT1lfHwwPT09ZS5sZW5ndGg/dm9pZCAwOmV9ZnVuY3Rpb24geShlLHQsbil7cmV0dXJuIG5ldyBoKGBTeW50YXggRXJyb3I6ICR7bn1gLHtzb3VyY2U6ZSxwb3NpdGlvbnM6W3RdfSl9Y2xhc3MgbXtjb25zdHJ1Y3RvcihlLHQsbil7dGhpcy5zdGFydD1lLnN0YXJ0LHRoaXMuZW5kPXQuZW5kLHRoaXMuc3RhcnRUb2tlbj1lLHRoaXMuZW5kVG9rZW49dCx0aGlzLnNvdXJjZT1ufWdldFtTeW1ib2wudG9TdHJpbmdUYWddKCl7cmV0dXJuIkxvY2F0aW9uIn10b0pTT04oKXtyZXR1cm57c3RhcnQ6dGhpcy5zdGFydCxlbmQ6dGhpcy5lbmR9fX1jbGFzcyB2e2NvbnN0cnVjdG9yKGUsdCxuLHIsaSxzKXt0aGlzLmtpbmQ9ZSx0aGlzLnN0YXJ0PXQsdGhpcy5lbmQ9bix0aGlzLmxpbmU9cix0aGlzLmNvbHVtbj1pLHRoaXMudmFsdWU9cyx0aGlzLnByZXY9bnVsbCx0aGlzLm5leHQ9bnVsbH1nZXRbU3ltYm9sLnRvU3RyaW5nVGFnXSgpe3JldHVybiJUb2tlbiJ9dG9KU09OKCl7cmV0dXJue2tpbmQ6dGhpcy5raW5kLHZhbHVlOnRoaXMudmFsdWUsbGluZTp0aGlzLmxpbmUsY29sdW1uOnRoaXMuY29sdW1ufX19Y29uc3QgXz17TmFtZTpbXSxEb2N1bWVudDpbImRlZmluaXRpb25zIl0sT3BlcmF0aW9uRGVmaW5pdGlvbjpbIm5hbWUiLCJ2YXJpYWJsZURlZmluaXRpb25zIiwiZGlyZWN0aXZlcyIsInNlbGVjdGlvblNldCJdLFZhcmlhYmxlRGVmaW5pdGlvbjpbInZhcmlhYmxlIiwidHlwZSIsImRlZmF1bHRWYWx1ZSIsImRpcmVjdGl2ZXMiXSxWYXJpYWJsZTpbIm5hbWUiXSxTZWxlY3Rpb25TZXQ6WyJzZWxlY3Rpb25zIl0sRmllbGQ6WyJhbGlhcyIsIm5hbWUiLCJhcmd1bWVudHMiLCJkaXJlY3RpdmVzIiwic2VsZWN0aW9uU2V0Il0sQXJndW1lbnQ6WyJuYW1lIiwidmFsdWUiXSxGcmFnbWVudFNwcmVhZDpbIm5hbWUiLCJkaXJlY3RpdmVzIl0sSW5saW5lRnJhZ21lbnQ6WyJ0eXBlQ29uZGl0aW9uIiwiZGlyZWN0aXZlcyIsInNlbGVjdGlvblNldCJdLEZyYWdtZW50RGVmaW5pdGlvbjpbIm5hbWUiLCJ2YXJpYWJsZURlZmluaXRpb25zIiwidHlwZUNvbmRpdGlvbiIsImRpcmVjdGl2ZXMiLCJzZWxlY3Rpb25TZXQiXSxJbnRWYWx1ZTpbXSxGbG9hdFZhbHVlOltdLFN0cmluZ1ZhbHVlOltdLEJvb2xlYW5WYWx1ZTpbXSxOdWxsVmFsdWU6W10sRW51bVZhbHVlOltdLExpc3RWYWx1ZTpbInZhbHVlcyJdLE9iamVjdFZhbHVlOlsiZmllbGRzIl0sT2JqZWN0RmllbGQ6WyJuYW1lIiwidmFsdWUiXSxEaXJlY3RpdmU6WyJuYW1lIiwiYXJndW1lbnRzIl0sTmFtZWRUeXBlOlsibmFtZSJdLExpc3RUeXBlOlsidHlwZSJdLE5vbk51bGxUeXBlOlsidHlwZSJdLFNjaGVtYURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsImRpcmVjdGl2ZXMiLCJvcGVyYXRpb25UeXBlcyJdLE9wZXJhdGlvblR5cGVEZWZpbml0aW9uOlsidHlwZSJdLFNjYWxhclR5cGVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiZGlyZWN0aXZlcyJdLE9iamVjdFR5cGVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiaW50ZXJmYWNlcyIsImRpcmVjdGl2ZXMiLCJmaWVsZHMiXSxGaWVsZERlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJhcmd1bWVudHMiLCJ0eXBlIiwiZGlyZWN0aXZlcyJdLElucHV0VmFsdWVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwidHlwZSIsImRlZmF1bHRWYWx1ZSIsImRpcmVjdGl2ZXMiXSxJbnRlcmZhY2VUeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImludGVyZmFjZXMiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sVW5pb25UeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImRpcmVjdGl2ZXMiLCJ0eXBlcyJdLEVudW1UeXBlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImRpcmVjdGl2ZXMiLCJ2YWx1ZXMiXSxFbnVtVmFsdWVEZWZpbml0aW9uOlsiZGVzY3JpcHRpb24iLCJuYW1lIiwiZGlyZWN0aXZlcyJdLElucHV0T2JqZWN0VHlwZURlZmluaXRpb246WyJkZXNjcmlwdGlvbiIsIm5hbWUiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sRGlyZWN0aXZlRGVmaW5pdGlvbjpbImRlc2NyaXB0aW9uIiwibmFtZSIsImFyZ3VtZW50cyIsImxvY2F0aW9ucyJdLFNjaGVtYUV4dGVuc2lvbjpbImRpcmVjdGl2ZXMiLCJvcGVyYXRpb25UeXBlcyJdLFNjYWxhclR5cGVFeHRlbnNpb246WyJuYW1lIiwiZGlyZWN0aXZlcyJdLE9iamVjdFR5cGVFeHRlbnNpb246WyJuYW1lIiwiaW50ZXJmYWNlcyIsImRpcmVjdGl2ZXMiLCJmaWVsZHMiXSxJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uOlsibmFtZSIsImludGVyZmFjZXMiLCJkaXJlY3RpdmVzIiwiZmllbGRzIl0sVW5pb25UeXBlRXh0ZW5zaW9uOlsibmFtZSIsImRpcmVjdGl2ZXMiLCJ0eXBlcyJdLEVudW1UeXBlRXh0ZW5zaW9uOlsibmFtZSIsImRpcmVjdGl2ZXMiLCJ2YWx1ZXMiXSxJbnB1dE9iamVjdFR5cGVFeHRlbnNpb246WyJuYW1lIiwiZGlyZWN0aXZlcyIsImZpZWxkcyJdfSxnPW5ldyBTZXQoT2JqZWN0LmtleXMoXykpO2Z1bmN0aW9uIEUoZSl7Y29uc3QgdD1udWxsPT1lP3ZvaWQgMDplLmtpbmQ7cmV0dXJuInN0cmluZyI9PXR5cGVvZiB0JiZnLmhhcyh0KX12YXIgVCxiLE4sSSxPLEEseCxTO2Z1bmN0aW9uIEQoZSl7cmV0dXJuIDk9PT1lfHwzMj09PWV9ZnVuY3Rpb24gdyhlKXtyZXR1cm4gZT49NDgmJmU8PTU3fWZ1bmN0aW9uIGsoZSl7cmV0dXJuIGU+PTk3JiZlPD0xMjJ8fGU+PTY1JiZlPD05MH1mdW5jdGlvbiBDKGUpe3JldHVybiBrKGUpfHw5NT09PWV9ZnVuY3Rpb24gUChlKXtyZXR1cm4gayhlKXx8dyhlKXx8OTU9PT1lfWZ1bmN0aW9uIFIoZSl7dmFyIHQ7bGV0IG49TnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIscj1udWxsLGk9LTE7Zm9yKGxldCBvPTA7bzxlLmxlbmd0aDsrK28pe3ZhciBzO2NvbnN0IHQ9ZVtvXSxhPUwodCk7YSE9PXQubGVuZ3RoJiYocj1udWxsIT09KHM9cikmJnZvaWQgMCE9PXM/czpvLGk9bywwIT09byYmYTxuJiYobj1hKSl9cmV0dXJuIGUubWFwKCgoZSx0KT0+MD09PXQ/ZTplLnNsaWNlKG4pKSkuc2xpY2UobnVsbCE9PSh0PXIpJiZ2b2lkIDAhPT10P3Q6MCxpKzEpfWZ1bmN0aW9uIEwoZSl7bGV0IHQ9MDtmb3IoO3Q8ZS5sZW5ndGgmJkQoZS5jaGFyQ29kZUF0KHQpKTspKyt0O3JldHVybiB0fShiPVR8fChUPXt9KSkuUVVFUlk9InF1ZXJ5IixiLk1VVEFUSU9OPSJtdXRhdGlvbiIsYi5TVUJTQ1JJUFRJT049InN1YnNjcmlwdGlvbiIsKEk9Tnx8KE49e30pKS5RVUVSWT0iUVVFUlkiLEkuTVVUQVRJT049Ik1VVEFUSU9OIixJLlNVQlNDUklQVElPTj0iU1VCU0NSSVBUSU9OIixJLkZJRUxEPSJGSUVMRCIsSS5GUkFHTUVOVF9ERUZJTklUSU9OPSJGUkFHTUVOVF9ERUZJTklUSU9OIixJLkZSQUdNRU5UX1NQUkVBRD0iRlJBR01FTlRfU1BSRUFEIixJLklOTElORV9GUkFHTUVOVD0iSU5MSU5FX0ZSQUdNRU5UIixJLlZBUklBQkxFX0RFRklOSVRJT049IlZBUklBQkxFX0RFRklOSVRJT04iLEkuU0NIRU1BPSJTQ0hFTUEiLEkuU0NBTEFSPSJTQ0FMQVIiLEkuT0JKRUNUPSJPQkpFQ1QiLEkuRklFTERfREVGSU5JVElPTj0iRklFTERfREVGSU5JVElPTiIsSS5BUkdVTUVOVF9ERUZJTklUSU9OPSJBUkdVTUVOVF9ERUZJTklUSU9OIixJLklOVEVSRkFDRT0iSU5URVJGQUNFIixJLlVOSU9OPSJVTklPTiIsSS5FTlVNPSJFTlVNIixJLkVOVU1fVkFMVUU9IkVOVU1fVkFMVUUiLEkuSU5QVVRfT0JKRUNUPSJJTlBVVF9PQkpFQ1QiLEkuSU5QVVRfRklFTERfREVGSU5JVElPTj0iSU5QVVRfRklFTERfREVGSU5JVElPTiIsKEE9T3x8KE89e30pKS5OQU1FPSJOYW1lIixBLkRPQ1VNRU5UPSJEb2N1bWVudCIsQS5PUEVSQVRJT05fREVGSU5JVElPTj0iT3BlcmF0aW9uRGVmaW5pdGlvbiIsQS5WQVJJQUJMRV9ERUZJTklUSU9OPSJWYXJpYWJsZURlZmluaXRpb24iLEEuU0VMRUNUSU9OX1NFVD0iU2VsZWN0aW9uU2V0IixBLkZJRUxEPSJGaWVsZCIsQS5BUkdVTUVOVD0iQXJndW1lbnQiLEEuRlJBR01FTlRfU1BSRUFEPSJGcmFnbWVudFNwcmVhZCIsQS5JTkxJTkVfRlJBR01FTlQ9IklubGluZUZyYWdtZW50IixBLkZSQUdNRU5UX0RFRklOSVRJT049IkZyYWdtZW50RGVmaW5pdGlvbiIsQS5WQVJJQUJMRT0iVmFyaWFibGUiLEEuSU5UPSJJbnRWYWx1ZSIsQS5GTE9BVD0iRmxvYXRWYWx1ZSIsQS5TVFJJTkc9IlN0cmluZ1ZhbHVlIixBLkJPT0xFQU49IkJvb2xlYW5WYWx1ZSIsQS5OVUxMPSJOdWxsVmFsdWUiLEEuRU5VTT0iRW51bVZhbHVlIixBLkxJU1Q9Ikxpc3RWYWx1ZSIsQS5PQkpFQ1Q9Ik9iamVjdFZhbHVlIixBLk9CSkVDVF9GSUVMRD0iT2JqZWN0RmllbGQiLEEuRElSRUNUSVZFPSJEaXJlY3RpdmUiLEEuTkFNRURfVFlQRT0iTmFtZWRUeXBlIixBLkxJU1RfVFlQRT0iTGlzdFR5cGUiLEEuTk9OX05VTExfVFlQRT0iTm9uTnVsbFR5cGUiLEEuU0NIRU1BX0RFRklOSVRJT049IlNjaGVtYURlZmluaXRpb24iLEEuT1BFUkFUSU9OX1RZUEVfREVGSU5JVElPTj0iT3BlcmF0aW9uVHlwZURlZmluaXRpb24iLEEuU0NBTEFSX1RZUEVfREVGSU5JVElPTj0iU2NhbGFyVHlwZURlZmluaXRpb24iLEEuT0JKRUNUX1RZUEVfREVGSU5JVElPTj0iT2JqZWN0VHlwZURlZmluaXRpb24iLEEuRklFTERfREVGSU5JVElPTj0iRmllbGREZWZpbml0aW9uIixBLklOUFVUX1ZBTFVFX0RFRklOSVRJT049IklucHV0VmFsdWVEZWZpbml0aW9uIixBLklOVEVSRkFDRV9UWVBFX0RFRklOSVRJT049IkludGVyZmFjZVR5cGVEZWZpbml0aW9uIixBLlVOSU9OX1RZUEVfREVGSU5JVElPTj0iVW5pb25UeXBlRGVmaW5pdGlvbiIsQS5FTlVNX1RZUEVfREVGSU5JVElPTj0iRW51bVR5cGVEZWZpbml0aW9uIixBLkVOVU1fVkFMVUVfREVGSU5JVElPTj0iRW51bVZhbHVlRGVmaW5pdGlvbiIsQS5JTlBVVF9PQkpFQ1RfVFlQRV9ERUZJTklUSU9OPSJJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uIixBLkRJUkVDVElWRV9ERUZJTklUSU9OPSJEaXJlY3RpdmVEZWZpbml0aW9uIixBLlNDSEVNQV9FWFRFTlNJT049IlNjaGVtYUV4dGVuc2lvbiIsQS5TQ0FMQVJfVFlQRV9FWFRFTlNJT049IlNjYWxhclR5cGVFeHRlbnNpb24iLEEuT0JKRUNUX1RZUEVfRVhURU5TSU9OPSJPYmplY3RUeXBlRXh0ZW5zaW9uIixBLklOVEVSRkFDRV9UWVBFX0VYVEVOU0lPTj0iSW50ZXJmYWNlVHlwZUV4dGVuc2lvbiIsQS5VTklPTl9UWVBFX0VYVEVOU0lPTj0iVW5pb25UeXBlRXh0ZW5zaW9uIixBLkVOVU1fVFlQRV9FWFRFTlNJT049IkVudW1UeXBlRXh0ZW5zaW9uIixBLklOUFVUX09CSkVDVF9UWVBFX0VYVEVOU0lPTj0iSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uIiwoUz14fHwoeD17fSkpLlNPRj0iPFNPRj4iLFMuRU9GPSI8RU9GPiIsUy5CQU5HPSIhIixTLkRPTExBUj0iJCIsUy5BTVA9IiYiLFMuUEFSRU5fTD0iKCIsUy5QQVJFTl9SPSIpIixTLlNQUkVBRD0iLi4uIixTLkNPTE9OPSI6IixTLkVRVUFMUz0iPSIsUy5BVD0iQCIsUy5CUkFDS0VUX0w9IlsiLFMuQlJBQ0tFVF9SPSJdIixTLkJSQUNFX0w9InsiLFMuUElQRT0ifCIsUy5CUkFDRV9SPSJ9IixTLk5BTUU9Ik5hbWUiLFMuSU5UPSJJbnQiLFMuRkxPQVQ9IkZsb2F0IixTLlNUUklORz0iU3RyaW5nIixTLkJMT0NLX1NUUklORz0iQmxvY2tTdHJpbmciLFMuQ09NTUVOVD0iQ29tbWVudCI7Y2xhc3MgRntjb25zdHJ1Y3RvcihlKXtjb25zdCB0PW5ldyB2KHguU09GLDAsMCwwLDApO3RoaXMuc291cmNlPWUsdGhpcy5sYXN0VG9rZW49dCx0aGlzLnRva2VuPXQsdGhpcy5saW5lPTEsdGhpcy5saW5lU3RhcnQ9MH1nZXRbU3ltYm9sLnRvU3RyaW5nVGFnXSgpe3JldHVybiJMZXhlciJ9YWR2YW5jZSgpe3RoaXMubGFzdFRva2VuPXRoaXMudG9rZW47cmV0dXJuIHRoaXMudG9rZW49dGhpcy5sb29rYWhlYWQoKX1sb29rYWhlYWQoKXtsZXQgZT10aGlzLnRva2VuO2lmKGUua2luZCE9PXguRU9GKWRve2lmKGUubmV4dCllPWUubmV4dDtlbHNle2NvbnN0IHQ9cSh0aGlzLGUuZW5kKTtlLm5leHQ9dCx0LnByZXY9ZSxlPXR9fXdoaWxlKGUua2luZD09PXguQ09NTUVOVCk7cmV0dXJuIGV9fWZ1bmN0aW9uICQoZSl7cmV0dXJuIGU+PTAmJmU8PTU1Mjk1fHxlPj01NzM0NCYmZTw9MTExNDExMX1mdW5jdGlvbiBNKGUsdCl7cmV0dXJuIFYoZS5jaGFyQ29kZUF0KHQpKSYmQihlLmNoYXJDb2RlQXQodCsxKSl9ZnVuY3Rpb24gVihlKXtyZXR1cm4gZT49NTUyOTYmJmU8PTU2MzE5fWZ1bmN0aW9uIEIoZSl7cmV0dXJuIGU+PTU2MzIwJiZlPD01NzM0M31mdW5jdGlvbiBqKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LmNvZGVQb2ludEF0KHQpO2lmKHZvaWQgMD09PW4pcmV0dXJuIHguRU9GO2lmKG4+PTMyJiZuPD0xMjYpe2NvbnN0IGU9U3RyaW5nLmZyb21Db2RlUG9pbnQobik7cmV0dXJuJyInPT09ZT8iJ1wiJyI6YCIke2V9ImB9cmV0dXJuIlUrIituLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLnBhZFN0YXJ0KDQsIjAiKX1mdW5jdGlvbiBVKGUsdCxuLHIsaSl7Y29uc3Qgcz1lLmxpbmUsbz0xK24tZS5saW5lU3RhcnQ7cmV0dXJuIG5ldyB2KHQsbixyLHMsbyxpKX1mdW5jdGlvbiBxKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9bi5sZW5ndGg7bGV0IGk9dDtmb3IoO2k8cjspe2NvbnN0IHQ9bi5jaGFyQ29kZUF0KGkpO3N3aXRjaCh0KXtjYXNlIDY1Mjc5OmNhc2UgOTpjYXNlIDMyOmNhc2UgNDQ6KytpO2NvbnRpbnVlO2Nhc2UgMTA6KytpLCsrZS5saW5lLGUubGluZVN0YXJ0PWk7Y29udGludWU7Y2FzZSAxMzoxMD09PW4uY2hhckNvZGVBdChpKzEpP2krPTI6KytpLCsrZS5saW5lLGUubGluZVN0YXJ0PWk7Y29udGludWU7Y2FzZSAzNTpyZXR1cm4gSyhlLGkpO2Nhc2UgMzM6cmV0dXJuIFUoZSx4LkJBTkcsaSxpKzEpO2Nhc2UgMzY6cmV0dXJuIFUoZSx4LkRPTExBUixpLGkrMSk7Y2FzZSAzODpyZXR1cm4gVShlLHguQU1QLGksaSsxKTtjYXNlIDQwOnJldHVybiBVKGUseC5QQVJFTl9MLGksaSsxKTtjYXNlIDQxOnJldHVybiBVKGUseC5QQVJFTl9SLGksaSsxKTtjYXNlIDQ2OmlmKDQ2PT09bi5jaGFyQ29kZUF0KGkrMSkmJjQ2PT09bi5jaGFyQ29kZUF0KGkrMikpcmV0dXJuIFUoZSx4LlNQUkVBRCxpLGkrMyk7YnJlYWs7Y2FzZSA1ODpyZXR1cm4gVShlLHguQ09MT04saSxpKzEpO2Nhc2UgNjE6cmV0dXJuIFUoZSx4LkVRVUFMUyxpLGkrMSk7Y2FzZSA2NDpyZXR1cm4gVShlLHguQVQsaSxpKzEpO2Nhc2UgOTE6cmV0dXJuIFUoZSx4LkJSQUNLRVRfTCxpLGkrMSk7Y2FzZSA5MzpyZXR1cm4gVShlLHguQlJBQ0tFVF9SLGksaSsxKTtjYXNlIDEyMzpyZXR1cm4gVShlLHguQlJBQ0VfTCxpLGkrMSk7Y2FzZSAxMjQ6cmV0dXJuIFUoZSx4LlBJUEUsaSxpKzEpO2Nhc2UgMTI1OnJldHVybiBVKGUseC5CUkFDRV9SLGksaSsxKTtjYXNlIDM0OnJldHVybiAzND09PW4uY2hhckNvZGVBdChpKzEpJiYzND09PW4uY2hhckNvZGVBdChpKzIpP1ooZSxpKTpZKGUsaSl9aWYodyh0KXx8NDU9PT10KXJldHVybiBHKGUsaSx0KTtpZihDKHQpKXJldHVybiBlZShlLGkpO3Rocm93IHkoZS5zb3VyY2UsaSwzOT09PXQ/IlVuZXhwZWN0ZWQgc2luZ2xlIHF1b3RlIGNoYXJhY3RlciAoJyksIGRpZCB5b3UgbWVhbiB0byB1c2UgYSBkb3VibGUgcXVvdGUgKFwiKT8iOiQodCl8fE0obixpKT9gVW5leHBlY3RlZCBjaGFyYWN0ZXI6ICR7aihlLGkpfS5gOmBJbnZhbGlkIGNoYXJhY3RlcjogJHtqKGUsaSl9LmApfXJldHVybiBVKGUseC5FT0YscixyKX1mdW5jdGlvbiBLKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9bi5sZW5ndGg7bGV0IGk9dCsxO2Zvcig7aTxyOyl7Y29uc3QgZT1uLmNoYXJDb2RlQXQoaSk7aWYoMTA9PT1lfHwxMz09PWUpYnJlYWs7aWYoJChlKSkrK2k7ZWxzZXtpZighTShuLGkpKWJyZWFrO2krPTJ9fXJldHVybiBVKGUseC5DT01NRU5ULHQsaSxuLnNsaWNlKHQrMSxpKSl9ZnVuY3Rpb24gRyhlLHQsbil7Y29uc3Qgcj1lLnNvdXJjZS5ib2R5O2xldCBpPXQscz1uLG89ITE7aWYoNDU9PT1zJiYocz1yLmNoYXJDb2RlQXQoKytpKSksNDg9PT1zKXtpZihzPXIuY2hhckNvZGVBdCgrK2kpLHcocykpdGhyb3cgeShlLnNvdXJjZSxpLGBJbnZhbGlkIG51bWJlciwgdW5leHBlY3RlZCBkaWdpdCBhZnRlciAwOiAke2ooZSxpKX0uYCl9ZWxzZSBpPXooZSxpLHMpLHM9ci5jaGFyQ29kZUF0KGkpO2lmKDQ2PT09cyYmKG89ITAscz1yLmNoYXJDb2RlQXQoKytpKSxpPXooZSxpLHMpLHM9ci5jaGFyQ29kZUF0KGkpKSw2OSE9PXMmJjEwMSE9PXN8fChvPSEwLHM9ci5jaGFyQ29kZUF0KCsraSksNDMhPT1zJiY0NSE9PXN8fChzPXIuY2hhckNvZGVBdCgrK2kpKSxpPXooZSxpLHMpLHM9ci5jaGFyQ29kZUF0KGkpKSw0Nj09PXN8fEMocykpdGhyb3cgeShlLnNvdXJjZSxpLGBJbnZhbGlkIG51bWJlciwgZXhwZWN0ZWQgZGlnaXQgYnV0IGdvdDogJHtqKGUsaSl9LmApO3JldHVybiBVKGUsbz94LkZMT0FUOnguSU5ULHQsaSxyLnNsaWNlKHQsaSkpfWZ1bmN0aW9uIHooZSx0LG4pe2lmKCF3KG4pKXRocm93IHkoZS5zb3VyY2UsdCxgSW52YWxpZCBudW1iZXIsIGV4cGVjdGVkIGRpZ2l0IGJ1dCBnb3Q6ICR7aihlLHQpfS5gKTtjb25zdCByPWUuc291cmNlLmJvZHk7bGV0IGk9dCsxO2Zvcig7dyhyLmNoYXJDb2RlQXQoaSkpOykrK2k7cmV0dXJuIGl9ZnVuY3Rpb24gWShlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keSxyPW4ubGVuZ3RoO2xldCBpPXQrMSxzPWksbz0iIjtmb3IoO2k8cjspe2NvbnN0IHI9bi5jaGFyQ29kZUF0KGkpO2lmKDM0PT09cilyZXR1cm4gbys9bi5zbGljZShzLGkpLFUoZSx4LlNUUklORyx0LGkrMSxvKTtpZig5MiE9PXIpe2lmKDEwPT09cnx8MTM9PT1yKWJyZWFrO2lmKCQocikpKytpO2Vsc2V7aWYoIU0obixpKSl0aHJvdyB5KGUuc291cmNlLGksYEludmFsaWQgY2hhcmFjdGVyIHdpdGhpbiBTdHJpbmc6ICR7aihlLGkpfS5gKTtpKz0yfX1lbHNle28rPW4uc2xpY2UocyxpKTtjb25zdCB0PTExNz09PW4uY2hhckNvZGVBdChpKzEpPzEyMz09PW4uY2hhckNvZGVBdChpKzIpP0goZSxpKTpKKGUsaSk6VyhlLGkpO28rPXQudmFsdWUsaSs9dC5zaXplLHM9aX19dGhyb3cgeShlLnNvdXJjZSxpLCJVbnRlcm1pbmF0ZWQgc3RyaW5nLiIpfWZ1bmN0aW9uIEgoZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHk7bGV0IHI9MCxpPTM7Zm9yKDtpPDEyOyl7Y29uc3QgZT1uLmNoYXJDb2RlQXQodCtpKyspO2lmKDEyNT09PWUpe2lmKGk8NXx8ISQocikpYnJlYWs7cmV0dXJue3ZhbHVlOlN0cmluZy5mcm9tQ29kZVBvaW50KHIpLHNpemU6aX19aWYocj1yPDw0fFgoZSkscjwwKWJyZWFrfXRocm93IHkoZS5zb3VyY2UsdCxgSW52YWxpZCBVbmljb2RlIGVzY2FwZSBzZXF1ZW5jZTogIiR7bi5zbGljZSh0LHQraSl9Ii5gKX1mdW5jdGlvbiBKKGUsdCl7Y29uc3Qgbj1lLnNvdXJjZS5ib2R5LHI9UShuLHQrMik7aWYoJChyKSlyZXR1cm57dmFsdWU6U3RyaW5nLmZyb21Db2RlUG9pbnQociksc2l6ZTo2fTtpZihWKHIpJiY5Mj09PW4uY2hhckNvZGVBdCh0KzYpJiYxMTc9PT1uLmNoYXJDb2RlQXQodCs3KSl7Y29uc3QgZT1RKG4sdCs4KTtpZihCKGUpKXJldHVybnt2YWx1ZTpTdHJpbmcuZnJvbUNvZGVQb2ludChyLGUpLHNpemU6MTJ9fXRocm93IHkoZS5zb3VyY2UsdCxgSW52YWxpZCBVbmljb2RlIGVzY2FwZSBzZXF1ZW5jZTogIiR7bi5zbGljZSh0LHQrNil9Ii5gKX1mdW5jdGlvbiBRKGUsdCl7cmV0dXJuIFgoZS5jaGFyQ29kZUF0KHQpKTw8MTJ8WChlLmNoYXJDb2RlQXQodCsxKSk8PDh8WChlLmNoYXJDb2RlQXQodCsyKSk8PDR8WChlLmNoYXJDb2RlQXQodCszKSl9ZnVuY3Rpb24gWChlKXtyZXR1cm4gZT49NDgmJmU8PTU3P2UtNDg6ZT49NjUmJmU8PTcwP2UtNTU6ZT49OTcmJmU8PTEwMj9lLTg3Oi0xfWZ1bmN0aW9uIFcoZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHk7c3dpdGNoKG4uY2hhckNvZGVBdCh0KzEpKXtjYXNlIDM0OnJldHVybnt2YWx1ZTonIicsc2l6ZToyfTtjYXNlIDkyOnJldHVybnt2YWx1ZToiXFwiLHNpemU6Mn07Y2FzZSA0NzpyZXR1cm57dmFsdWU6Ii8iLHNpemU6Mn07Y2FzZSA5ODpyZXR1cm57dmFsdWU6IlxiIixzaXplOjJ9O2Nhc2UgMTAyOnJldHVybnt2YWx1ZToiXGYiLHNpemU6Mn07Y2FzZSAxMTA6cmV0dXJue3ZhbHVlOiJcbiIsc2l6ZToyfTtjYXNlIDExNDpyZXR1cm57dmFsdWU6IlxyIixzaXplOjJ9O2Nhc2UgMTE2OnJldHVybnt2YWx1ZToiXHQiLHNpemU6Mn19dGhyb3cgeShlLnNvdXJjZSx0LGBJbnZhbGlkIGNoYXJhY3RlciBlc2NhcGUgc2VxdWVuY2U6ICIke24uc2xpY2UodCx0KzIpfSIuYCl9ZnVuY3Rpb24gWihlLHQpe2NvbnN0IG49ZS5zb3VyY2UuYm9keSxyPW4ubGVuZ3RoO2xldCBpPWUubGluZVN0YXJ0LHM9dCszLG89cyxhPSIiO2NvbnN0IGM9W107Zm9yKDtzPHI7KXtjb25zdCByPW4uY2hhckNvZGVBdChzKTtpZigzND09PXImJjM0PT09bi5jaGFyQ29kZUF0KHMrMSkmJjM0PT09bi5jaGFyQ29kZUF0KHMrMikpe2ErPW4uc2xpY2UobyxzKSxjLnB1c2goYSk7Y29uc3Qgcj1VKGUseC5CTE9DS19TVFJJTkcsdCxzKzMsUihjKS5qb2luKCJcbiIpKTtyZXR1cm4gZS5saW5lKz1jLmxlbmd0aC0xLGUubGluZVN0YXJ0PWkscn1pZig5MiE9PXJ8fDM0IT09bi5jaGFyQ29kZUF0KHMrMSl8fDM0IT09bi5jaGFyQ29kZUF0KHMrMil8fDM0IT09bi5jaGFyQ29kZUF0KHMrMykpaWYoMTAhPT1yJiYxMyE9PXIpaWYoJChyKSkrK3M7ZWxzZXtpZighTShuLHMpKXRocm93IHkoZS5zb3VyY2UscyxgSW52YWxpZCBjaGFyYWN0ZXIgd2l0aGluIFN0cmluZzogJHtqKGUscyl9LmApO3MrPTJ9ZWxzZSBhKz1uLnNsaWNlKG8scyksYy5wdXNoKGEpLDEzPT09ciYmMTA9PT1uLmNoYXJDb2RlQXQocysxKT9zKz0yOisrcyxhPSIiLG89cyxpPXM7ZWxzZSBhKz1uLnNsaWNlKG8scyksbz1zKzEscys9NH10aHJvdyB5KGUuc291cmNlLHMsIlVudGVybWluYXRlZCBzdHJpbmcuIil9ZnVuY3Rpb24gZWUoZSx0KXtjb25zdCBuPWUuc291cmNlLmJvZHkscj1uLmxlbmd0aDtsZXQgaT10KzE7Zm9yKDtpPHI7KXtpZighUChuLmNoYXJDb2RlQXQoaSkpKWJyZWFrOysraX1yZXR1cm4gVShlLHguTkFNRSx0LGksbi5zbGljZSh0LGkpKX1jb25zdCB0ZT0xMCxuZT0yO2Z1bmN0aW9uIHJlKGUpe3JldHVybiBpZShlLFtdKX1mdW5jdGlvbiBpZShlLHQpe3N3aXRjaCh0eXBlb2YgZSl7Y2FzZSJzdHJpbmciOnJldHVybiBKU09OLnN0cmluZ2lmeShlKTtjYXNlImZ1bmN0aW9uIjpyZXR1cm4gZS5uYW1lP2BbZnVuY3Rpb24gJHtlLm5hbWV9XWA6IltmdW5jdGlvbl0iO2Nhc2Uib2JqZWN0IjpyZXR1cm4gZnVuY3Rpb24oZSx0KXtpZihudWxsPT09ZSlyZXR1cm4ibnVsbCI7aWYodC5pbmNsdWRlcyhlKSlyZXR1cm4iW0NpcmN1bGFyXSI7Y29uc3Qgbj1bLi4udCxlXTtpZihmdW5jdGlvbihlKXtyZXR1cm4iZnVuY3Rpb24iPT10eXBlb2YgZS50b0pTT059KGUpKXtjb25zdCB0PWUudG9KU09OKCk7aWYodCE9PWUpcmV0dXJuInN0cmluZyI9PXR5cGVvZiB0P3Q6aWUodCxuKX1lbHNlIGlmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYoMD09PWUubGVuZ3RoKXJldHVybiJbXSI7aWYodC5sZW5ndGg+bmUpcmV0dXJuIltBcnJheV0iO2NvbnN0IG49TWF0aC5taW4odGUsZS5sZW5ndGgpLHI9ZS5sZW5ndGgtbixpPVtdO2ZvcihsZXQgcz0wO3M8bjsrK3MpaS5wdXNoKGllKGVbc10sdCkpOzE9PT1yP2kucHVzaCgiLi4uIDEgbW9yZSBpdGVtIik6cj4xJiZpLnB1c2goYC4uLiAke3J9IG1vcmUgaXRlbXNgKTtyZXR1cm4iWyIraS5qb2luKCIsICIpKyJdIn0oZSxuKTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtjb25zdCBuPU9iamVjdC5lbnRyaWVzKGUpO2lmKDA9PT1uLmxlbmd0aClyZXR1cm4ie30iO2lmKHQubGVuZ3RoPm5lKXJldHVybiJbIitmdW5jdGlvbihlKXtjb25zdCB0PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKS5yZXBsYWNlKC9eXFtvYmplY3QgLywiIikucmVwbGFjZSgvXSQvLCIiKTtpZigiT2JqZWN0Ij09PXQmJiJmdW5jdGlvbiI9PXR5cGVvZiBlLmNvbnN0cnVjdG9yKXtjb25zdCB0PWUuY29uc3RydWN0b3IubmFtZTtpZigic3RyaW5nIj09dHlwZW9mIHQmJiIiIT09dClyZXR1cm4gdH1yZXR1cm4gdH0oZSkrIl0iO2NvbnN0IHI9bi5tYXAoKChbZSxuXSk9PmUrIjogIitpZShuLHQpKSk7cmV0dXJuInsgIityLmpvaW4oIiwgIikrIiB9In0oZSxuKX0oZSx0KTtkZWZhdWx0OnJldHVybiBTdHJpbmcoZSl9fWNvbnN0IHNlPWdsb2JhbFRoaXMucHJvY2VzcyYmInByb2R1Y3Rpb24iPT09Z2xvYmFsVGhpcy5wcm9jZXNzLmVudi5OT0RFX0VOVj9mdW5jdGlvbihlLHQpe3JldHVybiBlIGluc3RhbmNlb2YgdH06ZnVuY3Rpb24oZSx0KXtpZihlIGluc3RhbmNlb2YgdClyZXR1cm4hMDtpZigib2JqZWN0Ij09dHlwZW9mIGUmJm51bGwhPT1lKXt2YXIgbjtjb25zdCByPXQucHJvdG90eXBlW1N5bWJvbC50b1N0cmluZ1RhZ107aWYocj09PShTeW1ib2wudG9TdHJpbmdUYWcgaW4gZT9lW1N5bWJvbC50b1N0cmluZ1RhZ106bnVsbD09PShuPWUuY29uc3RydWN0b3IpfHx2b2lkIDA9PT1uP3ZvaWQgMDpuLm5hbWUpKXtjb25zdCB0PXJlKGUpO3Rocm93IG5ldyBFcnJvcihgQ2Fubm90IHVzZSAke3J9ICIke3R9IiBmcm9tIGFub3RoZXIgbW9kdWxlIG9yIHJlYWxtLlxuXG5FbnN1cmUgdGhhdCB0aGVyZSBpcyBvbmx5IG9uZSBpbnN0YW5jZSBvZiAiZ3JhcGhxbCIgaW4gdGhlIG5vZGVfbW9kdWxlc1xuZGlyZWN0b3J5LiBJZiBkaWZmZXJlbnQgdmVyc2lvbnMgb2YgImdyYXBocWwiIGFyZSB0aGUgZGVwZW5kZW5jaWVzIG9mIG90aGVyXG5yZWxpZWQgb24gbW9kdWxlcywgdXNlICJyZXNvbHV0aW9ucyIgdG8gZW5zdXJlIG9ubHkgb25lIHZlcnNpb24gaXMgaW5zdGFsbGVkLlxuXG5odHRwczovL3lhcm5wa2cuY29tL2VuL2RvY3Mvc2VsZWN0aXZlLXZlcnNpb24tcmVzb2x1dGlvbnNcblxuRHVwbGljYXRlICJncmFwaHFsIiBtb2R1bGVzIGNhbm5vdCBiZSB1c2VkIGF0IHRoZSBzYW1lIHRpbWUgc2luY2UgZGlmZmVyZW50XG52ZXJzaW9ucyBtYXkgaGF2ZSBkaWZmZXJlbnQgY2FwYWJpbGl0aWVzIGFuZCBiZWhhdmlvci4gVGhlIGRhdGEgZnJvbSBvbmVcbnZlcnNpb24gdXNlZCBpbiB0aGUgZnVuY3Rpb24gZnJvbSBhbm90aGVyIGNvdWxkIHByb2R1Y2UgY29uZnVzaW5nIGFuZFxuc3B1cmlvdXMgcmVzdWx0cy5gKX19cmV0dXJuITF9O2NsYXNzIG9le2NvbnN0cnVjdG9yKGUsdD0iR3JhcGhRTCByZXF1ZXN0IixuPXtsaW5lOjEsY29sdW1uOjF9KXsic3RyaW5nIj09dHlwZW9mIGV8fGEoITEsYEJvZHkgbXVzdCBiZSBhIHN0cmluZy4gUmVjZWl2ZWQ6ICR7cmUoZSl9LmApLHRoaXMuYm9keT1lLHRoaXMubmFtZT10LHRoaXMubG9jYXRpb25PZmZzZXQ9bix0aGlzLmxvY2F0aW9uT2Zmc2V0LmxpbmU+MHx8YSghMSwibGluZSBpbiBsb2NhdGlvbk9mZnNldCBpcyAxLWluZGV4ZWQgYW5kIG11c3QgYmUgcG9zaXRpdmUuIiksdGhpcy5sb2NhdGlvbk9mZnNldC5jb2x1bW4+MHx8YSghMSwiY29sdW1uIGluIGxvY2F0aW9uT2Zmc2V0IGlzIDEtaW5kZXhlZCBhbmQgbXVzdCBiZSBwb3NpdGl2ZS4iKX1nZXRbU3ltYm9sLnRvU3RyaW5nVGFnXSgpe3JldHVybiJTb3VyY2UifX1mdW5jdGlvbiBhZShlLHQpe3JldHVybiBuZXcgY2UoZSx0KS5wYXJzZURvY3VtZW50KCl9Y2xhc3MgY2V7Y29uc3RydWN0b3IoZSx0PXt9KXtjb25zdCBuPWZ1bmN0aW9uKGUpe3JldHVybiBzZShlLG9lKX0oZSk/ZTpuZXcgb2UoZSk7dGhpcy5fbGV4ZXI9bmV3IEYobiksdGhpcy5fb3B0aW9ucz10LHRoaXMuX3Rva2VuQ291bnRlcj0wfXBhcnNlTmFtZSgpe2NvbnN0IGU9dGhpcy5leHBlY3RUb2tlbih4Lk5BTUUpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLk5BTUUsdmFsdWU6ZS52YWx1ZX0pfXBhcnNlRG9jdW1lbnQoKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLHtraW5kOk8uRE9DVU1FTlQsZGVmaW5pdGlvbnM6dGhpcy5tYW55KHguU09GLHRoaXMucGFyc2VEZWZpbml0aW9uLHguRU9GKX0pfXBhcnNlRGVmaW5pdGlvbigpe2lmKHRoaXMucGVlayh4LkJSQUNFX0wpKXJldHVybiB0aGlzLnBhcnNlT3BlcmF0aW9uRGVmaW5pdGlvbigpO2NvbnN0IGU9dGhpcy5wZWVrRGVzY3JpcHRpb24oKSx0PWU/dGhpcy5fbGV4ZXIubG9va2FoZWFkKCk6dGhpcy5fbGV4ZXIudG9rZW47aWYodC5raW5kPT09eC5OQU1FKXtzd2l0Y2godC52YWx1ZSl7Y2FzZSJzY2hlbWEiOnJldHVybiB0aGlzLnBhcnNlU2NoZW1hRGVmaW5pdGlvbigpO2Nhc2Uic2NhbGFyIjpyZXR1cm4gdGhpcy5wYXJzZVNjYWxhclR5cGVEZWZpbml0aW9uKCk7Y2FzZSJ0eXBlIjpyZXR1cm4gdGhpcy5wYXJzZU9iamVjdFR5cGVEZWZpbml0aW9uKCk7Y2FzZSJpbnRlcmZhY2UiOnJldHVybiB0aGlzLnBhcnNlSW50ZXJmYWNlVHlwZURlZmluaXRpb24oKTtjYXNlInVuaW9uIjpyZXR1cm4gdGhpcy5wYXJzZVVuaW9uVHlwZURlZmluaXRpb24oKTtjYXNlImVudW0iOnJldHVybiB0aGlzLnBhcnNlRW51bVR5cGVEZWZpbml0aW9uKCk7Y2FzZSJpbnB1dCI6cmV0dXJuIHRoaXMucGFyc2VJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uKCk7Y2FzZSJkaXJlY3RpdmUiOnJldHVybiB0aGlzLnBhcnNlRGlyZWN0aXZlRGVmaW5pdGlvbigpfWlmKGUpdGhyb3cgeSh0aGlzLl9sZXhlci5zb3VyY2UsdGhpcy5fbGV4ZXIudG9rZW4uc3RhcnQsIlVuZXhwZWN0ZWQgZGVzY3JpcHRpb24sIGRlc2NyaXB0aW9ucyBhcmUgc3VwcG9ydGVkIG9ubHkgb24gdHlwZSBkZWZpbml0aW9ucy4iKTtzd2l0Y2godC52YWx1ZSl7Y2FzZSJxdWVyeSI6Y2FzZSJtdXRhdGlvbiI6Y2FzZSJzdWJzY3JpcHRpb24iOnJldHVybiB0aGlzLnBhcnNlT3BlcmF0aW9uRGVmaW5pdGlvbigpO2Nhc2UiZnJhZ21lbnQiOnJldHVybiB0aGlzLnBhcnNlRnJhZ21lbnREZWZpbml0aW9uKCk7Y2FzZSJleHRlbmQiOnJldHVybiB0aGlzLnBhcnNlVHlwZVN5c3RlbUV4dGVuc2lvbigpfX10aHJvdyB0aGlzLnVuZXhwZWN0ZWQodCl9cGFyc2VPcGVyYXRpb25EZWZpbml0aW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjtpZih0aGlzLnBlZWsoeC5CUkFDRV9MKSlyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6Ty5PUEVSQVRJT05fREVGSU5JVElPTixvcGVyYXRpb246VC5RVUVSWSxuYW1lOnZvaWQgMCx2YXJpYWJsZURlZmluaXRpb25zOltdLGRpcmVjdGl2ZXM6W10sc2VsZWN0aW9uU2V0OnRoaXMucGFyc2VTZWxlY3Rpb25TZXQoKX0pO2NvbnN0IHQ9dGhpcy5wYXJzZU9wZXJhdGlvblR5cGUoKTtsZXQgbjtyZXR1cm4gdGhpcy5wZWVrKHguTkFNRSkmJihuPXRoaXMucGFyc2VOYW1lKCkpLHRoaXMubm9kZShlLHtraW5kOk8uT1BFUkFUSU9OX0RFRklOSVRJT04sb3BlcmF0aW9uOnQsbmFtZTpuLHZhcmlhYmxlRGVmaW5pdGlvbnM6dGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSl9cGFyc2VPcGVyYXRpb25UeXBlKCl7Y29uc3QgZT10aGlzLmV4cGVjdFRva2VuKHguTkFNRSk7c3dpdGNoKGUudmFsdWUpe2Nhc2UicXVlcnkiOnJldHVybiBULlFVRVJZO2Nhc2UibXV0YXRpb24iOnJldHVybiBULk1VVEFUSU9OO2Nhc2Uic3Vic2NyaXB0aW9uIjpyZXR1cm4gVC5TVUJTQ1JJUFRJT059dGhyb3cgdGhpcy51bmV4cGVjdGVkKGUpfXBhcnNlVmFyaWFibGVEZWZpbml0aW9ucygpe3JldHVybiB0aGlzLm9wdGlvbmFsTWFueSh4LlBBUkVOX0wsdGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbix4LlBBUkVOX1IpfXBhcnNlVmFyaWFibGVEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMubm9kZSh0aGlzLl9sZXhlci50b2tlbix7a2luZDpPLlZBUklBQkxFX0RFRklOSVRJT04sdmFyaWFibGU6dGhpcy5wYXJzZVZhcmlhYmxlKCksdHlwZToodGhpcy5leHBlY3RUb2tlbih4LkNPTE9OKSx0aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpKSxkZWZhdWx0VmFsdWU6dGhpcy5leHBlY3RPcHRpb25hbFRva2VuKHguRVFVQUxTKT90aGlzLnBhcnNlQ29uc3RWYWx1ZUxpdGVyYWwoKTp2b2lkIDAsZGlyZWN0aXZlczp0aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCl9KX1wYXJzZVZhcmlhYmxlKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjtyZXR1cm4gdGhpcy5leHBlY3RUb2tlbih4LkRPTExBUiksdGhpcy5ub2RlKGUse2tpbmQ6Ty5WQVJJQUJMRSxuYW1lOnRoaXMucGFyc2VOYW1lKCl9KX1wYXJzZVNlbGVjdGlvblNldCgpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6Ty5TRUxFQ1RJT05fU0VULHNlbGVjdGlvbnM6dGhpcy5tYW55KHguQlJBQ0VfTCx0aGlzLnBhcnNlU2VsZWN0aW9uLHguQlJBQ0VfUil9KX1wYXJzZVNlbGVjdGlvbigpe3JldHVybiB0aGlzLnBlZWsoeC5TUFJFQUQpP3RoaXMucGFyc2VGcmFnbWVudCgpOnRoaXMucGFyc2VGaWVsZCgpfXBhcnNlRmllbGQoKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZU5hbWUoKTtsZXQgbixyO3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oeC5DT0xPTik/KG49dCxyPXRoaXMucGFyc2VOYW1lKCkpOnI9dCx0aGlzLm5vZGUoZSx7a2luZDpPLkZJRUxELGFsaWFzOm4sbmFtZTpyLGFyZ3VtZW50czp0aGlzLnBhcnNlQXJndW1lbnRzKCExKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wZWVrKHguQlJBQ0VfTCk/dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpOnZvaWQgMH0pfXBhcnNlQXJndW1lbnRzKGUpe2NvbnN0IHQ9ZT90aGlzLnBhcnNlQ29uc3RBcmd1bWVudDp0aGlzLnBhcnNlQXJndW1lbnQ7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KHguUEFSRU5fTCx0LHguUEFSRU5fUil9cGFyc2VBcmd1bWVudChlPSExKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuLG49dGhpcy5wYXJzZU5hbWUoKTtyZXR1cm4gdGhpcy5leHBlY3RUb2tlbih4LkNPTE9OKSx0aGlzLm5vZGUodCx7a2luZDpPLkFSR1VNRU5ULG5hbWU6bix2YWx1ZTp0aGlzLnBhcnNlVmFsdWVMaXRlcmFsKGUpfSl9cGFyc2VDb25zdEFyZ3VtZW50KCl7cmV0dXJuIHRoaXMucGFyc2VBcmd1bWVudCghMCl9cGFyc2VGcmFnbWVudCgpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RUb2tlbih4LlNQUkVBRCk7Y29uc3QgdD10aGlzLmV4cGVjdE9wdGlvbmFsS2V5d29yZCgib24iKTtyZXR1cm4hdCYmdGhpcy5wZWVrKHguTkFNRSk/dGhpcy5ub2RlKGUse2tpbmQ6Ty5GUkFHTUVOVF9TUFJFQUQsbmFtZTp0aGlzLnBhcnNlRnJhZ21lbnROYW1lKCksZGlyZWN0aXZlczp0aGlzLnBhcnNlRGlyZWN0aXZlcyghMSl9KTp0aGlzLm5vZGUoZSx7a2luZDpPLklOTElORV9GUkFHTUVOVCx0eXBlQ29uZGl0aW9uOnQ/dGhpcy5wYXJzZU5hbWVkVHlwZSgpOnZvaWQgMCxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSl9cGFyc2VGcmFnbWVudERlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3JldHVybiB0aGlzLmV4cGVjdEtleXdvcmQoImZyYWdtZW50IiksITA9PT10aGlzLl9vcHRpb25zLmFsbG93TGVnYWN5RnJhZ21lbnRWYXJpYWJsZXM/dGhpcy5ub2RlKGUse2tpbmQ6Ty5GUkFHTUVOVF9ERUZJTklUSU9OLG5hbWU6dGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLHZhcmlhYmxlRGVmaW5pdGlvbnM6dGhpcy5wYXJzZVZhcmlhYmxlRGVmaW5pdGlvbnMoKSx0eXBlQ29uZGl0aW9uOih0aGlzLmV4cGVjdEtleXdvcmQoIm9uIiksdGhpcy5wYXJzZU5hbWVkVHlwZSgpKSxkaXJlY3RpdmVzOnRoaXMucGFyc2VEaXJlY3RpdmVzKCExKSxzZWxlY3Rpb25TZXQ6dGhpcy5wYXJzZVNlbGVjdGlvblNldCgpfSk6dGhpcy5ub2RlKGUse2tpbmQ6Ty5GUkFHTUVOVF9ERUZJTklUSU9OLG5hbWU6dGhpcy5wYXJzZUZyYWdtZW50TmFtZSgpLHR5cGVDb25kaXRpb246KHRoaXMuZXhwZWN0S2V5d29yZCgib24iKSx0aGlzLnBhcnNlTmFtZWRUeXBlKCkpLGRpcmVjdGl2ZXM6dGhpcy5wYXJzZURpcmVjdGl2ZXMoITEpLHNlbGVjdGlvblNldDp0aGlzLnBhcnNlU2VsZWN0aW9uU2V0KCl9KX1wYXJzZUZyYWdtZW50TmFtZSgpe2lmKCJvbiI9PT10aGlzLl9sZXhlci50b2tlbi52YWx1ZSl0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtyZXR1cm4gdGhpcy5wYXJzZU5hbWUoKX1wYXJzZVZhbHVlTGl0ZXJhbChlKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3N3aXRjaCh0LmtpbmQpe2Nhc2UgeC5CUkFDS0VUX0w6cmV0dXJuIHRoaXMucGFyc2VMaXN0KGUpO2Nhc2UgeC5CUkFDRV9MOnJldHVybiB0aGlzLnBhcnNlT2JqZWN0KGUpO2Nhc2UgeC5JTlQ6cmV0dXJuIHRoaXMuYWR2YW5jZUxleGVyKCksdGhpcy5ub2RlKHQse2tpbmQ6Ty5JTlQsdmFsdWU6dC52YWx1ZX0pO2Nhc2UgeC5GTE9BVDpyZXR1cm4gdGhpcy5hZHZhbmNlTGV4ZXIoKSx0aGlzLm5vZGUodCx7a2luZDpPLkZMT0FULHZhbHVlOnQudmFsdWV9KTtjYXNlIHguU1RSSU5HOmNhc2UgeC5CTE9DS19TVFJJTkc6cmV0dXJuIHRoaXMucGFyc2VTdHJpbmdMaXRlcmFsKCk7Y2FzZSB4Lk5BTUU6c3dpdGNoKHRoaXMuYWR2YW5jZUxleGVyKCksdC52YWx1ZSl7Y2FzZSJ0cnVlIjpyZXR1cm4gdGhpcy5ub2RlKHQse2tpbmQ6Ty5CT09MRUFOLHZhbHVlOiEwfSk7Y2FzZSJmYWxzZSI6cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOk8uQk9PTEVBTix2YWx1ZTohMX0pO2Nhc2UibnVsbCI6cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOk8uTlVMTH0pO2RlZmF1bHQ6cmV0dXJuIHRoaXMubm9kZSh0LHtraW5kOk8uRU5VTSx2YWx1ZTp0LnZhbHVlfSl9Y2FzZSB4LkRPTExBUjppZihlKXtpZih0aGlzLmV4cGVjdFRva2VuKHguRE9MTEFSKSx0aGlzLl9sZXhlci50b2tlbi5raW5kPT09eC5OQU1FKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLnZhbHVlO3Rocm93IHkodGhpcy5fbGV4ZXIuc291cmNlLHQuc3RhcnQsYFVuZXhwZWN0ZWQgdmFyaWFibGUgIiQke2V9IiBpbiBjb25zdGFudCB2YWx1ZS5gKX10aHJvdyB0aGlzLnVuZXhwZWN0ZWQodCl9cmV0dXJuIHRoaXMucGFyc2VWYXJpYWJsZSgpO2RlZmF1bHQ6dGhyb3cgdGhpcy51bmV4cGVjdGVkKCl9fXBhcnNlQ29uc3RWYWx1ZUxpdGVyYWwoKXtyZXR1cm4gdGhpcy5wYXJzZVZhbHVlTGl0ZXJhbCghMCl9cGFyc2VTdHJpbmdMaXRlcmFsKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjtyZXR1cm4gdGhpcy5hZHZhbmNlTGV4ZXIoKSx0aGlzLm5vZGUoZSx7a2luZDpPLlNUUklORyx2YWx1ZTplLnZhbHVlLGJsb2NrOmUua2luZD09PXguQkxPQ0tfU1RSSU5HfSl9cGFyc2VMaXN0KGUpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6Ty5MSVNULHZhbHVlczp0aGlzLmFueSh4LkJSQUNLRVRfTCwoKCk9PnRoaXMucGFyc2VWYWx1ZUxpdGVyYWwoZSkpLHguQlJBQ0tFVF9SKX0pfXBhcnNlT2JqZWN0KGUpe3JldHVybiB0aGlzLm5vZGUodGhpcy5fbGV4ZXIudG9rZW4se2tpbmQ6Ty5PQkpFQ1QsZmllbGRzOnRoaXMuYW55KHguQlJBQ0VfTCwoKCk9PnRoaXMucGFyc2VPYmplY3RGaWVsZChlKSkseC5CUkFDRV9SKX0pfXBhcnNlT2JqZWN0RmllbGQoZSl7Y29uc3QgdD10aGlzLl9sZXhlci50b2tlbixuPXRoaXMucGFyc2VOYW1lKCk7cmV0dXJuIHRoaXMuZXhwZWN0VG9rZW4oeC5DT0xPTiksdGhpcy5ub2RlKHQse2tpbmQ6Ty5PQkpFQ1RfRklFTEQsbmFtZTpuLHZhbHVlOnRoaXMucGFyc2VWYWx1ZUxpdGVyYWwoZSl9KX1wYXJzZURpcmVjdGl2ZXMoZSl7Y29uc3QgdD1bXTtmb3IoO3RoaXMucGVlayh4LkFUKTspdC5wdXNoKHRoaXMucGFyc2VEaXJlY3RpdmUoZSkpO3JldHVybiB0fXBhcnNlQ29uc3REaXJlY3RpdmVzKCl7cmV0dXJuIHRoaXMucGFyc2VEaXJlY3RpdmVzKCEwKX1wYXJzZURpcmVjdGl2ZShlKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO3JldHVybiB0aGlzLmV4cGVjdFRva2VuKHguQVQpLHRoaXMubm9kZSh0LHtraW5kOk8uRElSRUNUSVZFLG5hbWU6dGhpcy5wYXJzZU5hbWUoKSxhcmd1bWVudHM6dGhpcy5wYXJzZUFyZ3VtZW50cyhlKX0pfXBhcnNlVHlwZVJlZmVyZW5jZSgpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47bGV0IHQ7aWYodGhpcy5leHBlY3RPcHRpb25hbFRva2VuKHguQlJBQ0tFVF9MKSl7Y29uc3Qgbj10aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpO3RoaXMuZXhwZWN0VG9rZW4oeC5CUkFDS0VUX1IpLHQ9dGhpcy5ub2RlKGUse2tpbmQ6Ty5MSVNUX1RZUEUsdHlwZTpufSl9ZWxzZSB0PXRoaXMucGFyc2VOYW1lZFR5cGUoKTtyZXR1cm4gdGhpcy5leHBlY3RPcHRpb25hbFRva2VuKHguQkFORyk/dGhpcy5ub2RlKGUse2tpbmQ6Ty5OT05fTlVMTF9UWVBFLHR5cGU6dH0pOnR9cGFyc2VOYW1lZFR5cGUoKXtyZXR1cm4gdGhpcy5ub2RlKHRoaXMuX2xleGVyLnRva2VuLHtraW5kOk8uTkFNRURfVFlQRSxuYW1lOnRoaXMucGFyc2VOYW1lKCl9KX1wZWVrRGVzY3JpcHRpb24oKXtyZXR1cm4gdGhpcy5wZWVrKHguU1RSSU5HKXx8dGhpcy5wZWVrKHguQkxPQ0tfU1RSSU5HKX1wYXJzZURlc2NyaXB0aW9uKCl7aWYodGhpcy5wZWVrRGVzY3JpcHRpb24oKSlyZXR1cm4gdGhpcy5wYXJzZVN0cmluZ0xpdGVyYWwoKX1wYXJzZVNjaGVtYURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJzY2hlbWEiKTtjb25zdCBuPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxyPXRoaXMubWFueSh4LkJSQUNFX0wsdGhpcy5wYXJzZU9wZXJhdGlvblR5cGVEZWZpbml0aW9uLHguQlJBQ0VfUik7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uU0NIRU1BX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxkaXJlY3RpdmVzOm4sb3BlcmF0aW9uVHlwZXM6cn0pfXBhcnNlT3BlcmF0aW9uVHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZU9wZXJhdGlvblR5cGUoKTt0aGlzLmV4cGVjdFRva2VuKHguQ09MT04pO2NvbnN0IG49dGhpcy5wYXJzZU5hbWVkVHlwZSgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLk9QRVJBVElPTl9UWVBFX0RFRklOSVRJT04sb3BlcmF0aW9uOnQsdHlwZTpufSl9cGFyc2VTY2FsYXJUeXBlRGVmaW5pdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoInNjYWxhciIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKTtyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6Ty5TQ0FMQVJfVFlQRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOnQsbmFtZTpuLGRpcmVjdGl2ZXM6cn0pfXBhcnNlT2JqZWN0VHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJ0eXBlIik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUltcGxlbWVudHNJbnRlcmZhY2VzKCksaT10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscz10aGlzLnBhcnNlRmllbGRzRGVmaW5pdGlvbigpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLk9CSkVDVF9UWVBFX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4saW50ZXJmYWNlczpyLGRpcmVjdGl2ZXM6aSxmaWVsZHM6c30pfXBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKXtyZXR1cm4gdGhpcy5leHBlY3RPcHRpb25hbEtleXdvcmQoImltcGxlbWVudHMiKT90aGlzLmRlbGltaXRlZE1hbnkoeC5BTVAsdGhpcy5wYXJzZU5hbWVkVHlwZSk6W119cGFyc2VGaWVsZHNEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KHguQlJBQ0VfTCx0aGlzLnBhcnNlRmllbGREZWZpbml0aW9uLHguQlJBQ0VfUil9cGFyc2VGaWVsZERlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCksbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUFyZ3VtZW50RGVmcygpO3RoaXMuZXhwZWN0VG9rZW4oeC5DT0xPTik7Y29uc3QgaT10aGlzLnBhcnNlVHlwZVJlZmVyZW5jZSgpLHM9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLkZJRUxEX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4sYXJndW1lbnRzOnIsdHlwZTppLGRpcmVjdGl2ZXM6c30pfXBhcnNlQXJndW1lbnREZWZzKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KHguUEFSRU5fTCx0aGlzLnBhcnNlSW5wdXRWYWx1ZURlZix4LlBBUkVOX1IpfXBhcnNlSW5wdXRWYWx1ZURlZigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKSxuPXRoaXMucGFyc2VOYW1lKCk7dGhpcy5leHBlY3RUb2tlbih4LkNPTE9OKTtjb25zdCByPXRoaXMucGFyc2VUeXBlUmVmZXJlbmNlKCk7bGV0IGk7dGhpcy5leHBlY3RPcHRpb25hbFRva2VuKHguRVFVQUxTKSYmKGk9dGhpcy5wYXJzZUNvbnN0VmFsdWVMaXRlcmFsKCkpO2NvbnN0IHM9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLklOUFVUX1ZBTFVFX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4sdHlwZTpyLGRlZmF1bHRWYWx1ZTppLGRpcmVjdGl2ZXM6c30pfXBhcnNlSW50ZXJmYWNlVHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJpbnRlcmZhY2UiKTtjb25zdCBuPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlSW1wbGVtZW50c0ludGVyZmFjZXMoKSxpPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxzPXRoaXMucGFyc2VGaWVsZHNEZWZpbml0aW9uKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uSU5URVJGQUNFX1RZUEVfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LG5hbWU6bixpbnRlcmZhY2VzOnIsZGlyZWN0aXZlczppLGZpZWxkczpzfSl9cGFyc2VVbmlvblR5cGVEZWZpbml0aW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbix0PXRoaXMucGFyc2VEZXNjcmlwdGlvbigpO3RoaXMuZXhwZWN0S2V5d29yZCgidW5pb24iKTtjb25zdCBuPXRoaXMucGFyc2VOYW1lKCkscj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCksaT10aGlzLnBhcnNlVW5pb25NZW1iZXJUeXBlcygpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLlVOSU9OX1RZUEVfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LG5hbWU6bixkaXJlY3RpdmVzOnIsdHlwZXM6aX0pfXBhcnNlVW5pb25NZW1iZXJUeXBlcygpe3JldHVybiB0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oeC5FUVVBTFMpP3RoaXMuZGVsaW1pdGVkTWFueSh4LlBJUEUsdGhpcy5wYXJzZU5hbWVkVHlwZSk6W119cGFyc2VFbnVtVHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJlbnVtIik7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLGk9dGhpcy5wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uRU5VTV9UWVBFX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4sZGlyZWN0aXZlczpyLHZhbHVlczppfSl9cGFyc2VFbnVtVmFsdWVzRGVmaW5pdGlvbigpe3JldHVybiB0aGlzLm9wdGlvbmFsTWFueSh4LkJSQUNFX0wsdGhpcy5wYXJzZUVudW1WYWx1ZURlZmluaXRpb24seC5CUkFDRV9SKX1wYXJzZUVudW1WYWx1ZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCksbj10aGlzLnBhcnNlRW51bVZhbHVlTmFtZSgpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLkVOVU1fVkFMVUVfREVGSU5JVElPTixkZXNjcmlwdGlvbjp0LG5hbWU6bixkaXJlY3RpdmVzOnJ9KX1wYXJzZUVudW1WYWx1ZU5hbWUoKXtpZigidHJ1ZSI9PT10aGlzLl9sZXhlci50b2tlbi52YWx1ZXx8ImZhbHNlIj09PXRoaXMuX2xleGVyLnRva2VuLnZhbHVlfHwibnVsbCI9PT10aGlzLl9sZXhlci50b2tlbi52YWx1ZSl0aHJvdyB5KHRoaXMuX2xleGVyLnNvdXJjZSx0aGlzLl9sZXhlci50b2tlbi5zdGFydCxgJHtsZSh0aGlzLl9sZXhlci50b2tlbil9IGlzIHJlc2VydmVkIGFuZCBjYW5ub3QgYmUgdXNlZCBmb3IgYW4gZW51bSB2YWx1ZS5gKTtyZXR1cm4gdGhpcy5wYXJzZU5hbWUoKX1wYXJzZUlucHV0T2JqZWN0VHlwZURlZmluaXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZURlc2NyaXB0aW9uKCk7dGhpcy5leHBlY3RLZXl3b3JkKCJpbnB1dCIpO2NvbnN0IG49dGhpcy5wYXJzZU5hbWUoKSxyPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxpPXRoaXMucGFyc2VJbnB1dEZpZWxkc0RlZmluaXRpb24oKTtyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6Ty5JTlBVVF9PQkpFQ1RfVFlQRV9ERUZJTklUSU9OLGRlc2NyaXB0aW9uOnQsbmFtZTpuLGRpcmVjdGl2ZXM6cixmaWVsZHM6aX0pfXBhcnNlSW5wdXRGaWVsZHNEZWZpbml0aW9uKCl7cmV0dXJuIHRoaXMub3B0aW9uYWxNYW55KHguQlJBQ0VfTCx0aGlzLnBhcnNlSW5wdXRWYWx1ZURlZix4LkJSQUNFX1IpfXBhcnNlVHlwZVN5c3RlbUV4dGVuc2lvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIubG9va2FoZWFkKCk7aWYoZS5raW5kPT09eC5OQU1FKXN3aXRjaChlLnZhbHVlKXtjYXNlInNjaGVtYSI6cmV0dXJuIHRoaXMucGFyc2VTY2hlbWFFeHRlbnNpb24oKTtjYXNlInNjYWxhciI6cmV0dXJuIHRoaXMucGFyc2VTY2FsYXJUeXBlRXh0ZW5zaW9uKCk7Y2FzZSJ0eXBlIjpyZXR1cm4gdGhpcy5wYXJzZU9iamVjdFR5cGVFeHRlbnNpb24oKTtjYXNlImludGVyZmFjZSI6cmV0dXJuIHRoaXMucGFyc2VJbnRlcmZhY2VUeXBlRXh0ZW5zaW9uKCk7Y2FzZSJ1bmlvbiI6cmV0dXJuIHRoaXMucGFyc2VVbmlvblR5cGVFeHRlbnNpb24oKTtjYXNlImVudW0iOnJldHVybiB0aGlzLnBhcnNlRW51bVR5cGVFeHRlbnNpb24oKTtjYXNlImlucHV0IjpyZXR1cm4gdGhpcy5wYXJzZUlucHV0T2JqZWN0VHlwZUV4dGVuc2lvbigpfXRocm93IHRoaXMudW5leHBlY3RlZChlKX1wYXJzZVNjaGVtYUV4dGVuc2lvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoInNjaGVtYSIpO2NvbnN0IHQ9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLG49dGhpcy5vcHRpb25hbE1hbnkoeC5CUkFDRV9MLHRoaXMucGFyc2VPcGVyYXRpb25UeXBlRGVmaW5pdGlvbix4LkJSQUNFX1IpO2lmKDA9PT10Lmxlbmd0aCYmMD09PW4ubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLlNDSEVNQV9FWFRFTlNJT04sZGlyZWN0aXZlczp0LG9wZXJhdGlvblR5cGVzOm59KX1wYXJzZVNjYWxhclR5cGVFeHRlbnNpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJzY2FsYXIiKTtjb25zdCB0PXRoaXMucGFyc2VOYW1lKCksbj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCk7aWYoMD09PW4ubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLlNDQUxBUl9UWVBFX0VYVEVOU0lPTixuYW1lOnQsZGlyZWN0aXZlczpufSl9cGFyc2VPYmplY3RUeXBlRXh0ZW5zaW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdEtleXdvcmQoImV4dGVuZCIpLHRoaXMuZXhwZWN0S2V5d29yZCgidHlwZSIpO2NvbnN0IHQ9dGhpcy5wYXJzZU5hbWUoKSxuPXRoaXMucGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLGk9dGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtpZigwPT09bi5sZW5ndGgmJjA9PT1yLmxlbmd0aCYmMD09PWkubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLk9CSkVDVF9UWVBFX0VYVEVOU0lPTixuYW1lOnQsaW50ZXJmYWNlczpuLGRpcmVjdGl2ZXM6cixmaWVsZHM6aX0pfXBhcnNlSW50ZXJmYWNlVHlwZUV4dGVuc2lvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW47dGhpcy5leHBlY3RLZXl3b3JkKCJleHRlbmQiKSx0aGlzLmV4cGVjdEtleXdvcmQoImludGVyZmFjZSIpO2NvbnN0IHQ9dGhpcy5wYXJzZU5hbWUoKSxuPXRoaXMucGFyc2VJbXBsZW1lbnRzSW50ZXJmYWNlcygpLHI9dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLGk9dGhpcy5wYXJzZUZpZWxkc0RlZmluaXRpb24oKTtpZigwPT09bi5sZW5ndGgmJjA9PT1yLmxlbmd0aCYmMD09PWkubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLklOVEVSRkFDRV9UWVBFX0VYVEVOU0lPTixuYW1lOnQsaW50ZXJmYWNlczpuLGRpcmVjdGl2ZXM6cixmaWVsZHM6aX0pfXBhcnNlVW5pb25UeXBlRXh0ZW5zaW9uKCl7Y29uc3QgZT10aGlzLl9sZXhlci50b2tlbjt0aGlzLmV4cGVjdEtleXdvcmQoImV4dGVuZCIpLHRoaXMuZXhwZWN0S2V5d29yZCgidW5pb24iKTtjb25zdCB0PXRoaXMucGFyc2VOYW1lKCksbj10aGlzLnBhcnNlQ29uc3REaXJlY3RpdmVzKCkscj10aGlzLnBhcnNlVW5pb25NZW1iZXJUeXBlcygpO2lmKDA9PT1uLmxlbmd0aCYmMD09PXIubGVuZ3RoKXRocm93IHRoaXMudW5leHBlY3RlZCgpO3JldHVybiB0aGlzLm5vZGUoZSx7a2luZDpPLlVOSU9OX1RZUEVfRVhURU5TSU9OLG5hbWU6dCxkaXJlY3RpdmVzOm4sdHlwZXM6cn0pfXBhcnNlRW51bVR5cGVFeHRlbnNpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJlbnVtIik7Y29uc3QgdD10aGlzLnBhcnNlTmFtZSgpLG49dGhpcy5wYXJzZUNvbnN0RGlyZWN0aXZlcygpLHI9dGhpcy5wYXJzZUVudW1WYWx1ZXNEZWZpbml0aW9uKCk7aWYoMD09PW4ubGVuZ3RoJiYwPT09ci5sZW5ndGgpdGhyb3cgdGhpcy51bmV4cGVjdGVkKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uRU5VTV9UWVBFX0VYVEVOU0lPTixuYW1lOnQsZGlyZWN0aXZlczpuLHZhbHVlczpyfSl9cGFyc2VJbnB1dE9iamVjdFR5cGVFeHRlbnNpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuO3RoaXMuZXhwZWN0S2V5d29yZCgiZXh0ZW5kIiksdGhpcy5leHBlY3RLZXl3b3JkKCJpbnB1dCIpO2NvbnN0IHQ9dGhpcy5wYXJzZU5hbWUoKSxuPXRoaXMucGFyc2VDb25zdERpcmVjdGl2ZXMoKSxyPXRoaXMucGFyc2VJbnB1dEZpZWxkc0RlZmluaXRpb24oKTtpZigwPT09bi5sZW5ndGgmJjA9PT1yLmxlbmd0aCl0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoKTtyZXR1cm4gdGhpcy5ub2RlKGUse2tpbmQ6Ty5JTlBVVF9PQkpFQ1RfVFlQRV9FWFRFTlNJT04sbmFtZTp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pfXBhcnNlRGlyZWN0aXZlRGVmaW5pdGlvbigpe2NvbnN0IGU9dGhpcy5fbGV4ZXIudG9rZW4sdD10aGlzLnBhcnNlRGVzY3JpcHRpb24oKTt0aGlzLmV4cGVjdEtleXdvcmQoImRpcmVjdGl2ZSIpLHRoaXMuZXhwZWN0VG9rZW4oeC5BVCk7Y29uc3Qgbj10aGlzLnBhcnNlTmFtZSgpLHI9dGhpcy5wYXJzZUFyZ3VtZW50RGVmcygpLGk9dGhpcy5leHBlY3RPcHRpb25hbEtleXdvcmQoInJlcGVhdGFibGUiKTt0aGlzLmV4cGVjdEtleXdvcmQoIm9uIik7Y29uc3Qgcz10aGlzLnBhcnNlRGlyZWN0aXZlTG9jYXRpb25zKCk7cmV0dXJuIHRoaXMubm9kZShlLHtraW5kOk8uRElSRUNUSVZFX0RFRklOSVRJT04sZGVzY3JpcHRpb246dCxuYW1lOm4sYXJndW1lbnRzOnIscmVwZWF0YWJsZTppLGxvY2F0aW9uczpzfSl9cGFyc2VEaXJlY3RpdmVMb2NhdGlvbnMoKXtyZXR1cm4gdGhpcy5kZWxpbWl0ZWRNYW55KHguUElQRSx0aGlzLnBhcnNlRGlyZWN0aXZlTG9jYXRpb24pfXBhcnNlRGlyZWN0aXZlTG9jYXRpb24oKXtjb25zdCBlPXRoaXMuX2xleGVyLnRva2VuLHQ9dGhpcy5wYXJzZU5hbWUoKTtpZihPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoTix0LnZhbHVlKSlyZXR1cm4gdDt0aHJvdyB0aGlzLnVuZXhwZWN0ZWQoZSl9bm9kZShlLHQpe3JldHVybiEwIT09dGhpcy5fb3B0aW9ucy5ub0xvY2F0aW9uJiYodC5sb2M9bmV3IG0oZSx0aGlzLl9sZXhlci5sYXN0VG9rZW4sdGhpcy5fbGV4ZXIuc291cmNlKSksdH1wZWVrKGUpe3JldHVybiB0aGlzLl9sZXhlci50b2tlbi5raW5kPT09ZX1leHBlY3RUb2tlbihlKXtjb25zdCB0PXRoaXMuX2xleGVyLnRva2VuO2lmKHQua2luZD09PWUpcmV0dXJuIHRoaXMuYWR2YW5jZUxleGVyKCksdDt0aHJvdyB5KHRoaXMuX2xleGVyLnNvdXJjZSx0LnN0YXJ0LGBFeHBlY3RlZCAke3VlKGUpfSwgZm91bmQgJHtsZSh0KX0uYCl9ZXhwZWN0T3B0aW9uYWxUb2tlbihlKXtyZXR1cm4gdGhpcy5fbGV4ZXIudG9rZW4ua2luZD09PWUmJih0aGlzLmFkdmFuY2VMZXhlcigpLCEwKX1leHBlY3RLZXl3b3JkKGUpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47aWYodC5raW5kIT09eC5OQU1FfHx0LnZhbHVlIT09ZSl0aHJvdyB5KHRoaXMuX2xleGVyLnNvdXJjZSx0LnN0YXJ0LGBFeHBlY3RlZCAiJHtlfSIsIGZvdW5kICR7bGUodCl9LmApO3RoaXMuYWR2YW5jZUxleGVyKCl9ZXhwZWN0T3B0aW9uYWxLZXl3b3JkKGUpe2NvbnN0IHQ9dGhpcy5fbGV4ZXIudG9rZW47cmV0dXJuIHQua2luZD09PXguTkFNRSYmdC52YWx1ZT09PWUmJih0aGlzLmFkdmFuY2VMZXhlcigpLCEwKX11bmV4cGVjdGVkKGUpe2NvbnN0IHQ9bnVsbCE9ZT9lOnRoaXMuX2xleGVyLnRva2VuO3JldHVybiB5KHRoaXMuX2xleGVyLnNvdXJjZSx0LnN0YXJ0LGBVbmV4cGVjdGVkICR7bGUodCl9LmApfWFueShlLHQsbil7dGhpcy5leHBlY3RUb2tlbihlKTtjb25zdCByPVtdO2Zvcig7IXRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihuKTspci5wdXNoKHQuY2FsbCh0aGlzKSk7cmV0dXJuIHJ9b3B0aW9uYWxNYW55KGUsdCxuKXtpZih0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oZSkpe2NvbnN0IGU9W107ZG97ZS5wdXNoKHQuY2FsbCh0aGlzKSl9d2hpbGUoIXRoaXMuZXhwZWN0T3B0aW9uYWxUb2tlbihuKSk7cmV0dXJuIGV9cmV0dXJuW119bWFueShlLHQsbil7dGhpcy5leHBlY3RUb2tlbihlKTtjb25zdCByPVtdO2Rve3IucHVzaCh0LmNhbGwodGhpcykpfXdoaWxlKCF0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4obikpO3JldHVybiByfWRlbGltaXRlZE1hbnkoZSx0KXt0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oZSk7Y29uc3Qgbj1bXTtkb3tuLnB1c2godC5jYWxsKHRoaXMpKX13aGlsZSh0aGlzLmV4cGVjdE9wdGlvbmFsVG9rZW4oZSkpO3JldHVybiBufWFkdmFuY2VMZXhlcigpe2NvbnN0e21heFRva2VuczplfT10aGlzLl9vcHRpb25zLHQ9dGhpcy5fbGV4ZXIuYWR2YW5jZSgpO2lmKHZvaWQgMCE9PWUmJnQua2luZCE9PXguRU9GJiYoKyt0aGlzLl90b2tlbkNvdW50ZXIsdGhpcy5fdG9rZW5Db3VudGVyPmUpKXRocm93IHkodGhpcy5fbGV4ZXIuc291cmNlLHQuc3RhcnQsYERvY3VtZW50IGNvbnRhaW5zIG1vcmUgdGhhdCAke2V9IHRva2Vucy4gUGFyc2luZyBhYm9ydGVkLmApfX1mdW5jdGlvbiBsZShlKXtjb25zdCB0PWUudmFsdWU7cmV0dXJuIHVlKGUua2luZCkrKG51bGwhPXQ/YCAiJHt0fSJgOiIiKX1mdW5jdGlvbiB1ZShlKXtyZXR1cm4gZnVuY3Rpb24oZSl7cmV0dXJuIGU9PT14LkJBTkd8fGU9PT14LkRPTExBUnx8ZT09PXguQU1QfHxlPT09eC5QQVJFTl9MfHxlPT09eC5QQVJFTl9SfHxlPT09eC5TUFJFQUR8fGU9PT14LkNPTE9OfHxlPT09eC5FUVVBTFN8fGU9PT14LkFUfHxlPT09eC5CUkFDS0VUX0x8fGU9PT14LkJSQUNLRVRfUnx8ZT09PXguQlJBQ0VfTHx8ZT09PXguUElQRXx8ZT09PXguQlJBQ0VfUn0oZSk/YCIke2V9ImA6ZX1jb25zdCBkZT0vW1x4MDAtXHgxZlx4MjJceDVjXHg3Zi1ceDlmXS9nO2Z1bmN0aW9uIHBlKGUpe3JldHVybiBoZVtlLmNoYXJDb2RlQXQoMCldfWNvbnN0IGhlPVsiXFx1MDAwMCIsIlxcdTAwMDEiLCJcXHUwMDAyIiwiXFx1MDAwMyIsIlxcdTAwMDQiLCJcXHUwMDA1IiwiXFx1MDAwNiIsIlxcdTAwMDciLCJcXGIiLCJcXHQiLCJcXG4iLCJcXHUwMDBCIiwiXFxmIiwiXFxyIiwiXFx1MDAwRSIsIlxcdTAwMEYiLCJcXHUwMDEwIiwiXFx1MDAxMSIsIlxcdTAwMTIiLCJcXHUwMDEzIiwiXFx1MDAxNCIsIlxcdTAwMTUiLCJcXHUwMDE2IiwiXFx1MDAxNyIsIlxcdTAwMTgiLCJcXHUwMDE5IiwiXFx1MDAxQSIsIlxcdTAwMUIiLCJcXHUwMDFDIiwiXFx1MDAxRCIsIlxcdTAwMUUiLCJcXHUwMDFGIiwiIiwiIiwnXFwiJywiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiIiwiXFxcXCIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIiIsIlxcdTAwN0YiLCJcXHUwMDgwIiwiXFx1MDA4MSIsIlxcdTAwODIiLCJcXHUwMDgzIiwiXFx1MDA4NCIsIlxcdTAwODUiLCJcXHUwMDg2IiwiXFx1MDA4NyIsIlxcdTAwODgiLCJcXHUwMDg5IiwiXFx1MDA4QSIsIlxcdTAwOEIiLCJcXHUwMDhDIiwiXFx1MDA4RCIsIlxcdTAwOEUiLCJcXHUwMDhGIiwiXFx1MDA5MCIsIlxcdTAwOTEiLCJcXHUwMDkyIiwiXFx1MDA5MyIsIlxcdTAwOTQiLCJcXHUwMDk1IiwiXFx1MDA5NiIsIlxcdTAwOTciLCJcXHUwMDk4IiwiXFx1MDA5OSIsIlxcdTAwOUEiLCJcXHUwMDlCIiwiXFx1MDA5QyIsIlxcdTAwOUQiLCJcXHUwMDlFIiwiXFx1MDA5RiJdLGZlPU9iamVjdC5mcmVlemUoe30pO2Z1bmN0aW9uIHllKGUsdCl7Y29uc3Qgbj1lW3RdO3JldHVybiJvYmplY3QiPT10eXBlb2Ygbj9uOiJmdW5jdGlvbiI9PXR5cGVvZiBuP3tlbnRlcjpuLGxlYXZlOnZvaWQgMH06e2VudGVyOmUuZW50ZXIsbGVhdmU6ZS5sZWF2ZX19ZnVuY3Rpb24gbWUoZSl7cmV0dXJuIGZ1bmN0aW9uKGUsdCxuPV8pe2NvbnN0IHI9bmV3IE1hcDtmb3IoY29uc3QgYSBvZiBPYmplY3QudmFsdWVzKE8pKXIuc2V0KGEseWUodCxhKSk7bGV0IGkscyxvLGM9QXJyYXkuaXNBcnJheShlKSxsPVtlXSx1PS0xLGQ9W10scD1lO2NvbnN0IGg9W10sZj1bXTtkb3t1Kys7Y29uc3QgZT11PT09bC5sZW5ndGgsXz1lJiYwIT09ZC5sZW5ndGg7aWYoZSl7aWYocz0wPT09Zi5sZW5ndGg/dm9pZCAwOmhbaC5sZW5ndGgtMV0scD1vLG89Zi5wb3AoKSxfKWlmKGMpe3A9cC5zbGljZSgpO2xldCBlPTA7Zm9yKGNvbnN0W3Qsbl1vZiBkKXtjb25zdCByPXQtZTtudWxsPT09bj8ocC5zcGxpY2UociwxKSxlKyspOnBbcl09bn19ZWxzZXtwPU9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKHt9LE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHApKTtmb3IoY29uc3RbZSx0XW9mIGQpcFtlXT10fXU9aS5pbmRleCxsPWkua2V5cyxkPWkuZWRpdHMsYz1pLmluQXJyYXksaT1pLnByZXZ9ZWxzZSBpZihvKXtpZihzPWM/dTpsW3VdLHA9b1tzXSxudWxsPT1wKWNvbnRpbnVlO2gucHVzaChzKX1sZXQgZztpZighQXJyYXkuaXNBcnJheShwKSl7dmFyIHksbTtFKHApfHxhKCExLGBJbnZhbGlkIEFTVCBOb2RlOiAke3JlKHApfS5gKTtjb25zdCBuPWU/bnVsbD09PSh5PXIuZ2V0KHAua2luZCkpfHx2b2lkIDA9PT15P3ZvaWQgMDp5LmxlYXZlOm51bGw9PT0obT1yLmdldChwLmtpbmQpKXx8dm9pZCAwPT09bT92b2lkIDA6bS5lbnRlcjtpZihnPW51bGw9PW4/dm9pZCAwOm4uY2FsbCh0LHAscyxvLGgsZiksZz09PWZlKWJyZWFrO2lmKCExPT09Zyl7aWYoIWUpe2gucG9wKCk7Y29udGludWV9fWVsc2UgaWYodm9pZCAwIT09ZyYmKGQucHVzaChbcyxnXSksIWUpKXtpZighRShnKSl7aC5wb3AoKTtjb250aW51ZX1wPWd9fXZhciB2O3ZvaWQgMD09PWcmJl8mJmQucHVzaChbcyxwXSksZT9oLnBvcCgpOihpPXtpbkFycmF5OmMsaW5kZXg6dSxrZXlzOmwsZWRpdHM6ZCxwcmV2Oml9LGM9QXJyYXkuaXNBcnJheShwKSxsPWM/cDpudWxsIT09KHY9bltwLmtpbmRdKSYmdm9pZCAwIT09dj92OltdLHU9LTEsZD1bXSxvJiZmLnB1c2gobyksbz1wKX13aGlsZSh2b2lkIDAhPT1pKTtyZXR1cm4gMCE9PWQubGVuZ3RoP2RbZC5sZW5ndGgtMV1bMV06ZX0oZSx2ZSl9Y29uc3QgdmU9e05hbWU6e2xlYXZlOmU9PmUudmFsdWV9LFZhcmlhYmxlOntsZWF2ZTplPT4iJCIrZS5uYW1lfSxEb2N1bWVudDp7bGVhdmU6ZT0+X2UoZS5kZWZpbml0aW9ucywiXG5cbiIpfSxPcGVyYXRpb25EZWZpbml0aW9uOntsZWF2ZShlKXtjb25zdCB0PUVlKCIoIixfZShlLnZhcmlhYmxlRGVmaW5pdGlvbnMsIiwgIiksIikiKSxuPV9lKFtlLm9wZXJhdGlvbixfZShbZS5uYW1lLHRdKSxfZShlLmRpcmVjdGl2ZXMsIiAiKV0sIiAiKTtyZXR1cm4oInF1ZXJ5Ij09PW4/IiI6bisiICIpK2Uuc2VsZWN0aW9uU2V0fX0sVmFyaWFibGVEZWZpbml0aW9uOntsZWF2ZTooe3ZhcmlhYmxlOmUsdHlwZTp0LGRlZmF1bHRWYWx1ZTpuLGRpcmVjdGl2ZXM6cn0pPT5lKyI6ICIrdCtFZSgiID0gIixuKStFZSgiICIsX2UociwiICIpKX0sU2VsZWN0aW9uU2V0OntsZWF2ZTooe3NlbGVjdGlvbnM6ZX0pPT5nZShlKX0sRmllbGQ6e2xlYXZlKHthbGlhczplLG5hbWU6dCxhcmd1bWVudHM6bixkaXJlY3RpdmVzOnIsc2VsZWN0aW9uU2V0Oml9KXtjb25zdCBzPUVlKCIiLGUsIjogIikrdDtsZXQgbz1zK0VlKCIoIixfZShuLCIsICIpLCIpIik7cmV0dXJuIG8ubGVuZ3RoPjgwJiYobz1zK0VlKCIoXG4iLFRlKF9lKG4sIlxuIikpLCJcbikiKSksX2UoW28sX2UociwiICIpLGldLCIgIil9fSxBcmd1bWVudDp7bGVhdmU6KHtuYW1lOmUsdmFsdWU6dH0pPT5lKyI6ICIrdH0sRnJhZ21lbnRTcHJlYWQ6e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dH0pPT4iLi4uIitlK0VlKCIgIixfZSh0LCIgIikpfSxJbmxpbmVGcmFnbWVudDp7bGVhdmU6KHt0eXBlQ29uZGl0aW9uOmUsZGlyZWN0aXZlczp0LHNlbGVjdGlvblNldDpufSk9Pl9lKFsiLi4uIixFZSgib24gIixlKSxfZSh0LCIgIiksbl0sIiAiKX0sRnJhZ21lbnREZWZpbml0aW9uOntsZWF2ZTooe25hbWU6ZSx0eXBlQ29uZGl0aW9uOnQsdmFyaWFibGVEZWZpbml0aW9uczpuLGRpcmVjdGl2ZXM6cixzZWxlY3Rpb25TZXQ6aX0pPT5gZnJhZ21lbnQgJHtlfSR7RWUoIigiLF9lKG4sIiwgIiksIikiKX0gb24gJHt0fSAke0VlKCIiLF9lKHIsIiAiKSwiICIpfWAraX0sSW50VmFsdWU6e2xlYXZlOih7dmFsdWU6ZX0pPT5lfSxGbG9hdFZhbHVlOntsZWF2ZTooe3ZhbHVlOmV9KT0+ZX0sU3RyaW5nVmFsdWU6e2xlYXZlOih7dmFsdWU6ZSxibG9jazp0fSk9PnQ/ZnVuY3Rpb24oZSx0KXtjb25zdCBuPWUucmVwbGFjZSgvIiIiL2csJ1xcIiIiJykscj1uLnNwbGl0KC9cclxufFtcblxyXS9nKSxpPTE9PT1yLmxlbmd0aCxzPXIubGVuZ3RoPjEmJnIuc2xpY2UoMSkuZXZlcnkoKGU9PjA9PT1lLmxlbmd0aHx8RChlLmNoYXJDb2RlQXQoMCkpKSksbz1uLmVuZHNXaXRoKCdcXCIiIicpLGE9ZS5lbmRzV2l0aCgnIicpJiYhbyxjPWUuZW5kc1dpdGgoIlxcIiksbD1hfHxjLHU9IShudWxsIT10JiZ0Lm1pbmltaXplKSYmKCFpfHxlLmxlbmd0aD43MHx8bHx8c3x8byk7bGV0IGQ9IiI7Y29uc3QgcD1pJiZEKGUuY2hhckNvZGVBdCgwKSk7cmV0dXJuKHUmJiFwfHxzKSYmKGQrPSJcbiIpLGQrPW4sKHV8fGwpJiYoZCs9IlxuIiksJyIiIicrZCsnIiIiJ30oZSk6YCIke2UucmVwbGFjZShkZSxwZSl9ImB9LEJvb2xlYW5WYWx1ZTp7bGVhdmU6KHt2YWx1ZTplfSk9PmU/InRydWUiOiJmYWxzZSJ9LE51bGxWYWx1ZTp7bGVhdmU6KCk9PiJudWxsIn0sRW51bVZhbHVlOntsZWF2ZTooe3ZhbHVlOmV9KT0+ZX0sTGlzdFZhbHVlOntsZWF2ZTooe3ZhbHVlczplfSk9PiJbIitfZShlLCIsICIpKyJdIn0sT2JqZWN0VmFsdWU6e2xlYXZlOih7ZmllbGRzOmV9KT0+InsiK19lKGUsIiwgIikrIn0ifSxPYmplY3RGaWVsZDp7bGVhdmU6KHtuYW1lOmUsdmFsdWU6dH0pPT5lKyI6ICIrdH0sRGlyZWN0aXZlOntsZWF2ZTooe25hbWU6ZSxhcmd1bWVudHM6dH0pPT4iQCIrZStFZSgiKCIsX2UodCwiLCAiKSwiKSIpfSxOYW1lZFR5cGU6e2xlYXZlOih7bmFtZTplfSk9PmV9LExpc3RUeXBlOntsZWF2ZTooe3R5cGU6ZX0pPT4iWyIrZSsiXSJ9LE5vbk51bGxUeXBlOntsZWF2ZTooe3R5cGU6ZX0pPT5lKyIhIn0sU2NoZW1hRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLGRpcmVjdGl2ZXM6dCxvcGVyYXRpb25UeXBlczpufSk9PkVlKCIiLGUsIlxuIikrX2UoWyJzY2hlbWEiLF9lKHQsIiAiKSxnZShuKV0sIiAiKX0sT3BlcmF0aW9uVHlwZURlZmluaXRpb246e2xlYXZlOih7b3BlcmF0aW9uOmUsdHlwZTp0fSk9PmUrIjogIit0fSxTY2FsYXJUeXBlRGVmaW5pdGlvbjp7bGVhdmU6KHtkZXNjcmlwdGlvbjplLG5hbWU6dCxkaXJlY3RpdmVzOm59KT0+RWUoIiIsZSwiXG4iKStfZShbInNjYWxhciIsdCxfZShuLCIgIildLCIgIil9LE9iamVjdFR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGludGVyZmFjZXM6bixkaXJlY3RpdmVzOnIsZmllbGRzOml9KT0+RWUoIiIsZSwiXG4iKStfZShbInR5cGUiLHQsRWUoImltcGxlbWVudHMgIixfZShuLCIgJiAiKSksX2UociwiICIpLGdlKGkpXSwiICIpfSxGaWVsZERlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsYXJndW1lbnRzOm4sdHlwZTpyLGRpcmVjdGl2ZXM6aX0pPT5FZSgiIixlLCJcbiIpK3QrKGJlKG4pP0VlKCIoXG4iLFRlKF9lKG4sIlxuIikpLCJcbikiKTpFZSgiKCIsX2UobiwiLCAiKSwiKSIpKSsiOiAiK3IrRWUoIiAiLF9lKGksIiAiKSl9LElucHV0VmFsdWVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LHR5cGU6bixkZWZhdWx0VmFsdWU6cixkaXJlY3RpdmVzOml9KT0+RWUoIiIsZSwiXG4iKStfZShbdCsiOiAiK24sRWUoIj0gIixyKSxfZShpLCIgIildLCIgIil9LEludGVyZmFjZVR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGludGVyZmFjZXM6bixkaXJlY3RpdmVzOnIsZmllbGRzOml9KT0+RWUoIiIsZSwiXG4iKStfZShbImludGVyZmFjZSIsdCxFZSgiaW1wbGVtZW50cyAiLF9lKG4sIiAmICIpKSxfZShyLCIgIiksZ2UoaSldLCIgIil9LFVuaW9uVHlwZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsZGlyZWN0aXZlczpuLHR5cGVzOnJ9KT0+RWUoIiIsZSwiXG4iKStfZShbInVuaW9uIix0LF9lKG4sIiAiKSxFZSgiPSAiLF9lKHIsIiB8ICIpKV0sIiAiKX0sRW51bVR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGRpcmVjdGl2ZXM6bix2YWx1ZXM6cn0pPT5FZSgiIixlLCJcbiIpK19lKFsiZW51bSIsdCxfZShuLCIgIiksZ2UocildLCIgIil9LEVudW1WYWx1ZURlZmluaXRpb246e2xlYXZlOih7ZGVzY3JpcHRpb246ZSxuYW1lOnQsZGlyZWN0aXZlczpufSk9PkVlKCIiLGUsIlxuIikrX2UoW3QsX2UobiwiICIpXSwiICIpfSxJbnB1dE9iamVjdFR5cGVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pPT5FZSgiIixlLCJcbiIpK19lKFsiaW5wdXQiLHQsX2UobiwiICIpLGdlKHIpXSwiICIpfSxEaXJlY3RpdmVEZWZpbml0aW9uOntsZWF2ZTooe2Rlc2NyaXB0aW9uOmUsbmFtZTp0LGFyZ3VtZW50czpuLHJlcGVhdGFibGU6cixsb2NhdGlvbnM6aX0pPT5FZSgiIixlLCJcbiIpKyJkaXJlY3RpdmUgQCIrdCsoYmUobik/RWUoIihcbiIsVGUoX2UobiwiXG4iKSksIlxuKSIpOkVlKCIoIixfZShuLCIsICIpLCIpIikpKyhyPyIgcmVwZWF0YWJsZSI6IiIpKyIgb24gIitfZShpLCIgfCAiKX0sU2NoZW1hRXh0ZW5zaW9uOntsZWF2ZTooe2RpcmVjdGl2ZXM6ZSxvcGVyYXRpb25UeXBlczp0fSk9Pl9lKFsiZXh0ZW5kIHNjaGVtYSIsX2UoZSwiICIpLGdlKHQpXSwiICIpfSxTY2FsYXJUeXBlRXh0ZW5zaW9uOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnR9KT0+X2UoWyJleHRlbmQgc2NhbGFyIixlLF9lKHQsIiAiKV0sIiAiKX0sT2JqZWN0VHlwZUV4dGVuc2lvbjp7bGVhdmU6KHtuYW1lOmUsaW50ZXJmYWNlczp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pPT5fZShbImV4dGVuZCB0eXBlIixlLEVlKCJpbXBsZW1lbnRzICIsX2UodCwiICYgIikpLF9lKG4sIiAiKSxnZShyKV0sIiAiKX0sSW50ZXJmYWNlVHlwZUV4dGVuc2lvbjp7bGVhdmU6KHtuYW1lOmUsaW50ZXJmYWNlczp0LGRpcmVjdGl2ZXM6bixmaWVsZHM6cn0pPT5fZShbImV4dGVuZCBpbnRlcmZhY2UiLGUsRWUoImltcGxlbWVudHMgIixfZSh0LCIgJiAiKSksX2UobiwiICIpLGdlKHIpXSwiICIpfSxVbmlvblR5cGVFeHRlbnNpb246e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dCx0eXBlczpufSk9Pl9lKFsiZXh0ZW5kIHVuaW9uIixlLF9lKHQsIiAiKSxFZSgiPSAiLF9lKG4sIiB8ICIpKV0sIiAiKX0sRW51bVR5cGVFeHRlbnNpb246e2xlYXZlOih7bmFtZTplLGRpcmVjdGl2ZXM6dCx2YWx1ZXM6bn0pPT5fZShbImV4dGVuZCBlbnVtIixlLF9lKHQsIiAiKSxnZShuKV0sIiAiKX0sSW5wdXRPYmplY3RUeXBlRXh0ZW5zaW9uOntsZWF2ZTooe25hbWU6ZSxkaXJlY3RpdmVzOnQsZmllbGRzOm59KT0+X2UoWyJleHRlbmQgaW5wdXQiLGUsX2UodCwiICIpLGdlKG4pXSwiICIpfX07ZnVuY3Rpb24gX2UoZSx0PSIiKXt2YXIgbjtyZXR1cm4gbnVsbCE9PShuPW51bGw9PWU/dm9pZCAwOmUuZmlsdGVyKChlPT5lKSkuam9pbih0KSkmJnZvaWQgMCE9PW4/bjoiIn1mdW5jdGlvbiBnZShlKXtyZXR1cm4gRWUoIntcbiIsVGUoX2UoZSwiXG4iKSksIlxufSIpfWZ1bmN0aW9uIEVlKGUsdCxuPSIiKXtyZXR1cm4gbnVsbCE9dCYmIiIhPT10P2UrdCtuOiIifWZ1bmN0aW9uIFRlKGUpe3JldHVybiBFZSgiICAiLGUucmVwbGFjZSgvXG4vZywiXG4gICIpKX1mdW5jdGlvbiBiZShlKXt2YXIgdDtyZXR1cm4gbnVsbCE9PSh0PW51bGw9PWU/dm9pZCAwOmUuc29tZSgoZT0+ZS5pbmNsdWRlcygiXG4iKSkpKSYmdm9pZCAwIT09dCYmdH12YXIgTmU9bmV3IE1hcCxJZT1uZXcgTWFwLE9lPSEwLEFlPSExO2Z1bmN0aW9uIHhlKGUpe3JldHVybiBlLnJlcGxhY2UoL1tccyxdKy9nLCIgIikudHJpbSgpfWZ1bmN0aW9uIFNlKGUpe3ZhciB0PW5ldyBTZXQsbj1bXTtyZXR1cm4gZS5kZWZpbml0aW9ucy5mb3JFYWNoKChmdW5jdGlvbihlKXtpZigiRnJhZ21lbnREZWZpbml0aW9uIj09PWUua2luZCl7dmFyIHI9ZS5uYW1lLnZhbHVlLGk9eGUoKG89ZS5sb2MpLnNvdXJjZS5ib2R5LnN1YnN0cmluZyhvLnN0YXJ0LG8uZW5kKSkscz1JZS5nZXQocik7cyYmIXMuaGFzKGkpP09lJiZjb25zb2xlLndhcm4oIldhcm5pbmc6IGZyYWdtZW50IHdpdGggbmFtZSAiK3IrIiBhbHJlYWR5IGV4aXN0cy5cbmdyYXBocWwtdGFnIGVuZm9yY2VzIGFsbCBmcmFnbWVudCBuYW1lcyBhY3Jvc3MgeW91ciBhcHBsaWNhdGlvbiB0byBiZSB1bmlxdWU7IHJlYWQgbW9yZSBhYm91dFxudGhpcyBpbiB0aGUgZG9jczogaHR0cDovL2Rldi5hcG9sbG9kYXRhLmNvbS9jb3JlL2ZyYWdtZW50cy5odG1sI3VuaXF1ZS1uYW1lcyIpOnN8fEllLnNldChyLHM9bmV3IFNldCkscy5hZGQoaSksdC5oYXMoaSl8fCh0LmFkZChpKSxuLnB1c2goZSkpfWVsc2Ugbi5wdXNoKGUpO3ZhciBvfSkpLG8obyh7fSxlKSx7ZGVmaW5pdGlvbnM6bn0pfWZ1bmN0aW9uIERlKGUpe3ZhciB0PXhlKGUpO2lmKCFOZS5oYXModCkpe3ZhciBuPWFlKGUse2V4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzOkFlLGFsbG93TGVnYWN5RnJhZ21lbnRWYXJpYWJsZXM6QWV9KTtpZighbnx8IkRvY3VtZW50IiE9PW4ua2luZCl0aHJvdyBuZXcgRXJyb3IoIk5vdCBhIHZhbGlkIEdyYXBoUUwgZG9jdW1lbnQuIik7TmUuc2V0KHQsZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IFNldChlLmRlZmluaXRpb25zKTt0LmZvckVhY2goKGZ1bmN0aW9uKGUpe2UubG9jJiZkZWxldGUgZS5sb2MsT2JqZWN0LmtleXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24obil7dmFyIHI9ZVtuXTtyJiYib2JqZWN0Ij09dHlwZW9mIHImJnQuYWRkKHIpfSkpfSkpO3ZhciBuPWUubG9jO3JldHVybiBuJiYoZGVsZXRlIG4uc3RhcnRUb2tlbixkZWxldGUgbi5lbmRUb2tlbiksZX0oU2UobikpKX1yZXR1cm4gTmUuZ2V0KHQpfWZ1bmN0aW9uIHdlKGUpe2Zvcih2YXIgdD1bXSxuPTE7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0W24tMV09YXJndW1lbnRzW25dOyJzdHJpbmciPT10eXBlb2YgZSYmKGU9W2VdKTt2YXIgcj1lWzBdO3JldHVybiB0LmZvckVhY2goKGZ1bmN0aW9uKHQsbil7dCYmIkRvY3VtZW50Ij09PXQua2luZD9yKz10LmxvYy5zb3VyY2UuYm9keTpyKz10LHIrPWVbbisxXX0pKSxEZShyKX12YXIga2UsQ2U9d2UsUGU9ZnVuY3Rpb24oKXtOZS5jbGVhcigpLEllLmNsZWFyKCl9LFJlPWZ1bmN0aW9uKCl7T2U9ITF9LExlPWZ1bmN0aW9uKCl7QWU9ITB9LEZlPWZ1bmN0aW9uKCl7QWU9ITF9OyhrZT13ZXx8KHdlPXt9KSkuZ3FsPUNlLGtlLnJlc2V0Q2FjaGVzPVBlLGtlLmRpc2FibGVGcmFnbWVudFdhcm5pbmdzPVJlLGtlLmVuYWJsZUV4cGVyaW1lbnRhbEZyYWdtZW50VmFyaWFibGVzPUxlLGtlLmRpc2FibGVFeHBlcmltZW50YWxGcmFnbWVudFZhcmlhYmxlcz1GZSx3ZS5kZWZhdWx0PXdlO2NvbnN0ICRlPXdlYAoJbXV0YXRpb24gUHVzaFBheWxvYWQoCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJHBheWxvYWRfaWQ6IElEIQoJCSRldmVudHM6IFJlcGxheUV2ZW50c0lucHV0IQoJCSRtZXNzYWdlczogU3RyaW5nIQoJCSRyZXNvdXJjZXM6IFN0cmluZyEKCQkkd2ViX3NvY2tldF9ldmVudHM6IFN0cmluZyEKCQkkZXJyb3JzOiBbRXJyb3JPYmplY3RJbnB1dF0hCgkJJGlzX2JlYWNvbjogQm9vbGVhbgoJCSRoYXNfc2Vzc2lvbl91bmxvYWRlZDogQm9vbGVhbgoJCSRoaWdobGlnaHRfbG9nczogU3RyaW5nCgkpIHsKCQlwdXNoUGF5bG9hZCgKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQlwYXlsb2FkX2lkOiAkcGF5bG9hZF9pZAoJCQlldmVudHM6ICRldmVudHMKCQkJbWVzc2FnZXM6ICRtZXNzYWdlcwoJCQlyZXNvdXJjZXM6ICRyZXNvdXJjZXMKCQkJd2ViX3NvY2tldF9ldmVudHM6ICR3ZWJfc29ja2V0X2V2ZW50cwoJCQllcnJvcnM6ICRlcnJvcnMKCQkJaXNfYmVhY29uOiAkaXNfYmVhY29uCgkJCWhhc19zZXNzaW9uX3VubG9hZGVkOiAkaGFzX3Nlc3Npb25fdW5sb2FkZWQKCQkJaGlnaGxpZ2h0X2xvZ3M6ICRoaWdobGlnaHRfbG9ncwoJCSkKCX0KYCxNZT13ZWAKCW11dGF0aW9uIFB1c2hQYXlsb2FkQ29tcHJlc3NlZCgKCQkkc2Vzc2lvbl9zZWN1cmVfaWQ6IFN0cmluZyEKCQkkcGF5bG9hZF9pZDogSUQhCgkJJGRhdGE6IFN0cmluZyEKCSkgewoJCXB1c2hQYXlsb2FkQ29tcHJlc3NlZCgKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQlwYXlsb2FkX2lkOiAkcGF5bG9hZF9pZAoJCQlkYXRhOiAkZGF0YQoJCSkKCX0KYCxWZT13ZWAKCW11dGF0aW9uIGlkZW50aWZ5U2Vzc2lvbigKCQkkc2Vzc2lvbl9zZWN1cmVfaWQ6IFN0cmluZyEKCQkkdXNlcl9pZGVudGlmaWVyOiBTdHJpbmchCgkJJHVzZXJfb2JqZWN0OiBBbnkKCSkgewoJCWlkZW50aWZ5U2Vzc2lvbigKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQl1c2VyX2lkZW50aWZpZXI6ICR1c2VyX2lkZW50aWZpZXIKCQkJdXNlcl9vYmplY3Q6ICR1c2VyX29iamVjdAoJCSkKCX0KYCxCZT13ZWAKCW11dGF0aW9uIGFkZFNlc3Npb25Qcm9wZXJ0aWVzKAoJCSRzZXNzaW9uX3NlY3VyZV9pZDogU3RyaW5nIQoJCSRwcm9wZXJ0aWVzX29iamVjdDogQW55CgkpIHsKCQlhZGRTZXNzaW9uUHJvcGVydGllcygKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQlwcm9wZXJ0aWVzX29iamVjdDogJHByb3BlcnRpZXNfb2JqZWN0CgkJKQoJfQpgLGplPXdlYAoJbXV0YXRpb24gcHVzaE1ldHJpY3MoJG1ldHJpY3M6IFtNZXRyaWNJbnB1dF0hKSB7CgkJcHVzaE1ldHJpY3MobWV0cmljczogJG1ldHJpY3MpCgl9CmAsVWU9d2VgCgltdXRhdGlvbiBhZGRTZXNzaW9uRmVlZGJhY2soCgkJJHNlc3Npb25fc2VjdXJlX2lkOiBTdHJpbmchCgkJJHVzZXJfbmFtZTogU3RyaW5nCgkJJHVzZXJfZW1haWw6IFN0cmluZwoJCSR2ZXJiYXRpbTogU3RyaW5nIQoJCSR0aW1lc3RhbXA6IFRpbWVzdGFtcCEKCSkgewoJCWFkZFNlc3Npb25GZWVkYmFjaygKCQkJc2Vzc2lvbl9zZWN1cmVfaWQ6ICRzZXNzaW9uX3NlY3VyZV9pZAoJCQl1c2VyX25hbWU6ICR1c2VyX25hbWUKCQkJdXNlcl9lbWFpbDogJHVzZXJfZW1haWwKCQkJdmVyYmF0aW06ICR2ZXJiYXRpbQoJCQl0aW1lc3RhbXA6ICR0aW1lc3RhbXAKCQkpCgl9CmAscWU9d2VgCgltdXRhdGlvbiBpbml0aWFsaXplU2Vzc2lvbigKCQkkc2Vzc2lvbl9zZWN1cmVfaWQ6IFN0cmluZyEKCQkkb3JnYW5pemF0aW9uX3ZlcmJvc2VfaWQ6IFN0cmluZyEKCQkkZW5hYmxlX3N0cmljdF9wcml2YWN5OiBCb29sZWFuIQoJCSRwcml2YWN5X3NldHRpbmc6IFN0cmluZyEKCQkkZW5hYmxlX3JlY29yZGluZ19uZXR3b3JrX2NvbnRlbnRzOiBCb29sZWFuIQoJCSRjbGllbnRWZXJzaW9uOiBTdHJpbmchCgkJJGZpcnN0bG9hZFZlcnNpb246IFN0cmluZyEKCQkkY2xpZW50Q29uZmlnOiBTdHJpbmchCgkJJGVudmlyb25tZW50OiBTdHJpbmchCgkJJGlkOiBTdHJpbmchCgkJJGFwcFZlcnNpb246IFN0cmluZwoJCSRzZXJ2aWNlTmFtZTogU3RyaW5nIQoJCSRjbGllbnRfaWQ6IFN0cmluZyEKCQkkbmV0d29ya19yZWNvcmRpbmdfZG9tYWluczogW1N0cmluZyFdCgkJJGRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmc6IEJvb2xlYW4KCSkgewoJCWluaXRpYWxpemVTZXNzaW9uKAoJCQlzZXNzaW9uX3NlY3VyZV9pZDogJHNlc3Npb25fc2VjdXJlX2lkCgkJCW9yZ2FuaXphdGlvbl92ZXJib3NlX2lkOiAkb3JnYW5pemF0aW9uX3ZlcmJvc2VfaWQKCQkJZW5hYmxlX3N0cmljdF9wcml2YWN5OiAkZW5hYmxlX3N0cmljdF9wcml2YWN5CgkJCWVuYWJsZV9yZWNvcmRpbmdfbmV0d29ya19jb250ZW50czogJGVuYWJsZV9yZWNvcmRpbmdfbmV0d29ya19jb250ZW50cwoJCQljbGllbnRWZXJzaW9uOiAkY2xpZW50VmVyc2lvbgoJCQlmaXJzdGxvYWRWZXJzaW9uOiAkZmlyc3Rsb2FkVmVyc2lvbgoJCQljbGllbnRDb25maWc6ICRjbGllbnRDb25maWcKCQkJZW52aXJvbm1lbnQ6ICRlbnZpcm9ubWVudAoJCQlhcHBWZXJzaW9uOiAkYXBwVmVyc2lvbgoJCQlzZXJ2aWNlTmFtZTogJHNlcnZpY2VOYW1lCgkJCWZpbmdlcnByaW50OiAkaWQKCQkJY2xpZW50X2lkOiAkY2xpZW50X2lkCgkJCW5ldHdvcmtfcmVjb3JkaW5nX2RvbWFpbnM6ICRuZXR3b3JrX3JlY29yZGluZ19kb21haW5zCgkJCWRpc2FibGVfc2Vzc2lvbl9yZWNvcmRpbmc6ICRkaXNhYmxlX3Nlc3Npb25fcmVjb3JkaW5nCgkJCXByaXZhY3lfc2V0dGluZzogJHByaXZhY3lfc2V0dGluZwoJCSkgewoJCQlzZWN1cmVfaWQKCQkJcHJvamVjdF9pZAoJCX0KCX0KYCxLZT13ZWAKCXF1ZXJ5IElnbm9yZSgkaWQ6IElEISkgewoJCWlnbm9yZShpZDogJGlkKQoJfQpgLEdlPShlLHQsbixyKT0+ZSgpO2NvbnN0IHplPUpTT04sWWU9ZT0+e3ZhciB0LG47bGV0IHI7Y29uc3QgaT1lLmRlZmluaXRpb25zLmZpbHRlcigoZT0+Ik9wZXJhdGlvbkRlZmluaXRpb24iPT09ZS5raW5kKSk7cmV0dXJuIDE9PT1pLmxlbmd0aCYmKHI9bnVsbD09KG49bnVsbD09KHQ9aVswXSk/dm9pZCAwOnQubmFtZSk/dm9pZCAwOm4udmFsdWUpLHJ9LEhlPWU9PntpZigic3RyaW5nIj09dHlwZW9mIGUpe2xldCB0O3RyeXtjb25zdCBuPWFlKGUpO3Q9WWUobil9Y2F0Y2gobil7fXJldHVybntxdWVyeTplLG9wZXJhdGlvbk5hbWU6dH19Y29uc3QgdD1ZZShlKTtyZXR1cm57cXVlcnk6bWUoZSksb3BlcmF0aW9uTmFtZTp0fX07Y2xhc3MgSmUgZXh0ZW5kcyBFcnJvcntjb25zdHJ1Y3RvcihlLHQpe3N1cGVyKGAke0plLmV4dHJhY3RNZXNzYWdlKGUpfTogJHtKU09OLnN0cmluZ2lmeSh7cmVzcG9uc2U6ZSxyZXF1ZXN0OnR9KX1gKSxPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcyxKZS5wcm90b3R5cGUpLHRoaXMucmVzcG9uc2U9ZSx0aGlzLnJlcXVlc3Q9dCwiZnVuY3Rpb24iPT10eXBlb2YgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UmJkVycm9yLmNhcHR1cmVTdGFja1RyYWNlKHRoaXMsSmUpfXN0YXRpYyBleHRyYWN0TWVzc2FnZShlKXt2YXIgdCxuLHI7cmV0dXJuIG51bGwhPShyPW51bGw9PShuPW51bGw9PSh0PWUuZXJyb3JzKT92b2lkIDA6dFswXSk/dm9pZCAwOm4ubWVzc2FnZSk/cjpgR3JhcGhRTCBFcnJvciAoQ29kZTogJHtlLnN0YXR1c30pYH19dmFyIFFlPXtleHBvcnRzOnt9fTshZnVuY3Rpb24oZSx0KXt2YXIgcixpPSJ1bmRlZmluZWQiIT10eXBlb2Ygc2VsZj9zZWxmOm4scz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmZldGNoPSExLHRoaXMuRE9NRXhjZXB0aW9uPWkuRE9NRXhjZXB0aW9ufXJldHVybiBlLnByb3RvdHlwZT1pLG5ldyBlfSgpO3I9cyxmdW5jdGlvbihlKXt2YXIgdD0iVVJMU2VhcmNoUGFyYW1zImluIHIsbj0iU3ltYm9sImluIHImJiJpdGVyYXRvciJpbiBTeW1ib2wsaT0iRmlsZVJlYWRlciJpbiByJiYiQmxvYiJpbiByJiZmdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IEJsb2IsITB9Y2F0Y2goZSl7cmV0dXJuITF9fSgpLHM9IkZvcm1EYXRhImluIHIsbz0iQXJyYXlCdWZmZXIiaW4gcjtpZihvKXZhciBhPVsiW29iamVjdCBJbnQ4QXJyYXldIiwiW29iamVjdCBVaW50OEFycmF5XSIsIltvYmplY3QgVWludDhDbGFtcGVkQXJyYXldIiwiW29iamVjdCBJbnQxNkFycmF5XSIsIltvYmplY3QgVWludDE2QXJyYXldIiwiW29iamVjdCBJbnQzMkFycmF5XSIsIltvYmplY3QgVWludDMyQXJyYXldIiwiW29iamVjdCBGbG9hdDMyQXJyYXldIiwiW29iamVjdCBGbG9hdDY0QXJyYXldIl0sYz1BcnJheUJ1ZmZlci5pc1ZpZXd8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZhLmluZGV4T2YoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKT4tMX07ZnVuY3Rpb24gbChlKXtpZigic3RyaW5nIiE9dHlwZW9mIGUmJihlPVN0cmluZyhlKSksL1teYS16MC05XC0jJCUmJyorLl5fYHx+XS9pLnRlc3QoZSkpdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBjaGFyYWN0ZXIgaW4gaGVhZGVyIGZpZWxkIG5hbWUiKTtyZXR1cm4gZS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuInN0cmluZyIhPXR5cGVvZiBlJiYoZT1TdHJpbmcoZSkpLGV9ZnVuY3Rpb24gZChlKXt2YXIgdD17bmV4dDpmdW5jdGlvbigpe3ZhciB0PWUuc2hpZnQoKTtyZXR1cm57ZG9uZTp2b2lkIDA9PT10LHZhbHVlOnR9fX07cmV0dXJuIG4mJih0W1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdH0pLHR9ZnVuY3Rpb24gcChlKXt0aGlzLm1hcD17fSxlIGluc3RhbmNlb2YgcD9lLmZvckVhY2goKGZ1bmN0aW9uKGUsdCl7dGhpcy5hcHBlbmQodCxlKX0pLHRoaXMpOkFycmF5LmlzQXJyYXkoZSk/ZS5mb3JFYWNoKChmdW5jdGlvbihlKXt0aGlzLmFwcGVuZChlWzBdLGVbMV0pfSksdGhpcyk6ZSYmT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZSkuZm9yRWFjaCgoZnVuY3Rpb24odCl7dGhpcy5hcHBlbmQodCxlW3RdKX0pLHRoaXMpfWZ1bmN0aW9uIGgoZSl7aWYoZS5ib2R5VXNlZClyZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IFR5cGVFcnJvcigiQWxyZWFkeSByZWFkIikpO2UuYm9keVVzZWQ9ITB9ZnVuY3Rpb24gZihlKXtyZXR1cm4gbmV3IFByb21pc2UoKGZ1bmN0aW9uKHQsbil7ZS5vbmxvYWQ9ZnVuY3Rpb24oKXt0KGUucmVzdWx0KX0sZS5vbmVycm9yPWZ1bmN0aW9uKCl7bihlLmVycm9yKX19KSl9ZnVuY3Rpb24geShlKXt2YXIgdD1uZXcgRmlsZVJlYWRlcixuPWYodCk7cmV0dXJuIHQucmVhZEFzQXJyYXlCdWZmZXIoZSksbn1mdW5jdGlvbiBtKGUpe2lmKGUuc2xpY2UpcmV0dXJuIGUuc2xpY2UoMCk7dmFyIHQ9bmV3IFVpbnQ4QXJyYXkoZS5ieXRlTGVuZ3RoKTtyZXR1cm4gdC5zZXQobmV3IFVpbnQ4QXJyYXkoZSkpLHQuYnVmZmVyfWZ1bmN0aW9uIHYoKXtyZXR1cm4gdGhpcy5ib2R5VXNlZD0hMSx0aGlzLl9pbml0Qm9keT1mdW5jdGlvbihlKXt2YXIgbjt0aGlzLl9ib2R5SW5pdD1lLGU/InN0cmluZyI9PXR5cGVvZiBlP3RoaXMuX2JvZHlUZXh0PWU6aSYmQmxvYi5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihlKT90aGlzLl9ib2R5QmxvYj1lOnMmJkZvcm1EYXRhLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGUpP3RoaXMuX2JvZHlGb3JtRGF0YT1lOnQmJlVSTFNlYXJjaFBhcmFtcy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihlKT90aGlzLl9ib2R5VGV4dD1lLnRvU3RyaW5nKCk6byYmaSYmKG49ZSkmJkRhdGFWaWV3LnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKG4pPyh0aGlzLl9ib2R5QXJyYXlCdWZmZXI9bShlLmJ1ZmZlciksdGhpcy5fYm9keUluaXQ9bmV3IEJsb2IoW3RoaXMuX2JvZHlBcnJheUJ1ZmZlcl0pKTpvJiYoQXJyYXlCdWZmZXIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoZSl8fGMoZSkpP3RoaXMuX2JvZHlBcnJheUJ1ZmZlcj1tKGUpOnRoaXMuX2JvZHlUZXh0PWU9T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpOnRoaXMuX2JvZHlUZXh0PSIiLHRoaXMuaGVhZGVycy5nZXQoImNvbnRlbnQtdHlwZSIpfHwoInN0cmluZyI9PXR5cGVvZiBlP3RoaXMuaGVhZGVycy5zZXQoImNvbnRlbnQtdHlwZSIsInRleHQvcGxhaW47Y2hhcnNldD1VVEYtOCIpOnRoaXMuX2JvZHlCbG9iJiZ0aGlzLl9ib2R5QmxvYi50eXBlP3RoaXMuaGVhZGVycy5zZXQoImNvbnRlbnQtdHlwZSIsdGhpcy5fYm9keUJsb2IudHlwZSk6dCYmVVJMU2VhcmNoUGFyYW1zLnByb3RvdHlwZS5pc1Byb3RvdHlwZU9mKGUpJiZ0aGlzLmhlYWRlcnMuc2V0KCJjb250ZW50LXR5cGUiLCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7Y2hhcnNldD1VVEYtOCIpKX0saSYmKHRoaXMuYmxvYj1mdW5jdGlvbigpe3ZhciBlPWgodGhpcyk7aWYoZSlyZXR1cm4gZTtpZih0aGlzLl9ib2R5QmxvYilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlCbG9iKTtpZih0aGlzLl9ib2R5QXJyYXlCdWZmZXIpcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSkpO2lmKHRoaXMuX2JvZHlGb3JtRGF0YSl0aHJvdyBuZXcgRXJyb3IoImNvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYiIpO3JldHVybiBQcm9taXNlLnJlc29sdmUobmV3IEJsb2IoW3RoaXMuX2JvZHlUZXh0XSkpfSx0aGlzLmFycmF5QnVmZmVyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2JvZHlBcnJheUJ1ZmZlcj9oKHRoaXMpfHxQcm9taXNlLnJlc29sdmUodGhpcy5fYm9keUFycmF5QnVmZmVyKTp0aGlzLmJsb2IoKS50aGVuKHkpfSksdGhpcy50ZXh0PWZ1bmN0aW9uKCl7dmFyIGUsdCxuLHI9aCh0aGlzKTtpZihyKXJldHVybiByO2lmKHRoaXMuX2JvZHlCbG9iKXJldHVybiBlPXRoaXMuX2JvZHlCbG9iLHQ9bmV3IEZpbGVSZWFkZXIsbj1mKHQpLHQucmVhZEFzVGV4dChlKSxuO2lmKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilyZXR1cm4gUHJvbWlzZS5yZXNvbHZlKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1uZXcgVWludDhBcnJheShlKSxuPW5ldyBBcnJheSh0Lmxlbmd0aCkscj0wO3I8dC5sZW5ndGg7cisrKW5bcl09U3RyaW5nLmZyb21DaGFyQ29kZSh0W3JdKTtyZXR1cm4gbi5qb2luKCIiKX0odGhpcy5fYm9keUFycmF5QnVmZmVyKSk7aWYodGhpcy5fYm9keUZvcm1EYXRhKXRocm93IG5ldyBFcnJvcigiY291bGQgbm90IHJlYWQgRm9ybURhdGEgYm9keSBhcyB0ZXh0Iik7cmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dCl9LHMmJih0aGlzLmZvcm1EYXRhPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMudGV4dCgpLnRoZW4oRSl9KSx0aGlzLmpzb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKX0sdGhpc31wLnByb3RvdHlwZS5hcHBlbmQ9ZnVuY3Rpb24oZSx0KXtlPWwoZSksdD11KHQpO3ZhciBuPXRoaXMubWFwW2VdO3RoaXMubWFwW2VdPW4/bisiLCAiK3Q6dH0scC5wcm90b3R5cGUuZGVsZXRlPWZ1bmN0aW9uKGUpe2RlbGV0ZSB0aGlzLm1hcFtsKGUpXX0scC5wcm90b3R5cGUuZ2V0PWZ1bmN0aW9uKGUpe3JldHVybiBlPWwoZSksdGhpcy5oYXMoZSk/dGhpcy5tYXBbZV06bnVsbH0scC5wcm90b3R5cGUuaGFzPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShsKGUpKX0scC5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7dGhpcy5tYXBbbChlKV09dSh0KX0scC5wcm90b3R5cGUuZm9yRWFjaD1mdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0aGlzLm1hcCl0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShuKSYmZS5jYWxsKHQsdGhpcy5tYXBbbl0sbix0aGlzKX0scC5wcm90b3R5cGUua2V5cz1mdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiB0aGlzLmZvckVhY2goKGZ1bmN0aW9uKHQsbil7ZS5wdXNoKG4pfSkpLGQoZSl9LHAucHJvdG90eXBlLnZhbHVlcz1mdW5jdGlvbigpe3ZhciBlPVtdO3JldHVybiB0aGlzLmZvckVhY2goKGZ1bmN0aW9uKHQpe2UucHVzaCh0KX0pKSxkKGUpfSxwLnByb3RvdHlwZS5lbnRyaWVzPWZ1bmN0aW9uKCl7dmFyIGU9W107cmV0dXJuIHRoaXMuZm9yRWFjaCgoZnVuY3Rpb24odCxuKXtlLnB1c2goW24sdF0pfSkpLGQoZSl9LG4mJihwLnByb3RvdHlwZVtTeW1ib2wuaXRlcmF0b3JdPXAucHJvdG90eXBlLmVudHJpZXMpO3ZhciBfPVsiREVMRVRFIiwiR0VUIiwiSEVBRCIsIk9QVElPTlMiLCJQT1NUIiwiUFVUIl07ZnVuY3Rpb24gZyhlLHQpe3ZhciBuLHIsaT0odD10fHx7fSkuYm9keTtpZihlIGluc3RhbmNlb2YgZyl7aWYoZS5ib2R5VXNlZCl0aHJvdyBuZXcgVHlwZUVycm9yKCJBbHJlYWR5IHJlYWQiKTt0aGlzLnVybD1lLnVybCx0aGlzLmNyZWRlbnRpYWxzPWUuY3JlZGVudGlhbHMsdC5oZWFkZXJzfHwodGhpcy5oZWFkZXJzPW5ldyBwKGUuaGVhZGVycykpLHRoaXMubWV0aG9kPWUubWV0aG9kLHRoaXMubW9kZT1lLm1vZGUsdGhpcy5zaWduYWw9ZS5zaWduYWwsaXx8bnVsbD09ZS5fYm9keUluaXR8fChpPWUuX2JvZHlJbml0LGUuYm9keVVzZWQ9ITApfWVsc2UgdGhpcy51cmw9U3RyaW5nKGUpO2lmKHRoaXMuY3JlZGVudGlhbHM9dC5jcmVkZW50aWFsc3x8dGhpcy5jcmVkZW50aWFsc3x8InNhbWUtb3JpZ2luIiwhdC5oZWFkZXJzJiZ0aGlzLmhlYWRlcnN8fCh0aGlzLmhlYWRlcnM9bmV3IHAodC5oZWFkZXJzKSksdGhpcy5tZXRob2Q9KG49dC5tZXRob2R8fHRoaXMubWV0aG9kfHwiR0VUIixyPW4udG9VcHBlckNhc2UoKSxfLmluZGV4T2Yocik+LTE/cjpuKSx0aGlzLm1vZGU9dC5tb2RlfHx0aGlzLm1vZGV8fG51bGwsdGhpcy5zaWduYWw9dC5zaWduYWx8fHRoaXMuc2lnbmFsLHRoaXMucmVmZXJyZXI9bnVsbCwoIkdFVCI9PT10aGlzLm1ldGhvZHx8IkhFQUQiPT09dGhpcy5tZXRob2QpJiZpKXRocm93IG5ldyBUeXBlRXJyb3IoIkJvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzIik7dGhpcy5faW5pdEJvZHkoaSl9ZnVuY3Rpb24gRShlKXt2YXIgdD1uZXcgRm9ybURhdGE7cmV0dXJuIGUudHJpbSgpLnNwbGl0KCImIikuZm9yRWFjaCgoZnVuY3Rpb24oZSl7aWYoZSl7dmFyIG49ZS5zcGxpdCgiPSIpLHI9bi5zaGlmdCgpLnJlcGxhY2UoL1wrL2csIiAiKSxpPW4uam9pbigiPSIpLnJlcGxhY2UoL1wrL2csIiAiKTt0LmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQociksZGVjb2RlVVJJQ29tcG9uZW50KGkpKX19KSksdH1mdW5jdGlvbiBUKGUsdCl7dHx8KHQ9e30pLHRoaXMudHlwZT0iZGVmYXVsdCIsdGhpcy5zdGF0dXM9dm9pZCAwPT09dC5zdGF0dXM/MjAwOnQuc3RhdHVzLHRoaXMub2s9dGhpcy5zdGF0dXM+PTIwMCYmdGhpcy5zdGF0dXM8MzAwLHRoaXMuc3RhdHVzVGV4dD0ic3RhdHVzVGV4dCJpbiB0P3Quc3RhdHVzVGV4dDoiT0siLHRoaXMuaGVhZGVycz1uZXcgcCh0LmhlYWRlcnMpLHRoaXMudXJsPXQudXJsfHwiIix0aGlzLl9pbml0Qm9keShlKX1nLnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgZyh0aGlzLHtib2R5OnRoaXMuX2JvZHlJbml0fSl9LHYuY2FsbChnLnByb3RvdHlwZSksdi5jYWxsKFQucHJvdG90eXBlKSxULnByb3RvdHlwZS5jbG9uZT1mdW5jdGlvbigpe3JldHVybiBuZXcgVCh0aGlzLl9ib2R5SW5pdCx7c3RhdHVzOnRoaXMuc3RhdHVzLHN0YXR1c1RleHQ6dGhpcy5zdGF0dXNUZXh0LGhlYWRlcnM6bmV3IHAodGhpcy5oZWFkZXJzKSx1cmw6dGhpcy51cmx9KX0sVC5lcnJvcj1mdW5jdGlvbigpe3ZhciBlPW5ldyBUKG51bGwse3N0YXR1czowLHN0YXR1c1RleHQ6IiJ9KTtyZXR1cm4gZS50eXBlPSJlcnJvciIsZX07dmFyIGI9WzMwMSwzMDIsMzAzLDMwNywzMDhdO1QucmVkaXJlY3Q9ZnVuY3Rpb24oZSx0KXtpZigtMT09PWIuaW5kZXhPZih0KSl0aHJvdyBuZXcgUmFuZ2VFcnJvcigiSW52YWxpZCBzdGF0dXMgY29kZSIpO3JldHVybiBuZXcgVChudWxsLHtzdGF0dXM6dCxoZWFkZXJzOntsb2NhdGlvbjplfX0pfSxlLkRPTUV4Y2VwdGlvbj1yLkRPTUV4Y2VwdGlvbjt0cnl7bmV3IGUuRE9NRXhjZXB0aW9ufWNhdGNoKEkpe2UuRE9NRXhjZXB0aW9uPWZ1bmN0aW9uKGUsdCl7dGhpcy5tZXNzYWdlPWUsdGhpcy5uYW1lPXQ7dmFyIG49RXJyb3IoZSk7dGhpcy5zdGFjaz1uLnN0YWNrfSxlLkRPTUV4Y2VwdGlvbi5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShFcnJvci5wcm90b3R5cGUpLGUuRE9NRXhjZXB0aW9uLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1lLkRPTUV4Y2VwdGlvbn1mdW5jdGlvbiBOKHQsbil7cmV0dXJuIG5ldyBQcm9taXNlKChmdW5jdGlvbihyLHMpe3ZhciBvPW5ldyBnKHQsbik7aWYoby5zaWduYWwmJm8uc2lnbmFsLmFib3J0ZWQpcmV0dXJuIHMobmV3IGUuRE9NRXhjZXB0aW9uKCJBYm9ydGVkIiwiQWJvcnRFcnJvciIpKTt2YXIgYT1uZXcgWE1MSHR0cFJlcXVlc3Q7ZnVuY3Rpb24gYygpe2EuYWJvcnQoKX1hLm9ubG9hZD1mdW5jdGlvbigpe3ZhciBlLHQsbj17c3RhdHVzOmEuc3RhdHVzLHN0YXR1c1RleHQ6YS5zdGF0dXNUZXh0LGhlYWRlcnM6KGU9YS5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKXx8IiIsdD1uZXcgcCxlLnJlcGxhY2UoL1xyP1xuW1x0IF0rL2csIiAiKS5zcGxpdCgvXHI/XG4vKS5mb3JFYWNoKChmdW5jdGlvbihlKXt2YXIgbj1lLnNwbGl0KCI6Iikscj1uLnNoaWZ0KCkudHJpbSgpO2lmKHIpe3ZhciBpPW4uam9pbigiOiIpLnRyaW0oKTt0LmFwcGVuZChyLGkpfX0pKSx0KX07bi51cmw9InJlc3BvbnNlVVJMImluIGE/YS5yZXNwb25zZVVSTDpuLmhlYWRlcnMuZ2V0KCJYLVJlcXVlc3QtVVJMIik7dmFyIGk9InJlc3BvbnNlImluIGE/YS5yZXNwb25zZTphLnJlc3BvbnNlVGV4dDtyKG5ldyBUKGksbikpfSxhLm9uZXJyb3I9ZnVuY3Rpb24oKXtzKG5ldyBUeXBlRXJyb3IoIk5ldHdvcmsgcmVxdWVzdCBmYWlsZWQiKSl9LGEub250aW1lb3V0PWZ1bmN0aW9uKCl7cyhuZXcgVHlwZUVycm9yKCJOZXR3b3JrIHJlcXVlc3QgZmFpbGVkIikpfSxhLm9uYWJvcnQ9ZnVuY3Rpb24oKXtzKG5ldyBlLkRPTUV4Y2VwdGlvbigiQWJvcnRlZCIsIkFib3J0RXJyb3IiKSl9LGEub3BlbihvLm1ldGhvZCxvLnVybCwhMCksImluY2x1ZGUiPT09by5jcmVkZW50aWFscz9hLndpdGhDcmVkZW50aWFscz0hMDoib21pdCI9PT1vLmNyZWRlbnRpYWxzJiYoYS53aXRoQ3JlZGVudGlhbHM9ITEpLCJyZXNwb25zZVR5cGUiaW4gYSYmaSYmKGEucmVzcG9uc2VUeXBlPSJibG9iIiksby5oZWFkZXJzLmZvckVhY2goKGZ1bmN0aW9uKGUsdCl7YS5zZXRSZXF1ZXN0SGVhZGVyKHQsZSl9KSksby5zaWduYWwmJihvLnNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCJhYm9ydCIsYyksYS5vbnJlYWR5c3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXs0PT09YS5yZWFkeVN0YXRlJiZvLnNpZ25hbC5yZW1vdmVFdmVudExpc3RlbmVyKCJhYm9ydCIsYyl9KSxhLnNlbmQodm9pZCAwPT09by5fYm9keUluaXQ/bnVsbDpvLl9ib2R5SW5pdCl9KSl9Ti5wb2x5ZmlsbD0hMCxyLmZldGNofHwoci5mZXRjaD1OLHIuSGVhZGVycz1wLHIuUmVxdWVzdD1nLHIuUmVzcG9uc2U9VCksZS5IZWFkZXJzPXAsZS5SZXF1ZXN0PWcsZS5SZXNwb25zZT1ULGUuZmV0Y2g9TixPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwiX19lc01vZHVsZSIse3ZhbHVlOiEwfSl9KHt9KSxzLmZldGNoLnBvbnlmaWxsPSEwLGRlbGV0ZSBzLmZldGNoLnBvbHlmaWxsO3ZhciBvPXM7KHQ9by5mZXRjaCkuZGVmYXVsdD1vLmZldGNoLHQuZmV0Y2g9by5mZXRjaCx0LkhlYWRlcnM9by5IZWFkZXJzLHQuUmVxdWVzdD1vLlJlcXVlc3QsdC5SZXNwb25zZT1vLlJlc3BvbnNlLGUuZXhwb3J0cz10fShRZSxRZS5leHBvcnRzKTt2YXIgWGU9UWUuZXhwb3J0cyxXZT1yKFhlKSxaZT1lKHtfX3Byb3RvX186bnVsbCxkZWZhdWx0OldlfSxbWGVdKTtjb25zdCBldD1lPT57bGV0IHQ9e307cmV0dXJuIGUmJigidW5kZWZpbmVkIiE9dHlwZW9mIEhlYWRlcnMmJmUgaW5zdGFuY2VvZiBIZWFkZXJzfHxaZSYmWGUuSGVhZGVycyYmZSBpbnN0YW5jZW9mIFhlLkhlYWRlcnM/dD0oZT0+e2NvbnN0IHQ9e307cmV0dXJuIGUuZm9yRWFjaCgoKGUsbik9Pnt0W25dPWV9KSksdH0pKGUpOkFycmF5LmlzQXJyYXkoZSk/ZS5mb3JFYWNoKCgoW2Usbl0pPT57ZSYmdm9pZCAwIT09biYmKHRbZV09bil9KSk6dD1lKSx0fSx0dD1lPT5lLnJlcGxhY2UoLyhbXHMsXXwjW15cblxyXSspKy9nLCIgIikudHJpbSgpLG50PWU9PnQ9Pl9fYXN5bmModGhpcyxudWxsLChmdW5jdGlvbiooKXt2YXIgbjtjb25zdHt1cmw6cixxdWVyeTppLHZhcmlhYmxlczpzLG9wZXJhdGlvbk5hbWU6byxmZXRjaDphLGZldGNoT3B0aW9uczpjLG1pZGRsZXdhcmU6bH09dCx1PV9fc3ByZWFkVmFsdWVzKHt9LHQuaGVhZGVycyk7bGV0IGQscD0iIjsiUE9TVCI9PT1lPyhkPXN0KGkscyxvLGMuanNvblNlcmlhbGl6ZXIpLCJzdHJpbmciPT10eXBlb2YgZCYmKHVbIkNvbnRlbnQtVHlwZSJdPSJhcHBsaWNhdGlvbi9qc29uIikpOnA9KGU9PntpZighQXJyYXkuaXNBcnJheShlLnF1ZXJ5KSl7Y29uc3QgdD1lLG49W2BxdWVyeT0ke2VuY29kZVVSSUNvbXBvbmVudCh0dCh0LnF1ZXJ5KSl9YF07cmV0dXJuIGUudmFyaWFibGVzJiZuLnB1c2goYHZhcmlhYmxlcz0ke2VuY29kZVVSSUNvbXBvbmVudCh0Lmpzb25TZXJpYWxpemVyLnN0cmluZ2lmeSh0LnZhcmlhYmxlcykpfWApLHQub3BlcmF0aW9uTmFtZSYmbi5wdXNoKGBvcGVyYXRpb25OYW1lPSR7ZW5jb2RlVVJJQ29tcG9uZW50KHQub3BlcmF0aW9uTmFtZSl9YCksbi5qb2luKCImIil9aWYodm9pZCAwIT09ZS52YXJpYWJsZXMmJiFBcnJheS5pc0FycmF5KGUudmFyaWFibGVzKSl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBjcmVhdGUgcXVlcnkgd2l0aCBnaXZlbiB2YXJpYWJsZSB0eXBlLCBhcnJheSBleHBlY3RlZCIpO2NvbnN0IHQ9ZSxuPWUucXVlcnkucmVkdWNlKCgoZSxuLHIpPT4oZS5wdXNoKHtxdWVyeTp0dChuKSx2YXJpYWJsZXM6dC52YXJpYWJsZXM/dC5qc29uU2VyaWFsaXplci5zdHJpbmdpZnkodC52YXJpYWJsZXNbcl0pOnZvaWQgMH0pLGUpKSxbXSk7cmV0dXJuYHF1ZXJ5PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHQuanNvblNlcmlhbGl6ZXIuc3RyaW5naWZ5KG4pKX1gfSkoe3F1ZXJ5OmksdmFyaWFibGVzOnMsb3BlcmF0aW9uTmFtZTpvLGpzb25TZXJpYWxpemVyOm51bGwhPShuPWMuanNvblNlcmlhbGl6ZXIpP246emV9KTtjb25zdCBoPV9fc3ByZWFkVmFsdWVzKHttZXRob2Q6ZSxoZWFkZXJzOnUsYm9keTpkfSxjKTtsZXQgZj1yLHk9aDtpZihsKXtjb25zdCBlPXlpZWxkIFByb21pc2UucmVzb2x2ZShsKF9fc3ByZWFkUHJvcHMoX19zcHJlYWRWYWx1ZXMoe30saCkse3VybDpyLG9wZXJhdGlvbk5hbWU6byx2YXJpYWJsZXM6c30pKSkse3VybDp0fT1lO2Y9dCx5PV9fb2JqUmVzdChlLFsidXJsIl0pfXJldHVybiBwJiYoZj1gJHtmfT8ke3B9YCkseWllbGQgYShmLHkpfSkpO2NsYXNzIHJ0e2NvbnN0cnVjdG9yKGUsdD17fSl7dGhpcy51cmw9ZSx0aGlzLnJlcXVlc3RDb25maWc9dCx0aGlzLnJhd1JlcXVlc3Q9KC4uLmUpPT5fX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3RbdCxuLHJdPWUsaT0oKGUsdCxuKT0+ZS5xdWVyeT9lOntxdWVyeTplLHZhcmlhYmxlczp0LHJlcXVlc3RIZWFkZXJzOm4sc2lnbmFsOnZvaWQgMH0pKHQsbixyKSxzPXRoaXMucmVxdWVzdENvbmZpZyx7aGVhZGVyczpvLGZldGNoOmE9V2UsbWV0aG9kOmM9IlBPU1QiLHJlcXVlc3RNaWRkbGV3YXJlOmwscmVzcG9uc2VNaWRkbGV3YXJlOnV9PXMsZD1fX29ialJlc3QocyxbImhlYWRlcnMiLCJmZXRjaCIsIm1ldGhvZCIsInJlcXVlc3RNaWRkbGV3YXJlIiwicmVzcG9uc2VNaWRkbGV3YXJlIl0pLHt1cmw6cH09dGhpczt2b2lkIDAhPT1pLnNpZ25hbCYmKGQuc2lnbmFsPWkuc2lnbmFsKTtjb25zdHtvcGVyYXRpb25OYW1lOmh9PUhlKGkucXVlcnkpO3JldHVybiBpdCh7dXJsOnAscXVlcnk6aS5xdWVyeSx2YXJpYWJsZXM6aS52YXJpYWJsZXMsaGVhZGVyczpfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxldChhdChvKSkpLGV0KGkucmVxdWVzdEhlYWRlcnMpKSxvcGVyYXRpb25OYW1lOmgsZmV0Y2g6YSxtZXRob2Q6YyxmZXRjaE9wdGlvbnM6ZCxtaWRkbGV3YXJlOmx9KS50aGVuKChlPT4odSYmdShlKSxlKSkpLmNhdGNoKChlPT57dGhyb3cgdSYmdShlKSxlfSkpfSkpfXJlcXVlc3QoZSwuLi50KXtyZXR1cm4gX19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0W24scl09dCxpPSgoZSx0LG4pPT5lLmRvY3VtZW50P2U6e2RvY3VtZW50OmUsdmFyaWFibGVzOnQscmVxdWVzdEhlYWRlcnM6bixzaWduYWw6dm9pZCAwfSkoZSxuLHIpLHM9dGhpcy5yZXF1ZXN0Q29uZmlnLHtoZWFkZXJzOm8sZmV0Y2g6YT1XZSxtZXRob2Q6Yz0iUE9TVCIscmVxdWVzdE1pZGRsZXdhcmU6bCxyZXNwb25zZU1pZGRsZXdhcmU6dX09cyxkPV9fb2JqUmVzdChzLFsiaGVhZGVycyIsImZldGNoIiwibWV0aG9kIiwicmVxdWVzdE1pZGRsZXdhcmUiLCJyZXNwb25zZU1pZGRsZXdhcmUiXSkse3VybDpwfT10aGlzO3ZvaWQgMCE9PWkuc2lnbmFsJiYoZC5zaWduYWw9aS5zaWduYWwpO2NvbnN0e3F1ZXJ5Omgsb3BlcmF0aW9uTmFtZTpmfT1IZShpLmRvY3VtZW50KTtyZXR1cm4gaXQoe3VybDpwLHF1ZXJ5OmgsdmFyaWFibGVzOmkudmFyaWFibGVzLGhlYWRlcnM6X19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sZXQoYXQobykpKSxldChpLnJlcXVlc3RIZWFkZXJzKSksb3BlcmF0aW9uTmFtZTpmLGZldGNoOmEsbWV0aG9kOmMsZmV0Y2hPcHRpb25zOmQsbWlkZGxld2FyZTpsfSkudGhlbigoZT0+KHUmJnUoZSksZS5kYXRhKSkpLmNhdGNoKChlPT57dGhyb3cgdSYmdShlKSxlfSkpfSkpfWJhdGNoUmVxdWVzdHMoZSx0KXt2YXIgbjtjb25zdCByPSgoZSx0KT0+ZS5kb2N1bWVudHM/ZTp7ZG9jdW1lbnRzOmUscmVxdWVzdEhlYWRlcnM6dCxzaWduYWw6dm9pZCAwfSkoZSx0KSxpPXRoaXMucmVxdWVzdENvbmZpZyx7aGVhZGVyczpzfT1pLG89X19vYmpSZXN0KGksWyJoZWFkZXJzIl0pO3ZvaWQgMCE9PXIuc2lnbmFsJiYoby5zaWduYWw9ci5zaWduYWwpO2NvbnN0IGE9ci5kb2N1bWVudHMubWFwKCgoe2RvY3VtZW50OmV9KT0+SGUoZSkucXVlcnkpKSxjPXIuZG9jdW1lbnRzLm1hcCgoKHt2YXJpYWJsZXM6ZX0pPT5lKSk7cmV0dXJuIGl0KHt1cmw6dGhpcy51cmwscXVlcnk6YSx2YXJpYWJsZXM6YyxoZWFkZXJzOl9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LGV0KGF0KHMpKSksZXQoci5yZXF1ZXN0SGVhZGVycykpLG9wZXJhdGlvbk5hbWU6dm9pZCAwLGZldGNoOm51bGwhPShuPXRoaXMucmVxdWVzdENvbmZpZy5mZXRjaCk/bjpXZSxtZXRob2Q6dGhpcy5yZXF1ZXN0Q29uZmlnLm1ldGhvZHx8IlBPU1QiLGZldGNoT3B0aW9uczpvLG1pZGRsZXdhcmU6dGhpcy5yZXF1ZXN0Q29uZmlnLnJlcXVlc3RNaWRkbGV3YXJlfSkudGhlbigoZT0+KHRoaXMucmVxdWVzdENvbmZpZy5yZXNwb25zZU1pZGRsZXdhcmUmJnRoaXMucmVxdWVzdENvbmZpZy5yZXNwb25zZU1pZGRsZXdhcmUoZSksZS5kYXRhKSkpLmNhdGNoKChlPT57dGhyb3cgdGhpcy5yZXF1ZXN0Q29uZmlnLnJlc3BvbnNlTWlkZGxld2FyZSYmdGhpcy5yZXF1ZXN0Q29uZmlnLnJlc3BvbnNlTWlkZGxld2FyZShlKSxlfSkpfXNldEhlYWRlcnMoZSl7cmV0dXJuIHRoaXMucmVxdWVzdENvbmZpZy5oZWFkZXJzPWUsdGhpc31zZXRIZWFkZXIoZSx0KXtjb25zdHtoZWFkZXJzOm59PXRoaXMucmVxdWVzdENvbmZpZztyZXR1cm4gbj9uW2VdPXQ6dGhpcy5yZXF1ZXN0Q29uZmlnLmhlYWRlcnM9e1tlXTp0fSx0aGlzfXNldEVuZHBvaW50KGUpe3JldHVybiB0aGlzLnVybD1lLHRoaXN9fWNvbnN0IGl0PWU9Pl9fYXN5bmModGhpcyxudWxsLChmdW5jdGlvbiooKXt2YXIgdCxuO2NvbnN0e3F1ZXJ5OnIsdmFyaWFibGVzOmksZmV0Y2hPcHRpb25zOnN9PWUsbz1udCgobnVsbCE9KHQ9ZS5tZXRob2QpP3Q6InBvc3QiKS50b1VwcGVyQ2FzZSgpKTtjb25zdCBhPUFycmF5LmlzQXJyYXkoZS5xdWVyeSksYz15aWVsZCBvKGUpLGw9eWllbGQgb3QoYyxudWxsIT0obj1zLmpzb25TZXJpYWxpemVyKT9uOnplKSx1PUFycmF5LmlzQXJyYXkobCk/IWwuc29tZSgoKHtkYXRhOmV9KT0+IWUpKTpCb29sZWFuKGwuZGF0YSksZD1BcnJheS5pc0FycmF5KGwpfHwhbC5lcnJvcnN8fEFycmF5LmlzQXJyYXkobC5lcnJvcnMpJiYhbC5lcnJvcnMubGVuZ3RofHwiYWxsIj09PXMuZXJyb3JQb2xpY3l8fCJpZ25vcmUiPT09cy5lcnJvclBvbGljeTtpZihjLm9rJiZkJiZ1KXtjb25zdCBlPShBcnJheS5pc0FycmF5KGwpLGwpLHtlcnJvcnM6dH09ZSxuPV9fb2JqUmVzdChlLFsiZXJyb3JzIl0pLHI9Imlnbm9yZSI9PT1zLmVycm9yUG9saWN5P246bDtyZXR1cm4gX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSxhP3tkYXRhOnJ9OnIpLHtoZWFkZXJzOmMuaGVhZGVycyxzdGF0dXM6Yy5zdGF0dXN9KX10aHJvdyBuZXcgSmUoX19zcHJlYWRQcm9wcyhfX3NwcmVhZFZhbHVlcyh7fSwic3RyaW5nIj09dHlwZW9mIGw/e2Vycm9yOmx9OmwpLHtzdGF0dXM6Yy5zdGF0dXMsaGVhZGVyczpjLmhlYWRlcnN9KSx7cXVlcnk6cix2YXJpYWJsZXM6aX0pfSkpLHN0PShlLHQsbixyKT0+e2NvbnN0IGk9bnVsbCE9cj9yOnplO2lmKCFBcnJheS5pc0FycmF5KGUpKXJldHVybiBpLnN0cmluZ2lmeSh7cXVlcnk6ZSx2YXJpYWJsZXM6dCxvcGVyYXRpb25OYW1lOm59KTtpZih2b2lkIDAhPT10JiYhQXJyYXkuaXNBcnJheSh0KSl0aHJvdyBuZXcgRXJyb3IoIkNhbm5vdCBjcmVhdGUgcmVxdWVzdCBib2R5IHdpdGggZ2l2ZW4gdmFyaWFibGUgdHlwZSwgYXJyYXkgZXhwZWN0ZWQiKTtjb25zdCBzPWUucmVkdWNlKCgoZSxuLHIpPT4oZS5wdXNoKHtxdWVyeTpuLHZhcmlhYmxlczp0P3Rbcl06dm9pZCAwfSksZSkpLFtdKTtyZXR1cm4gaS5zdHJpbmdpZnkocyl9LG90PShlLHQpPT5fX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7bGV0IG47cmV0dXJuIGUuaGVhZGVycy5mb3JFYWNoKCgoZSx0KT0+eyJjb250ZW50LXR5cGUiPT09dC50b0xvd2VyQ2FzZSgpJiYobj1lKX0pKSxuJiYobi50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoImFwcGxpY2F0aW9uL2pzb24iKXx8bi50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgoImFwcGxpY2F0aW9uL2dyYXBocWwranNvbiIpfHxuLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgiYXBwbGljYXRpb24vZ3JhcGhxbC1yZXNwb25zZStqc29uIikpP3QucGFyc2UoeWllbGQgZS50ZXh0KCkpOmUudGV4dCgpfSkpLGF0PWU9PiJmdW5jdGlvbiI9PXR5cGVvZiBlP2UoKTplO3ZhciBjdD0oZT0+KGUuQmlsbGluZ1F1b3RhRXhjZWVkZWQ9IkJpbGxpbmdRdW90YUV4Y2VlZGVkIixlKSkoY3R8fHt9KTtjb25zdCBsdD1bY3QuQmlsbGluZ1F1b3RhRXhjZWVkZWQudG9TdHJpbmcoKV0sdXQ9ZT0+e2NvbnN0IHQ9KG4scixpLHMsbz0wKT0+X19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe3RyeXtyZXR1cm4geWllbGQgbigpfWNhdGNoKGEpe2lmKGEgaW5zdGFuY2VvZiBKZSYmIShlPT57dmFyIHQ7cmV0dXJuIHZvaWQgMD09PShudWxsPT0odD1lLnJlc3BvbnNlLmVycm9ycyk/dm9pZCAwOnQuZmluZCgoZT0+bHQuaW5jbHVkZXMoZS5tZXNzYWdlKSkpKX0pKGEpKXRocm93IGE7aWYobzwxMClyZXR1cm4geWllbGQgbmV3IFByb21pc2UoKGU9PnNldFRpbWVvdXQoZSwxZTMrNTAwKk1hdGgucG93KDIsbykpKSkseWllbGQgdChuLHIsaSxzLG8rMSk7dGhyb3cgY29uc29sZS5lcnJvcihgaGlnaGxpZ2h0LmlvOiBbJHtlfHxlfV0gZGF0YSByZXF1ZXN0IGZhaWxlZCBhZnRlciAke299IHJldHJpZXNgKSxhfX0pKTtyZXR1cm4gdH0sZHQ9WyJudW1iZXIiLCJzdHJpbmciLCJib29sZWFuIl07Y2xhc3MgcHR7Y29uc3RydWN0b3IoZSx0KXtfX3B1YmxpY0ZpZWxkKHRoaXMsImRlYnVnIiksX19wdWJsaWNGaWVsZCh0aGlzLCJuYW1lIiksdGhpcy5kZWJ1Zz1lLHRoaXMubmFtZT10fWxvZyguLi5lKXtpZih0aGlzLmRlYnVnKXtsZXQgdD1gWyR7RGF0ZS5ub3coKX1dYDt0aGlzLm5hbWUmJih0Kz1gIC0gJHt0aGlzLm5hbWV9YCksY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSxbdCwuLi5lXSl9fX12YXIgaHQ9VWludDhBcnJheSxmdD1VaW50MTZBcnJheSx5dD1JbnQzMkFycmF5LG10PW5ldyBodChbMCwwLDAsMCwwLDAsMCwwLDEsMSwxLDEsMiwyLDIsMiwzLDMsMywzLDQsNCw0LDQsNSw1LDUsNSwwLDAsMCwwXSksdnQ9bmV3IGh0KFswLDAsMCwwLDEsMSwyLDIsMywzLDQsNCw1LDUsNiw2LDcsNyw4LDgsOSw5LDEwLDEwLDExLDExLDEyLDEyLDEzLDEzLDAsMF0pLF90PW5ldyBodChbMTYsMTcsMTgsMCw4LDcsOSw2LDEwLDUsMTEsNCwxMiwzLDEzLDIsMTQsMSwxNV0pLGd0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPW5ldyBmdCgzMSkscj0wO3I8MzE7KytyKW5bcl09dCs9MTw8ZVtyLTFdO3ZhciBpPW5ldyB5dChuWzMwXSk7Zm9yKHI9MTtyPDMwOysrcilmb3IodmFyIHM9bltyXTtzPG5bcisxXTsrK3MpaVtzXT1zLW5bcl08PDV8cjtyZXR1cm57YjpuLHI6aX19LEV0PWd0KG10LDIpLFR0PUV0LmIsYnQ9RXQucjtUdFsyOF09MjU4LGJ0WzI1OF09Mjg7Zm9yKHZhciBOdD1ndCh2dCwwKS5yLEl0PW5ldyBmdCgzMjc2OCksT3Q9MDtPdDwzMjc2ODsrK090KXt2YXIgQXQ9KDQzNjkwJk90KT4+MXwoMjE4NDUmT3QpPDwxO0F0PSg2MTY4MCYoQXQ9KDUyNDI4JkF0KT4+MnwoMTMxMDcmQXQpPDwyKSk+PjR8KDM4NTUmQXQpPDw0LEl0W090XT0oKDY1MjgwJkF0KT4+OHwoMjU1JkF0KTw8OCk+PjF9dmFyIHh0PWZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9ZS5sZW5ndGgsaT0wLHM9bmV3IGZ0KHQpO2k8cjsrK2kpZVtpXSYmKytzW2VbaV0tMV07dmFyIG8sYT1uZXcgZnQodCk7Zm9yKGk9MTtpPHQ7KytpKWFbaV09YVtpLTFdK3NbaS0xXTw8MTtpZihuKXtvPW5ldyBmdCgxPDx0KTt2YXIgYz0xNS10O2ZvcihpPTA7aTxyOysraSlpZihlW2ldKWZvcih2YXIgbD1pPDw0fGVbaV0sdT10LWVbaV0sZD1hW2VbaV0tMV0rKzw8dSxwPWR8KDE8PHUpLTE7ZDw9cDsrK2Qpb1tJdFtkXT4+Y109bH1lbHNlIGZvcihvPW5ldyBmdChyKSxpPTA7aTxyOysraSllW2ldJiYob1tpXT1JdFthW2VbaV0tMV0rK10+PjE1LWVbaV0pO3JldHVybiBvfSxTdD1uZXcgaHQoMjg4KTtmb3IoT3Q9MDtPdDwxNDQ7KytPdClTdFtPdF09ODtmb3IoT3Q9MTQ0O090PDI1NjsrK090KVN0W090XT05O2ZvcihPdD0yNTY7T3Q8MjgwOysrT3QpU3RbT3RdPTc7Zm9yKE90PTI4MDtPdDwyODg7KytPdClTdFtPdF09ODt2YXIgRHQ9bmV3IGh0KDMyKTtmb3IoT3Q9MDtPdDwzMjsrK090KUR0W090XT01O3ZhciB3dD14dChTdCw5LDApLGt0PXh0KER0LDUsMCksQ3Q9ZnVuY3Rpb24oZSl7cmV0dXJuKGUrNykvOHwwfSxQdD1mdW5jdGlvbihlLHQsbil7cmV0dXJuKG51bGw9PXR8fHQ8MCkmJih0PTApLChudWxsPT1ufHxuPmUubGVuZ3RoKSYmKG49ZS5sZW5ndGgpLG5ldyBodChlLnN1YmFycmF5KHQsbikpfSxSdD1mdW5jdGlvbihlLHQsbil7bjw8PTcmdDt2YXIgcj10Lzh8MDtlW3JdfD1uLGVbcisxXXw9bj4+OH0sTHQ9ZnVuY3Rpb24oZSx0LG4pe248PD03JnQ7dmFyIHI9dC84fDA7ZVtyXXw9bixlW3IrMV18PW4+PjgsZVtyKzJdfD1uPj4xNn0sRnQ9ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49W10scj0wO3I8ZS5sZW5ndGg7KytyKWVbcl0mJm4ucHVzaCh7czpyLGY6ZVtyXX0pO3ZhciBpPW4ubGVuZ3RoLHM9bi5zbGljZSgpO2lmKCFpKXJldHVybnt0OnF0LGw6MH07aWYoMT09aSl7dmFyIG89bmV3IGh0KG5bMF0ucysxKTtyZXR1cm4gb1tuWzBdLnNdPTEse3Q6byxsOjF9fW4uc29ydCgoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5mLXQuZn0pKSxuLnB1c2goe3M6LTEsZjoyNTAwMX0pO3ZhciBhPW5bMF0sYz1uWzFdLGw9MCx1PTEsZD0yO2ZvcihuWzBdPXtzOi0xLGY6YS5mK2MuZixsOmEscjpjfTt1IT1pLTE7KWE9bltuW2xdLmY8bltkXS5mP2wrKzpkKytdLGM9bltsIT11JiZuW2xdLmY8bltkXS5mP2wrKzpkKytdLG5bdSsrXT17czotMSxmOmEuZitjLmYsbDphLHI6Y307dmFyIHA9c1swXS5zO2ZvcihyPTE7cjxpOysrcilzW3JdLnM+cCYmKHA9c1tyXS5zKTt2YXIgaD1uZXcgZnQocCsxKSxmPSR0KG5bdS0xXSxoLDApO2lmKGY+dCl7cj0wO3ZhciB5PTAsbT1mLXQsdj0xPDxtO2ZvcihzLnNvcnQoKGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGhbdC5zXS1oW2Uuc118fGUuZi10LmZ9KSk7cjxpOysrcil7dmFyIF89c1tyXS5zO2lmKCEoaFtfXT50KSlicmVhazt5Kz12LSgxPDxmLWhbX10pLGhbX109dH1mb3IoeT4+PW07eT4wOyl7dmFyIGc9c1tyXS5zO2hbZ108dD95LT0xPDx0LWhbZ10rKy0xOisrcn1mb3IoO3I+PTAmJnk7LS1yKXt2YXIgRT1zW3JdLnM7aFtFXT09dCYmKC0taFtFXSwrK3kpfWY9dH1yZXR1cm57dDpuZXcgaHQoaCksbDpmfX0sJHQ9ZnVuY3Rpb24oZSx0LG4pe3JldHVybi0xPT1lLnM/TWF0aC5tYXgoJHQoZS5sLHQsbisxKSwkdChlLnIsdCxuKzEpKTp0W2Uuc109bn0sTXQ9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoO3QmJiFlWy0tdF07KTtmb3IodmFyIG49bmV3IGZ0KCsrdCkscj0wLGk9ZVswXSxzPTEsbz1mdW5jdGlvbihlKXtuW3IrK109ZX0sYT0xO2E8PXQ7KythKWlmKGVbYV09PWkmJmEhPXQpKytzO2Vsc2V7aWYoIWkmJnM+Mil7Zm9yKDtzPjEzODtzLT0xMzgpbygzMjc1NCk7cz4yJiYobyhzPjEwP3MtMTE8PDV8Mjg2OTA6cy0zPDw1fDEyMzA1KSxzPTApfWVsc2UgaWYocz4zKXtmb3IobyhpKSwtLXM7cz42O3MtPTYpbyg4MzA0KTtzPjImJihvKHMtMzw8NXw4MjA4KSxzPTApfWZvcig7cy0tOylvKGkpO3M9MSxpPWVbYV19cmV0dXJue2M6bi5zdWJhcnJheSgwLHIpLG46dH19LFZ0PWZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPTAscj0wO3I8dC5sZW5ndGg7KytyKW4rPWVbcl0qdFtyXTtyZXR1cm4gbn0sQnQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPW4ubGVuZ3RoLGk9Q3QodCsyKTtlW2ldPTI1NSZyLGVbaSsxXT1yPj44LGVbaSsyXT0yNTVeZVtpXSxlW2krM109MjU1XmVbaSsxXTtmb3IodmFyIHM9MDtzPHI7KytzKWVbaStzKzRdPW5bc107cmV0dXJuIDgqKGkrNCtyKX0sanQ9ZnVuY3Rpb24oZSx0LG4scixpLHMsbyxhLGMsbCx1KXtSdCh0LHUrKyxuKSwrK2lbMjU2XTtmb3IodmFyIGQ9RnQoaSwxNSkscD1kLnQsaD1kLmwsZj1GdChzLDE1KSx5PWYudCxtPWYubCx2PU10KHApLF89di5jLGc9di5uLEU9TXQoeSksVD1FLmMsYj1FLm4sTj1uZXcgZnQoMTkpLEk9MDtJPF8ubGVuZ3RoOysrSSkrK05bMzEmX1tJXV07Zm9yKEk9MDtJPFQubGVuZ3RoOysrSSkrK05bMzEmVFtJXV07Zm9yKHZhciBPPUZ0KE4sNyksQT1PLnQseD1PLmwsUz0xOTtTPjQmJiFBW190W1MtMV1dOy0tUyk7dmFyIEQsdyxrLEMsUD1sKzU8PDMsUj1WdChpLFN0KStWdChzLER0KStvLEw9VnQoaSxwKStWdChzLHkpK28rMTQrMypTK1Z0KE4sQSkrMipOWzE2XSszKk5bMTddKzcqTlsxOF07aWYoYz49MCYmUDw9UiYmUDw9TClyZXR1cm4gQnQodCx1LGUuc3ViYXJyYXkoYyxjK2wpKTtpZihSdCh0LHUsMSsoTDxSKSksdSs9MixMPFIpe0Q9eHQocCxoLDApLHc9cCxrPXh0KHksbSwwKSxDPXk7dmFyIEY9eHQoQSx4LDApO1J0KHQsdSxnLTI1NyksUnQodCx1KzUsYi0xKSxSdCh0LHUrMTAsUy00KSx1Kz0xNDtmb3IoST0wO0k8UzsrK0kpUnQodCx1KzMqSSxBW190W0ldXSk7dSs9MypTO2Zvcih2YXIgJD1bXyxUXSxNPTA7TTwyOysrTSl7dmFyIFY9JFtNXTtmb3IoST0wO0k8Vi5sZW5ndGg7KytJKXt2YXIgQj0zMSZWW0ldO1J0KHQsdSxGW0JdKSx1Kz1BW0JdLEI+MTUmJihSdCh0LHUsVltJXT4+NSYxMjcpLHUrPVZbSV0+PjEyKX19fWVsc2UgRD13dCx3PVN0LGs9a3QsQz1EdDtmb3IoST0wO0k8YTsrK0kpe3ZhciBqPXJbSV07aWYoaj4yNTUpe0x0KHQsdSxEWyhCPWo+PjE4JjMxKSsyNTddKSx1Kz13W0IrMjU3XSxCPjcmJihSdCh0LHUsaj4+MjMmMzEpLHUrPW10W0JdKTt2YXIgVT0zMSZqO0x0KHQsdSxrW1VdKSx1Kz1DW1VdLFU+MyYmKEx0KHQsdSxqPj41JjgxOTEpLHUrPXZ0W1VdKX1lbHNlIEx0KHQsdSxEW2pdKSx1Kz13W2pdfXJldHVybiBMdCh0LHUsRFsyNTZdKSx1K3dbMjU2XX0sVXQ9bmV3IHl0KFs2NTU0MCwxMzEwODAsMTMxMDg4LDEzMTEwNCwyNjIxNzYsMTA0ODcwNCwxMDQ4ODMyLDIxMTQ1NjAsMjExNzYzMl0pLHF0PW5ldyBodCgwKSxLdD1mdW5jdGlvbigpe2Zvcih2YXIgZT1uZXcgSW50MzJBcnJheSgyNTYpLHQ9MDt0PDI1NjsrK3Qpe2Zvcih2YXIgbj10LHI9OTstLXI7KW49KDEmbiYmLTMwNjY3NDkxMilebj4+PjE7ZVt0XT1ufXJldHVybiBlfSgpLEd0PWZ1bmN0aW9uKGUsdCxuLHIsaSl7aWYoIWkmJihpPXtsOjF9LHQuZGljdGlvbmFyeSkpe3ZhciBzPXQuZGljdGlvbmFyeS5zdWJhcnJheSgtMzI3NjgpLG89bmV3IGh0KHMubGVuZ3RoK2UubGVuZ3RoKTtvLnNldChzKSxvLnNldChlLHMubGVuZ3RoKSxlPW8saS53PXMubGVuZ3RofXJldHVybiBmdW5jdGlvbihlLHQsbixyLGkscyl7dmFyIG89cy56fHxlLmxlbmd0aCxhPW5ldyBodChyK28rNSooMStNYXRoLmNlaWwoby83ZTMpKStpKSxjPWEuc3ViYXJyYXkocixhLmxlbmd0aC1pKSxsPXMubCx1PTcmKHMucnx8MCk7aWYodCl7dSYmKGNbMF09cy5yPj4zKTtmb3IodmFyIGQ9VXRbdC0xXSxwPWQ+PjEzLGg9ODE5MSZkLGY9KDE8PG4pLTEseT1zLnB8fG5ldyBmdCgzMjc2OCksbT1zLmh8fG5ldyBmdChmKzEpLHY9TWF0aC5jZWlsKG4vMyksXz0yKnYsZz1mdW5jdGlvbih0KXtyZXR1cm4oZVt0XV5lW3QrMV08PHZeZVt0KzJdPDxfKSZmfSxFPW5ldyB5dCgyNWUzKSxUPW5ldyBmdCgyODgpLGI9bmV3IGZ0KDMyKSxOPTAsST0wLE89cy5pfHwwLEE9MCx4PXMud3x8MCxTPTA7TysyPG87KytPKXt2YXIgRD1nKE8pLHc9MzI3NjcmTyxrPW1bRF07aWYoeVt3XT1rLG1bRF09dyx4PD1PKXt2YXIgQz1vLU87aWYoKE4+N2UzfHxBPjI0NTc2KSYmKEM+NDIzfHwhbCkpe3U9anQoZSxjLDAsRSxULGIsSSxBLFMsTy1TLHUpLEE9Tj1JPTAsUz1PO2Zvcih2YXIgUD0wO1A8Mjg2OysrUClUW1BdPTA7Zm9yKFA9MDtQPDMwOysrUCliW1BdPTB9dmFyIFI9MixMPTAsRj1oLCQ9dy1rJjMyNzY3O2lmKEM+MiYmRD09ZyhPLSQpKWZvcih2YXIgTT1NYXRoLm1pbihwLEMpLTEsVj1NYXRoLm1pbigzMjc2NyxPKSxCPU1hdGgubWluKDI1OCxDKTskPD1WJiYtLUYmJnchPWs7KXtpZihlW08rUl09PWVbTytSLSRdKXtmb3IodmFyIGo9MDtqPEImJmVbTytqXT09ZVtPK2otJF07KytqKTtpZihqPlIpe2lmKFI9aixMPSQsaj5NKWJyZWFrO3ZhciBVPU1hdGgubWluKCQsai0yKSxxPTA7Zm9yKFA9MDtQPFU7KytQKXt2YXIgSz1PLSQrUCYzMjc2NyxHPUsteVtLXSYzMjc2NztHPnEmJihxPUcsaz1LKX19fSQrPSh3PWspLShrPXlbd10pJjMyNzY3fWlmKEwpe0VbQSsrXT0yNjg0MzU0NTZ8YnRbUl08PDE4fE50W0xdO3ZhciB6PTMxJmJ0W1JdLFk9MzEmTnRbTF07SSs9bXRbel0rdnRbWV0sKytUWzI1Nyt6XSwrK2JbWV0seD1PK1IsKytOfWVsc2UgRVtBKytdPWVbT10sKytUW2VbT11dfX1mb3IoTz1NYXRoLm1heChPLHgpO088bzsrK08pRVtBKytdPWVbT10sKytUW2VbT11dO3U9anQoZSxjLGwsRSxULGIsSSxBLFMsTy1TLHUpLGx8fChzLnI9NyZ1fGNbdS84fDBdPDwzLHUtPTcscy5oPW0scy5wPXkscy5pPU8scy53PXgpfWVsc2V7Zm9yKE89cy53fHwwO088bytsO08rPTY1NTM1KXt2YXIgSD1PKzY1NTM1O0g+PW8mJihjW3UvOHwwXT1sLEg9byksdT1CdChjLHUrMSxlLnN1YmFycmF5KE8sSCkpfXMuaT1vfXJldHVybiBQdChhLDAscitDdCh1KStpKX0oZSxudWxsPT10LmxldmVsPzY6dC5sZXZlbCxudWxsPT10Lm1lbT9NYXRoLmNlaWwoMS41Kk1hdGgubWF4KDgsTWF0aC5taW4oMTMsTWF0aC5sb2coZS5sZW5ndGgpKSkpOjEyK3QubWVtLG4scixpKX0senQ9ZnVuY3Rpb24oZSx0LG4pe2Zvcig7bjsrK3QpZVt0XT1uLG4+Pj49OH07ZnVuY3Rpb24gWXQoZSx0KXt0fHwodD17fSk7dmFyIG49ZnVuY3Rpb24oKXt2YXIgZT0tMTtyZXR1cm57cDpmdW5jdGlvbih0KXtmb3IodmFyIG49ZSxyPTA7cjx0Lmxlbmd0aDsrK3Ipbj1LdFsyNTUmbl50W3JdXV5uPj4+ODtlPW59LGQ6ZnVuY3Rpb24oKXtyZXR1cm5+ZX19fSgpLHI9ZS5sZW5ndGg7bi5wKGUpO3ZhciBpLHM9R3QoZSx0LDEwKygoaT10KS5maWxlbmFtZT9pLmZpbGVuYW1lLmxlbmd0aCsxOjApLDgpLG89cy5sZW5ndGg7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7dmFyIG49dC5maWxlbmFtZTtpZihlWzBdPTMxLGVbMV09MTM5LGVbMl09OCxlWzhdPXQubGV2ZWw8Mj80Ojk9PXQubGV2ZWw/MjowLGVbOV09MywwIT10Lm10aW1lJiZ6dChlLDQsTWF0aC5mbG9vcihuZXcgRGF0ZSh0Lm10aW1lfHxEYXRlLm5vdygpKS8xZTMpKSxuKXtlWzNdPTg7Zm9yKHZhciByPTA7cjw9bi5sZW5ndGg7KytyKWVbcisxMF09bi5jaGFyQ29kZUF0KHIpfX0ocyx0KSx6dChzLG8tOCxuLmQoKSksenQocyxvLTQsciksc312YXIgSHQ9InVuZGVmaW5lZCIhPXR5cGVvZiBUZXh0RW5jb2RlciYmbmV3IFRleHRFbmNvZGVyLEp0PSJ1bmRlZmluZWQiIT10eXBlb2YgVGV4dERlY29kZXImJm5ldyBUZXh0RGVjb2Rlcjt0cnl7SnQuZGVjb2RlKHF0LHtzdHJlYW06ITB9KSwxfWNhdGNoKFd0KXt9Y29uc3QgUXQ9c2VsZjtmdW5jdGlvbiBYdChlLHQpe2NvbnN0IG49e30scj1bXSxpPVtdO2Zvcihjb25zdFtvLGFdb2YgT2JqZWN0LmVudHJpZXMoZSkpe2lmKG51bGw9PWEpY29udGludWU7bGV0IGU7ZHQuaW5jbHVkZXModHlwZW9mIGEpfHxyLnB1c2goe1tvXTphfSksZT0ic3RyaW5nIj09dHlwZW9mIGE/YTpzKGEpLGUubGVuZ3RoPjJlMyYmKGkucHVzaCh7W29dOmF9KSxlPWUuc3Vic3RyaW5nKDAsMmUzKSksbltvXT1lfXJldHVybiJzZXNzaW9uIiE9PXQmJihyLmxlbmd0aD4wJiZjb25zb2xlLndhcm4oYEhpZ2hsaWdodCB3YXMgcGFzc2VkIG9uZSBvciBtb3JlICR7dH0gcHJvcGVydGllcyBub3Qgb2YgdHlwZSBzdHJpbmcsIG51bWJlciwgb3IgYm9vbGVhbi5gLHIpLGkubGVuZ3RoPjAmJmNvbnNvbGUud2FybihgSGlnaGxpZ2h0IHdhcyBwYXNzZWQgb25lIG9yIG1vcmUgJHt0fSBwcm9wZXJ0aWVzIGV4Y2VlZGluZyAyMDAwIGNoYXJhY3RlcnMsIHdoaWNoIHdpbGwgYmUgdHJ1bmNhdGVkLmAsaSkpLG59e2xldCBlLG4scixpPTAsbz0hMSxhPTAsYz1uZXcgcHQoITEsIlt3b3JrZXJdIik7Y29uc3QgbD1bXSx1PSgpPT4wIT09YSYmaTw1JiYhIShudWxsPT1yP3ZvaWQgMDpyLmxlbmd0aCksZD0oZSxuKT0+e1F0LnBvc3RNZXNzYWdlKHtyZXNwb25zZTp7dHlwZTp0LkN1c3RvbUV2ZW50LHRhZzplLHBheWxvYWQ6bn19KX0scD1uPT5fX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7aWQ6aSxldmVudHM6byxtZXNzYWdlczphLGVycm9yczp1LHJlc291cmNlc1N0cmluZzpkLHdlYlNvY2tldEV2ZW50c1N0cmluZzpwLGhhc1Nlc3Npb25VbmxvYWRlZDpoLGhpZ2hsaWdodExvZ3M6Zn09bix5PXMoe21lc3NhZ2VzOmF9KTtsZXQgbT17c2Vzc2lvbl9zZWN1cmVfaWQ6cixwYXlsb2FkX2lkOmkudG9TdHJpbmcoKSxldmVudHM6e2V2ZW50czpvfSxtZXNzYWdlczp5LHJlc291cmNlczpkLHdlYl9zb2NrZXRfZXZlbnRzOnAsZXJyb3JzOnUsaXNfYmVhY29uOiExLGhhc19zZXNzaW9uX3VubG9hZGVkOmh9O2YmJihtLmhpZ2hsaWdodF9sb2dzPWYpO2NvbnN0IHY9ZnVuY3Rpb24oZSx0KXtpZih0KXtmb3IodmFyIG49bmV3IGh0KGUubGVuZ3RoKSxyPTA7cjxlLmxlbmd0aDsrK3IpbltyXT1lLmNoYXJDb2RlQXQocik7cmV0dXJuIG59aWYoSHQpcmV0dXJuIEh0LmVuY29kZShlKTt2YXIgaT1lLmxlbmd0aCxzPW5ldyBodChlLmxlbmd0aCsoZS5sZW5ndGg+PjEpKSxvPTAsYT1mdW5jdGlvbihlKXtzW28rK109ZX07Zm9yKHI9MDtyPGk7KytyKXtpZihvKzU+cy5sZW5ndGgpe3ZhciBjPW5ldyBodChvKzgrKGktcjw8MSkpO2Muc2V0KHMpLHM9Y312YXIgbD1lLmNoYXJDb2RlQXQocik7bDwxMjh8fHQ/YShsKTpsPDIwNDg/KGEoMTkyfGw+PjYpLGEoMTI4fDYzJmwpKTpsPjU1Mjk1JiZsPDU3MzQ0PyhhKDI0MHwobD02NTUzNisoMTA0NzU1MiZsKXwxMDIzJmUuY2hhckNvZGVBdCgrK3IpKT4+MTgpLGEoMTI4fGw+PjEyJjYzKSxhKDEyOHxsPj42JjYzKSxhKDEyOHw2MyZsKSk6KGEoMjI0fGw+PjEyKSxhKDEyOHxsPj42JjYzKSxhKDEyOHw2MyZsKSl9cmV0dXJuIFB0KHMsMCxvKX0oSlNPTi5zdHJpbmdpZnkobSkpLF89WXQodiksZz15aWVsZCBmdW5jdGlvbihlKXtyZXR1cm4gX19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0IHQ9eWllbGQgbmV3IFByb21pc2UoKHQ9Pntjb25zdCBuPW5ldyBGaWxlUmVhZGVyO24ub25sb2FkPSgpPT50KG4ucmVzdWx0KSxuLnJlYWRBc0RhdGFVUkwobmV3IEJsb2IoW2VdKSl9KSk7cmV0dXJuIHQuc2xpY2UodC5pbmRleE9mKCIsIikrMSl9KSl9KF8pO2MubG9nKGBQdXNoaW5nIHBheWxvYWQ6ICR7SlNPTi5zdHJpbmdpZnkoe3Nlc3Npb25TZWN1cmVJRDpyLGlkOmksZmlyc3RTSUQ6TWF0aC5taW4oLi4ubS5ldmVudHMuZXZlbnRzLm1hcCgoZT0+bnVsbD09ZT92b2lkIDA6ZS5fc2lkKSkuZmlsdGVyKChlPT4hIWUpKSksZXZlbnRzTGVuZ3RoOm0uZXZlbnRzLmV2ZW50cy5sZW5ndGgsbWVzc2FnZXNMZW5ndGg6YS5sZW5ndGgscmVzb3VyY2VzTGVuZ3RoOmQubGVuZ3RoLHdlYlNvY2tldExlbmd0aDpwLmxlbmd0aCxlcnJvcnNMZW5ndGg6dS5sZW5ndGgsYnVmTGVuZ3RoOnYubGVuZ3RoLGNvbXByZXNzZWRMZW5ndGg6Xy5sZW5ndGgsY29tcHJlc3NlZEJhc2U2NExlbmd0aDpnLmxlbmd0aH0sdm9pZCAwLDIpfWApO2NvbnN0IEU9ZS5QdXNoUGF5bG9hZENvbXByZXNzZWQoe3Nlc3Npb25fc2VjdXJlX2lkOnIscGF5bG9hZF9pZDppLnRvU3RyaW5nKCksZGF0YTpnfSk7bGV0IFQ9UHJvbWlzZS5yZXNvbHZlKCk7bC5sZW5ndGgmJihUPWUucHVzaE1ldHJpY3Moe21ldHJpY3M6bH0pLGwuc3BsaWNlKDApKSx5aWVsZCBQcm9taXNlLmFsbChbRSxUXSksUXQucG9zdE1lc3NhZ2Uoe3Jlc3BvbnNlOnt0eXBlOnQuQXN5bmNFdmVudHMsaWQ6aSxldmVudHNTaXplOnYubGVuZ3RoLGNvbXByZXNzZWRTaXplOmcubGVuZ3RofX0pfSkpLGg9dD0+X19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e3VzZXJPYmplY3Q6aSx1c2VySWRlbnRpZmllcjpvLHNvdXJjZTphfT10O2QoInNlZ21lbnQiPT09YT8iU2VnbWVudCBJZGVudGlmeSI6IklkZW50aWZ5IixzKF9fc3ByZWFkVmFsdWVzKHt1c2VySWRlbnRpZmllcjpvfSxpKSkpLHlpZWxkIGUuaWRlbnRpZnlTZXNzaW9uKHtzZXNzaW9uX3NlY3VyZV9pZDpyLHVzZXJfaWRlbnRpZmllcjpvLHVzZXJfb2JqZWN0Olh0KGksInVzZXIiKX0pO2NvbnN0IGw9InNlZ21lbnQiPT09YT9hOiJkZWZhdWx0IjtjLmxvZyhgSWRlbnRpZnkgKCR7b30sIHNvdXJjZTogJHtsfSkgdy8gb2JqOiAke3MoaSl9IEAgJHtufWApfSkpLGY9dD0+X19hc3luYyh0aGlzLG51bGwsKGZ1bmN0aW9uKigpe2NvbnN0e3Byb3BlcnRpZXNPYmplY3Q6aSxwcm9wZXJ0eVR5cGU6b309dDtsZXQgYTt2b2lkIDAhPT0obnVsbD09aT92b2lkIDA6aS5jbGlja1RleHRDb250ZW50KT8oYT0iQ2xpY2tUZXh0Q29udGVudCIseWllbGQgZS5hZGRTZXNzaW9uUHJvcGVydGllcyh7c2Vzc2lvbl9zZWN1cmVfaWQ6cixwcm9wZXJ0aWVzX29iamVjdDpYdChpLCJzZXNzaW9uIil9KSk6InNlc3Npb24iPT09KG51bGw9PW8/dm9pZCAwOm8udHlwZSk/KGE9IlNlc3Npb24iLHlpZWxkIGUuYWRkU2Vzc2lvblByb3BlcnRpZXMoe3Nlc3Npb25fc2VjdXJlX2lkOnIscHJvcGVydGllc19vYmplY3Q6WHQoaSwic2Vzc2lvbiIpfSkpOiJzZWdtZW50Ij09PShudWxsPT1vP3ZvaWQgMDpvLnNvdXJjZSk/KGE9IlNlZ21lbnQiLGQoIlNlZ21lbnQgVHJhY2siLHMoaSkpKTooYT0iVHJhY2siLGQoYSxzKGkpKSksYy5sb2coYEFkZGluZyAke2F9IFByb3BlcnRpZXMgdG8gc2Vzc2lvbiAoJHtyfSkgdy8gb2JqOiAke0pTT04uc3RyaW5naWZ5KGkpfSBAICR7bn1gKX0pKSx5PWU9Pl9fYXN5bmModGhpcyxudWxsLChmdW5jdGlvbiooKXtsLnB1c2goLi4uZS5tZXRyaWNzLm1hcCgoZT0+KHtuYW1lOmUubmFtZSx2YWx1ZTplLnZhbHVlLHNlc3Npb25fc2VjdXJlX2lkOnIsY2F0ZWdvcnk6ZS5jYXRlZ29yeSxncm91cDplLmdyb3VwLHRpbWVzdGFtcDplLnRpbWVzdGFtcC50b0lTT1N0cmluZygpLHRhZ3M6ZS50YWdzfSkpKSl9KSksbT10PT5fX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7Y29uc3R7dGltZXN0YW1wOm4sdmVyYmF0aW06aSx1c2VyRW1haWw6cyx1c2VyTmFtZTpvfT10O3lpZWxkIGUuYWRkU2Vzc2lvbkZlZWRiYWNrKHtzZXNzaW9uX3NlY3VyZV9pZDpyLHRpbWVzdGFtcDpuLHZlcmJhdGltOmksdXNlcl9lbWFpbDpzLHVzZXJfbmFtZTpvfSl9KSk7UXQub25tZXNzYWdlPWZ1bmN0aW9uKHMpe3JldHVybiBfX2FzeW5jKHRoaXMsbnVsbCwoZnVuY3Rpb24qKCl7aWYocy5kYXRhLm1lc3NhZ2UudHlwZT09PXQuSW5pdGlhbGl6ZSlyZXR1cm4gbj1zLmRhdGEubWVzc2FnZS5iYWNrZW5kLHI9cy5kYXRhLm1lc3NhZ2Uuc2Vzc2lvblNlY3VyZUlELG89cy5kYXRhLm1lc3NhZ2UuZGVidWcsYT1zLmRhdGEubWVzc2FnZS5yZWNvcmRpbmdTdGFydFRpbWUsYy5kZWJ1Zz1vLHZvaWQoZT1mdW5jdGlvbihlLHQ9R2Upe3JldHVybntQdXNoUGF5bG9hZDoobixyKT0+dCgodD0+ZS5yZXF1ZXN0KCRlLG4sX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sciksdCkpKSwiUHVzaFBheWxvYWQiLCJtdXRhdGlvbiIsbiksUHVzaFBheWxvYWRDb21wcmVzc2VkOihuLHIpPT50KCh0PT5lLnJlcXVlc3QoTWUsbixfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxyKSx0KSkpLCJQdXNoUGF5bG9hZENvbXByZXNzZWQiLCJtdXRhdGlvbiIsbiksaWRlbnRpZnlTZXNzaW9uOihuLHIpPT50KCh0PT5lLnJlcXVlc3QoVmUsbixfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxyKSx0KSkpLCJpZGVudGlmeVNlc3Npb24iLCJtdXRhdGlvbiIsbiksYWRkU2Vzc2lvblByb3BlcnRpZXM6KG4scik9PnQoKHQ9PmUucmVxdWVzdChCZSxuLF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LHIpLHQpKSksImFkZFNlc3Npb25Qcm9wZXJ0aWVzIiwibXV0YXRpb24iLG4pLHB1c2hNZXRyaWNzOihuLHIpPT50KCh0PT5lLnJlcXVlc3QoamUsbixfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxyKSx0KSkpLCJwdXNoTWV0cmljcyIsIm11dGF0aW9uIixuKSxhZGRTZXNzaW9uRmVlZGJhY2s6KG4scik9PnQoKHQ9PmUucmVxdWVzdChVZSxuLF9fc3ByZWFkVmFsdWVzKF9fc3ByZWFkVmFsdWVzKHt9LHIpLHQpKSksImFkZFNlc3Npb25GZWVkYmFjayIsIm11dGF0aW9uIixuKSxpbml0aWFsaXplU2Vzc2lvbjoobixyKT0+dCgodD0+ZS5yZXF1ZXN0KHFlLG4sX19zcHJlYWRWYWx1ZXMoX19zcHJlYWRWYWx1ZXMoe30sciksdCkpKSwiaW5pdGlhbGl6ZVNlc3Npb24iLCJtdXRhdGlvbiIsbiksSWdub3JlOihuLHIpPT50KCh0PT5lLnJlcXVlc3QoS2UsbixfX3NwcmVhZFZhbHVlcyhfX3NwcmVhZFZhbHVlcyh7fSxyKSx0KSkpLCJJZ25vcmUiLCJxdWVyeSIsbil9fShuZXcgcnQobix7aGVhZGVyczp7fX0pLHV0KHIpKSk7aWYodSgpKXRyeXtzLmRhdGEubWVzc2FnZS50eXBlPT09dC5Bc3luY0V2ZW50cz95aWVsZCBwKHMuZGF0YS5tZXNzYWdlKTpzLmRhdGEubWVzc2FnZS50eXBlPT09dC5JZGVudGlmeT95aWVsZCBoKHMuZGF0YS5tZXNzYWdlKTpzLmRhdGEubWVzc2FnZS50eXBlPT09dC5Qcm9wZXJ0aWVzP3lpZWxkIGYocy5kYXRhLm1lc3NhZ2UpOnMuZGF0YS5tZXNzYWdlLnR5cGU9PT10Lk1ldHJpY3M/eWllbGQgeShzLmRhdGEubWVzc2FnZSk6cy5kYXRhLm1lc3NhZ2UudHlwZT09PXQuRmVlZGJhY2smJih5aWVsZCBtKHMuZGF0YS5tZXNzYWdlKSksaT0wfWNhdGNoKGwpe28mJmNvbnNvbGUuZXJyb3IobCksaSs9MX19KSl9fX0oKTsK",Fd=typeof window!="undefined"&&window.Blob&&new Blob([(i=>Uint8Array.from(atob(i),r=>r.charCodeAt(0)))(Dd)],{type:"text/javascript;charset=utf-8"});function rC(i){let r;try{if(r=Fd&&(window.URL||window.webkitURL).createObjectURL(Fd),!r)throw"";const a=new Worker(r,{name:i==null?void 0:i.name});return a.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(r)}),a}catch(a){return new Worker("data:text/javascript;base64,"+Dd,{name:i==null?void 0:i.name})}finally{r&&(window.URL||window.webkitURL).revokeObjectURL(r)}}var Yd=(i=>(i.BillingQuotaExceeded="BillingQuotaExceeded",i))(Yd||{});const iC=[Yd.BillingQuotaExceeded.toString()],oC=i=>{const r=(a,c,u,p,m=0)=>G(this,null,function*(){try{return yield a()}catch(y){if(y instanceof Hn&&!(f=>{var T;return((T=f.response.errors)==null?void 0:T.find(v=>iC.includes(v.message)))===void 0})(y))throw y;if(m<10)return yield new Promise(f=>setTimeout(f,1e3+500*Math.pow(2,m))),yield r(a,c,u,p,m+1);throw console.error(`highlight.io: [${i||i}] data request failed after ${m} retries`),y}});return r};var Ft=(i=>(i[i.Initialize=0]="Initialize",i[i.AsyncEvents=1]="AsyncEvents",i[i.Identify=2]="Identify",i[i.Properties=3]="Properties",i[i.Metrics=4]="Metrics",i[i.Feedback=5]="Feedback",i[i.CustomEvent=6]="CustomEvent",i))(Ft||{});class sC{constructor(r,a){R(this,"debug"),R(this,"name"),this.debug=r,this.name=a}log(...r){if(this.debug){let a=`[${Date.now()}]`;this.name&&(a+=` - ${this.name}`),console.log.apply(console,[a,...r])}}}const aC=()=>G(this,null,function*(){const i=[];for(let r=0;r<30;r++)i.push(yield new Promise(a=>requestAnimationFrame(c=>requestAnimationFrame(u=>a(u-c)))));return i.reduce((r,a)=>r+a,0)/i.length}),Hd="iframe parent ready",Kd="iframe ok",Pr=(i,r)=>{console.warn(`Highlight Warning: (${i}): `,{output:r})},Jd="app.highlight.run";class Sa{constructor(r,a){var c,u,p,m,y,f;R(this,"options"),R(this,"isRunningOnHighlight"),R(this,"organizationID"),R(this,"graphqlSDK"),R(this,"events"),R(this,"sessionData"),R(this,"ready"),R(this,"manualStopped"),R(this,"state"),R(this,"logger"),R(this,"enableSegmentIntegration"),R(this,"privacySetting"),R(this,"enableCanvasRecording"),R(this,"enablePerformanceRecording"),R(this,"samplingStrategy"),R(this,"inlineImages"),R(this,"inlineStylesheet"),R(this,"debugOptions"),R(this,"listeners"),R(this,"firstloadVersion"),R(this,"environment"),R(this,"sessionShortcut"),R(this,"appVersion"),R(this,"serviceName"),R(this,"_worker"),R(this,"_optionsInternal"),R(this,"_backendUrl"),R(this,"_recordingStartTime"),R(this,"_isOnLocalHost"),R(this,"_onToggleFeedbackFormVisibility"),R(this,"_firstLoadListeners"),R(this,"_isCrossOriginIframe"),R(this,"_eventBytesSinceSnapshot"),R(this,"_lastSnapshotTime"),R(this,"_lastVisibilityChangeTime"),R(this,"pushPayloadTimerId"),R(this,"hasSessionUnloaded"),R(this,"hasPushedData"),R(this,"reloaded"),R(this,"_hasPreviouslyInitialized"),R(this,"_payloadId"),R(this,"_recordStop"),r.sessionSecureID||(r.sessionSecureID=to()),this.options=r,typeof((c=this.options)==null?void 0:c.debug)=="boolean"?this.debugOptions=this.options.debug?{clientInteractions:!0}:{}:this.debugOptions=(p=(u=this.options)==null?void 0:u.debug)!=null?p:{},this.logger=new sC(this.debugOptions.clientInteractions),r.storageMode&&(this.logger.log(`initializing in ${r.storageMode} session mode`),f=r.storageMode,Ds=f),this._worker=new rC,this._worker.onmessage=v=>{var I,Z;((I=v.data.response)==null?void 0:I.type)===Ft.AsyncEvents?(this._eventBytesSinceSnapshot+=v.data.response.eventsSize,this.logger.log(`Web worker sent payloadID ${v.data.response.id} size ${v.data.response.eventsSize} bytes, compression ratio ${v.data.response.eventsSize/v.data.response.compressedSize}.
                Total since snapshot: ${(this._eventBytesSinceSnapshot/1e6).toFixed(1)}MB`)):((Z=v.data.response)==null?void 0:Z.type)===Ft.CustomEvent&&this.addCustomEvent(v.data.response.tag,v.data.response.payload)};let T=xu();if(this.reloaded=!1,!((m=this.sessionData)!=null&&m.sessionSecureID)&&(T==null?void 0:T.sessionSecureID))this.sessionData=T,this.options.sessionSecureID=T.sessionSecureID,this.reloaded=!0,this.logger.log(`Tab reloaded, continuing previous session: ${this.sessionData.sessionSecureID}`);else{for(const v of Object.values(Ue))Ys(v);this.sessionData={sessionSecureID:this.options.sessionSecureID,projectID:0,sessionStartTime:Date.now()}}this._hasPreviouslyInitialized=!1,this._firstLoadListeners=a||new Dt(this.options);try{window.parent.document&&(this._isCrossOriginIframe=!1)}catch(v){this._isCrossOriginIframe=(y=this.options.recordCrossOriginIframe)==null||y}this._initMembers(this.options)}static create(r){return new Sa(r)}_reset(r){return G(this,arguments,function*({forceNew:a}){let c,u;if(this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),!a)try{c=st(Ue.USER_IDENTIFIER);const p=st(Ue.USER_OBJECT);p&&(u=JSON.parse(p))}catch(p){}for(const p of Object.values(Ue))Ys(p);this.sessionData.sessionSecureID=to(),this.sessionData.sessionStartTime=Date.now(),this.options.sessionSecureID=this.sessionData.sessionSecureID,this._payloadId=0,this.stopRecording(),this._firstLoadListeners=new Dt(this.options),yield this.initialize(),c&&u&&this.identify(c,u)})}_initMembers(r){var a,c,u,p,m,y,f,T,v,I,Z,C;this.sessionShortcut=!1,this._recordingStartTime=0,this._isOnLocalHost=window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"||window.location.hostname==="",this.ready=!1,this.state="NotRecording",this.manualStopped=!1,this.enableSegmentIntegration=!!r.enableSegmentIntegration,this.privacySetting=(a=r.privacySetting)!=null?a:"default",this.enableCanvasRecording=(c=r.enableCanvasRecording)!=null&&c,this.enablePerformanceRecording=(u=r.enablePerformanceRecording)==null||u,this.inlineImages=(p=r.inlineImages)!=null?p:this._isOnLocalHost,this.inlineStylesheet=(m=r.inlineStylesheet)==null||m,this.samplingStrategy=S({canvasFactor:.5,canvasMaxSnapshotDimension:360,canvasClearWebGLBuffer:!0,dataUrlOptions:NN()},(y=r.samplingStrategy)!=null?y:{canvas:2}),this._backendUrl=(f=r==null?void 0:r.backendUrl)!=null?f:"https://pub.highlight.io",this._backendUrl[0]==="/"&&(this._backendUrl=new URL(this._backendUrl,document.baseURI).href);const k=new vZ(`${this._backendUrl}`,{headers:{}});this.graphqlSDK=function(V,X=AZ){return{PushPayload:(O,P)=>X(Y=>V.request(fd,O,S(S({},P),Y)),"PushPayload","mutation",O),PushPayloadCompressed:(O,P)=>X(Y=>V.request(LZ,O,S(S({},P),Y)),"PushPayloadCompressed","mutation",O),identifySession:(O,P)=>X(Y=>V.request(GZ,O,S(S({},P),Y)),"identifySession","mutation",O),addSessionProperties:(O,P)=>X(Y=>V.request(VZ,O,S(S({},P),Y)),"addSessionProperties","mutation",O),pushMetrics:(O,P)=>X(Y=>V.request(XZ,O,S(S({},P),Y)),"pushMetrics","mutation",O),addSessionFeedback:(O,P)=>X(Y=>V.request(PZ,O,S(S({},P),Y)),"addSessionFeedback","mutation",O),initializeSession:(O,P)=>X(Y=>V.request(WZ,O,S(S({},P),Y)),"initializeSession","mutation",O),Ignore:(O,P)=>X(Y=>V.request(kZ,O,S(S({},P),Y)),"Ignore","query",O)}}(k,oC(((T=this.sessionData)==null?void 0:T.sessionSecureID)||((v=this.options)==null?void 0:v.sessionSecureID))),this.environment=(I=r.environment)!=null?I:"production",this.appVersion=r.appVersion,this.serviceName=(Z=r.serviceName)!=null?Z:"",typeof r.organizationID=="string"?this.organizationID=r.organizationID:this.organizationID=r.organizationID.toString(),this.isRunningOnHighlight=this.organizationID==="1"||this.organizationID==="1jdkoe52",this.firstloadVersion=r.firstloadVersion||"unknown",this.sessionShortcut=r.sessionShortcut||!1,this._onToggleFeedbackFormVisibility=()=>{};const L=r,A=N(L,["firstloadVersion"]);this._optionsInternal=A,this.listeners=[],this.events=[],this.hasSessionUnloaded=!1,this.hasPushedData=!1,window.Intercom&&window.Intercom("onShow",()=>{window.Intercom("update",{highlightSessionURL:this.getCurrentSessionURLWithTimestamp()}),this.addProperties({event:"Intercom onShow"})}),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime(),this._lastVisibilityChangeTime=new Date().getTime(),this._payloadId=(C=Number(st(Ue.PAYLOAD_ID)))!=null?C:1,vt(Ue.PAYLOAD_ID,this._payloadId.toString())}identify(r,a={},c){r&&r!==""?(this.sessionData.userIdentifier=r.toString(),this.sessionData.userObject=a,vt(Ue.USER_IDENTIFIER,r.toString()),vt(Ue.USER_OBJECT,JSON.stringify(a)),this._worker.postMessage({message:{type:Ft.Identify,userIdentifier:r,userObject:a,source:c}})):console.warn("Highlight's identify() call was passed an empty identifier.",{user_identifier:r,user_object:a})}pushCustomError(r,a){return this.consumeCustomError(new Error(r),void 0,a)}consumeCustomError(r,a,c){let u={};if(c)try{u=S(S({},JSON.parse(c)),u)}catch(p){}return this.consumeError(r,{message:a,payload:u})}consumeError(r,{message:a,payload:c,source:u,type:p}){var m,y,f,T;r.cause&&(c=_(S({},c),{"exception.cause":r.cause}));let v=a?a+":"+r.message:r.message;p==="React.ErrorBoundary"&&(v="ErrorBoundary: "+v);const I=Zr.parse(r);this._firstLoadListeners.errors.push({event:v,type:p!=null?p:"custom",url:window.location.href,source:u!=null?u:"",lineNumber:(m=I[0])!=null&&m.lineNumber?(y=I[0])==null?void 0:y.lineNumber:0,columnNumber:(f=I[0])!=null&&f.columnNumber?(T=I[0])==null?void 0:T.columnNumber:0,stackTrace:I,timestamp:new Date().toISOString(),payload:JSON.stringify(c)})}addProperties(r={},a){const c=S({},r);Object.entries(c).forEach(([u,p])=>{try{structuredClone(p)}catch(m){delete c[u]}}),this._worker.postMessage({message:{type:Ft.Properties,propertiesObject:c,propertyType:a}})}initialize(r){return G(this,null,function*(){var a,c,u,p,m,y;if(this.logger.log("Initializing...",r,this.sessionData,this.options),(navigator==null?void 0:navigator.webdriver)&&!window.Cypress||((a=navigator==null?void 0:navigator.userAgent)==null?void 0:a.includes("Googlebot"))||((c=navigator==null?void 0:navigator.userAgent)==null?void 0:c.includes("AdsBot")))(u=this._firstLoadListeners)==null||u.stopListening();else try{if(r!=null&&r.forceNew)return void(yield this._reset(r));const f=st(Ue.RECORDING_START_TIME);f?this._recordingStartTime=parseInt(f,10):(this._recordingStartTime=new Date().getTime(),vt(Ue.RECORDING_START_TIME,this._recordingStartTime.toString()));let T,v=st("highlightClientID");v||(v=to(),vt("highlightClientID",v)),Hs(null),T=!this.options.disableSessionRecording&&this.options.disableNetworkRecording===void 0&&typeof this.options.networkRecording!="boolean"&&(((p=this.options.networkRecording)==null?void 0:p.recordHeadersAndBody)||!1);let I=[];if(typeof this.options.networkRecording=="object"&&((m=this.options.networkRecording.destinationDomains)!=null&&m.length)&&(I=this.options.networkRecording.destinationDomains),this._isCrossOriginIframe)yield this._setupCrossOriginIframe();else{const A=yield this.graphqlSDK.initializeSession({organization_verbose_id:this.organizationID,enable_strict_privacy:this.privacySetting==="strict",privacy_setting:this.privacySetting,enable_recording_network_contents:T,clientVersion:this.firstloadVersion,firstloadVersion:this.firstloadVersion,clientConfig:JSON.stringify(this._optionsInternal),environment:this.environment,id:v,appVersion:this.appVersion,serviceName:this.serviceName,session_secure_id:this.sessionData.sessionSecureID,client_id:v,network_recording_domains:I,disable_session_recording:this.options.disableSessionRecording});if(A.initializeSession.secure_id!==this.sessionData.sessionSecureID&&this.logger.log(`Unexpected secure id returned by initializeSession: ${A.initializeSession.secure_id}, expected ${this.sessionData.sessionSecureID}`),this.sessionData.sessionSecureID=A.initializeSession.secure_id,this.sessionData.projectID=parseInt(((y=A==null?void 0:A.initializeSession)==null?void 0:y.project_id)||"0"),!this.sessionData.projectID||!this.sessionData.sessionSecureID)return void console.error("Failed to initialize Highlight; an error occurred on our end.",this.sessionData)}if(this.logger.log(`Loaded Highlight
Remote: ${this._backendUrl}
Project ID: ${this.sessionData.projectID}
SessionSecureID: ${this.sessionData.sessionSecureID}`),this.options.sessionSecureID=this.sessionData.sessionSecureID,this._worker.postMessage({message:{type:Ft.Initialize,sessionSecureID:this.sessionData.sessionSecureID,backend:this._backendUrl,debug:!!this.debugOptions.clientInteractions,recordingStartTime:this._recordingStartTime}}),Uu(this.sessionData.sessionSecureID),this.sessionData.userIdentifier&&this.identify(this.sessionData.userIdentifier,this.sessionData.userObject),this._firstLoadListeners.isListening()?this._firstLoadListeners.hasNetworkRecording||Dt.setupNetworkListener(this._firstLoadListeners,this.options):this._firstLoadListeners.startListening(),this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this._isCrossOriginIframe||(this.pushPayloadTimerId=setTimeout(()=>{this._save()},1e3)),this.options.disableSessionRecording)return this.logger.log("Highlight is NOT RECORDING a session replay per H.init setting."),this.ready=!0,this.state="Recording",void(this.manualStopped=!1);const{getDeviceDetails:Z}=(()=>{if(!("performance"in window)||!("memory"in performance))return{getDeviceDetails:void 0,getCurrentDeviceDetails:void 0};const A=window.performance;return{getDeviceDetails:()=>({deviceMemory:tC(navigator.deviceMemory||0)}),getCurrentDeviceDetails:()=>({jsHeapSizeLimit:ya(A.memory.jsHeapSizeLimit),totalJSHeapSize:ya(A.memory.totalJSHeapSize),usedJSHeapSize:ya(A.memory.usedJSHeapSize)})}})();Z&&this.recordMetric([{name:un.DeviceMemory,value:Z().deviceMemory,category:dt.Device,group:window.location.href}]);const C=A=>{this.events.push(A)};C.bind(this),this._recordStop&&(this._recordStop(),this._recordStop=void 0);const[k,L]=(A=>{switch(A){case"strict":case"default":return[!0,void 0];case"none":return[!1,{password:!0}]}})(this.privacySetting);this._recordStop=Ut({ignoreClass:"highlight-ignore",blockClass:"highlight-block",emit:C,recordCrossOriginIframes:this.options.recordCrossOriginIframe,privacySetting:this.privacySetting,maskAllInputs:k,maskInputOptions:L,recordCanvas:this.enableCanvasRecording,sampling:{canvas:{fps:this.samplingStrategy.canvas,fpsManual:this.samplingStrategy.canvasManualSnapshot,resizeFactor:this.samplingStrategy.canvasFactor,clearWebGLBuffer:this.samplingStrategy.canvasClearWebGLBuffer,initialSnapshotDelay:this.samplingStrategy.canvasInitialSnapshotDelay,dataURLOptions:this.samplingStrategy.dataUrlOptions,maxSnapshotDimension:this.samplingStrategy.canvasMaxSnapshotDimension}},keepIframeSrcFn:A=>!this.options.recordCrossOriginIframe,inlineImages:this.inlineImages,inlineStylesheet:this.inlineStylesheet,plugins:[IN()],logger:typeof this.options.debug=="boolean"&&this.options.debug||typeof this.options.debug=="object"&&this.options.debug.domRecording?{debug:this.logger.log,warn:Pr}:void 0}),this._recordStop||this.options.recordCrossOriginIframe&&this._setupCrossOriginIframeParent(),document.referrer&&(window&&document.referrer.includes(window.location.origin)||(this.addCustomEvent("Referrer",document.referrer),this.addProperties({referrer:document.referrer},{type:"session"}))),this._setupWindowListeners(),this.ready=!0,this.state="Recording",this.manualStopped=!1}catch(f){this._isOnLocalHost&&(console.error(f),Pr("initializeSession",f))}})}_visibilityHandler(r){return G(this,null,function*(){this.manualStopped?this.logger.log("Ignoring visibility event due to manual stop."):new Date().getTime()-this._lastVisibilityChangeTime<100||(this._lastVisibilityChangeTime=new Date().getTime(),this.logger.log(`Detected window ${r?"hidden":"visible"}.`),r?(this.addCustomEvent("TabHidden",!0),this.options.disableBackgroundRecording&&this.stopRecording()):(this.options.disableBackgroundRecording&&(yield this.initialize()),this.addCustomEvent("TabHidden",!1)))})}_setupCrossOriginIframe(){return G(this,null,function*(){this.logger.log("highlight in cross-origin iframe is waiting "),yield new Promise(r=>{const a=c=>{if(c.data.highlight===Hd){const u=c.data;this.logger.log("highlight got window message ",u),this.sessionData.projectID=u.projectID,this.sessionData.sessionSecureID=u.sessionSecureID,window.parent.postMessage({highlight:Kd},"*"),window.removeEventListener("message",a),r()}};window.addEventListener("message",a)})})}_setupCrossOriginIframeParent(){this.logger.log("highlight setting up cross origin iframe parent notification"),setInterval(()=>{window.document.querySelectorAll("iframe").forEach(r=>{var a;(a=r.contentWindow)==null||a.postMessage({highlight:Hd,projectID:this.sessionData.projectID,sessionSecureID:this.sessionData.sessionSecureID},"*")})},1e3),window.addEventListener("message",r=>{r.data.highlight===Kd&&this.logger.log("highlight got response from initialized iframe")})}_setupWindowListeners(){var r;try{const c=this;this.enableSegmentIntegration&&this.listeners.push(MZ(p=>{if(p.type==="track"){const m={};m["segment-event"]=p.event,c.addProperties(m,{type:"track",source:"segment"})}else if(p.type==="identify"){const m=p.userId.replace(/^"(.*)"$/,"$1");c.identify(m,p.traits,"segment")}})),this.listeners.push(KN(p=>{this.reloaded?(this.addCustomEvent("Reload",p),this.reloaded=!1,c.addProperties({reload:!0},{type:"session"})):this.addCustomEvent("Navigate",p),c.addProperties({"visited-url":p},{type:"session"})})),this.listeners.push((p=>{let m;const y=()=>{clearTimeout(m),m=setTimeout(()=>{p({height:window.innerHeight,width:window.innerWidth,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,pixelDepth:window.screen.pixelDepth,orientation:window.screen.orientation.angle})},500)};return window.addEventListener("resize",y),y(),()=>window.removeEventListener("resize",y)})(p=>{this.addCustomEvent("Viewport",p),this.submitViewportMetrics(p)})),this.listeners.push((p=>{const m=y=>{if(y.target){const f=yd(y.target);p(f,y)}};return window.addEventListener("click",m),()=>window.removeEventListener("click",m)})((p,m)=>{p&&this.addCustomEvent("Click",p);let y=null,f=null;if(m&&m.target){const T=m.target;y=Sd(T),f=T.textContent,f&&f.length>2e3&&(f=f.substring(0,2e3))}c.addProperties({clickTextContent:f,clickSelector:y},{type:"session"})})),this.listeners.push((p=>{const m=y=>{if(y.target){const f=yd(y.target);p(f)}};return window.addEventListener("focusin",m),()=>window.removeEventListener("focusin",m)})(p=>{p&&this.addCustomEvent("Focus",p)})),this.listeners.push(eC(p=>{const{name:m,value:y}=p;this.recordMetric([{name:m,value:y,group:window.location.href,category:dt.WebVital}])})),this.sessionShortcut&&DZ(this.sessionShortcut,()=>{window.open(this.getCurrentSessionURLWithTimestamp(),"_blank")}),this.enablePerformanceRecording&&(this.listeners.push(((p,m)=>{let y=0,f=0;const T=()=>{const k=(new Date().getTime()-m)/1e3,L=Ud.memory.jsHeapSizeLimit||0,A=Ud.memory.usedJSHeapSize||0;p({jsHeapSizeLimit:L,usedJSHeapSize:A,relativeTimestamp:k,fps:y})};let v;T(),v=setInterval(()=>{T()},5e3);let I=0,Z=Date.now();const C=function(){var k=Date.now();I++,k>1e3+Z&&(y=Math.round(1e3*I/(k-Z)),I=0,Z=k),f=requestAnimationFrame(C)};return C(),()=>{clearInterval(v),cancelAnimationFrame(f)}})(p=>{this.addCustomEvent("Performance",cn(p)),this.recordMetric(Object.entries(p).map(([m,y])=>y?{name:m,value:y,category:dt.Performance,group:window.location.href}:void 0).filter(m=>m))},this._recordingStartTime)),this.listeners.push(((p,m)=>{let y={},f=16.666666666666668;aC().then(C=>f=C);const T=C=>{var k;y!=null&&y.event||(y={event:C,location:window.location.href,timerStart:(k=window.performance)==null?void 0:k.now()},window.requestAnimationFrame(v))},v=()=>{if(!(y!=null&&y.timerStart))return;const C=window.performance.now()-y.timerStart-f;I(C),y={}},I=C=>{const k=(new Date().getTime()-m)/1e3;p({relativeTimestamp:k,jankAmount:C,querySelector:Z(),newLocation:window.location.href!=y.location?window.location.href:void 0})},Z=()=>{var C;return(C=y==null?void 0:y.event)!=null&&C.target?Sd(y.event.target):""};return window.addEventListener("click",T,!0),window.addEventListener("keydown",T,!0),()=>{window.removeEventListener("keydown",T,!0),window.removeEventListener("click",T,!0)}})(p=>{this.addCustomEvent("Jank",cn(p)),this.recordMetric([{name:"Jank",value:p.jankAmount,category:dt.WebVital,group:p.querySelector}])},this._recordingStartTime))),this._hasPreviouslyInitialized||((r=window.electron)!=null&&r.ipcRenderer?(window.electron.ipcRenderer.on("highlight.run",({visible:p})=>{this._visibilityHandler(!p)}),this.logger.log("Set up Electron highlight.run events.")):((p=>{let m,y;if(document.hidden!==void 0?(m="hidden",y="visibilitychange"):document.msHidden!==void 0?(m="msHidden",y="msvisibilitychange"):document.webkitHidden!==void 0&&(m="webkitHidden",y="webkitvisibilitychange"),y===void 0)return()=>{};if(m===void 0)return()=>{};const f=m,T=()=>{const v=document[f];p(!!v)};document.addEventListener(y,T)})(p=>this._visibilityHandler(p)),this.logger.log("Set up document visibility listener.")),this._hasPreviouslyInitialized=!0);const u=()=>{this.hasSessionUnloaded=!0,this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0)};window.addEventListener("beforeunload",u),this.listeners.push(()=>window.removeEventListener("beforeunload",u))}catch(c){this._isOnLocalHost&&(console.error(c),Pr("initializeSession _setupWindowListeners",c))}const a=()=>{this.addCustomEvent("Page Unload",""),Hs(this.sessionData)};if(window.addEventListener("beforeunload",a),this.listeners.push(()=>window.removeEventListener("beforeunload",a)),navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/iPhone/i)){const c=()=>{this.addCustomEvent("Page Unload",""),Hs(this.sessionData)};window.addEventListener("pagehide",c),this.listeners.push(()=>window.removeEventListener("beforeunload",c))}}submitViewportMetrics({height:r,width:a,availHeight:c,availWidth:u}){this.recordMetric([{name:un.ViewportHeight,value:r,category:dt.Device,group:window.location.href},{name:un.ViewportWidth,value:a,category:dt.Device,group:window.location.href},{name:un.ScreenHeight,value:c,category:dt.Device,group:window.location.href},{name:un.ScreenWidth,value:u,category:dt.Device,group:window.location.href},{name:un.ViewportArea,value:r*a,category:dt.Device,group:window.location.href}])}recordMetric(r){this._worker.postMessage({message:{type:Ft.Metrics,metrics:r.map(a=>_(S({},a),{tags:a.tags||[],group:a.group||window.location.href,category:a.category||dt.Frontend,timestamp:new Date}))}})}stopRecording(r){this.manualStopped=!!r,this.manualStopped&&this.addCustomEvent("Stop","H.stop() was called which stops Highlight from recording."),this.state="NotRecording",r&&this._recordStop&&(this._recordStop(),this._recordStop=void 0),this.listeners.forEach(a=>a()),this.listeners=[]}getCurrentSessionTimestamp(){return this._recordingStartTime}getCurrentSessionURLWithTimestamp(){const r=new Date().getTime(),{projectID:a,sessionSecureID:c}=this.sessionData,u=(r-this._recordingStartTime)/1e3;return`https://${Jd}/${a}/sessions/${c}?ts=${u}`}getCurrentSessionURL(){const r=this.sessionData.projectID,a=this.sessionData.sessionSecureID;return r&&a?`https://${Jd}/${r}/sessions/${a}`:null}snapshot(r){return G(this,null,function*(){yield Ut.snapshotCanvas(r)})}addSessionFeedback({timestamp:r,verbatim:a,user_email:c,user_name:u}){var p;this._worker.postMessage({message:{type:Ft.Feedback,verbatim:a,timestamp:r,userName:u||this.sessionData.userIdentifier,userEmail:c||((p=this.sessionData.userObject)==null?void 0:p.name)}})}_save(){return G(this,null,function*(){var r;try{let a;this.state==="Recording"&&this.listeners&&this.sessionData.sessionStartTime&&Date.now()-this.sessionData.sessionStartTime>144e5&&(this.logger.log("Resetting session",{start:this.sessionData.sessionStartTime}),yield this._reset({})),((r=this.options)==null?void 0:r.sendMode)==="local"&&(a=c=>G(this,null,function*(){let u=new Blob([JSON.stringify({query:cd(fd),variables:c})],{type:"application/json"});return yield window.fetch(`${this._backendUrl}`,{method:"POST",body:u}),0})),yield this._sendPayload({sendFn:a}),this.hasPushedData=!0,this.sessionData.lastPushTime=Date.now()}catch(a){this._isOnLocalHost&&(console.error(a),Pr("_save",a))}this.state==="Recording"&&(this.pushPayloadTimerId&&(clearTimeout(this.pushPayloadTimerId),this.pushPayloadTimerId=void 0),this.pushPayloadTimerId=setTimeout(()=>{this._save()},2e3))})}addCustomEvent(r,a){if(this.state==="NotRecording"){let c;const u=()=>{clearInterval(c),this.state==="Recording"&&this.events.length>0?Zu(r,a):c=setTimeout(u,500)};c=setTimeout(u,500)}else this.state==="Recording"&&(this.events.length>0||this.hasPushedData)&&Zu(r,a)}_sendPayload(r){return G(this,arguments,function*({sendFn:a}){const c=Dt.getRecordedNetworkResources(this._firstLoadListeners,this._recordingStartTime),u=Dt.getRecordedWebSocketEvents(this._firstLoadListeners),p=[...this.events],m=[...this._firstLoadListeners.messages],y=[...this._firstLoadListeners.errors],{bytes:f,time:T}=this.enableCanvasRecording?Mu.canvas:Mu.normal;this._eventBytesSinceSnapshot>=f&&new Date().getTime()-this._lastSnapshotTime>=T&&this.takeFullSnapshot(),this.logger.log(`Sending: ${p.length} events, ${m.length} messages, ${c.length} network resources, ${y.length} errors 
To: ${this._backendUrl}
Org: ${this.organizationID}
SessionSecureID: ${this.sessionData.sessionSecureID}`);const v=st(Xr)||"";a?yield a({session_secure_id:this.sessionData.sessionSecureID,payload_id:this._payloadId.toString(),events:{events:p},messages:cn({messages:m}),resources:JSON.stringify({resources:c}),web_socket_events:JSON.stringify({webSocketEvents:u}),errors:y,is_beacon:!1,has_session_unloaded:this.hasSessionUnloaded}):this._worker.postMessage({message:{type:Ft.AsyncEvents,id:this._payloadId,events:p,messages:m,errors:y,resourcesString:JSON.stringify({resources:c}),webSocketEventsString:JSON.stringify({webSocketEvents:u}),hasSessionUnloaded:this.hasSessionUnloaded,highlightLogs:v}}),this._payloadId++,vt(Ue.PAYLOAD_ID,this._payloadId.toString()),Dt.clearRecordedNetworkResources(this._firstLoadListeners),this.events=this.events.slice(p.length),this._firstLoadListeners.messages=this._firstLoadListeners.messages.slice(m.length),this._firstLoadListeners.errors=this._firstLoadListeners.errors.slice(y.length),nC(v)})}takeFullSnapshot(){Ut.takeFullSnapshot(),this._eventBytesSinceSnapshot=0,this._lastSnapshotTime=new Date().getTime()}}const lC=Object.freeze(Object.defineProperty({__proto__:null,shutdown:()=>G(this,null,function*(){})},Symbol.toStringTag,{value:"Module"}));n.FirstLoadListeners=Dt,n.GenerateSecureID=to,n.Highlight=Sa,n.HighlightWarning=Pr,n.MetricCategory=dt,n.getPreviousSessionData=xu,Object.defineProperty(n,Symbol.toStringTag,{value:"Module"})})})(gs,gs.exports);var zR=gs.exports;const jR=Ne({__proto__:null},[zR]);Se.H=ke,Se.HighlightSegmentMiddleware=Rp,Se.configureElectronHighlight=Np,Object.defineProperty(Se,Symbol.toStringTag,{value:"Module"})});
//# sourceMappingURL=index.umd.cjs.map
